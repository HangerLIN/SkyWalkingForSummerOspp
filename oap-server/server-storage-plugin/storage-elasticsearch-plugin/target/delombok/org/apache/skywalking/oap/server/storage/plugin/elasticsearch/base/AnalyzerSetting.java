// Generated by delombok at Thu Apr 18 20:40:31 CST 2024
/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
package org.apache.skywalking.oap.server.storage.plugin.elasticsearch.base;

import com.google.gson.Gson;
import com.google.gson.annotations.SerializedName;
import java.util.HashMap;
import java.util.Map;
import java.util.Objects;
import org.apache.skywalking.oap.server.core.storage.StorageException;
import org.apache.skywalking.oap.server.core.storage.annotation.ElasticSearch;
import org.apache.skywalking.oap.server.storage.plugin.elasticsearch.StorageModuleElasticsearchConfig;

public class AnalyzerSetting {
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(AnalyzerSetting.class);
    /**
     * A built-in or customised tokenizer.
     */
    private Map<String, Object> tokenizer = new HashMap<>();
    /**
     * An optional array of built-in or customised character filters.
     */
    @SerializedName("char_filter")
    private Map<String, Object> charFilter = new HashMap<>();
    /**
     * An optional array of built-in or customised token filters.
     */
    private Map<String, Object> filter = new HashMap<>();
    /**
     * The custom analyzers.
     */
    private Map<String, Object> analyzer = new HashMap<>();

    public void combine(AnalyzerSetting analyzerSetting) {
        this.analyzer.putAll(analyzerSetting.getAnalyzer());
        this.tokenizer.putAll(analyzerSetting.tokenizer);
        this.filter.putAll(analyzerSetting.filter);
        this.charFilter.putAll(analyzerSetting.charFilter);
    }

    @Override
    public boolean equals(final Object o) {
        if (this == o) return true;
        if (!(o instanceof AnalyzerSetting)) return false;
        final AnalyzerSetting that = (AnalyzerSetting) o;
        return getTokenizer().equals(that.getTokenizer()) && getCharFilter().equals(that.getCharFilter()) && getFilter().equals(that.getFilter()) && getAnalyzer().equals(that.getAnalyzer());
    }

    @Override
    public int hashCode() {
        return Objects.hash(getTokenizer(), getCharFilter(), getFilter(), getAnalyzer());
    }


    public enum Generator {
        OAP_ANALYZER_SETTING_GENERATOR(ElasticSearch.MatchQuery.AnalyzerType.OAP_ANALYZER, config -> new Gson().fromJson(config.getOapAnalyzer(), AnalyzerSetting.class)), OAP_LOG_ANALYZER_SETTING_GENERATOR(ElasticSearch.MatchQuery.AnalyzerType.OAP_LOG_ANALYZER, config -> new Gson().fromJson(config.getOapLogAnalyzer(), AnalyzerSetting.class));
        private final ElasticSearch.MatchQuery.AnalyzerType type;
        private final GenerateAnalyzerSettingFunc func;

        Generator(final ElasticSearch.MatchQuery.AnalyzerType type, final GenerateAnalyzerSettingFunc func) {
            this.type = type;
            this.func = func;
        }

        public GenerateAnalyzerSettingFunc getGenerateFunc() {
            return this.func;
        }

        public static Generator getGenerator(ElasticSearch.MatchQuery.AnalyzerType type) throws StorageException {
            for (final Generator value : Generator.values()) {
                if (value.type == type) {
                    return value;
                }
            }
            throw new StorageException("cannot found the AnalyzerSettingGenerator for the " + type.getName() + " type");
        }
    }


    @FunctionalInterface
    public interface GenerateAnalyzerSettingFunc {
        AnalyzerSetting generate(StorageModuleElasticsearchConfig config);
    }

    /**
     * A built-in or customised tokenizer.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public Map<String, Object> getTokenizer() {
        return this.tokenizer;
    }

    /**
     * An optional array of built-in or customised character filters.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public Map<String, Object> getCharFilter() {
        return this.charFilter;
    }

    /**
     * An optional array of built-in or customised token filters.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public Map<String, Object> getFilter() {
        return this.filter;
    }

    /**
     * The custom analyzers.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public Map<String, Object> getAnalyzer() {
        return this.analyzer;
    }

    /**
     * A built-in or customised tokenizer.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public void setTokenizer(final Map<String, Object> tokenizer) {
        this.tokenizer = tokenizer;
    }

    /**
     * An optional array of built-in or customised character filters.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public void setCharFilter(final Map<String, Object> charFilter) {
        this.charFilter = charFilter;
    }

    /**
     * An optional array of built-in or customised token filters.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public void setFilter(final Map<String, Object> filter) {
        this.filter = filter;
    }

    /**
     * The custom analyzers.
     */
    @java.lang.SuppressWarnings("all")
    @lombok.Generated
    public void setAnalyzer(final Map<String, Object> analyzer) {
        this.analyzer = analyzer;
    }
}
