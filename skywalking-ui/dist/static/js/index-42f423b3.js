var p$=Object.defineProperty,v$=Object.defineProperties;var m$=Object.getOwnPropertyDescriptors;var pv=Object.getOwnPropertySymbols;var g$=Object.prototype.hasOwnProperty,y$=Object.prototype.propertyIsEnumerable;var vu=(e,s,t)=>s in e?p$(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,Q=(e,s)=>{for(var t in s||(s={}))g$.call(s,t)&&vu(e,t,s[t]);if(pv)for(var t of pv(s))y$.call(s,t)&&vu(e,t,s[t]);return e},pe=(e,s)=>v$(e,m$(s));var $n=(e,s,t)=>(vu(e,typeof s!="symbol"?s+"":s,t),t);var J=(e,s,t)=>new Promise((r,n)=>{var a=c=>{try{l(t.next(c))}catch(u){n(u)}},o=c=>{try{l(t.throw(c))}catch(u){n(u)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,o);l((t=t.apply(e,s)).next())});import{_ as ce,u as ge,a as Be,b as Ue,c as _$,d as hs,T as Ba,e as Ce,f as xt,M as mr,g as dc,i as mu,E as X,h as it,S as Mt,j as Rt,R as rs,C as Vt,k as bi,l as ni,m as mt,q as Ms,s as ri,n as gt,o as t_,p as n_,r as Bi,t as b$,L as gu,v as w$,w as ea,x as k$,y as _n,D as Vh,z as lr,A as hc,B as zh,F as S$,G as x$,H as Yd,I as io,J as T$,K as jh,Q as r_,N as Il,P as vi,O as Ki,U as $$,V as Yh,W as C$,X as I$,Y as Gh,Z as on,$ as D$,a0 as i_,a1 as E$,a2 as fc,a3 as cr,a4 as Mr,a5 as Uh,a6 as vv,a7 as s_,a8 as yu,a9 as M$,aa as O$,ab as P$,ac as N$,ad as L$,ae as R$,af as A$,ag as F$,ah as V$,ai as Ra,aj as Aa,ak as z$,al as j$,am as _u,an as Y$,ao as G$,ap as U$}from"./index-c10127f4.js";import{e as bn,o as E,x as P,b as ke,N as q,ab as H$,a5 as $i,d as ae,a as F,w as He,ac as W$,ad as B$,ae as q$,af as X$,ag as K$,y,E as T,z as Ct,G as de,H as Pe,F as D,u as b,R as ht,M as me,U as ie,ah as Q$,ai as J$,aj as Z$,C as Te,D as Ye,ak as eC,al as tC,am as Hh,an as Wh,ao as Bh,ap as Pn,W as jt,$ as It,V as Yt,aq as fs,ar as nC,a0 as Di,a1 as Gn,as as da,Y as We,at as rC,r as ln,S as so,c as Me,X as Ei,I as Nn,J as Ln,B as Or,n as iC,L as a_,au as sC,a6 as aC,v as qh,K as ha,p as o_,av as l_,a4 as Mi,O as oC,a3 as lC,t as ji,aw as Xh,ax as Kh,ay as Dl,az as ps,aA as cC,aB as uC}from"./element-plus-d7077300.js";import{a as mv,s as Qi,n as c_,o as u_,j as d_,p as dC,q as hC,d as fC,l as pC,r as vC,u as mC}from"./d3-90c460f3.js";import{_ as gC}from"./monaco-editor-97fd89d3.js";import"./echarts-cdb5c26f.js";import"./lodash-6e483b88.js";const yC={},_C={class:"app-main flex-v"};function bC(e,s){const t=bn("router-view");return E(),P("section",_C,[(E(),ke(t,{key:e.$route.fullPath},{default:q(({Component:r})=>[(E(),ke(H$,null,[(E(),ke($i(r)))],1024))]),_:1}))])}const wC=ce(yC,[["render",bC],["__scopeId","data-v-9f94ef7c"]]),kC={class:"title"},SC={class:"title"},xC=ae({__name:"SideBar",setup(e){const{t:s,te:t}=ge(),r=Be(),n=_$(),a=F(String(n.currentRoute.value.name)),o=["VirtualMachine","Kubernetes"].includes(a.value||"")?F("light"):F("black"),l=F((n.options.routes||[]).filter(_=>_.meta&&_.meta.activate)),c=hs(),u=F(!0),d=F(!0),f=F(!1);/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)?r.setIsMobile(!0):r.setIsMobile(!1),c.name==="ViewWidget"&&(d.value=!1);const p=_=>{o.value=["VirtualMachine","Kubernetes"].includes(String(_.name))?"light":"black"},v=_=>_.filter(S=>S.meta&&!S.meta.notShow&&S.meta.activate);function g(){f.value=!0,setTimeout(()=>{f.value&&(u.value=!1),f.value=!1},1e3)}function w(){u.value=!0,f.value=!1}return He(()=>c.name,()=>{a.value=String(c.name)}),(_,S)=>{const I=W$,C=bn("router-link"),$=B$,O=q$,A=X$,z=K$;return d.value?(E(),P("div",{key:0,class:"side-bar",onClick:S[0]||(S[0]=N=>u.value=!1),onMouseleave:w},[y("div",{class:Ct(u.value?"logo-icon-collapse":"logo-icon")},[T(Ue,{size:u.value?"xl":"logo",iconName:u.value?"logo":"logo-sw"},null,8,["size","iconName"])],2),y("div",{class:"menu scroll_bar_dark",style:ht(u.value?{}:{width:"220px"})},[T(z,{"active-text-color":"#448dfe","background-color":"#252a2f",class:"el-menu-vertical","default-active":a.value,"text-color":"#efefef",collapse:u.value,"collapse-transition":!1,style:{border:"none"}},{default:q(()=>[(E(!0),P(de,null,Pe(l.value,(N,Y)=>(E(),P(de,{key:Y},[N.meta.hasGroup?(E(),ke(A,{key:0,index:String(N.name),"popper-class":"sub-list"},{title:q(()=>[T(C,{class:"items",to:N.path},{default:q(()=>[T(I,{class:"menu-icons",style:{marginRight:"12px"},onMouseover:g},{default:q(()=>[T(Ue,{size:"lg",iconName:N.meta.icon},null,8,["iconName"])]),_:2},1024),y("span",{class:Ct(["title",u.value?"collapse":""])},D(b(t)(N.meta.i18nKey)?b(s)(N.meta.i18nKey):N.meta.title),3)]),_:2},1032,["to"])]),default:q(()=>[T(O,null,{default:q(()=>[(E(!0),P(de,null,Pe(v(N.children),(R,L)=>(E(),ke($,{index:R.name,key:L},{default:q(()=>[T(C,{class:"items",to:R.path},{default:q(()=>[y("span",kC,D(R.meta&&(b(t)(R.meta.i18nKey)?b(s)(R.meta.i18nKey):R.meta.title)),1)]),_:2},1032,["to"])]),_:2},1032,["index"]))),128))]),_:2},1024)]),_:2},1032,["index"])):(E(),ke($,{key:1,index:String(N.name),onClick:R=>p(N)},{title:q(()=>[T(C,{class:"items menu-title",to:N.children[0].path},{default:q(()=>[y("span",SC,D(b(t)(N.meta.i18nKey)?b(s)(N.meta.i18nKey):N.meta.title),1)]),_:2},1032,["to"])]),default:q(()=>[T(I,{class:"menu-icons",style:{marginRight:"12px"},onMouseover:g},{default:q(()=>[T(C,{class:"items menu-title",to:N.children[0].path},{default:q(()=>[T(Ue,{size:"lg",iconName:N.meta.icon},null,8,["iconName"])]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["index","onClick"]))],64))),128))]),_:1},8,["default-active","collapse"])],4)],32)):me("",!0)}}});const TC=ce(xC,[["__scopeId","data-v-8b18b0b9"]]),Fl=e=>{let s;const t=Math.round(e[1].getTime())-Math.round(e[0].getTime());return t<=60*60*1e3?s=Ba.MINUTE_TIME:t<=24*60*60*1e3?s=Ba.HOUR_TIME:s=Ba.DAY_TIME,{start:e[0],end:e[1],step:s}},$C={class:"nav-bar flex-h"},CC={class:"cp name"},IC={key:1,class:"title"},DC={class:"app-config"},EC={class:"ml-5"},MC={class:"version ml-5 cp"},OC=ae({__name:"NavBar",setup(e){const{t:s,te:t}=ge(),r=Be(),n=Ce(),a=hs(),o=F([]),l=F(0),c=F(""),u=F(!0),d=window.localStorage.getItem("theme-is-dark");d==="false"?u.value=!1:d===""&&(u.value=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),f(),I(),S(),_();function f(){const $=document.documentElement;u.value?($.classList.add(xt.Dark),$.classList.remove(xt.Light),r.setTheme(xt.Dark)):($.classList.add(xt.Light),$.classList.remove(xt.Dark),r.setTheme(xt.Light)),window.localStorage.setItem("theme-is-dark",String(u.value))}function p($){return $.find(O=>O.selected)||{}}function v($){o.value=o.value.map(O=>(O.find(z=>z.entity===$.entity&&$.layer===z.layer&&z.name===$.name)&&(O=O.map(z=>(z.selected=!1,z.entity===$.entity&&$.layer===z.layer&&z.name===$.name&&(z.selected=!0),z))),O)),$.path&&Zt.push($.path)}function g(){const $=r.duration.end.getTime()-r.duration.start.getTime(),O=[new Date(new Date().getTime()-$),new Date];r.setDuration(Fl(O))}function w($){l.value=$[1].getTime()-$[0].getTime()>60*24*60*60*1e3?1:0,!l.value&&r.setDuration(Fl($))}function _(){o.value=[],c.value="";const $=n.currentDashboard;if(!($&&$.name)){C();return}const O=n.dashboards.filter(L=>L.isRoot&&$.layer===L.layer)[0]||{};for(const L of r.allMenus)if(L.subItems&&L.subItems.length)for(const j of L.subItems)j.layer===O.layer&&(O.path=j.path);else L.layer===O.layer&&(O.path=L.path);if(o.value.push([pe(Q({},O),{selected:!0})]),$.entity===mr.ALL)return;if($.entity===mr.SERVICE){o.value.push([{name:$.name,selected:!0}]);return}const A=n.dashboards.filter(L=>mr.SERVICE===L.entity&&$.layer===L.layer);if(!A.length)return;const z=a.params.serviceId,N=A.map((L,j)=>{let B=`/dashboard/${L.layer}/${L.entity}/${L.name}`;z&&(B=`/dashboard/${L.layer}/${L.entity}/${z}/${L.name}`);const G=j===0;return pe(Q({},L),{path:B,selected:G})});o.value.push(N);const Y=a.params.podId;if($.entity===mr.ENDPOINT_RELATION){const j=n.dashboards.filter(B=>mr.ENDPOINT===B.entity&&$.layer===B.layer).map((B,G)=>{let H=`/dashboard/${B.layer}/${B.entity}/${B.name}`;Y&&(H=`/dashboard/${B.layer}/${B.entity}/${z}/${Y}/${B.name}`);const re=G===0;return pe(Q({},B),{path:H,selected:re})});o.value.push(j)}const R=a.params.destServiceId;if($.entity===mr.SERVICE_INSTANCE_RELATION){const j=n.dashboards.filter(B=>mr.SERVICE_RELATION===B.entity&&$.layer===B.layer).map((B,G)=>{let H=`/dashboard/${B.layer}/${B.entity}/${B.name}`;R&&(H=`/dashboard/related/${B.layer}/${B.entity}/${z}/${R}/${B.name}`);const re=G===0;return pe(Q({},B),{path:H,selected:re})});o.value.push(j)}if([mr.Process,mr.PROCESS_RELATION].includes($.entity)){const j=n.dashboards.filter(B=>mr.SERVICE_INSTANCE===B.entity&&$.layer===B.layer).map((B,G)=>{let H=`/dashboard/${B.layer}/${B.entity}/${B.name}`;Y&&(H=`/dashboard/${B.layer}/${B.entity}/${z}/${Y}/${B.name}`);const re=G===0;return pe(Q({},B),{path:H,selected:re})});o.value.push(j)}o.value.push([{name:$.name,selected:!0}])}function S(){return J(this,null,function*(){const $=yield r.fetchVersion();$.errors&&ie.error($.errors)})}function I(){const{duration:$}=a.params;if($){const O=JSON.parse($);r.updateDurationRow({start:new Date(O.start),end:new Date(O.end),step:O.step}),r.updateUTC(O.utc)}}function C(){const $=String(a.meta.i18nKey);c.value=t($)?s($):String(a.meta.title)}return He(()=>[n.currentDashboard,a.name],()=>{_()}),($,O)=>{const A=Hh,z=Wh,N=Bh,Y=Q$,R=J$,L=dc,j=Pn,B=Ue,G=jt;return E(),P("div",$C,[o.value.length?(E(),ke(R,{key:0,"separator-icon":b(Z$),class:"title flex-h",style:{"--el-text-color-placeholder":"#666"}},{default:q(()=>[(E(!0),P(de,null,Pe(o.value,(H,re)=>(E(),ke(Y,{key:re,replace:!0,to:{path:p(H).path||""}},{default:q(()=>[T(N,{size:"small",placement:"bottom",persistent:!1},{dropdown:q(()=>[T(z,null,{default:q(()=>[(E(!0),P(de,null,Pe(H,(fe,oe)=>(E(),ke(A,{onClick:Oe=>v(fe),key:oe},{default:q(()=>[y("span",null,D(fe.name),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:q(()=>[y("span",CC,D(p(H).name),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1},8,["separator-icon"])):(E(),P("div",IC,D(c.value),1)),y("div",DC,[Te(y("span",{class:"red"},D(b(s)("timeTips")),513),[[Ye,l.value]]),T(L,{value:[b(r).durationRow.start,b(r).durationRow.end],position:"bottom",format:"YYYY-MM-DD HH:mm",onInput:w},null,8,["value"]),y("span",null," UTC"+D(b(r).utcHour>=0?"+":"")+D(`${b(r).utcHour}:${b(r).utcMin}`),1),y("span",EC,[T(j,{modelValue:u.value,"onUpdate:modelValue":O[0]||(O[0]=H=>u.value=H),"active-icon":b(eC),"inactive-icon":b(tC),"inline-prompt":"",onChange:f},null,8,["modelValue","active-icon","inactive-icon"])]),y("span",{title:"refresh",class:"ghost ml-5 cp",onClick:g},[T(B,{iconName:"retry",loading:b(r).autoRefresh,class:"middle"},null,8,["loading"])]),y("span",MC,[T(G,{trigger:"hover",width:"250",placement:"bottom",content:b(r).version},{reference:q(()=>[y("span",null,[T(B,{iconName:"info_outline",size:"middle"})])]),_:1},8,["content"])])])])}}});const PC=ce(OC,[["__scopeId","data-v-7ec9b521"]]),NC={class:"app-wrapper flex-h"},LC={class:"main-container"},RC=ae({__name:"Index",setup(e){return(s,t)=>(E(),P("div",NC,[T(b(TC)),y("div",LC,[T(b(PC)),T(b(wC))])]))}});const bo=ce(RC,[["__scopeId","data-v-42e2c2e8"]]),AC=e=>new Promise(s=>{const{files:t}=e.target;if(t.length<1)return;const r=t[0],n=new FileReader;n.readAsText(r),n.onload=function(){typeof this.result=="string"&&s(JSON.parse(this.result))}}),FC=(e,s)=>{const t=JSON.stringify(e),r=document.createElement("a");r.download=s,r.style.display="none";const n=new Blob([t]);r.href=URL.createObjectURL(n),document.body.appendChild(r),r.click(),document.body.removeChild(r)},VC={class:"dashboard-list"},zC={class:"flex-h header",style:{margin:"10px 0"}},jC={class:"table"},YC=["onClick"],GC={class:"toggle-selection"},UC={for:"dashboard-file",class:"input-label"},HC=ae({__name:"List",setup(e){const{t:s}=ge(),t=Ce(),r=20,n=F([]),a=F(""),o=F(!1),l=F(1),c=F(0),u=F(),d=F([]),f=F(null),p=R=>{d.value=R};v();function v(){return J(this,null,function*(){yield t.setDashboards(),z(1)})}function g(R){return J(this,null,function*(){const L=yield AC(R);for(const j of L){const{layer:B,name:G,entity:H}=j.configuration;if(t.dashboards.findIndex(fe=>fe.name===G&&fe.entity===H&&fe.layer===B&&!j.id)>-1)return ie.error(s("nameError"))}o.value=!0;for(const j of L){const{layer:B,name:G,entity:H,isRoot:re,children:fe}=j.configuration,oe=t.dashboards.findIndex(xe=>xe.id===j.id),Oe={name:G.split(" ").join("-"),layer:B,entity:H,isRoot:!1};oe>-1&&(Oe.id=j.id,Oe.isRoot=re),t.setCurrentDashboard(Oe),t.setLayout(fe),yield t.saveDashboard()}n.value=t.dashboards,o.value=!1,f.value=null})}function w(){if(!d.value.length)return;const L=d.value.sort((B,G)=>B.name.localeCompare(G.name)).map(B=>{const G=[B.layer,B.entity,B.name].join("_");return JSON.parse(sessionStorage.getItem(G)||"{}")});for(const B of L)_(B.configuration.children);FC(L,"dashboards.json"),setTimeout(()=>{u.value.clearSelection()},2e3)}function _(R){for(const L of R||[]){if(delete L.moved,delete L.activedTabIndex,delete L.standard,delete L.id,delete L.label,delete L.value,delete L.filters,mu(L.graph)&&delete L.graph,L.widget&&(L.widget.title===""&&delete L.widget.title,L.widget.tips===""&&delete L.widget.tips),mu(L.widget)&&delete L.widget,L.metrics&&L.metrics.length&&L.metrics[0]||delete L.metrics,L.metricTypes&&L.metricTypes.length&&L.metricTypes[0]||delete L.metricTypes,L.metricConfig&&L.metricConfig.length&&L.metricConfig.forEach((j,B)=>{j.calculation||delete j.calculation,j.unit||delete j.unit,j.label||delete j.label,mu(j)&&(L.metricConfig||[]).splice(B,1)}),L.metricConfig&&L.metricConfig.length||delete L.metricConfig,L.type==="Tab")for(const j of L.children||[])_(j.children);["Trace","Topology","Tab","Profile","Ebpf","Log"].includes(L.type)&&delete L.widget}}function S(R){t.setMode(!0),t.setEntity(R.entity),t.setLayer(R.layer),t.setCurrentDashboard(R),Zt.push(`/dashboard/${R.layer}/${R.entity}/${R.name}`)}function I(R){t.setMode(!1),t.setEntity(R.entity),t.setLayer(R.layer),t.setCurrentDashboard(R),Zt.push(`/dashboard/${R.layer}/${R.entity}/${R.name}`)}function C(R){return J(this,null,function*(){const L=[];o.value=!0;for(const j of t.dashboards){if(j.id===R.id){j.isRoot=!R.isRoot;const B=[j.layer,j.entity,j.name].join("_"),G=sessionStorage.getItem(B)||"{}",H=Q(Q({},JSON.parse(G).configuration),j);delete H.id;const re={id:j.id,configuration:JSON.stringify(H)};(yield t.updateDashboard(re)).data.changeTemplate.id&&sessionStorage.setItem(B,JSON.stringify({id:j.id,configuration:H}))}else if(j.layer===R.layer&&[X[0].value,X[1].value].includes(j.entity)&&R.isRoot===!1&&j.isRoot===!0){j.isRoot=!1;const B=[j.layer,j.entity,j.name].join("_"),G=sessionStorage.getItem(B)||"{}",H=Q(Q({},JSON.parse(G).configuration),j),re={id:j.id,configuration:JSON.stringify(H)};(yield t.updateDashboard(re)).data.changeTemplate.id&&sessionStorage.setItem(B,JSON.stringify({id:j.id,configuration:H}))}L.push(j)}t.resetDashboards(L),z(1),o.value=!1})}function $(R){rC.prompt("Please input dashboard name","Edit",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputValue:R.name}).then(({value:L})=>{O(R,L)}).catch(()=>{ie({type:"info",message:"Input canceled"})})}function O(R,L){return J(this,null,function*(){if(new RegExp(/\s/).test(L)){ie.error("The name cannot contain spaces, carriage returns, etc");return}const j=[R.layer,R.entity,R.name].join("_"),B=sessionStorage.getItem(j)||"{}",G=pe(Q(Q({},JSON.parse(B).configuration),R),{name:L});delete G.id,delete G.filters;const H={id:R.id,configuration:JSON.stringify(G)};o.value=!0;const re=yield t.updateDashboard(H);if(o.value=!1,!re.data.changeTemplate.id)return;t.setCurrentDashboard(pe(Q({},R),{name:L})),n.value=t.dashboards.map(oe=>(t.currentDashboard.id===oe.id&&(oe=t.currentDashboard),oe)),t.resetDashboards(n.value),sessionStorage.setItem("dashboards",JSON.stringify(n.value)),sessionStorage.removeItem(j);const fe=[t.currentDashboard.layer,t.currentDashboard.entity,t.currentDashboard.name].join("_");sessionStorage.setItem(fe,JSON.stringify({id:R.id,configuration:G})),a.value=""})}function A(R){return J(this,null,function*(){t.setCurrentDashboard(R),o.value=!0,yield t.deleteDashboard(),n.value=t.dashboards,o.value=!1,sessionStorage.setItem("dashboards",JSON.stringify(n.value)),sessionStorage.removeItem(`${R.layer}_${R.entity}_${R.name}`)})}function z(R){const j=JSON.parse(sessionStorage.getItem("dashboards")||"[]").filter(B=>B.name.includes(a.value));c.value=j.length,n.value=j.filter((B,G)=>G<R*r&&G>=(R-1)*r),l.value=R}function N(){return J(this,null,function*(){o.value=!0,yield t.resetTemplates(),o.value=!1})}function Y(R){l.value=R,z(R)}return(R,L)=>{const j=Ue,B=It,G=Yt,H=bn("router-link"),re=fs,fe=nC,oe=Di,Oe=Gn;return E(),P("div",VC,[y("div",zC,[T(G,{modelValue:a.value,"onUpdate:modelValue":L[0]||(L[0]=xe=>a.value=xe),placeholder:"Please input name",class:"input-with-search ml-10",size:"small",onChange:L[1]||(L[1]=xe=>z(1))},{append:q(()=>[T(B,{size:"small"},{default:q(()=>[T(j,{size:"sm",iconName:"search"})]),_:1})]),_:1},8,["modelValue"]),T(B,{class:"ml-10 reload-btn",size:"small",onClick:N},{default:q(()=>[T(j,{size:"sm",iconName:"retry",class:"reload"}),We(" "+D(b(s)("reloadDashboards")),1)]),_:1}),T(H,{to:"/dashboard/new"},{default:q(()=>[T(B,{size:"small",type:"primary"},{default:q(()=>[We(" + "+D(b(s)("newDashboard")),1)]),_:1})]),_:1})]),y("div",jC,[Te((E(),ke(b(da),{data:n.value,style:{fontSize:"13px",width:"100%"},ref_key:"multipleTableRef",ref:u,"default-sort":{prop:"name",order:"ascending"},onSelectionChange:p,height:"calc(100% - 60px)",size:"small"},{default:q(()=>[T(re,{type:"selection",width:"55"}),T(re,{prop:"name",label:"Name"},{default:q(xe=>[y("span",{class:"cp name",onClick:Ee=>I(xe.row)},D(xe.row.name),9,YC)]),_:1}),T(re,{prop:"layer",label:"Layer",width:"160"}),T(re,{prop:"entity",label:"Entity",width:"200"}),T(re,{prop:"isRoot",label:"Root",width:"60"},{default:q(xe=>[y("span",null,D(xe.row.isRoot?b(s)("yes"):b(s)("no")),1)]),_:1}),T(re,{label:"Operations",width:"350"},{default:q(xe=>[T(B,{size:"small",onClick:Ee=>S(xe.row)},{default:q(()=>[We(D(b(s)("edit")),1)]),_:2},1032,["onClick"]),T(B,{size:"small",onClick:Ee=>$(xe.row)},{default:q(()=>[We(D(b(s)("rename")),1)]),_:2},1032,["onClick"]),T(fe,{title:b(s)("deleteTitle"),onConfirm:Ee=>A(xe.row)},{reference:q(()=>[T(B,{size:"small",type:"danger"},{default:q(()=>[We(D(b(s)("delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"]),[b(X)[0].value,b(X)[1].value].includes(xe.row.entity)?(E(),ke(fe,{key:0,title:b(s)("rootTitle"),onConfirm:Ee=>C(xe.row)},{reference:q(()=>[T(B,{size:"small",style:{width:"110px"},type:"danger"},{default:q(()=>[We(D(xe.row.isRoot?b(s)("setNormal"):b(s)("setRoot")),1)]),_:2},1024)]),_:2},1032,["title","onConfirm"])):me("",!0)]),_:1})]),_:1},8,["data"])),[[Oe,o.value]]),y("div",GC,[T(B,{size:"default",class:"btn",onClick:w},{default:q(()=>[T(j,{class:"mr-5",iconName:"save_alt"}),We(" "+D(b(s)("export")),1)]),_:1}),T(B,{class:"ml-10 btn",size:"default"},{default:q(()=>[y("input",{ref_key:"dashboardFile",ref:f,id:"dashboard-file",class:"import-template",type:"file",name:"file",title:"",accept:".json",onChange:g},null,544),y("label",UC,[T(j,{class:"mr-5",iconName:"folder_open"}),We(" "+D(b(s)("import")),1)])]),_:1}),T(oe,{class:"pagination",layout:"prev, pager, next","page-size":r,total:c.value,modelValue:l.value,"onUpdate:modelValue":L[2]||(L[2]=xe=>l.value=xe),onCurrentChange:Y,onPrevClick:Y,onNextClick:Y},null,8,["total","modelValue"])])])])}}});const WC=ce(HC,[["__scopeId","data-v-7d7060e0"]]),BC={class:"new-dashboard"},qC={class:"title"},XC={class:"item"},KC={class:"label"},QC={class:"item"},JC={class:"label"},ZC={class:"item"},eI={class:"label"},tI={class:"btn"},nI=ae({__name:"New",setup(e){const s=Ce(),{t}=ge(),r=it(),n=ln({name:"",selectedLayer:"",entity:X[0].value,layers:[]});o(),s.setDashboards();const a=()=>{const u=s.dashboards.findIndex(p=>p.name===n.name&&n.entity===p.entity&&n.selectedLayer===p.layer);if(!n.name){ie.error(t("nameEmptyError"));return}if(u>-1){ie.error(t("nameError"));return}s.setCurrentDashboard({name:n.name,entity:n.entity,layer:n.selectedLayer});const d=n.name,f=`/dashboard/${n.selectedLayer}/${n.entity}/${d}`;Zt.push(f)};function o(){return J(this,null,function*(){const u=yield r.fetchLayers();u.errors&&ie.error(u.errors),n.selectedLayer=u.data.layers[0],n.layers=u.data.layers.map(d=>({label:d,value:d}))})}function l(u){n.selectedLayer=u[0].value}function c(u){n.entity=u[0].value}return(u,d)=>{const f=Yt,p=Mt,v=It;return E(),P("div",BC,[y("div",qC,D(b(t)("newDashboard")),1),y("div",XC,[y("div",KC,D(b(t)("name")),1),T(f,{size:"default",modelValue:n.name,"onUpdate:modelValue":d[0]||(d[0]=g=>n.name=g),placeholder:"Please input name"},null,8,["modelValue"])]),y("div",QC,[y("div",JC,D(b(t)("layer")),1),T(p,{modelValue:n.selectedLayer,"onUpdate:modelValue":d[1]||(d[1]=g=>n.selectedLayer=g),options:n.layers,placeholder:"Select a layer",onChange:l,class:"selectors"},null,8,["modelValue","options"])]),y("div",ZC,[y("div",eI,D(b(t)("entityType")),1),T(p,{modelValue:n.entity,"onUpdate:modelValue":d[2]||(d[2]=g=>n.entity=g),options:b(X),placeholder:"Select a entity",onChange:c,class:"selectors"},null,8,["modelValue","options"])]),y("div",tI,[T(v,{class:"create",size:"default",type:"primary",onClick:a},{default:q(()=>[We(D(b(t)("create")),1)]),_:1})])])}}});const rI=ce(nI,[["__scopeId","data-v-35a20352"]]);function Qh(e){if(!(e.metrics&&e.metrics[0])||!(e.metricTypes&&e.metricTypes[0]))return;const s=Be(),t=Ce(),r=it();if(!r.currentService&&t.entity!=="All")return;const n={duration:s.durationTime},a=["$duration: Duration!"],o=["ServiceRelation","ServiceInstanceRelation","EndpointRelation","ProcessRelation"].includes(t.entity);if(o&&!r.currentDestService)return;const l=e.metrics.map((u,d)=>{const f=e.metricTypes[d]||"",p=e.metricConfig&&e.metricConfig[d]||{};if([Rt.ReadSampledRecords,Rt.SortMetrics].includes(f))a.push(`$condition${d}: TopNCondition!`),n[`condition${d}`]={name:u,parentService:["All"].includes(t.entity)?null:r.currentService.value,normal:r.currentService?r.currentService.normal:!0,topN:Number(p.topN)||10,order:p.sortOrder||"DES"};else{const g={serviceName:t.entity==="All"?void 0:r.currentService.value,normal:t.entity==="All"?void 0:r.currentService.normal,serviceInstanceName:["ServiceInstance","ServiceInstanceRelation","ProcessRelation"].includes(t.entity)?r.currentPod&&r.currentPod.value:void 0,endpointName:t.entity.includes("Endpoint")?r.currentPod&&r.currentPod.value:void 0,processName:t.entity.includes("Process")?r.currentProcess&&r.currentProcess.value:void 0,destNormal:o?r.currentDestService.normal:void 0,destServiceName:o?r.currentDestService.value:void 0,destServiceInstanceName:["ServiceInstanceRelation","ProcessRelation"].includes(t.entity)?r.currentDestPod&&r.currentDestPod.value:void 0,destEndpointName:t.entity==="EndpointRelation"?r.currentDestPod&&r.currentDestPod.value:void 0,destProcessName:t.entity.includes("ProcessRelation")?r.currentDestProcess&&r.currentDestProcess.value:void 0};if([Rt.ReadRecords].includes(f))a.push(`$condition${d}: RecordCondition!`),n[`condition${d}`]={name:u,parentEntity:g,topN:Number(p.topN)||10,order:p.sortOrder||"DES"};else{if(f===Rt.ReadLabeledMetricsValues){const w=(p.labelsIndex||"").split(",").map(_=>_.replace(/^\s*|\s*$/g,""));a.push(`$labels${d}: [String!]!`),n[`labels${d}`]=w}a.push(`$condition${d}: MetricsCondition!`),n[`condition${d}`]={name:u,entity:g}}}if(f===Rt.ReadLabeledMetricsValues)return`${u}${d}: ${f}(condition: $condition${d}, labels: $labels${d}, duration: $duration)${rs[f]}`;const v=f===Rt.ReadMetricsValue?Rt.ReadNullableMetricsValue:f;return`${u}${d}: ${v}(condition: $condition${d}, duration: $duration)${rs[v]}`});return{queryStr:`query queryData(${a}) {${l}}`,conditions:n}}function Jh(e,s){if(e.errors)return ie.error(e.errors),{};if(!e.data)return ie.error("The query is wrong"),{};const t={},r=Object.keys(e.data);return s.metricTypes.forEach((n,a)=>{const o=s.metrics[a],l=s.metricConfig&&s.metricConfig[a]||{};if(n===Rt.ReadMetricsValues&&(t[l.label||o]=e.data[r[a]]&&Gd(e.data[r[a]].values.values,l)||[]),n===Rt.ReadLabeledMetricsValues){const c=Object.values(e.data)[0]||[],u=(l.label||"").split(",").map(f=>f.replace(/^\s*|\s*$/g,"")),d=(l.labelsIndex||"").split(",").map(f=>f.replace(/^\s*|\s*$/g,""));for(const f of c){const p=f.values.values.map(g=>g.isEmptyValue?NaN:er(Number(g.value),l)),v=d.findIndex(g=>g===f.label);u[v]&&v>-1?t[u[v]]=p:t[f.label]=p}}if(n===Rt.ReadMetricsValue){const c=Object.values(e.data)[0]||{};t[o]=c.isEmptyValue?NaN:er(Number(c.value),l)}if([Rt.ReadRecords,Rt.ReadSampledRecords,Rt.SortMetrics].includes(n)&&(t[o]=(Object.values(e.data)[0]||[]).map(c=>(c.value=er(Number(c.value),l),c))),n===Rt.READHEATMAP){const c=Object.values(e.data)[0]||{},u=[];if(!(c&&c.values)){t[o]={nodes:[]};return}c.values.forEach((f,p)=>{const v=f.values.map((g,w)=>[p,w,g]);u.push(...v)});let d=[];c.buckets.length&&(d=[c.buckets[0].min,...c.buckets.map(f=>f.max)]),t[o]={nodes:u,buckets:d}}}),t}function Zh(e,s,t){const r=(s.metricTypes||[]).filter(v=>v);if(!r.length)return;const n=(s.metrics||[]).filter(v=>v);if(!n.length)return;const a=Be(),o=it(),l={duration:a.durationTime},c=["$duration: Duration!"],u=o.currentService||{},f=e.map((v,g)=>{const w={serviceName:t==="Service"?v.label:u.label,serviceInstanceName:t==="ServiceInstance"?v.label:void 0,endpointName:t==="Endpoint"?v.label:void 0,normal:t==="Service"?v.normal:u.normal};return n.map((S,I)=>{const C=r[I]||"";c.push(`$condition${g}${I}: MetricsCondition!`),l[`condition${g}${I}`]={name:S,entity:w};let $="";if(C===Rt.ReadLabeledMetricsValues){const A=s.metricConfig[I]||{};c.push(`$labels${g}${I}: [String!]!`),$=`labels: $labels${g}${I}, `;const z=(A.labelsIndex||"").split(",").map(N=>N.replace(/^\s*|\s*$/g,""));l[`labels${g}${I}`]=z}const O=C===Rt.ReadMetricsValue?Rt.ReadNullableMetricsValue:C;return`${S}${g}${I}: ${O}(condition: $condition${g}${I}, ${$}duration: $duration)${rs[O]}`})}).flat(1).join(" ");return{queryStr:`query queryData(${c}) {${f}}`,conditions:l}}function ef(e,s,t){if(s.errors)return ie.error(s.errors),{};const r=[],n=[],a=[];return{data:e.map((l,c)=>(t.metrics.map((u,d)=>{const f=t.metricConfig&&t.metricConfig[d]||{},p=u+c+d;if(t.metricTypes[d]===Rt.ReadMetricsValue){const v=s.data[p];l[u]=v.isEmptyValue?NaN:er(v.value,f),c===0&&(r.push(u),n.push(f),a.push(t.metricTypes[d]))}if(t.metricTypes[d]===Rt.ReadMetricsValues&&(l[u]={},[Vt.Average,Vt.ApdexAvg,Vt.PercentageAvg].includes(f.calculation)&&(l[u].avg=Gd(s.data[p].values.values,f)),l[u].values=s.data[p].values.values.map(v=>v.isEmptyValue?NaN:er(v.value,f)),c===0&&(r.push(u),n.push(f),a.push(t.metricTypes[d]))),t.metricTypes[d]===Rt.ReadLabeledMetricsValues){const v=s.data[p]||[],g=(f.label||"").split(",").map(_=>_.replace(/^\s*|\s*$/g,"")),w=(f.labelsIndex||"").split(",").map(_=>_.replace(/^\s*|\s*$/g,""));for(let _=0;_<v.length;_++){const S=v[_],I=S.values.values.map(O=>O.isEmptyValue?NaN:er(Number(O.value),f)),C=w.findIndex(O=>O===S.label);let $=S.label;g[C]&&C>-1&&($=g[C]),l[$]||(l[$]={}),[Vt.Average,Vt.ApdexAvg,Vt.PercentageAvg].includes(f.calculation)&&(l[$].avg=Gd(S.values.values,f)),l[$].values=I,c===0&&(r.push($),n.push(pe(Q({},f),{index:_})),a.push(t.metricTypes[d]))}}}),l)),names:r,metricConfigArr:n,metricTypesArr:a}}function qa(e,s){const r={duration:Be().durationTime,ids:s},n=["$duration: Duration!","$ids: [ID!]!"],a=e.map((l,c)=>(r[`m${c}`]=l,n.push(`$m${c}: String!`),`${l}: getValues(metric: {
      name: $m${c}
      ids: $ids
    }, duration: $duration) {
      values {
        id
        value
      }
    }`));return{queryStr:`query queryData(${n}) {${a.join(" ")}}`,conditions:r}}function Gd(e,s){const t=e.filter(a=>!a.isEmptyValue),r=t.length?t.map(a=>Number(a.value)).reduce((a,o)=>a+o):0;let n=[];switch(s.calculation){case Vt.Average:n=[(r/t.length).toFixed(2)];break;case Vt.PercentageAvg:n=[(r/t.length/100).toFixed(2)];break;case Vt.ApdexAvg:n=[(r/t.length/1e4).toFixed(2)];break;default:n=e.map(a=>a.isEmptyValue?NaN:er(a.value,s));break}return n}function er(e,s){let t=Number(e);switch(s.calculation){case Vt.Percentage:t=(e/100).toFixed(2);break;case Vt.PercentageAvg:t=(e/100).toFixed(2);break;case Vt.ByteToKB:t=(e/1024).toFixed(2);break;case Vt.ByteToMB:t=(e/1024/1024).toFixed(2);break;case Vt.ByteToGB:t=(e/1024/1024/1024).toFixed(2);break;case Vt.Apdex:t=(e/1e4).toFixed(2);break;case Vt.ConvertSeconds:t=so(e*1e3).format("YYYY-MM-DD HH:mm:ss");break;case Vt.ConvertMilliseconds:t=so(e).format("YYYY-MM-DD HH:mm:ss");break;case Vt.MsToS:t=(e/1e3).toFixed(2);break;case Vt.SecondToDay:t=(e/86400).toFixed(2);break;case Vt.NanosecondToMillisecond:t=(e/1e3/1e3).toFixed(2);break;case Vt.ApdexAvg:t=(e/1e4).toFixed(2);break}return t}function tf(e){return J(this,null,function*(){function s(){if(!(e.metrics&&e.metrics[0]))return;const l=Be(),c=Ce(),u=it();if(!u.currentService&&c.entity!=="All")return;const d={duration:l.durationTime},f=["$duration: Duration!"],p=["ServiceRelation","ServiceInstanceRelation","EndpointRelation","ProcessRelation"].includes(c.entity);if(p&&!u.currentDestService)return;const v=e.metrics.map((w,_)=>{f.push(`$expression${_}: String!`,`$entity${_}: Entity!`),d[`expression${_}`]=w;const S={serviceName:c.entity==="All"?void 0:u.currentService.value,normal:c.entity==="All"?void 0:u.currentService.normal,serviceInstanceName:["ServiceInstance","ServiceInstanceRelation","ProcessRelation","Process"].includes(c.entity)?u.currentPod&&u.currentPod.value:void 0,endpointName:c.entity.includes("Endpoint")?u.currentPod&&u.currentPod.value:void 0,processName:c.entity.includes("Process")?u.currentProcess&&u.currentProcess.value:void 0,destNormal:p?u.currentDestService.normal:void 0,destServiceName:p?u.currentDestService.value:void 0,destServiceInstanceName:["ServiceInstanceRelation","ProcessRelation"].includes(c.entity)?u.currentDestPod&&u.currentDestPod.value:void 0,destEndpointName:c.entity==="EndpointRelation"?u.currentDestPod&&u.currentDestPod.value:void 0,destProcessName:c.entity.includes("ProcessRelation")?u.currentDestProcess&&u.currentDestProcess.value:void 0};return d[`entity${_}`]=S,`expression${_}: execExpression(expression: $expression${_}, entity: $entity${_}, duration: $duration)${rs.execExpression}`});return{queryStr:`query queryData(${f}) {${v}}`,conditions:d}}function t(l){if(l.errors)return ie.error(l.errors),{source:{},tips:[],typesOfMQE:[]};if(!l.data)return ie.error("The query is wrong"),{source:{},tips:[],typesOfMQE:[]};const c=[],u={},d=Object.keys(l.data),f=[];for(let p=0;p<e.metrics.length;p++){const v=e.metricConfig&&e.metricConfig[p]||{},g=l.data[d[p]]||{},w=g.results||[],_=e.metrics[p],S=g.type;if(c.push(g.error),f.push(S),!g.error){if(S===bi.TIME_SERIES_VALUES)if(w.length===1){const I=w[0].metric&&w[0].metric.labels[0]&&w[0].metric.labels[0].value;u[v.label||I||_]=w[0].values.map(C=>C.value)||[]}else{const I=(v.label||"").split(",").map(C=>C.replace(/^\s*|\s*$/g,""));for(const C of w){const $=C.values.map(z=>z.value)||[],O=C.metric.labels[0].value,A=I.findIndex((z,N)=>N===Number(O));I[A]&&A>-1?u[I[A]]=$:u[O]=$}}S===bi.SINGLE_VALUE&&(u[v.label||_]=(w[0].values[0]||{}).value),[bi.RECORD_LIST,bi.SORTED_LIST].includes(S)&&(u[_]=w[0].values)}}return{source:u,tips:c,typesOfMQE:f}}const r=yield s();if(!r)return{source:{},tips:[],typesOfMQE:[]};const a=yield Ce().fetchMetricValue(r);return a.errors?(ie.error(a.errors),{source:{},tips:[],typesOfMQE:[]}):t(a)})}function nf(e,s,t){return J(this,null,function*(){function r(){const u=[],d=[];s.expressions=s.expressions||[],s.subExpressions=s.subExpressions||[];for(let C=0;C<s.expressions.length;C++)s.expressions[C]&&(u.push(s.expressions[C]),d.push(s.subExpressions[C]));if(!u.length)return;const f=Be(),p=it(),v={duration:f.durationTime},g=["$duration: Duration!"],w=p.currentService||{},S=e.map((C,$)=>{const O={serviceName:t==="Service"?C.label:w.label,serviceInstanceName:t==="ServiceInstance"?C.label:void 0,endpointName:t==="Endpoint"?C.label:void 0,normal:t==="Service"?C.normal:w.normal};return g.push(`$entity${$}: Entity!`),v[`entity${$}`]=O,u.map((z,N)=>{g.push(`$expression${$}${N}: String!`),v[`expression${$}${N}`]=z;let Y="";return s.subExpressions[N]&&(g.push(`$subExpression${$}${N}: String!`),v[`subExpression${$}${N}`]=s.subExpressions[N],Y=`subexpression${$}${N}: execExpression(expression: $subExpression${$}${N}, entity: $entity${$}, duration: $duration)${rs.execExpression}`),Y+`expression${$}${N}: execExpression(expression: $expression${$}${N}, entity: $entity${$}, duration: $duration)${rs.execExpression}`})}).flat(1).join(" ");return{queryStr:`query queryData(${g}) {${S}}`,conditions:v}}function n(u){if(u.errors)return ie.error(u.errors),{};const d=[],f=[],p=[],v=[],g=[],w=[];return{data:e.map((S,I)=>{for(let C=0;C<s.expressions.length;C++){const $=s.metricConfig&&s.metricConfig[C]||{},O="expression"+I+C,A="subexpression"+I+C,z=u.data[O]||{},N=z.results||[],Y=z.type||"",R=u.data[A]||{},L=R.results||[];if(g.push(z.error),w.push(R.error),N.length>1){const j=($.label||"").split(",").map(G=>G.replace(/^\s*|\s*$/g,"")),B=($.labelsIndex||"").split(",").map(G=>G.replace(/^\s*|\s*$/g,""));for(let G=0;G<N.length;G++){let H=N[G].metric.labels[0].value||"";const re=L[G]&&L[G].values.map(Oe=>Oe.value),fe=B.findIndex(Oe=>Oe===N[G].metric.labels[0].value);j[fe]&&(H=j[fe]),S[H]||(S[H]={}),re&&(S[H].values=re),S[H].avg=(N[G].values[0]||{}).value,d.find(Oe=>Oe===H)||(d.push(H),p.push(pe(Q({},$),{index:G})),v.push(Y))}}else{if(!N[0])return S;const j=s.expressions[C]||"",B=s.subExpressions[C]||"";S[j]||(S[j]={}),S[j].avg=[(N[0].values[0]||{}).value],L[0]&&(S[B]||(S[B]={}),S[B].values=L[0].values.map(H=>H.value)),d.find(H=>H===j)||(d.push(j),f.push(B),p.push($),v.push(Y))}}return S}),names:d,subNames:f,metricConfigArr:p,metricTypesArr:v,expressionsTips:g,subExpressionsTips:w}}const a=Ce(),o=yield r(),l=yield a.fetchMetricValue(o);return l.errors?(ie.error(l.errors),{}):n(l)})}function Vl(e,s){const t=Be(),r=Ce();function n(){const o={duration:t.durationTime},l=["$duration: Duration!"],u=s.map((f,p)=>{let v,g,w,_,S,I;f.sourceObj&&f.targetObj?(v=f.sourceObj.serviceName||f.sourceObj.name,g=f.targetObj.serviceName||f.targetObj.name,X[4].value===r.entity&&(_=f.sourceObj.name,S=f.targetObj.name),X[2].value===r.entity&&(w=f.sourceObj.name,I=f.targetObj.name)):(v=f.serviceName||f.name,X[4].value===r.entity&&(_=f.name),X[2].value===r.entity&&(w=f.name));const C={serviceName:v,normal:!0,serviceInstanceName:_,endpointName:w,destServiceName:g,destNormal:g?!0:void 0,destServiceInstanceName:S,destEndpointName:I};return l.push(`$entity${p}: Entity!`),o[`entity${p}`]=C,e.map((O,A)=>(p===0&&(l.push(`$expression${A}: String!`),o[`expression${A}`]=O),`expression${p}${A}: execExpression(expression: $expression${A}, entity: $entity${p}, duration: $duration)${rs.execExpression}`))}).flat(1).join(" ");return{queryStr:`query queryData(${l}) {${u}}`,conditions:o}}function a(o){const l={};for(let c=0;c<s.length;c++)for(let u=0;u<e.length;u++){const d="expression"+c+u;e[u]&&(l[e[u]]||(l[e[u]]={values:[]}),l[e[u]].values.push({value:o[d].results[0]&&o[d].results[0].values[0].value,id:s[c].id}))}return l}return{getExpressionQuery:n,handleExpressionValues:a}}const iI=ni({id:"topology",state:()=>({calls:[],nodes:[],node:null,call:null,nodeMetricValue:{},linkServerMetrics:{},linkClientMetrics:{}}),actions:{setNode(e){this.node=e},setLink(e){this.call=e},setInstanceTopology(e){for(const s of e.calls){for(const t of e.nodes)s.source===t.id&&(s.sourceObj=t),s.target===t.id&&(s.targetObj=t);s.value=s.value||1}this.calls=e.calls,this.nodes=e.nodes},setTopology(e){const s={},t=it().services,r=(e.nodes||[]).reduce((a,o)=>{if(!s[o.id]){s[o.id]=!0;const l=t.filter(c=>c.id===o.id)[0]||{};o.layer=l.layers?l.layers[0]:null,a.push(o)}return a},[]),n=(e.calls||[]).reduce((a,o)=>{if(!s[o.id]){s[o.id]=!0,o.value=o.value||1;for(const l of e.nodes)o.source===l.id&&(o.sourceObj=l),o.target===l.id&&(o.targetObj=l);o.value=o.value||1,a.push(o)}return a},[]);this.calls=n,this.nodes=r},setNodeMetricValue(e){this.nodeMetricValue=e},setLinkServerMetrics(e){this.linkServerMetrics=e},setLinkClientMetrics(e){this.linkClientMetrics=e},setLegendValues(e,s){for(let t=0;t<this.nodes.length;t++)for(let r=0;r<e.length;r++){const n="expression"+t+r;e[r]&&(this.nodes[t][e[r]]=Number(s[n].results[0].values[0].value))}},getDepthServiceTopology(e,s){return J(this,null,function*(){const t=yield this.getServicesTopology(e);if(s>1){const r=(t.nodes||[]).map(a=>a.id).filter(a=>!e.includes(a));if(!r.length){this.setTopology(t);return}const n=yield this.getServicesTopology(r);if(s>2){const a=n.nodes.map(l=>l.id).filter(l=>![...r,...e].includes(l));if(!a.length){const l=[...t.nodes,...n.nodes],c=[...t.calls,...n.calls];this.setTopology({nodes:l,calls:c});return}const o=yield this.getServicesTopology(a);if(s>3){const l=o.nodes.map(u=>u.id).filter(u=>![...r,...a,...e].includes(u));if(!l.length){const u=[...t.nodes,...n.nodes,...o.nodes],d=[...t.calls,...n.calls,...o.calls];this.setTopology({nodes:u,calls:d});return}const c=yield this.getServicesTopology(l);if(s>4){const u=c.nodes.map(v=>v.id).filter(v=>![...l,...r,...a,...e].includes(v));if(!u.length){const v=[...t.nodes,...n.nodes,...o.nodes,...c.nodes],g=[...t.calls,...n.calls,...o.calls,...c.calls];this.setTopology({nodes:v,calls:g});return}const d=yield this.getServicesTopology(u),f=[...t.nodes,...n.nodes,...o.nodes,...c.nodes,...d.nodes],p=[...t.calls,...n.calls,...o.calls,...c.calls,...d.calls];this.setTopology({nodes:f,calls:p})}else{const u=[...t.nodes,...n.nodes,...o.nodes,...c.nodes],d=[...t.calls,...n.calls,...o.calls,...c.calls];this.setTopology({nodes:u,calls:d})}}else{const l=[...t.nodes,...n.nodes,...o.nodes],c=[...t.calls,...n.calls,...o.calls];this.setTopology({nodes:l,calls:c})}}else this.setTopology({nodes:[...t.nodes,...n.nodes],calls:[...t.calls,...n.calls]})}else this.setTopology(t)})},getServicesTopology(e){return J(this,null,function*(){if(!e.length)return new Promise(r=>r({}));const s=Be().durationTime,t=yield mt.query("getServicesTopology").params({serviceIds:e,duration:s});return t.data.errors?t.data:t.data.data.topology})},getInstanceTopology(){return J(this,null,function*(){const{currentService:e,currentDestService:s}=it(),t=e&&e.id||"",r=s&&s.id||"",n=Be().durationTime;if(!(t&&r))return new Promise(o=>o({}));const a=yield mt.query("getInstanceTopology").params({clientServiceId:r,serverServiceId:t,duration:n});return a.data.errors||this.setInstanceTopology(a.data.data.topology),a.data})},updateEndpointTopology(e,s){return J(this,null,function*(){if(!e.length)return new Promise(r=>r({}));const t=yield this.getEndpointTopology(e);if(s>1){const r=t.nodes.map(a=>a.id).filter(a=>!e.includes(a));if(!r.length){this.setTopology(t);return}const n=yield this.getEndpointTopology(r);if(s>2){const a=n.nodes.map(l=>l.id).filter(l=>![...r,...e].includes(l));if(!a.length){const l=[...t.nodes,...n.nodes],c=[...t.calls,...n.calls];this.setTopology({nodes:l,calls:c});return}const o=yield this.getEndpointTopology(a);if(s>3){const l=o.nodes.map(u=>u.id).filter(u=>![...r,...a,...e].includes(u));if(!l.length){const u=[...t.nodes,...n.nodes,...o.nodes],d=[...t.calls,...n.calls,...o.calls];this.setTopology({nodes:u,calls:d});return}const c=yield this.getEndpointTopology(l);if(s>4){const u=c.nodes.map(v=>v.id).filter(v=>![...l,...r,...a,...e].includes(v));if(!u.length){const v=[...t.nodes,...n.nodes,...o.nodes,...c.nodes],g=[...t.calls,...n.calls,...o.calls,...c.calls];this.setTopology({nodes:v,calls:g});return}const d=yield this.getEndpointTopology(u),f=[...t.nodes,...n.nodes,...o.nodes,...c.nodes,...d.nodes],p=[...t.calls,...n.calls,...o.calls,...c.calls,...d.calls];this.setTopology({nodes:f,calls:p})}else{const u=[...t.nodes,...n.nodes,...o.nodes,...c.nodes],d=[...t.calls,...n.calls,...o.calls,...c.calls];this.setTopology({nodes:u,calls:d})}}else{const l=[...t.nodes,...n.nodes,...o.nodes],c=[...t.calls,...n.calls,...o.calls];this.setTopology({nodes:l,calls:c})}}else this.setTopology({nodes:[...t.nodes,...n.nodes],calls:[...t.calls,...n.calls]})}else this.setTopology(t)})},getEndpointTopology(e){return J(this,null,function*(){if(!e.length)return new Promise(d=>d({}));const s=Be().durationTime,t=["$duration: Duration!"],r=e.map((d,f)=>`endpointTopology${f}: getEndpointDependencies(endpointId: "${d}", duration: $duration) {
          nodes {
            id
            name
            serviceId
            serviceName
            type
            isReal
          }
          calls {
            id
            source
            target
            detectPoints
          }
        }`),n=`query queryData(${t}) {${r}}`,o=yield Ms({queryStr:n,conditions:{duration:s}});if(o.data.errors)return o.data;const l=o.data.data,c=[],u=[];for(const d of Object.keys(l))c.push(...l[d].calls),u.push(...l[d].nodes);return{calls:c,nodes:u}})},getNodeMetricValue(e){return J(this,null,function*(){const s=yield Ms(e);return s.data.errors||this.setNodeMetricValue(s.data.data),s.data})},getNodeExpressionValue(e){return J(this,null,function*(){const s=yield Ms(e);return s.data.errors,s.data})},getLinkClientMetrics(e){return J(this,null,function*(){if(!e.length){this.setLinkClientMetrics({});return}const s=this.calls.filter(n=>n.detectPoints.includes("CLIENT")).map(n=>n.id);if(!s.length)return;const t=yield qa(e,s),r=yield this.getCallClientMetrics(t);r.errors&&ie.error(r.errors)})},getLinkServerMetrics(e){return J(this,null,function*(){if(!e.length){this.setLinkServerMetrics({});return}const s=this.calls.filter(n=>n.detectPoints.includes("SERVER")).map(n=>n.id);if(!s.length)return;const t=yield qa(e,s),r=yield this.getCallServerMetrics(t);r.errors&&ie.error(r.errors)})},getLinkExpressions(e,s){return J(this,null,function*(){if(!e.length){this.setLinkServerMetrics({});return}const t=this.calls.filter(c=>c.detectPoints.includes(s));if(!t.length)return;const{getExpressionQuery:r,handleExpressionValues:n}=Vl(e,t),a=r(),o=yield this.getNodeExpressionValue(a);if(o.errors){ie.error(o.errors);return}const l=n(o.data);s==="SERVER"?this.setLinkServerMetrics(l):this.setLinkClientMetrics(l)})},queryNodeMetrics(e){return J(this,null,function*(){if(!e.length){this.setNodeMetricValue({});return}const s=this.nodes.map(n=>n.id);if(!s.length)return;const t=yield qa(e,s),r=yield this.getNodeMetricValue(t);r.errors&&ie.error(r.errors)})},queryNodeExpressions(e){return J(this,null,function*(){if(!e.length){this.setNodeMetricValue({});return}if(!this.nodes.length){this.setNodeMetricValue({});return}const{getExpressionQuery:s,handleExpressionValues:t}=Vl(e,this.nodes),r=s(),n=yield this.getNodeExpressionValue(r);if(n.errors){ie.error(n.errors);return}const a=t(n.data);this.setNodeMetricValue(a)})},getLegendMetrics(e){return J(this,null,function*(){const s=yield Ms(e);if(s.data.errors)return s.data;const t=s.data.data,r=Object.keys(t);return this.nodes=this.nodes.map(n=>{for(const a of r)for(const o of t[a].values)n.id===o.id&&(n[a]=o.value);return n}),s.data})},getCallServerMetrics(e){return J(this,null,function*(){const s=yield Ms(e);return s.data.errors||this.setLinkServerMetrics(s.data.data),s.data})},getCallClientMetrics(e){return J(this,null,function*(){const s=yield Ms(e);return s.data.errors||this.setLinkClientMetrics(s.data.data),s.data})}}});function pc(){return iI(ri)}const sI={class:"config-panel"},aI={class:"item mb-10"},oI={class:"label"},lI={class:"item mb-10"},cI={class:"label"},uI={class:"item mb-10"},dI={class:"label"},hI={key:0,class:"item mb-10"},fI={class:"label"},pI=ae({__name:"Metrics",props:{type:{type:String,default:""},isExpression:{type:Boolean,default:!0}},emits:["update"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=Ce(),a=Me(()=>{let v=[];const{linkServerExpressions:g,linkServerMetrics:w,linkClientExpressions:_,linkClientMetrics:S,nodeExpressions:I,nodeMetrics:C}=n.selectedGrid;switch(t.type){case"linkServerMetricConfig":v=t.isExpression?g:w;break;case"linkClientMetricConfig":v=t.isExpression?_:S;break;case"nodeMetricConfig":v=t.isExpression?I:C;break}return v||[]}),o=Me(()=>{const v=a.value.map(g=>({label:g,value:g}));return v.length?v:[{label:"",value:""}]}),l=F(o.value[0].value),c=F({unit:"",calculation:"",label:""}),u=F(0),d=Me(()=>{let v=[];switch(t.type){case"linkServerMetricConfig":v=n.selectedGrid.linkServerMetricConfig;break;case"linkClientMetricConfig":v=n.selectedGrid.linkClientMetricConfig;break;case"nodeMetricConfig":v=n.selectedGrid.nodeMetricConfig;break}return v||[]});function f(v){const g=d.value||[];g[u.value]=Q(Q({},g[u.value]),v),c.value=g[u.value],s("update",{[t.type]:g})}function p(v){l.value=v;const g=o.value.findIndex(_=>_.value===v);u.value=g||0;const w=d.value||[];c.value=Q({unit:"",label:"",calculation:""},w[g])}return He(()=>t.type,()=>{l.value=o.value[0].value;const v=d.value||[];u.value=0,c.value=Q({unit:"",label:"",calculation:""},v[0])}),(v,g)=>{const w=n_,_=Yt;return E(),P("div",sI,[y("div",aI,[y("span",oI,D(b(r)(b(n).selectedGrid.metricMode===b(gt).General?"metrics":"expressions")),1),T(w,{value:l.value,options:b(o),onChange:p,class:"selectors"},null,8,["value","options"])]),y("div",lI,[y("span",cI,D(b(r)("unit")),1),T(_,{class:"input",modelValue:c.value.unit,"onUpdate:modelValue":g[0]||(g[0]=S=>c.value.unit=S),size:"small",placeholder:"Please input unit",onChange:g[1]||(g[1]=S=>f({unit:c.value.unit}))},null,8,["modelValue"])]),y("div",uI,[y("span",dI,D(b(r)("labels")),1),T(_,{class:"input",modelValue:c.value.label,"onUpdate:modelValue":g[2]||(g[2]=S=>c.value.label=S),size:"small",placeholder:"Please input a label",onChange:g[3]||(g[3]=S=>f({label:c.value.label}))},null,8,["modelValue"])]),b(n).selectedGrid.metricMode===b(gt).General?(E(),P("div",hI,[y("span",fI,D(b(r)("aggregation")),1),T(w,{value:c.value.calculation,options:b(t_),onChange:g[4]||(g[4]=S=>f({calculation:S})),class:"selectors",clearable:!0},null,8,["value","options"])])):me("",!0)])}}});const bu=ce(pI,[["__scopeId","data-v-5ca66113"]]),rf=e=>(Nn("data-v-6f00e2d9"),e=e(),Ln(),e),vI={class:"mt-20"},mI={class:"title"},gI={class:"link-settings"},yI={class:"title"},_I={class:"label"},bI={class:"label"},wI={key:0},kI={class:"label"},SI={key:0},xI={class:"node-settings"},TI={class:"title"},$I={class:"label"},CI={class:"label"},II={key:0},DI={class:"legend-settings"},EI={class:"title"},MI={key:0},OI=rf(()=>y("div",{class:"label"},"Healthy Description",-1)),PI={class:"label"},NI={key:1},LI={key:3},RI=rf(()=>y("div",{class:"label"},"Healthy Description",-1)),AI=rf(()=>y("div",{class:"label"},"Unhealthy Description",-1)),FI=ae({__name:"Settings",emits:["update","updateNodes"],setup(e,{emit:s}){const{t}=ge(),r=Ce(),n=pc(),{selectedGrid:a}=r,o=F(r.selectedGrid.metricMode===gt.Expression),l=a.nodeDashboard&&a.nodeDashboard.length?a.nodeDashboard:"",c=[X[0].value,X[1].value].includes(r.entity),u=ln(c&&l?l:[{scope:"",dashboard:""}]),d=ln({linkDashboard:a.linkDashboard||"",nodeDashboard:a.nodeDashboard||[],linkServerMetrics:a.linkServerMetrics||[],linkClientMetrics:a.linkClientMetrics||[],nodeMetrics:a.nodeMetrics||[],nodeMetricList:[],linkMetricList:[],linkDashboards:[],nodeDashboards:[],linkServerExpressions:a.linkServerExpressions||[],linkClientExpressions:a.linkClientExpressions||[],nodeExpressions:a.nodeExpressions||[]}),f=a.legend&&a.legend.length,p=F(f?a.legend:[{name:"",condition:"",value:""}]),v=F(a.legendMQE||{expression:""}),g=F(""),w=ln(a.description||{});_();function _(){return J(this,null,function*(){const U=JSON.parse(sessionStorage.getItem("dashboards")||"[]"),ee=yield r.fetchMetricList();if(ee.errors){ie.error(ee.errors);return}const K=r.entity===X[1].value?X[0].value:r.entity===X[4].value?X[3].value:r.entity;d.linkDashboards=U.reduce((se,ye)=>(ye.layer===r.layerId&&ye.entity===K+"Relation"&&se.push(pe(Q({},ye),{label:ye.name,value:ye.name})),se),[]),d.nodeMetricList=(ee.data.metrics||[]).filter(se=>se.type===Bi.REGULAR_VALUE),d.linkMetricList=(ee.data.metrics||[]).filter(se=>K+"Relation"===mr[se.catalog]&&se.type===Bi.REGULAR_VALUE),!c&&(d.nodeDashboards=U.reduce((se,ye)=>(ye.layer===r.layerId&&ye.entity===K&&se.push(pe(Q({},ye),{label:ye.name,value:ye.name})),se),[]))})}function S(){return J(this,null,function*(){if(Y(),o.value){const U=r.selectedGrid.legendMQE&&r.selectedGrid.legendMQE.expression;if(!U){s("updateNodes");return}const{getExpressionQuery:ee}=Vl([U],n.nodes),K=ee(),se=yield n.getNodeExpressionValue(K);se.errors?ie.error(se.errors):n.setLegendValues([U],se.data)}else{const U=r.selectedGrid.legend.map(ye=>ye.name&&ye.condition&&ye.value);if(!U.length){s("updateNodes");return}const ee=n.nodes.map(ye=>ye.id),K=yield qa(U,ee),se=yield n.getLegendMetrics(K);se.errors&&ie.error(se.errors)}s("updateNodes")})}function I(U){d.nodeDashboard=U[0].value,Y()}function C(U){d.linkDashboard=U[0].value,Y()}function $(U,ee,K){p.value[K][U]=ee[0].value||ee}function O(U,ee){u[U].scope=ee[0].value;const K=JSON.parse(sessionStorage.getItem("dashboards")||"[]");d.nodeDashboards=K.reduce((se,ye)=>(ye.layer===r.layerId&&ye.entity===ee[0].value&&se.push(pe(Q({},ye),{label:ye.name,value:ye.name})),se),[]),u[U].dashboard=d.nodeDashboards[0].value,Y()}function A(U,ee){u[U].dashboard=ee[0].value,Y()}function z(){u.push({scope:"",dashboard:""})}function N(U){u.length===1&&u.push({scope:"",dashboard:""}),u.splice(U,1),Y()}function Y(U){let ee=[];o.value?ee=p.value.filter(se=>se.name):ee=p.value.filter(se=>se.name&&se.value&&se.condition);const K=pe(Q(pe(Q({},r.selectedGrid),{linkDashboard:d.linkDashboard,nodeDashboard:c?u.filter(se=>se.dashboard):d.nodeDashboard,linkServerMetrics:d.linkServerMetrics,linkClientMetrics:d.linkClientMetrics,nodeMetrics:d.nodeMetrics,linkServerExpressions:d.linkServerExpressions,linkClientExpressions:d.linkClientExpressions,nodeExpressions:d.nodeExpressions,metricMode:o.value?gt.Expression:gt.General,legend:ee,legendMQE:v.value}),U),{description:w});r.selectWidget(K),r.setConfigs(K),s("update",K)}function R(U){const ee=U.map(le=>le.value),K=d.linkServerMetrics.findIndex(le=>!ee.includes(le));if(d.linkServerMetrics=ee,K<0){L();return}const se=r.selectedGrid.linkServerMetricConfig||[],ye=se.length===1?[]:se.splice(K,1);L({linkServerMetricConfig:ye})}function L(U){return J(this,null,function*(){if(Y(U),!d.linkServerMetrics.length){n.setLinkServerMetrics({});return}n.getLinkServerMetrics(d.linkServerMetrics)})}function j(U){if(!!o.value){if(d.linkServerExpressions=U,Y(),!d.linkServerExpressions.length){n.setLinkServerMetrics({});return}n.getLinkExpressions(d.linkServerExpressions,ea.Server)}}function B(U){if(!!o.value){if(d.linkClientExpressions=U,Y(),!d.linkClientExpressions.length){n.changeLinkClientMetrics({});return}n.getLinkExpressions(d.linkClientExpressions,ea.Client)}}function G(U){const ee=U.map(le=>le.value),K=d.linkClientMetrics.findIndex(le=>!ee.includes(le));if(d.linkClientMetrics=ee,K<0){H();return}const se=r.selectedGrid.linkClientMetricConfig||[],ye=se.length===1?[]:se.splice(K,1);H({linkClientMetricConfig:ye})}function H(U){return J(this,null,function*(){if(Y(U),!d.linkClientMetrics.length){n.setLinkClientMetrics({});return}n.getLinkClientMetrics(d.linkClientMetrics)})}function re(U){const ee=U.map(le=>le.value),K=d.nodeMetrics.findIndex(le=>!ee.includes(le));if(d.nodeMetrics=ee,K<0){fe();return}const se=r.selectedGrid.nodeMetricConfig||[],ye=se.length===1?[]:se.splice(K,1);fe({nodeMetricConfig:ye})}function fe(U){return J(this,null,function*(){if(Y(U),!d.nodeMetrics.length){n.setNodeMetricValue({});return}n.queryNodeMetrics(d.nodeMetrics)})}function oe(U){if(p.value.length===1){p.value=[{name:"",condition:"",value:""}];return}p.value.splice(U,1)}function Oe(){p.value.push({name:"",condition:"",value:""})}function xe(U){g.value=U}function Ee(U){if(!!o.value){if(d.nodeExpressions=U,Y(),!d.nodeExpressions.length){n.setNodeMetricValue({});return}n.queryNodeExpressions(d.nodeExpressions)}}function Z(){p.value=[{name:"",condition:"",value:""}];const U={linkServerMetricConfig:[],linkClientMetricConfig:[],nodeMetricConfig:[]};o.value?(d.linkServerMetrics=[],d.linkClientMetrics=[],d.nodeMetrics=[]):(d.linkServerExpressions=[],d.linkClientExpressions=[],d.nodeExpressions=[]),Y(U)}return(U,ee)=>{const K=Pn,se=Mt,ye=Ue,le=jt,$e=k$,Re=Yt,be=Ei,he=It;return E(),P(de,null,[y("div",vI,[y("h5",mI,D(b(t)("metricMode")),1),T(K,{modelValue:o.value,"onUpdate:modelValue":ee[0]||(ee[0]=Ie=>o.value=Ie),class:"mt-5","active-text":"Expressions","inactive-text":"General",size:"small",onChange:Z},null,8,["modelValue"])]),y("div",gI,[y("h5",yI,D(b(t)("callSettings")),1),y("div",_I,D(b(t)("linkDashboard")),1),T(se,{value:d.linkDashboard,options:d.linkDashboards,size:"small",placeholder:"Please input a dashboard name for calls",onChange:C,class:"inputs",clearable:!0},null,8,["value","options"]),y("div",bI,[y("span",null,D(b(t)("linkServerMetrics")),1),(o.value?d.linkServerExpressions.length:d.linkServerMetrics.length)?(E(),ke(le,{key:0,placement:"left",width:400,trigger:"click"},{reference:q(()=>[y("span",{onClick:ee[1]||(ee[1]=Ie=>xe("linkServerMetricConfig"))},[T(ye,{class:"cp ml-5",iconName:"mode_edit",size:"middle"})])]),default:q(()=>[T(bu,{type:g.value,isExpression:o.value,onUpdate:Y},null,8,["type","isExpression"])]),_:1})):me("",!0)]),o.value?(E(),P("div",wI,[T($e,{tags:d.linkServerExpressions,vertical:!0,text:b(t)("addExpressions"),onChange:ee[2]||(ee[2]=Ie=>j(Ie))},null,8,["tags","text"])])):(E(),ke(se,{key:1,class:"inputs",multiple:!0,value:d.linkServerMetrics,options:d.linkMetricList,size:"small",placeholder:"Select metrics",onChange:R},null,8,["value","options"])),Te(y("span",null,[y("div",kI,[y("span",null,D(b(t)("linkClientMetrics")),1),(o.value?d.linkClientExpressions.length:d.linkClientMetrics.length)?(E(),ke(le,{key:0,placement:"left",width:400,trigger:"click"},{reference:q(()=>[y("span",{onClick:ee[3]||(ee[3]=Ie=>xe("linkClientMetricConfig"))},[T(ye,{class:"cp ml-5",iconName:"mode_edit",size:"middle"})])]),default:q(()=>[T(bu,{type:g.value,isExpression:o.value,onUpdate:Y},null,8,["type","isExpression"])]),_:1})):me("",!0)]),o.value?(E(),P("div",SI,[T($e,{tags:d.linkClientExpressions,vertical:!0,text:b(t)("addExpressions"),onChange:ee[4]||(ee[4]=Ie=>B(Ie))},null,8,["tags","text"])])):(E(),ke(se,{key:1,class:"inputs",multiple:!0,value:d.linkClientMetrics,options:d.linkMetricList,size:"small",placeholder:"Select metrics",onChange:G},null,8,["value","options"]))],512),[[Ye,b(r).entity!==b(X)[2].value]])]),y("div",xI,[y("h5",TI,D(b(t)("nodeSettings")),1),y("div",$I,D(b(t)("nodeDashboard")),1),Te(T(se,{value:d.nodeDashboard,options:d.nodeDashboards,size:"small",placeholder:"Please input a dashboard name for nodes",onChange:I,class:"inputs"},null,8,["value","options"]),[[Ye,!b(c)]]),(E(!0),P(de,null,Pe(u,(Ie,et)=>Te((E(),P("div",{key:et,class:"metric-item"},[T(se,{value:Ie.scope,options:b(b$),size:"small",placeholder:"Select a scope",onChange:st=>O(et,st),class:"item mr-5"},null,8,["value","options","onChange"]),T(se,{value:Ie.dashboard,options:d.nodeDashboards,size:"small",placeholder:"Please input a dashboard name for nodes",onChange:st=>A(et,st),class:"item mr-5"},null,8,["value","options","onChange"]),y("span",null,[T(ye,{class:"cp mr-5",iconName:"remove_circle_outline",size:"middle",onClick:st=>N(et)},null,8,["onClick"]),Te(T(ye,{class:"cp",iconName:"add_circle_outlinecontrol_point",size:"middle",onClick:z},null,512),[[Ye,et===u.length-1&&u.length<5]])])])),[[Ye,b(c)]])),128)),y("div",CI,[y("span",null,D(b(t)("nodeMetrics")),1),(o.value?d.nodeExpressions.length:d.nodeMetrics.length)?(E(),ke(le,{key:0,placement:"left",width:400,trigger:"click"},{reference:q(()=>[y("span",{onClick:ee[5]||(ee[5]=Ie=>xe("nodeMetricConfig"))},[T(ye,{class:"cp ml-5",iconName:"mode_edit",size:"middle"})])]),default:q(()=>[T(bu,{type:g.value,isExpression:o.value,onUpdate:Y},null,8,["type","isExpression"])]),_:1})):me("",!0)]),o.value?(E(),P("div",II,[T($e,{tags:d.nodeExpressions,vertical:!0,text:b(t)("addExpressions"),onChange:ee[6]||(ee[6]=Ie=>Ee(Ie))},null,8,["tags","text"])])):(E(),ke(se,{key:1,class:"inputs",multiple:!0,value:d.nodeMetrics,options:d.nodeMetricList,size:"small",placeholder:"Select metrics",onChange:re},null,8,["value","options"]))]),Te(y("div",DI,[y("h5",EI,D(b(t)("legendSettings")),1),o.value?(E(),P("span",MI,[OI,T(Re,{modelValue:w.healthy,"onUpdate:modelValue":ee[7]||(ee[7]=Ie=>w.healthy=Ie),placeholder:"Please input description",size:"small",class:"mt-5"},null,8,["modelValue"])])):me("",!0),y("div",PI,[y("span",null,D(b(t)(o.value?"unhealthyExpression":"conditions")),1),o.value?(E(),ke(be,{key:0,class:"cp",content:"The node would be red to indicate unhealthy status when the expression return greater than 0"},{default:q(()=>[y("span",null,[T(ye,{class:"icon-help ml-5",iconName:"help",size:"small"})])]),_:1})):me("",!0)]),o.value?(E(),P("div",NI,[T(Re,{modelValue:v.value.expression,"onUpdate:modelValue":ee[8]||(ee[8]=Ie=>v.value.expression=Ie),placeholder:"Please input a expression",size:"small",class:"inputs"},null,8,["modelValue"])])):(E(!0),P(de,{key:2},Pe(p.value,(Ie,et)=>(E(),P("div",{key:et},[T(se,{class:"item",value:Ie.name,options:d.nodeMetricList,size:"small",placeholder:"Select a metric",onChange:st=>$(b(gu).NAME,st,et)},null,8,["value","options","onChange"]),T(se,{class:"input-small",value:Ie.condition,options:b(w$),size:"small",placeholder:"Select a condition",onChange:st=>$(b(gu).CONDITION,st,et)},null,8,["value","options","onChange"]),T(Re,{modelValue:Ie.value,"onUpdate:modelValue":st=>Ie.value=st,placeholder:"Please input a value",type:"number",onChange:st=>$(b(gu).VALUE,st,et),size:"small",class:"item"},null,8,["modelValue","onUpdate:modelValue","onChange"]),y("span",null,[T(ye,{class:"cp delete",iconName:"remove_circle_outline",size:"middle",onClick:st=>oe(et)},null,8,["onClick"]),Te(T(ye,{class:"cp",iconName:"add_circle_outlinecontrol_point",size:"middle",onClick:Oe},null,512),[[Ye,et===p.value.length-1&&p.value.length<5]])]),Te(y("div",null,"&&",512),[[Ye,et!==p.value.length-1]])]))),128)),o.value?me("",!0):(E(),P("span",LI,[RI,T(Re,{modelValue:w.healthy,"onUpdate:modelValue":ee[9]||(ee[9]=Ie=>w.healthy=Ie),placeholder:"Please input description",size:"small",class:"mt-5"},null,8,["modelValue"])])),AI,T(Re,{modelValue:w.unhealthy,"onUpdate:modelValue":ee[10]||(ee[10]=Ie=>w.unhealthy=Ie),placeholder:"Please input description",size:"small",class:"mt-5"},null,8,["modelValue"]),T(he,{onClick:S,class:"legend-btn",size:"small",type:"primary"},{default:q(()=>[We(D(b(t)("setLegend")),1)]),_:1})],512),[[Ye,b(c)]])],64)}}});const h_=ce(FI,[["__scopeId","data-v-6f00e2d9"]]);function VI(e,s,t){e.forEach((p,v)=>p.forEach(g=>g&&(g.level=v)));const r=e.reduce((p,v)=>p.concat(v),[]),n=30,a=120,o=100,l=14,c=4;for(const p of r)p.height=5*c;let u=n,d=0;for(const p of e){d=0,u+=5*l;for(const v of p){const g=v;for(const w of s)w.source===g.id&&(w.sourceObj=g),w.target===g.id&&(w.targetObj=g);g.x=g.level*o+u,g.y=a+d+g.height/2,d+=a+g.height}}const f={width:mv(r,p=>p.x)||0+o+2*n,height:mv(r,p=>p.y)||0+a/2+2*n};return{nodes:r,layout:f,calls:f_(s,t)}}function f_(e,s){for(const[t,r]of e.entries()){const n=[r.sourceObj.x,r.sourceObj.y,r.targetObj.x,r.targetObj.y];for(const[o,l]of e.entries())t<o&&r.id!==l.id&&r.sourceObj.x===l.targetObj.x&&r.sourceObj.y===l.targetObj.y&&r.targetObj.x===l.sourceObj.x&&r.targetObj.y===l.sourceObj.y&&(r.targetObj.y===r.sourceObj.y?(n[1]=n[1]-8,n[3]=n[3]-8):r.targetObj.x===r.sourceObj.x?(n[0]=n[0]-8,n[2]=n[2]-8):(n[1]=n[1]+6,n[3]=n[3]+6,n[0]=n[0]-6,n[2]=n[2]-6));const a=p_(n[0],n[1],s,n[2],n[3],s);r.sourceX=a[0].x,r.sourceY=a[0].y,r.targetX=a[1].x,r.targetY=a[1].y}return e}function p_(e,s,t,r,n,a){const o=Math.sqrt(Math.pow(e-r,2)+Math.pow(s-n,2)),l=t*Math.abs(e-r)/o,c=t*Math.abs(s-n)/o,u=r>e?e+l:e-l,d=s>n?s-c:s+c,f=a*Math.abs(e-r)/o,p=a*Math.abs(s-n)/o,v=r>e?r-f:r+f,g=s>n?n+p:n-p;return[{x:u,y:d},{x:v,y:g}]}const v_=(e,s,t)=>e.zoom().scaleExtent([.3,10]).on("zoom",r=>{s.attr("transform",`translate(${r.transform.x+t[0]},${r.transform.y+t[1]})scale(${r.transform.k})`)}),zI=["width","height"],jI=["transform"],YI=["onMouseover","onClick","onMousedown"],GI=["x","y","href"],UI=["x","y","href"],HI=["x","y","href"],WI=["x","y"],BI=["d"],qI=["cx","cy","onClick","onMouseover"],XI={class:"arrows"},KI=y("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"16",markerHeight:"16",viewBox:"0 0 12 12",refX:"10",refY:"6",orient:"auto"},[y("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",fill:"#97B0F8"})],-1),QI=[KI],JI=y("div",{id:"tooltip"},null,-1),ZI={class:"legend"},eD=["src"],tD=["src"],nD={key:0,class:"setting"},rD={class:"tool"},iD={class:"label"},sD=["onClick"],aD=ae({__name:"Graph",props:{config:{type:Object,default:()=>({graph:{}})}},setup(e){const s=e,{t}=ge(),r=it(),n=pc(),a=Ce(),o=Be(),l=F(100),c=F(100),u=F(!1),d=F(null),f=F(null),p=F(null),v=F(!1),g=F(s.config),w=ln({x:NaN,y:NaN}),_=F([]),S=Me(()=>s.config.graph||{}),I=F(S.value.depth||2),C=F({}),$=F(null),O=F(100),A=F(),z=Me(()=>[(c.value-O.value-130)/2,100]),N=8;Or(()=>J(this,null,function*(){yield iC(),setTimeout(()=>{Y()},10)}));function Y(){return J(this,null,function*(){var we;const _e=((we=document.querySelector(".topology"))==null?void 0:we.getBoundingClientRect())||{height:40,width:0};l.value=_e.height-40,c.value=_e.width,d.value=Qi(".svg-topology"),f.value=Qi(".svg-graph"),u.value=!0;const ue=yield r.fetchServices(a.layerId);if(ue.errors){ie.error(ue.errors);return}yield R(),d.value.call(v_(c_,f.value,z.value))})}function R(){return J(this,null,function*(){n.setNode(null),n.setLink(null);const _e=yield be();u.value=!1,_e&&_e.errors&&ie.error(_e.errors),yield L()})}function L(){return J(this,null,function*(){g.value.metricMode===gt.Expression?(n.queryNodeExpressions(g.value.nodeExpressions||[]),n.getLinkExpressions(g.value.linkClientExpressions||[],ea.Client),n.getLinkExpressions(g.value.linkServerExpressions||[],ea.Server)):(n.queryNodeMetrics(g.value.nodeMetrics||[]),n.getLinkClientMetrics(g.value.linkClientMetrics||[]),n.getLinkServerMetrics(g.value.linkServerMetrics||[])),window.addEventListener("resize",Ie),yield oe(),B(),$.value=Qi("#tooltip"),st(g.value.nodeDashboard)})}function j(_e,ue,we){const Ae=fe(_e),Xe=JSON.parse(JSON.stringify(ue)).sort((Je,xn)=>Je.name.toLowerCase()<xn.name.toLowerCase()?-1:Je.name.toLowerCase()>xn.name.toLowerCase()?1:0),Ne=Xe.findIndex(Je=>Je.type==="USER");let Bt=Ne;Ne<0&&(Bt=Xe.findIndex(Je=>Je.id===Ae.id)),we.push([Xe[Bt]]),Xe.splice(Bt,1);for(const Je of we){const xn=[];for(const an of Je)for(const vt of _e){if(vt.target===an.id){const Fe=Xe.findIndex(rn=>rn.id===vt.source);Fe>-1&&(xn.push(Xe[Fe]),Xe.splice(Fe,1))}if(vt.source===an.id){const Fe=Xe.findIndex(rn=>rn.id===vt.target);Fe>-1&&(xn.push(Xe[Fe]),Xe.splice(Fe,1))}}xn.length&&we.push(xn)}if(Xe.length){const Je=Xe.map(vt=>vt.id),xn=_e.filter(vt=>Je.includes(vt.source)||Je.includes(vt.target));we=j(xn,Xe,[]).map((vt,Fe)=>vt.concat(we[Fe]))}return we}function B(){const _e=j(n.calls,n.nodes,[]);C.value=VI(_e,n.calls,N),O.value=C.value.layout.width;const ue=u_().on("drag",we=>{G(we)});setTimeout(()=>{d_(".topo-node").call(ue)},1e3)}function G(_e){if(!!A.value){for(const ue of C.value.nodes)ue.id===A.value.id&&(ue.x=_e.x,ue.y=_e.y);for(const ue of C.value.calls)if(ue.sourceObj.id===A.value.id&&(ue.sourceObj.x=_e.x,ue.sourceObj.y=_e.y),ue.targetObj.id===A.value.id&&(ue.targetObj.x=_e.x,ue.targetObj.y=_e.y),ue.targetObj.id===A.value.id||ue.sourceObj.id===A.value.id){const we=p_(ue.sourceObj.x,ue.sourceObj.y,N,ue.targetObj.x,ue.targetObj.y,N);ue.sourceX=we[0].x,ue.sourceY=we[0].y,ue.targetX=we[1].x,ue.targetY=we[1].y}C.value.calls=f_(C.value.calls,N)}}function H(_e,ue){_e.stopPropagation(),A.value=ue}function re(_e){_e.stopPropagation(),A.value=null}function fe(_e){let ue={},we=0,Ae=null;for(let Xe=0;Xe<_e.length;Xe++){let Ne=_e[Xe];ue[Ne.sourceObj.id]=(ue[Ne.sourceObj.id]||0)+1,ue[Ne.sourceObj.id]>we&&(we=ue[Ne.sourceObj.id],Ae=Ne.sourceObj),ue[Ne.targetObj.id]=(ue[Ne.targetObj.id]||0)+1,ue[Ne.targetObj.id]>we&&(we=ue[Ne.targetObj.id],Ae=Ne.targetObj)}return Ae}function oe(){return J(this,null,function*(){if(!!n.nodes.length)if(g.value.metricMode===gt.Expression){const _e=s.config.legendMQE&&s.config.legendMQE.expression;if(!_e)return;const{getExpressionQuery:ue}=Vl([_e],n.nodes),we=ue(),Ae=yield n.getNodeExpressionValue(we);Ae.errors?ie.error(Ae.errors):n.setLegendValues([_e],Ae.data)}else{const _e=s.config.legend.map(we=>we.name);if(!_e.length)return;const ue=n.nodes.map(we=>we.id);if(ue.length){const we=yield qa(_e,ue),Ae=yield n.getLegendMetrics(we);Ae.errors&&ie.error(Ae.errors)}}})}function Oe(_e){const{legend:ue,legendMQE:we}=g.value;if(g.value.metricMode===gt.Expression)return we?we.expression?Number(_e[we.expression])&&_e.isReal?_n.CUBEERROR:_n.CUBE:_n.CUBE:_n.CUBE;if(!ue)return _n.CUBE;if(!ue.length)return _n.CUBE;let Ae=!0;for(const Xe of ue)Xe.condition==="<"?Ae=Ae&&_e[Xe.name]<Number(Xe.value):Ae=Ae&&_e[Xe.name]>Number(Xe.value);return Ae&&_e.isReal?_n.CUBEERROR:_n.CUBE}function xe(_e,ue){const we=(g.value.metricMode===gt.Expression?g.value.nodeExpressions:g.value.nodeMetrics)||[],Ae=g.value.nodeMetricConfig||[],Xe=we.map((Bt,Je)=>{const xn=n.nodeMetricValue[Bt].values.find(Fe=>Fe.id===ue.id)||{},an=Ae[Je]||{},vt=er(xn.value,an);return` <div class="mb-5"><span class="grey">${an.label||Bt}: </span>${vt} ${an.unit||"unknown"}</div>`}),Ne=[`<div class="mb-5"><span class="grey">name: </span>${ue.name}</div><div class="mb-5"><span class="grey">type: </span>${ue.type||"UNKNOWN"}</div>`,...Xe].join(" ");$.value.style("top",_e.offsetY+10+"px").style("left",_e.offsetX+10+"px").style("visibility","visible").html(Ne)}function Ee(_e,ue){const we=g.value.metricMode===gt.Expression?g.value.linkClientExpressions:g.value.linkClientMetrics||[],Ae=g.value.linkServerMetricConfig||[],Xe=g.value.linkClientMetricConfig||[],Bt=(g.value.metricMode===gt.Expression?g.value.linkServerExpressions:g.value.linkServerMetrics||[]).map((an,vt)=>{const Fe=n.linkServerMetrics[an].values.find(rn=>rn.id===ue.id);if(Fe){const rn=Ae[vt]||{},$r=er(Fe.value,rn);return` <div class="mb-5"><span class="grey">${rn.label||an}: </span>${$r} ${rn.unit||""}</div>`}}),Je=we.map((an,vt)=>{const Fe=Xe[vt]||{},rn=n.linkClientMetrics[an].values.find($r=>$r.id===ue.id);if(rn){const $r=er(rn.value,Fe);return` <div class="mb-5"><span class="grey">${Fe.label||an}: </span>${$r} ${Fe.unit||""}</div>`}}),xn=[...Bt,...Je,`<div><span class="grey">${t("detectPoint")}:</span>${ue.detectPoints.join(" | ")}</div>`].join(" ");$.value.style("top",_e.offsetY+"px").style("left",_e.offsetX+"px").style("visibility","visible").html(xn)}function Z(){$.value.style("visibility","hidden")}function U(_e,ue){if(_e.stopPropagation(),Z(),n.setNode(ue),n.setLink(null),w.x=_e.offsetX,w.y=_e.offsetY,ue.layer===String(a.layerId)){st(g.value.nodeDashboard);return}_.value=[{id:"inspect",title:"Inspect",func:K},{id:"alerting",title:"Alerting",func:$e}]}function ee(_e,ue){if(_e.stopPropagation(),ue.sourceObj.layer!==a.layerId||ue.targetObj.layer!==a.layerId||(n.setNode(null),n.setLink(ue),!g.value.linkDashboard))return;const we=a.entity,Ae=a.entity===X[1].value?X[0].value:a.entity,{dashboard:Xe}=lr({name:g.value.linkDashboard,layer:a.layerId,entity:`${Ae}Relation`});if(!Xe){ie.error(`The dashboard named ${g.value.linkDashboard} doesn't exist`);return}a.setEntity(Xe.entity);const Ne=`/dashboard/related/${Xe.layer}/${Ae}Relation/${ue.sourceObj.id}/${ue.targetObj.id}/${Xe.name}`,Bt=Zt.resolve({path:Ne});window.open(Bt.href,"_blank"),a.setEntity(we)}function K(){return J(this,null,function*(){const _e=n.node.id;u.value=!0;const ue=yield n.getDepthServiceTopology([_e],Number(I.value));u.value=!1,ue&&ue.errors&&ie.error(ue.errors),yield L(),n.setNode(null),n.setLink(null)})}function se(_e){const ue=`/dashboard/${a.layerId}/${X[2].value}/${n.node.id}/${_e}`,we=Zt.resolve({path:ue});window.open(we.href,"_blank"),a.setEntity(origin)}function ye(_e){const ue=`/dashboard/${a.layerId}/${X[3].value}/${n.node.id}/${_e}`,we=Zt.resolve({path:ue});window.open(we.href,"_blank"),a.setEntity(origin)}function le(_e){const ue=`/dashboard/${a.layerId}/${X[0].value}/${n.node.id}/${_e}`,we=Zt.resolve({path:ue});window.open(we.href,"_blank"),a.setEntity(origin)}function $e(){const _e="/alerting",ue=Zt.resolve({path:_e});window.open(ue.href,"_blank")}function Re(){return J(this,null,function*(){u.value=!0,yield R(),n.setNode(null),n.setLink(null)})}function be(){return J(this,null,function*(){const _e=r.services.map(Ae=>Ae.id),ue=a.entity===X[0].value?[r.currentService.id]:_e;return yield n.getDepthServiceTopology(ue,Number(I.value))})}function he(){v.value=!v.value,a.selectWidget(s.config)}function Ie(){var ue;const _e=((ue=document.querySelector(".topology"))==null?void 0:ue.getBoundingClientRect())||{height:40,width:0};l.value=_e.height-40,c.value=_e.width}function et(_e){g.value=_e,st(_e.nodeDashboard)}function st(_e){if(_.value=[{id:"inspect",title:"Inspect",func:K},{id:"alerting",title:"Alerting",func:$e}],!!(_e&&_e.length))for(const ue of _e)ue.scope===X[0].value&&_.value.push(Q({id:"dashboard",title:"Service Dashboard",func:le},ue)),ue.scope===X[2].value&&_.value.push(Q({id:"endpoint",title:"Endpoint Dashboard",func:se},ue)),ue.scope===X[3].value&&_.value.push(Q({id:"instance",title:"Service Instance Dashboard",func:ye},ue))}function hn(){n.setNode(null),n.setLink(null),a.selectWidget(s.config)}function Sn(_e){return J(this,null,function*(){I.value=_e[0].value,R()})}return a_(()=>{window.removeEventListener("resize",Ie)}),He(()=>[r.currentService,r.currentDestService],(_e,ue)=>{ue[0].id===_e[0].id&&!ue[1]||ue[0].id===_e[0].id&&ue[1].id===_e[1].id||R()}),He(()=>o.durationTime,()=>{a.entity===X[1].value&&R()}),(_e,ue)=>{const we=Mt,Ae=Ue,Xe=Gn;return Te((E(),P("div",{ref_key:"chart",ref:p,class:"micro-topo-chart","element-loading-background":"rgba(0, 0, 0, 0)",style:ht(`height: ${l.value}px`)},[(E(),P("svg",{class:"svg-topology",width:c.value-100,height:l.value,onClick:hn},[y("g",{class:"svg-graph",transform:`translate(${b(z)[0]}, ${b(z)[1]})`},[(E(!0),P(de,null,Pe(C.value.nodes,(Ne,Bt)=>(E(),P("g",{class:"topo-node",key:Bt,onMouseout:Z,onMouseover:Je=>xe(Je,Ne),onClick:Je=>U(Je,Ne),onMousedown:Je=>H(Je,Ne),onMouseup:ue[0]||(ue[0]=Je=>re(Je))},[y("image",{width:"36",height:"36",x:Ne.x-15,y:Ne.y-18,href:Oe(Ne)},null,8,GI),y("image",{width:"28",height:"25",x:Ne.x-14,y:Ne.y-43,href:b(_n).LOCAL,style:{opacity:"0.8"}},null,8,UI),y("image",{width:"12",height:"12",x:Ne.x-6,y:Ne.y-38,href:!Ne.type||Ne.type==="N/A"?b(_n).UNDEFINED:b(_n)[Ne.type.toUpperCase().replace("-","")]},null,8,HI),y("text",{class:"node-text",x:Ne.x-Math.min(Ne.name.length,20)*6/2+6,y:Ne.y+Ne.height+8,style:{"pointer-events":"none"}},D(Ne.name.length>20?`${Ne.name.substring(0,20)}...`:Ne.name),9,WI)],40,YI))),128)),(E(!0),P(de,null,Pe(C.value.calls,(Ne,Bt)=>(E(),P("g",{key:Bt},[y("path",{class:"topo-line",d:`M${Ne.sourceX} ${Ne.sourceY} L${Ne.targetX} ${Ne.targetY}`,stroke:"#97B0F8","marker-end":"url(#arrow)"},null,8,BI),y("circle",{class:"topo-line-anchor",cx:(Ne.sourceX+Ne.targetX)/2,cy:(Ne.sourceY+Ne.targetY)/2,r:"4",fill:"#97B0F8",onClick:Je=>ee(Je,Ne),onMouseover:Je=>Ee(Je,Ne),onMouseout:Z},null,40,qI)]))),128)),y("g",XI,[(E(!0),P(de,null,Pe(C.value.calls,(Ne,Bt)=>(E(),P("defs",{key:Bt},QI))),128))])],8,jI)],8,zI)),JI,y("div",ZI,[y("div",null,[y("img",{src:b(_n).CUBE},null,8,eD),y("span",null,D(g.value.description&&g.value.description.healthy||""),1)]),y("div",null,[y("img",{src:b(_n).CUBEERROR},null,8,tD),y("span",null,D(g.value.description&&g.value.description.unhealthy||""),1)])]),v.value&&b(a).editMode?(E(),P("div",nD,[T(h_,{onUpdate:et,onUpdateNodes:R})])):me("",!0),y("div",rD,[Te(y("span",null,[y("span",iD,D(b(t)("currentDepth")),1),T(we,{class:"inputs",value:I.value,options:b(Vh),onChange:Sn},null,8,["value","options"])],512),[[Ye,b(S).showDepth]]),b(a).editMode?(E(),P("span",{key:0,class:"switch-icon ml-5",title:"Settings",onClick:he},[T(Ae,{size:"middle",iconName:"settings"})])):me("",!0),y("span",{class:"switch-icon ml-5",title:"Back to overview topology",onClick:Re},[T(Ae,{size:"middle",iconName:"keyboard_backspace"})])]),b(n).node?(E(),P("div",{key:1,class:"operations-list",style:ht({top:w.y+5+"px",left:w.x+5+"px"})},[(E(!0),P(de,null,Pe(_.value,(Ne,Bt)=>(E(),P("span",{key:Bt,onClick:Je=>Ne.func(Ne.dashboard)},D(Ne.title),9,sD))),128))],4)):me("",!0)],4)),[[Xe,u.value]])}}});const oD=ae({__name:"Sankey",props:{settings:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:s}){const t=e,r=Be(),n=pc(),a=Me(()=>o());function o(){return{tooltip:{trigger:"item",confine:!0,backgroundColor:r.theme===xt.Dark?"#333":"#fff",borderColor:r.theme===xt.Dark?"#333":"#fff",textStyle:{fontSize:12,color:r.theme===xt.Dark?"#eee":"#333"}},series:{type:"sankey",left:40,top:20,right:300,bottom:40,emphasis:{focus:"adjacency"},data:n.nodes,links:n.calls,label:{color:r.theme===xt.Dark?"#ccc":"#666",formatter:d=>d.data.name},color:["#6be6c1","#3fcfdc","#626c91","#3fbcde","#a0a7e6","#3fa9e1","#96dee8","#bf99f8"],itemStyle:{borderWidth:0},lineStyle:{color:"source",opacity:.3},tooltip:{position:"bottom",formatter:d=>d.dataType==="edge"?l(d.data):c(d.data)}}}}function l(d){const f=t.settings.metricMode===gt.Expression?t.settings.linkClientExpressions:t.settings.linkClientMetrics,p=t.settings.metricMode===gt.Expression?t.settings.linkServerExpressions:t.settings.linkServerMetrics,v=t.settings.linkServerMetricConfig||[],g=t.settings.linkClientMetricConfig||[],w=p.map((I,C)=>{const $=n.linkServerMetrics[I].values.find(O=>O.id===d.id)||{};if($){const O=v[C]||{},A=er($.value,O);return` <div class="mb-5"><span class="grey">${O.label||I}: </span>${A} ${O.unit||""}</div>`}}),_=f.map((I,C)=>{const $=g[C]||{},O=n.linkClientMetrics[I].values.find(z=>z.id===d.id)||{},A=er(O.value,$);return` <div class="mb-5"><span class="grey">${$.label||I}: </span>${A} ${$.unit||""}</div>`});return[`<div>${d.sourceObj.serviceName} -> ${d.targetObj.serviceName}</div>`,...w,..._].join(" ")}function c(d){const f=t.settings.metricMode===gt.Expression?t.settings.nodeExpressions:t.settings.nodeMetrics,p=t.settings.nodeMetricConfig||[],v=f.map((g,w)=>{const _=n.nodeMetricValue[g].values.find(C=>C.id===d.id)||{},S=p[w]||{},I=er(_.value,S);return` <div class="mb-5"><span class="grey">${S.label||g}: </span>${I} ${S.unit||""}</div>`});return[` <div><span>name: </span>${d.serviceName}</div>`,...v].join(" ")}function u(d){s("click",d)}return(d,f)=>{const p=hc;return E(),ke(p,{option:b(a),onSelect:u},null,8,["option"])}}});const lD=ce(oD,[["__scopeId","data-v-9c6b3246"]]),cD={class:"tool"},uD={class:"label"},dD={key:1,class:"settings"},hD=["onClick"],fD={key:0},pD=ae({__name:"PodTopology",props:{config:{type:Object,default:()=>({graph:{}})}},setup(e){const s=e,{t}=ge(),r=Ce(),n=it(),a=pc(),o=Be(),l=F(!1),c=F(100),u=F(100),d=F(!1),f=F(s.config),p=ln({x:NaN,y:NaN}),v=F(s.config.graph&&s.config.graph.depth||3),g=[{id:"inspect",title:"Inspect",func:S},{id:"dashboard",title:"View Dashboard",func:C},{id:"alarm",title:"View Alarm",func:I}];Or(()=>{w(n.currentPod&&n.currentPod.id),window.addEventListener("resize",_)});function w(L){return J(this,null,function*(){var G;l.value=!0;const j=yield Y(L);l.value=!1,j&&j.errors&&ie.error(j.errors);const B=((G=document.querySelector(".topology"))==null?void 0:G.getBoundingClientRect())||{height:70,width:5};c.value=B.height-70,u.value=B.width-5,f.value.metricMode===gt.Expression?(a.queryNodeExpressions(f.value.nodeExpressions||[]),a.getLinkExpressions(f.value.linkClientExpressions||[],ea.Client),a.getLinkExpressions(f.value.linkServerExpressions||[],ea.Server)):(a.getLinkClientMetrics(f.value.linkClientMetrics||[]),a.getLinkServerMetrics(f.value.linkServerMetrics||[]),a.queryNodeMetrics(f.value.nodeMetrics||[]))})}function _(){var j;const L=((j=document.querySelector(".topology"))==null?void 0:j.getBoundingClientRect())||{height:40,width:0};c.value=L.height-40,u.value=L.width}function S(){const L=a.node.id;a.setNode(null),a.setLink(null),w(L)}function I(){const L="/alarm",j=Zt.resolve({path:L});window.open(j.href,"_blank"),a.setNode(null)}function C(){const L=r.entity===X[2].value?X[2].value:X[3].value,{dashboard:j}=lr({name:f.value.nodeDashboard,layer:r.layerId,entity:L});if(!j){ie.error(`The dashboard named ${f.value.nodeDashboard} doesn't exist`);return}const B=`/dashboard/${j.layer}/${L}/${a.node.serviceId}/${a.node.id}/${j.name}`,G=Zt.resolve({path:B});window.open(G.href,"_blank"),a.setNode(null)}function $(){a.setNode(null),d.value=!d.value,r.selectWidget(s.config)}function O(L){f.value=L}function A(){w(n.currentPod.id),a.setNode(null)}function z(L){if(L.dataType==="edge"){if(a.setNode(null),a.setLink(L.data),!f.value.linkDashboard)return;const{sourceObj:j,targetObj:B}=L.data,G=r.entity===X[2].value?X[6].value:X[5].value,{dashboard:H}=lr({name:f.value.linkDashboard,layer:r.layerId,entity:G});if(!H){ie.error(`The dashboard named ${f.value.linkDashboard} doesn't exist`);return}const re=`/dashboard/${H.layer}/${G}/${j.serviceId}/${j.id}/${B.serviceId}/${B.id}/${H.name}`,fe=Zt.resolve({path:re});window.open(fe.href,"_blank");return}a.setNode(L.data),a.setLink(null),p.x=L.event.event.clientX-200,p.y=L.event.event.clientY-150}function N(L){return J(this,null,function*(){v.value=L[0].value,w(n.currentPod.id)})}function Y(L){return J(this,null,function*(){let j;switch(r.entity){case X[2].value:j=yield a.updateEndpointTopology([L],Number(v.value));break;case X[5].value:j=yield a.getInstanceTopology();break;case X[4].value:j=yield a.getInstanceTopology();break}return j})}function R(L){L.target.nodeName==="svg"&&(a.setNode(null),a.setLink(null),r.selectWidget(s.config))}return He(()=>[n.currentPod],()=>{w(n.currentPod.id),a.setNode(null),a.setLink(null)}),He(()=>[n.currentService,n.currentDestService],()=>{r.entity===X[4].value&&(w(),a.setNode(null),a.setLink(null))}),He(()=>o.durationTime,()=>{w(n.currentPod.id),a.setNode(null),a.setLink(null)}),(L,j)=>{const B=Mt,G=Ue,H=Gn;return E(),P(de,null,[y("div",cD,[Te(y("span",null,[y("span",uD,D(b(t)("currentDepth")),1),T(B,{class:"inputs",value:v.value,options:b(Vh),placeholder:"Select a option",onChange:N,size:"small"},null,8,["value","options"])],512),[[Ye,b(r).entity===b(X)[2].value&&e.config.graph&&e.config.graph.showDepth]]),b(r).editMode?(E(),P("span",{key:0,class:"switch-icon ml-5",title:"Settings",onClick:$},[T(G,{size:"middle",iconName:"settings"})])):me("",!0),y("span",{class:"switch-icon ml-5",title:"Back to overview topology",onClick:A},[T(G,{size:"middle",iconName:"keyboard_backspace"})]),d.value?(E(),P("div",dD,[T(h_,{onUpdate:O})])):me("",!0)]),Te((E(),P("div",{class:"sankey",style:ht(`height:${c.value-30}px;width:${u.value}px;`),"element-loading-background":"rgba(0, 0, 0, 0)",onClick:R},[T(lD,{onClick:z,settings:f.value},null,8,["settings"])],4)),[[H,l.value]]),b(a).node?(E(),P("div",{key:0,class:"operations-list",style:ht({top:p.y+"px",left:p.x+"px"})},[(E(),P(de,null,Pe(g,(re,fe)=>y("i",{key:fe,onClick:re.func},[["alarm","inspect"].includes(re.id)||re.id==="dashboard"&&f.value.nodeDashboard?(E(),P("span",fD,D(re.title),1)):me("",!0)],8,hD)),64))],4)):me("",!0)],64)}}});const vD=ce(pD,[["__scopeId","data-v-005ae78f"]]),mD=ae({__name:"Index",props:{config:{type:Object,default:()=>({graph:{}})}},setup(e){const s=Ce(),t=[X[0].value,X[1].value].includes(s.entity);return(r,n)=>b(t)?(E(),ke(aD,{key:0,config:e.config},null,8,["config"])):(E(),ke(vD,{key:1,config:e.config},null,8,["config"]))}}),gD={class:"topology flex-v"},yD={class:"operation"},_D=ae({__name:"Topology",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}function a(){r.setConfigPanel(!0),r.selectWidget(s.data)}return(o,l)=>{const c=Ue,u=jt;return E(),P("div",gD,[y("div",yD,[b(r).editMode?(E(),ke(u,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",null,[T(c,{iconName:"ellipsis_v",size:"middle"})])]),default:q(()=>[y("div",{class:"tools",onClick:a},[y("span",null,D(b(t)("edit")),1)]),y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0)]),T(mD,{config:s.data},null,8,["config"])])}}});const m_=ce(_D,[["__scopeId","data-v-a0a6c16e"]]);function Us(e){let s=!1;e&&e.toTheRight&&(s=!0);function t(a){return e&&zh(e.show)?e.asTable&&e.show?!1:e.show:!(a.length===1||e&&e.asTable)}function r(a,o){const l=[],c=Object.keys(a||{}).filter(d=>Array.isArray(a[d])&&a[d].length),u=[];for(const[d,f]of c.entries()){const p=JSON.parse(JSON.stringify(a[f])),v={name:f,topN:p.map((g,w)=>({key:o[w],value:g})).sort((g,w)=>w.value-g.value).filter((g,w)=>w<10)};if(e){if(e.min&&(v.min=Math.min(...a[f]).toFixed(2),d===0&&u.push({value:"min",label:"Min"})),e.max&&(v.max=Math.max(...a[f]).toFixed(2),d===0&&u.push({value:"max",label:"Max"})),e.mean){const g=a[f].reduce((w,_)=>(w+=Number(_),w),0);v.mean=(g/a[f].length).toFixed(4),d===0&&u.push({value:"mean",label:"Mean"})}e.total&&(v.total=a[f].reduce((g,w)=>(g+=Number(w),g),0).toFixed(2),d===0&&u.push({value:"total",label:"Total"}))}l.push(v)}return{source:l,headers:u}}function n(){return Be().theme===xt.Dark?S$:x$}return{showEchartsLegend:t,isRight:s,aggregations:r,chartColors:n}}const bD=e=>(Nn("data-v-c9c15d6a"),e=e(),Ln(),e),wD={key:0},kD={key:1},SD=bD(()=>y("th",null,null,-1)),xD={class:"name"},TD={class:"list"},$D={class:"value"},CD=ae({__name:"Legend",props:{data:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},intervalTime:{type:Array,default:()=>[]}},setup(e){const s=e,{t}=ge(),r=Me(()=>{const{aggregations:c}=Us(s.config);return c(s.data,s.intervalTime).source}),n=Me(()=>{const{aggregations:c}=Us(s.config);return c(s.data,s.intervalTime).headers}),a=Me(()=>Us(s.config).isRight),o=Me(()=>s.config.width?s.config.width+"px":a.value?"150px":"100%"),l=Me(()=>{const{chartColors:c}=Us(s.config);return c()});return(c,u)=>{const d=Ue,f=jt;return b(r).length&&e.config.asTable?(E(),P("div",{key:0,role:"region","aria-labelledby":"caption",tabindex:"0",style:ht(`width: ${b(o)}; maxHeight:${b(a)?"100%":130}`),class:"scroll_bar_style"},[b(r).length===1?(E(),P("table",wD,[y("thead",null,[y("tr",null,[Te(y("th",null,null,512),[[Ye,b(n).length]]),y("th",null,D(b(r)[0].name),1)])]),y("tbody",null,[(E(!0),P(de,null,Pe(b(n),p=>(E(),P("tr",{key:p.value},[y("th",null,D(p.label),1),y("td",null,D(b(r)[0][p.value]),1)]))),128))])])):(E(),P("table",kD,[y("thead",null,[y("tr",null,[SD,(E(!0),P(de,null,Pe(b(n),p=>(E(),P("th",{key:p.value},D(p.label),1))),128))])]),y("tbody",null,[(E(!0),P(de,null,Pe(b(r),(p,v)=>(E(),P("tr",{key:v},[y("th",null,[T(f,{placement:"bottom",width:230,trigger:"click"},{reference:q(()=>[y("div",xD,[T(d,{iconName:"circle",style:ht(`color: ${b(l)[v]};`)},null,8,["style"]),y("i",null,D(p.name),1)])]),default:q(()=>[y("div",TD,[y("div",$D,[y("span",null,D(b(t)("key")),1),y("span",null,D(b(t)("value")),1)]),(E(!0),P(de,null,Pe(p.topN,(g,w)=>(E(),P("div",{class:"value",key:w},[y("span",null,D(g.key),1),y("span",null,D(g.value),1)]))),128))])]),_:2},1024)]),(E(!0),P(de,null,Pe(b(n),g=>(E(),P("td",{key:g.value},D(p[g.value]),1))),128))]))),128))])]))],4)):me("",!0)}}});const g_=ce(CD,[["__scopeId","data-v-c9c15d6a"]]),ID=ae({__name:"Line",props:{data:{type:Object,default:()=>({})},intervalTime:{type:Array,default:()=>[]},config:{type:Object,default:()=>({step:!1,smooth:!1,showSymbol:!1,opacity:.4,showXAxis:!0,showYAxis:!0,smallTips:!1,showlabels:!0})}},emits:["click"],setup(e,{emit:s}){const t=e,r=Be(),n=F(!1),a=Me(()=>o());function o(){const{showEchartsLegend:c,isRight:u,chartColors:d}=Us(t.config.legend);n.value=u;const f=Object.keys(t.data||{}).filter(_=>Array.isArray(t.data[_])&&t.data[_].length),p=f.map(_=>{const S={data:t.data[_].map((I,C)=>[t.intervalTime[C],I]),name:_,type:"line",symbol:"circle",symbolSize:4,showSymbol:zh(t.config.showSymbol)?t.config.showSymbol:!0,step:t.config.step,smooth:t.config.smooth,lineStyle:{width:2,type:"solid"}};return t.config.type==="Area"&&(S.areaStyle={opacity:t.config.opacity||.4}),S}),v=d(),g={trigger:"axis",backgroundColor:r.theme===xt.Dark?"#333":"#fff",borderColor:r.theme===xt.Dark?"#333":"#fff",textStyle:{fontSize:12,color:r.theme===xt.Dark?"#eee":"#333"},enterable:!0,confine:!0,extraCssText:"max-height:85%; overflow: auto;"},w={formatter(_){return`${_[0].value[1]}`},confine:!0,extraCssText:"height: 20px; padding:0 2px;",trigger:"axis",backgroundColor:r.theme===xt.Dark?"#666":"#eee",borderColor:r.theme===xt.Dark?"#666":"#eee",textStyle:{fontSize:12,color:r.theme===xt.Dark?"#eee":"#333"}};return{color:v,tooltip:t.config.smallTips?w:g,legend:{type:"scroll",show:c(f),icon:"circle",top:0,left:0,itemWidth:12,textStyle:{color:r.theme===xt.Dark?"#fff":"#333"}},grid:{top:c(f)?35:10,left:0,right:10,bottom:5,containLabel:t.config.showlabels===void 0?!0:t.config.showlabels},xAxis:{type:"category",show:t.config.showXAxis,axisTick:{lineStyle:{color:"#c1c5ca41"},alignWithLabel:!0},splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(0,0,0,0)"}},axisLabel:{color:"#9da5b2",fontSize:"11"}},yAxis:{show:t.config.showYAxis,type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#c1c5ca41",type:"dashed"}},axisLabel:{color:"#9da5b2",fontSize:"11",show:t.config.showYAxis}},series:p}}function l(c){s("click",c)}return(c,u)=>{const d=hc;return E(),P("div",{class:Ct(["graph flex-v",n.value?"flex-h":"flex-v"])},[T(d,{option:b(a),onSelect:l,filters:e.config.filters,relatedTrace:e.config.relatedTrace,associate:e.config.associate||[]},null,8,["option","filters","relatedTrace","associate"]),T(g_,{config:e.config.legend,data:e.data,intervalTime:e.intervalTime},null,8,["config","data","intervalTime"])],2)}}});const zl=ce(ID,[["__scopeId","data-v-0a9771db"]]),DD=ae({__name:"Area",props:{data:{type:Object,default:()=>({})},intervalTime:{type:Array,default:()=>[]},config:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:s}){function t(r){s("click",r)}return(r,n)=>(E(),ke(zl,{data:e.data,intervalTime:e.intervalTime,config:e.config,onClick:t},null,8,["data","intervalTime","config"]))}}),ED=ae({__name:"Bar",props:{data:{type:Object,default:()=>({})},intervalTime:{type:Array,default:()=>[]},theme:{type:String,default:"light"},config:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:s}){const t=e,r=Be(),{showEchartsLegend:n,isRight:a,chartColors:o}=Us(t.config.legend),l=Me(()=>c());function c(){const d=Object.keys(t.data||{}).filter(v=>Array.isArray(t.data[v])&&t.data[v].length),f=d.map(v=>{if(!!t.intervalTime)return{data:t.data[v].map((g,w)=>[t.intervalTime[w],g]),name:v,type:"bar",symbol:"none",stack:"sum",lineStyle:{width:1.5,type:"dotted"},showBackground:t.config.showBackground,backgroundStyle:{color:"rgba(180, 180, 180, 0.1)"}}});return{color:o(),tooltip:{trigger:"axis",textStyle:{fontSize:12,color:"#333"},enterable:!0,confine:!0,extraCssText:"max-height:85%; overflow: auto;"},legend:{type:"scroll",show:n(d),icon:"circle",top:0,left:0,itemWidth:12,backgroundColor:r.theme===xt.Dark?"#333":"#fff",borderColor:r.theme===xt.Dark?"#333":"#fff",textStyle:{fontSize:12,color:r.theme===xt.Dark?"#eee":"#333"}},grid:{top:d.length===1?15:40,left:0,right:10,bottom:5,containLabel:!0},xAxis:{type:"category",axisTick:{lineStyle:{color:"#c1c5ca41"},alignWithLabel:!0},splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(0,0,0,0)"}},axisLabel:{color:"#9da5b2",fontSize:"11"}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#c1c5ca41",type:"dashed"}},axisLabel:{color:"#9da5b2",fontSize:"11"}},series:f}}function u(d){s("click",d)}return(d,f)=>{const p=hc;return E(),P("div",{class:Ct(["graph",b(a)?"flex-h":"flex-v"])},[T(p,{option:b(l),onSelect:u,filters:e.config.filters,associate:e.config.associate||[]},null,8,["option","filters","associate"]),T(g_,{config:e.config.legend,data:e.data,intervalTime:e.intervalTime},null,8,["config","data","intervalTime"])],2)}}});const MD=ce(ED,[["__scopeId","data-v-b56b3afa"]]),OD=ae({__name:"HeatMap",props:{data:{type:Object,default:()=>({})},intervalTime:{type:Array,default:()=>[]},config:{type:Object,default:()=>({metrics:[]})}},setup(e){const s=e,t=Me(()=>r());function r(){const a=s.config.metrics&&s.config.metrics[0];let o=[];a&&(o=s.data[a]&&s.data[a].nodes||[]);const l=(o||[]).map(f=>f[2]),c=Math.max(...l),u=Math.min(...l),d=["#fff","#FDF0F0","#FAE2E2","#F8D3D3","#F6C4C4","#F4B5B5","#F1A7A7","#EF9898","#E86C6C","#E44E4E","#E23F3F","#DF3131","#DD2222","#CE2020","#C01D1D","#B11B1B","#A21919","#851414","#761212","#671010"];return{tooltip:{position:"top"},grid:{top:15,left:0,right:10,bottom:5,containLabel:!0},xAxis:{type:"category",data:s.intervalTime,axisTick:{lineStyle:{color:"#c1c5ca"},alignWithLabel:!0},splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(0,0,0,0)"}},axisLabel:{color:"#9da5b2",fontSize:"11"}},visualMap:[{min:u,max:c,show:!1,type:"piecewise",calculable:!0,pieces:n(c,d,u)}],yAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#c1c5ca",type:"dashed"}},axisLabel:{color:"#9da5b2",fontSize:"11"},data:s.data.buckets},series:[{type:"heatmap",data:o||[],emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}function n(a,o,l){if(a<l)return[];const c=[];let u=1,d={};if(d.max=l,d.min=l,d.color=o[0],c.push(d),a&&a>=19){u=Math.floor(a/19);for(let p=1;p<20;p++)d={},p===1?d.min=l:d.min=u*(p-1),d.max=u*p,d.color=o[p],c.push(d)}const f=c.length;if(f){const p=c[f-1];p.max=a}return c}return(a,o)=>{const l=hc;return E(),ke(l,{option:b(t)},null,8,["option"])}}}),PD={key:0,class:"top-list"},ND={class:"ell tools flex-h"},LD={class:"desc"},RD={class:"calls mr-10"},AD={class:"cp mr-20"},FD={class:"operation-icon cp ml-10"},VD=["onClick"],zD=["onClick"],jD={key:1,class:"center no-data"},YD=ae({__name:"TopList",props:{data:{type:Object,default:()=>({})},config:{type:Object,default:()=>({color:"purple"})},intervalTime:{type:Array,default:()=>[]}},setup(e){const s=e,{t}=ge(),r=F(!1),n=F({type:"Trace"}),a=Me(()=>s.config.relatedTrace&&s.config.relatedTrace.refIdType||Yd[0].value),o=Me(()=>Object.keys(s.data)[0]||""),l=Me(()=>Array.isArray(s.data[o.value])&&s.data[o.value][0]&&s.data[o.value][0].value),c=Me(()=>{if(!(s.data[o.value]&&s.data[o.value].length))return 0;const f=s.data[o.value].map(p=>p.value);return Math.max.apply(null,f)});function u(f){jh(f)}function d(f){const p=pe(Q({},f),{queryOrder:r_[1].value,status:Il[2].value,id:f.refId,metricValue:[{label:s.config.metrics[0],data:f.value,value:f.name}],isReadRecords:s.config.typesOfMQE.includes(bi.RECORD_LIST)||s.config.metricTypes.includes(vi.ReadRecords)||void 0});n.value=pe(Q({},n.value),{filters:p}),r.value=!0}return(f,p)=>{const v=Ue,g=jt,w=sC,_=aC;return b(l)?(E(),P("div",PD,[(E(!0),P(de,null,Pe(e.data[b(o)],(S,I)=>(E(),P("div",{class:"chart-slow-i",key:I},[y("div",ND,[y("div",LD,[y("span",RD,D(S.value),1),y("span",AD,D(S.name),1)]),T(g,{placement:"bottom",trigger:"click"},{reference:q(()=>[y("div",FD,[T(v,{iconName:"ellipsis_v",size:"middle"})])]),default:q(()=>[y("div",{class:"operation",onClick:C=>u(S.name)},[y("span",null,D(b(t)("copy")),1)],8,VD),Te(y("div",{class:"operation",onClick:C=>d(S)},[y("span",null,D(b(t)("viewTrace")),1)],8,zD),[[Ye,b(a)===b(Yd)[0].value]])]),_:2},1024)]),T(w,{"stroke-width":6,percentage:isNaN(Number(S.value)/b(c))?0:Number(S.value)/b(c)*100,color:b(io)[e.config.color||"purple"],"show-text":!1},null,8,["percentage","color"])]))),128)),T(_,{modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=S=>r.value=S),size:"100%","destroy-on-close":!0,"before-close":()=>r.value=!1,"append-to-body":!0,title:"The Related Traces"},{default:q(()=>[T(T$,{data:n.value},null,8,["data"])]),_:1},8,["modelValue","before-close"])])):(E(),P("div",jD,"No Data"))}}});const GD=ce(YD,[["__scopeId","data-v-36f8d109"]]),UD={class:"chart-table"},HD={class:"row header flex-h"},WD={key:0,class:"value-col"},BD={key:0,class:"value-col"},qD=ae({__name:"Table",props:{data:{type:Object,default:()=>({})},config:{type:Object,default:()=>({showTableValues:!0})}},setup(e){const s=e,{t}=ge(),r=Me(()=>s.config.showTableValues?"80%":"100%"),n=Me(()=>s.config.metricTypes[0]==="readMetricsValue"?Object.keys(s.data||{}):Object.keys(s.data||{}).filter(o=>Array.isArray(s.data[o])&&s.data[o].length));return(a,o)=>(E(),P("div",UD,[y("div",HD,[y("div",{class:"name",style:ht(`width: ${b(r)}`)},D(e.config.tableHeaderCol1||b(t)("name")),5),e.config.showTableValues?(E(),P("div",WD,D(e.config.tableHeaderCol2||b(t)("value")),1)):me("",!0)]),(E(!0),P(de,null,Pe(b(n),l=>(E(),P("div",{class:"row flex-h",key:l},[y("div",{class:"name",style:ht(`width: ${b(r)}`)},D(l),5),e.config.showTableValues?(E(),P("div",BD,D(e.config.metricTypes[0]==="readMetricsValue"?e.data[l]:e.data[l][e.data[l].length-1||0]),1)):me("",!0)]))),128))]))}});const XD=ce(qD,[["__scopeId","data-v-086adfd9"]]),KD=ae({__name:"Card",props:{data:{type:Object,default:()=>({})},config:{type:Object,default:()=>({fontSize:12,showUnit:!0,textAlign:"center",metricConfig:[]})}},setup(e){const s=e,{t}=ge(),r=Me(()=>s.config.metricConfig||[]),n=Me(()=>Object.keys(s.data)[0]),a=Me(()=>Array.isArray(s.data[n.value])?s.data[n.value][0]:s.data[n.value]),o=Me(()=>r.value[0]&&encodeURIComponent(r.value[0].unit||""));return(l,c)=>b(a)!==null&&!isNaN(b(a))?(E(),P("div",{key:0,class:"chart-card",style:ht({fontSize:`${e.config.fontSize}px`,justifyContent:e.config.textAlign||"center"})},[We(D(b(a))+" ",1),Te(y("span",{class:"unit"},D(decodeURIComponent(b(o))),513),[[Ye,e.config.showUnit&&b(o)]])],4)):(E(),P("div",{key:1,class:Ct(["card-no-data",e.config.textAlign==="center"?"center":""])},D(b(t)("noData")),3))}});const Ud=ce(KD,[["__scopeId","data-v-7ce11c3b"]]);function gv(e,s){if(e.metricModes===gt.Expression)return{isLinear:!1,isAvg:!0};const t=Number(s),r=[Vt.Average,Vt.ApdexAvg,Vt.PercentageAvg],n=e.metricConfig&&e.metricConfig[t]&&e.metricConfig[t].calculation,a=[Rt.ReadMetricsValues,Rt.ReadLabeledMetricsValues].includes(e.metricTypes[t])&&!r.includes(n),o=[Rt.ReadMetricsValues,Rt.ReadLabeledMetricsValues].includes(e.metricTypes[t])&&r.includes(n);return{isLinear:a,isAvg:o}}const QD={class:"chart"},JD={key:1,class:"item flex-h"},ZD={class:"trend"},eE={class:"view-line"},tE={class:"value"},nE=ae({__name:"ColumnGraph",props:{colMetrics:{type:Array,default:()=>[]},colSubMetrics:{type:Array,default:()=>[]},config:{type:Object,default:()=>({})},intervalTime:{type:Array,default:()=>[]}},setup(e){const s=e;function t(n){const a=Number(n),o=s.config.metricConfig&&s.config.metricConfig[a]&&s.config.metricConfig[a].unit;return o?`(${encodeURIComponent(o)})`:encodeURIComponent("")}function r(n,a,o){const l=Number(a);let c="";if(o?c=s.config.metricConfig&&s.config.metricConfig[l]&&s.config.metricConfig[l].detailLabel||"":c=s.config.metricConfig&&s.config.metricConfig[l]&&s.config.metricConfig[l].label||"",c){if([Rt.ReadLabeledMetricsValues,bi.TIME_SERIES_VALUES,bi.SINGLE_VALUE].includes(s.config.metricTypes[l])){const u=(c||"").split(",").map(d=>d.replace(/^\s*|\s*$/g,""))[s.config.metricConfig[l].index||0];return encodeURIComponent(u||"")}return encodeURIComponent(c)}return encodeURIComponent(n||"")}return(n,a)=>{const o=Ue,l=jt,c=fs;return E(!0),P(de,null,Pe(e.colMetrics,(u,d)=>(E(),ke(c,{label:`${decodeURIComponent(r(u,d))} ${decodeURIComponent(t(d))}`,key:u+d,"min-width":"150"},{default:q(f=>[y("div",QD,[b(gv)(e.config,d).isLinear&&e.config.metricMode!==b(gt).Expression?(E(),ke(zl,{key:0,data:{[u]:f.row[u]&&f.row[u].values},intervalTime:e.intervalTime,config:{showXAxis:!1,showYAxis:!1,smallTips:!0,showlabels:!1}},null,8,["data","intervalTime"])):b(gv)(e.config,d).isAvg||e.config.metricMode===b(gt).Expression?(E(),P("span",JD,[T(l,{placement:"left",width:400,trigger:"click"},{reference:q(()=>[y("span",ZD,[T(o,{iconName:"timeline",size:"middle"})])]),default:q(()=>[y("div",eE,[T(zl,{data:{[decodeURIComponent(r(e.colSubMetrics[d],d,!0))||u]:f.row[e.colSubMetrics[d]||u]&&f.row[e.colSubMetrics[d]||u].values},intervalTime:e.intervalTime,config:{showXAxis:!0,showYAxis:!0,smallTips:!1,showlabels:!0}},null,8,["data","intervalTime"])])]),_:2},1024),y("span",tE,[T(Ud,{data:{[u]:f.row[u]&&f.row[u].avg},config:{textAlign:"left"}},null,8,["data"])])])):(E(),ke(Ud,{key:2,data:{[u]:f.row[u]},config:{textAlign:"left"}},null,8,["data"]))])]),_:2},1032,["label"]))),128)}}});const sf=ce(nE,[["__scopeId","data-v-fb571472"]]),rE={class:"table"},iE={class:"search"},sE={class:"list"},aE=["onClick"],oE={class:"link"},lE={key:0,class:"attributes"},cE=ae({__name:"InstanceList",props:{config:{type:Object,default:()=>({dashboardName:"",fontSize:12,i:"",metrics:[],metricTypes:[]})},intervalTime:{type:Array,default:()=>[]},needQuery:{type:Boolean,default:!1}},emits:["expressionTips"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=it(),a=Ce(),o=F(!1),l=F([]),c=10,u=F(""),d=F([]),f=F([]),p=F(t.config.metricConfig||[]),v=F(t.config.metricTypes||[]),g=F([]),w=F(t.config.metricMode);t.needQuery&&_();function _(){return J(this,null,function*(){o.value=!0;const A=yield n.getServiceInstances();if(o.value=!1,A&&A.errors){ie.error(A.errors),l.value=[],g.value=[];return}g.value=A.data.pods||[],l.value=g.value.filter((z,N)=>N<c),S(l.value)})}function S(A){return J(this,null,function*(){if(!A.length)return;const z=A.map(R=>({id:R.id,value:R.value,label:R.label,merge:R.merge,language:R.language,instanceUUID:R.instanceUUID,attributes:R.attributes}));if(t.config.metricMode===gt.Expression){I(z);return}const N=t.config.metrics||[],Y=t.config.metricTypes||[];if(N.length&&N[0]&&Y.length&&Y[0]){const R=yield Zh(z,t.config,X[3].value),L=yield a.fetchMetricValue(R);if(L.errors){ie.error(L.errors);return}const{data:j,names:B,metricConfigArr:G,metricTypesArr:H}=ef(z,L,pe(Q({},t.config),{metricConfig:p.value}));l.value=j,d.value=B,v.value=H,p.value=G;return}l.value=z,d.value=[],v.value=[],p.value=[]})}function I(A){return J(this,null,function*(){const z=t.config.expressions||[],N=t.config.subExpressions||[];if(z.length&&z[0]){const Y=yield nf(A,{metricConfig:p.value||[],expressions:z,subExpressions:N},X[3].value);l.value=Y.data,d.value=Y.names,f.value=Y.subNames,v.value=Y.metricTypesArr,p.value=Y.metricConfigArr,s("expressionTips",{tips:Y.expressionsTips,subTips:Y.subExpressionsTips});return}l.value=A,f.value=[],d.value=[],v.value=[],p.value=[],s("expressionTips",[],[])})}function C(A){const{dashboard:z}=lr({name:t.config.dashboardName,layer:a.layerId,entity:X[3].value});if(!z){ie.error("No this dashboard");return}Zt.push(`/dashboard/${z.layer}/${z.entity}/${n.currentService.id}/${A.row.id}/${z.name.split(" ").join("-")}`)}function $(A){l.value=g.value.filter((z,N)=>{if(N>=(A-1)*c&&N<A*c)return z}),S(l.value)}function O(){const A=g.value.filter(z=>z.label.includes(u.value));l.value=A.filter((z,N)=>N<c),S(l.value)}return He(()=>[...t.config.metricTypes||[],...t.config.metrics||[],...t.config.metricConfig||[],...t.config.expressions||[],...t.config.subExpressions||[],t.config.metricMode],(A,z)=>{JSON.stringify(A)!==JSON.stringify(z)&&(p.value=t.config.metricConfig,w.value=t.config.metricMode,S(l.value))}),He(()=>n.currentService,()=>{_()}),(A,z)=>{const N=Ue,Y=It,R=Yt,L=fs,j=jt,B=da,G=Di,H=Gn;return E(),P("div",rE,[y("div",iE,[T(R,{modelValue:u.value,"onUpdate:modelValue":z[0]||(z[0]=re=>u.value=re),placeholder:"Please input instance name",onChange:O,class:"inputs"},{append:q(()=>[T(Y,{onClick:O},{default:q(()=>[T(N,{size:"sm",iconName:"search"})]),_:1})]),_:1},8,["modelValue"])]),y("div",sE,[Te((E(),ke(B,{data:l.value,style:{width:"100%"}},{default:q(()=>[T(L,{label:"Service Instances",fixed:"","min-width":"320"},{default:q(re=>[y("span",{class:"link",onClick:fe=>C(re),style:ht({fontSize:`${e.config.fontSize}px`})},D(re.row.label),13,aE)]),_:1}),d.value.length?(E(),ke(sf,{key:0,intervalTime:e.intervalTime,colMetrics:d.value,colSubMetrics:f.value,config:pe(Q({},e.config),{metricConfig:p.value,metricTypes:v.value,metricMode:w.value})},null,8,["intervalTime","colMetrics","colSubMetrics","config"])):me("",!0),T(L,{label:"Attributes",fixed:"right","min-width":"100"},{default:q(re=>[T(j,{placement:"left",width:400,trigger:"click"},{reference:q(()=>[y("span",oE,D(b(r)("viewAttributes")),1)]),default:q(()=>[re.row.attributes.length?(E(),P("div",lE,[(E(!0),P(de,null,Pe(re.row.attributes,(fe,oe)=>(E(),P("div",{key:fe.name+oe,style:ht({fontSize:`${e.config.fontSize}px`}),class:"mt-5"},D(fe.name)+": "+D(fe.value||null),5))),128))])):me("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[H,o.value]])]),T(G,{class:"pagination flex-h",layout:"prev, pager, next","page-size":c,total:g.value.length,onCurrentChange:$,onPrevClick:$,onNextClick:$},null,8,["total"])])}}});const uE=ce(cE,[["__scopeId","data-v-43070a9f"]]),dE={class:"table"},hE={class:"search"},fE={class:"ml-5 tips"},pE={class:"list"},vE=["onClick"],mE=ae({__name:"EndpointList",props:{data:{type:Object},config:{type:Object,default:()=>({metrics:[],metricTypes:[],dashboardName:"",fontSize:12,i:""})},needQuery:{type:Boolean,default:!1},intervalTime:{type:Array,default:()=>[]}},emits:["expressionTips"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=it(),a=Ce(),o=F(!1),l=F([]),c=F(""),u=F([]),d=F([]),f=F(t.config.metricConfig||[]),p=F(t.config.metricTypes||[]),v=F(t.config.metricMode);t.needQuery&&g();function g(){return J(this,null,function*(){o.value=!0;const C=yield n.getEndpoints({keyword:c.value});if(o.value=!1,C.errors){ie.error(C.errors);return}l.value=C.data.pods||[],w(l.value)})}function w(C){return J(this,null,function*(){if(!C.length)return;const $=C.map(z=>({id:z.id,value:z.value,label:z.label,merge:z.merge}));if(t.config.metricMode===gt.Expression){_($);return}const O=t.config.metrics||[],A=t.config.metricTypes||[];if(O.length&&O[0]&&A.length&&A[0]){const z=yield Zh($,t.config,X[2].value),N=yield a.fetchMetricValue(z);if(N.errors){ie.error(N.errors);return}const{data:Y,names:R,metricConfigArr:L,metricTypesArr:j}=ef($,N,pe(Q({},t.config),{metricConfig:f.value}));l.value=Y,u.value=R,p.value=j,f.value=L;return}l.value=$,u.value=[],p.value=[],f.value=[]})}function _(C){return J(this,null,function*(){const $=t.config.expressions||[],O=t.config.subExpressions||[];if($.length&&$[0]){const A=yield nf(C,{metricConfig:f.value||[],expressions:$,subExpressions:O},X[2].value);l.value=A.data,u.value=A.names,d.value=A.subNames,p.value=A.metricTypesArr,f.value=A.metricConfigArr,s("expressionTips",{tips:A.expressionsTips,subTips:A.subExpressionsTips});return}l.value=C,u.value=[],d.value=[],p.value=[],f.value=[],s("expressionTips",[],[])})}function S(C){const{dashboard:$}=lr({name:t.config.dashboardName,layer:a.layerId,entity:X[2].value});if(!$){ie.error("No this dashboard");return}Zt.push(`/dashboard/${$.layer}/${$.entity}/${n.currentService.id}/${C.row.id}/${$.name}`)}function I(){return J(this,null,function*(){yield g()})}return He(()=>[...t.config.metricTypes||[],...t.config.metrics||[],...t.config.metricConfig||[],...t.config.expressions||[],...t.config.subExpressions||[],t.config.metricMode],(C,$)=>{JSON.stringify(C)!==JSON.stringify($)&&(f.value=t.config.metricConfig,v.value=t.config.metricMode,w(l.value))}),He(()=>n.currentService,()=>{g()}),(C,$)=>{const O=Ue,A=It,z=Yt,N=fs,Y=da,R=Gn;return E(),P("div",dE,[y("div",hE,[T(z,{modelValue:c.value,"onUpdate:modelValue":$[0]||($[0]=L=>c.value=L),placeholder:"Search for more endpoints",onChange:I,class:"inputs"},{append:q(()=>[T(A,{onClick:I},{default:q(()=>[T(O,{size:"middle",iconName:"search"})]),_:1})]),_:1},8,["modelValue"]),y("span",fE,D(b(r)("endpointTips")),1)]),y("div",pE,[Te((E(),ke(Y,{data:l.value,style:{width:"100%"}},{default:q(()=>[T(N,{label:"Endpoints",fixed:"","min-width":"220"},{default:q(L=>[y("span",{class:"link",onClick:j=>S(L),style:ht({fontSize:`${e.config.fontSize}px`})},D(L.row.label),13,vE)]),_:1}),u.value.length?(E(),ke(sf,{key:0,intervalTime:e.intervalTime,colMetrics:u.value,colSubMetrics:d.value,config:pe(Q({},e.config),{metricConfig:f.value,metricTypes:p.value,metricMode:v.value})},null,8,["intervalTime","colMetrics","colSubMetrics","config"])):me("",!0)]),_:1},8,["data"])),[[R,o.value]])])])}}});const gE=ce(mE,[["__scopeId","data-v-5e233e6f"]]),yE={class:"table"},_E={class:"search"},bE={class:"list"},wE=["onClick"],kE=ae({__name:"ServiceList",props:{data:{type:Object},config:{type:Object,default:()=>({dashboardName:"",fontSize:12})},intervalTime:{type:Array,default:()=>[]},isEdit:{type:Boolean,default:!1}},emits:["expressionTips"],setup(e,{emit:s}){const t=e,r=it(),n=Ce(),a=Be(),o=F(!1),l=10,c=F([]),u=F([]),d=F([]),f=F(""),p=F({}),v=F([]),g=F(t.config.metricConfig||[]),w=F(t.config.metricTypes||[]),_=F(t.config.metricMode);S();function S(){return J(this,null,function*(){o.value=!0;const Y=yield r.fetchServices(n.layerId);o.value=!1,Y.errors&&ie.error(Y.errors),v.value=r.services.sort((L,j)=>{const B=L.group.toUpperCase(),G=j.group.toUpperCase();return B<G?-1:B>G?1:0});const R=v.value.filter((L,j)=>j<l);I(R)})}function I(Y){p.value={};const R=Y.reduce((B,G)=>(G.group=G.group||"",B[G.group]?G.merge=!0:(G.merge=!1,B[G.group]=[]),B[G.group].push(G),B),{}),L=Object.values(R).flat(1),j={};for(const B of L)B.group=B.group||"",j[B.group]?j[B.group]++:j[B.group]=1,p.value[B.group]=j[B.group];c.value=L,$(c.value)}function C(Y){const{dashboard:R}=lr({name:t.config.dashboardName,layer:n.layerId,entity:X[0].value});if(!R){ie.error("No this dashboard");return}const L=`/dashboard/${R.layer}/${R.entity}/${Y.row.id}/${R.name}`;Zt.push(L)}function $(Y){return J(this,null,function*(){if(!Y.length)return;const R=Y.map(B=>({id:B.id,value:B.value,label:B.label,layers:B.layers,group:B.group,normal:B.normal,merge:B.merge,shortName:B.shortName}));if(t.config.metricMode===gt.Expression){O(R);return}const L=t.config.metrics||[],j=t.config.metricTypes||[];if(L.length&&L[0]&&j.length&&j[0]){const B=yield Zh(R,pe(Q({},t.config),{metricConfig:g.value||[]}),X[0].value),G=yield n.fetchMetricValue(B);if(G.errors){ie.error(G.errors);return}const{data:H,names:re,metricConfigArr:fe,metricTypesArr:oe}=ef(R,G,pe(Q({},t.config),{metricConfig:g.value||[]}));c.value=H,u.value=re,w.value=oe,g.value=fe;return}c.value=R,u.value=[],u.value=[],w.value=[],g.value=[]})}function O(Y){return J(this,null,function*(){const R=t.config.expressions||[],L=t.config.subExpressions||[];if(R.length&&R[0]){const j=yield nf(Y,{metricConfig:g.value||[],expressions:R,subExpressions:L},X[0].value);c.value=j.data,u.value=j.names,d.value=j.subNames,w.value=j.metricTypesArr,g.value=j.metricConfigArr,s("expressionTips",{tips:j.expressionsTips,subTips:j.subExpressionsTips});return}c.value=Y,u.value=[],d.value=[],w.value=[],g.value=[],s("expressionTips",[],[])})}function A(Y){if(!!t.config.showGroup&&Y.columnIndex===0)return Y.row.merge?{rowspan:0,colspan:0}:{rowspan:p.value[Y.row.group],colspan:1}}function z(Y){const R=v.value.filter((L,j)=>{if(j>=(Y-1)*l&&j<l*Y)return L});I(R)}function N(){const R=v.value.filter(L=>L.label.includes(f.value)).filter((L,j)=>j<l);I(R)}return He(()=>[...t.config.metricTypes||[],...t.config.metrics||[],...t.config.metricConfig||[],...t.config.expressions||[],...t.config.subExpressions||[],t.config.metricMode],(Y,R)=>{JSON.stringify(Y)!==JSON.stringify(R)&&(g.value=t.config.metricConfig,_.value=t.config.metricMode,$(c.value))}),He(()=>a.durationTime,()=>{n.entity===X[1].value&&S()}),(Y,R)=>{const L=Ue,j=It,B=Yt,G=fs,H=da,re=Di,fe=Gn;return E(),P("div",yE,[y("div",_E,[T(B,{modelValue:f.value,"onUpdate:modelValue":R[0]||(R[0]=oe=>f.value=oe),placeholder:"Please input service name",onChange:N,class:"inputs mt-5"},{append:q(()=>[T(j,{onClick:N},{default:q(()=>[T(L,{size:"sm",iconName:"search"})]),_:1})]),_:1},8,["modelValue"])]),y("div",bE,[Te((E(),ke(H,{data:c.value,style:ht([{width:"100%"},{fontSize:"14px"}]),"span-method":A,border:!0},{default:q(()=>[e.config.showGroup?(E(),ke(G,{key:0,fixed:"",label:"Service Groups","min-width":"150"},{default:q(oe=>[We(D(oe.row.group),1)]),_:1})):me("",!0),T(G,{fixed:"",label:"Service Names","min-width":"220"},{default:q(oe=>[y("span",{class:"link",style:ht({fontSize:`${e.config.fontSize}px`}),onClick:Oe=>C(oe)},D(oe.row.shortName),13,wE)]),_:1}),u.value.length?(E(),ke(sf,{key:1,intervalTime:e.intervalTime,colMetrics:u.value,colSubMetrics:d.value,config:pe(Q({},e.config),{metricConfig:g.value,metricTypes:w.value,metricMode:_.value})},null,8,["intervalTime","colMetrics","colSubMetrics","config"])):me("",!0)]),_:1},8,["data"])),[[fe,o.value]])]),T(re,{class:"pagination flex-h",layout:"prev, pager, next","page-size":l,total:b(r).services.length,onCurrentChange:z,onPrevClick:z,onNextClick:z},null,8,["total"])])}}});const SE=ce(kE,[["__scopeId","data-v-1338c73f"]]),af={Line:zl,Bar:MD,HeatMap:OD,TopList:GD,Area:DD,Table:XD,Card:Ud,EndpointList:gE,InstanceList:uE,ServiceList:SE},xE={data:{type:Object,default:()=>({widget:{},graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!1}},TE=ae({name:"Widget",components:Q({},af),props:xE,setup(e){const{t:s}=ge(),t=F(!1),r=ln({source:{}}),{data:n}=qh(e),a=Be(),o=Ce(),l=it(),c=Me(()=>e.data.graph||{}),u=Me(()=>e.data.widget||{}),d=Me(()=>Ki.includes(e.data.graph&&e.data.graph.type||"")),f=F([]);(e.needQuery||!o.currentDashboard.id)&&!d.value&&p();function p(){return J(this,null,function*(){if(e.data.metricMode===gt.Expression){t.value=!0;const O={metrics:e.data.expressions||[],metricConfig:e.data.metricConfig||[]},A=(yield tf(O))||{};t.value=!1,r.source=A.source||{},f.value=A.typesOfMQE;return}const I=yield Qh(Q({},e.data));if(!I){r.source={};return}t.value=!0;const C=yield o.fetchMetricValue(I);if(t.value=!1,!C)return;const $={metrics:e.data.metrics||[],metricTypes:e.data.metricTypes||[],metricConfig:e.data.metricConfig||[]};r.source=yield Jh(C,$)})}function v(){o.removeControls(e.data)}function g(){o.setConfigPanel(!0),o.selectWidget(e.data),e.activeIndex?o.activeGridItem(e.activeIndex):o.activeGridItem(e.data.i)}function w(S){const{widgets:I}=lr(o.currentDashboard),C=e.data.associate&&e.data.associate||[];for(const $ of C){const O=I.find(A=>A.id===$.widgetId);O&&(O.filters={dataIndex:S.dataIndex,sourceId:e.data.id||""},o.setWidget(O))}}function _(){o.setWidgetLink(!0),o.selectWidget(e.data)}return He(()=>[e.data.metricTypes,e.data.metrics,e.data.expressions],()=>{if(!o.selectedGrid||e.data.i!==o.selectedGrid.i)return;const S=o.selectedGrid.graph||{};Ki.includes(S.type)||d.value||p()}),He(()=>[l.currentService,l.currentDestService],()=>{d.value||[X[0].value,X[4].value].includes(o.entity)&&p()}),He(()=>[l.currentPod,l.currentDestPod],()=>{[X[0].value,X[7].value,X[8].value].includes(o.entity)||d.value||p()}),He(()=>[l.currentProcess,l.currentDestProcess],()=>{d.value||[X[7].value,X[8].value].includes(o.entity)&&p()}),He(()=>a.durationTime,()=>{d.value||o.entity===X[1].value&&p()}),{state:r,appStore:a,removeWidget:v,generateLink:_,editConfig:g,data:n,loading:t,dashboardStore:o,t:s,graph:c,widget:u,typesOfMQE:f,clickHandle:w}}});const $E={class:"widget"},CE={class:"header flex-h"},IE={key:0,class:"body"},DE={key:1,class:"no-data"};function EE(e,s,t,r,n,a){const o=Ue,l=Ei,c=jt,u=Gn;return E(),P("div",$E,[y("div",CE,[y("div",null,[y("span",null,D(e.widget.title||""),1)]),y("div",null,[T(l,{content:e.widget.tips||""},{default:q(()=>[y("span",null,[Te(T(o,{iconName:"info_outline",size:"sm",class:"operation"},null,512),[[Ye,e.widget.tips]])])]),_:1},8,["content"]),T(c,{placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",null,[T(o,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[e.dashboardStore.editMode?(E(),P("div",{key:0,class:"tools",onClick:s[0]||(s[0]=(...d)=>e.editConfig&&e.editConfig(...d))},[y("span",null,D(e.t("edit")),1)])):me("",!0),e.dashboardStore.editMode?(E(),P("div",{key:1,class:"tools",onClick:s[1]||(s[1]=(...d)=>e.removeWidget&&e.removeWidget(...d))},[y("span",null,D(e.t("delete")),1)])):me("",!0),y("div",{class:"tools",onClick:s[2]||(s[2]=(...d)=>e.generateLink&&e.generateLink(...d))},[y("span",null,D(e.t("generateLink")),1)])]),_:1})])]),e.graph.type?Te((E(),P("div",IE,[(E(),ke($i(e.graph.type),{intervalTime:e.appStore.intervalTime,data:e.state.source,config:pe(Q({},e.data.graph),{metrics:e.data.metrics||[""],metricTypes:e.data.metricTypes||[""],i:e.data.i,id:e.data.id,metricConfig:e.data.metricConfig||[],filters:e.data.filters||{},relatedTrace:e.data.relatedTrace||{},associate:e.data.associate||[],metricMode:e.data.metricMode,expressions:e.data.expressions||[],typesOfMQE:e.typesOfMQE||[],subExpressions:e.data.subExpressions||[],subTypesOfMQE:e.data.subTypesOfMQE||[]}),needQuery:e.needQuery,onClick:e.clickHandle},null,8,["intervalTime","data","config","needQuery","onClick"]))])),[[u,e.loading]]):(E(),P("div",DE,D(e.t("noGraph")),1))])}const y_=ce(TE,[["render",EE],["__scopeId","data-v-6460b4bf"]]),ME=e=>(Nn("data-v-aedcf573"),e=e(),Ln(),e),OE={class:"flex-h row"},PE={key:0,class:"mr-10"},NE={class:"grey mr-5"},LE={key:1,class:"mr-10"},RE={class:"grey mr-5"},AE={key:2,class:"mr-10"},FE={class:"grey mr-5"},VE={class:"mr-10"},zE={class:"grey mr-5"},jE={class:"flex-h row"},YE={class:"mr-10"},GE={class:"grey mr-5"},UE={class:"mr-10"},HE={class:"sm b grey mr-5"},WE=ME(()=>y("span",{class:"grey mr-5"},"-",-1)),BE={class:"flex-h"},qE=ae({__name:"Filter",props:{needQuery:{type:Boolean,default:!0},data:{type:Object,default:()=>({graph:{}})}},setup(e){const s=e,t=ln(s.data.filters||{}),r=F(t.traceId||""),{t:n}=ge(),a=Be(),o=it(),l=Ce(),c=$$(),u=F(t.duration||a.durationTime),d=F(),f=F(),p=F([]),v=F([]),g=ln({status:t.status==="ERROR"?Il[2]:Il[0],instance:{value:"0",label:"All"},endpoint:{value:"0",label:"All"},service:{value:"",label:""}});t.queryOrder&&c.setTraceCondition({queryOrder:t.queryOrder}),s.needQuery&&w();function w(){return J(this,null,function*(){u.value=t.duration||a.durationTime,l.entity===X[1].value&&(yield _()),l.entity===X[2].value&&(yield I()),l.entity===X[3].value&&(yield S()),l.entity===X[0].value&&(yield I(),yield S()),yield O()})}function _(){return J(this,null,function*(){const R=yield c.getServices(l.layerId);if(R.errors){ie.error(R.errors);return}g.service=C(c.services)||c.services[0],S(g.service.id),I(g.service.id)})}function S(R,L){return J(this,null,function*(){const j=yield c.getEndpoints(R,L);if(j.errors){ie.error(j.errors);return}g.endpoint=C(c.endpoints)||c.endpoints[0]})}function I(R){return J(this,null,function*(){const L=yield c.getInstances(R);if(L.errors){ie.error(L.errors);return}g.instance=C(c.instances)||c.instances[0]})}function C(R){let L;return s.data.filters&&s.data.filters.id&&(L=R.find(j=>{var B;return j.id===((B=s.data.filters)==null?void 0:B.id)})),L}function $(){let R={traceState:g.status.value||"ALL",tags:v.value.length?v.value:void 0,queryOrder:c.conditions.queryOrder||r_[1].value,queryDuration:u.value,minTraceDuration:Number(d.value),maxTraceDuration:Number(f.value),traceId:r.value||void 0,paging:{pageNum:1,pageSize:20}};if(s.data.filters&&s.data.filters.id)return R=pe(Q({},R),{serviceId:s.data.filters.id||void 0,endpointId:g.endpoint.id||void 0,serviceInstanceId:g.instance.id||void 0}),R;let L="",j="";return l.entity===X[2].value&&(L=o.currentPod.id),l.entity===X[3].value&&(j=o.currentPod.id),R=pe(Q({},R),{serviceId:o.currentService?o.currentService.id:g.service.id,endpointId:L||g.endpoint.id||void 0,serviceInstanceId:j||g.instance.id||void 0}),R}function O(){c.setTraceCondition($()),A()}function A(){return J(this,null,function*(){const R=yield c.getTraces();R&&R.errors&&ie.error(R.errors)})}function z(R,L){g[R]=L[0],R==="service"&&(S(g.service.id),I(g.service.id))}function N(R){p.value=R.tagsList,v.value=R.tagsMap}function Y(R){return J(this,null,function*(){const L=yield c.getEndpoints(g.service.id,R);L.errors&&ie.error(L.errors)})}return ha(()=>{c.resetState();const R=s.data;delete R.filters,l.setWidget(R)}),He(()=>[o.currentPod],()=>{l.entity!==X[0].value&&w()}),He(()=>[o.currentService],()=>{l.entity===X[0].value&&w()}),He(()=>a.durationTime,()=>{u.value=a.durationTime,l.entity===X[1].value&&w()}),He(()=>s.data.filters,(R,L)=>{!s.data.filters||JSON.stringify(R)!==JSON.stringify(L)&&(r.value=s.data.filters.traceId||"",u.value=s.data.filters.duration||a.durationTime,w())}),(R,L)=>{const j=Mt,B=It,G=Yt;return E(),P(de,null,[y("div",OE,[b(l).entity===b(X)[1].value?(E(),P("div",PE,[y("span",NE,D(b(n)("service"))+":",1),T(j,{size:"small",value:g.service.value,options:b(c).services,placeholder:"Select a service",onChange:L[0]||(L[0]=H=>z("service",H))},null,8,["value","options"])])):me("",!0),b(l).entity!==b(X)[3].value?(E(),P("div",LE,[y("span",RE,D(b(n)("instance"))+":",1),T(j,{size:"small",value:g.instance.value,options:b(c).instances,placeholder:"Select a instance",onChange:L[1]||(L[1]=H=>z("instance",H))},null,8,["value","options"])])):me("",!0),b(l).entity!==b(X)[2].value?(E(),P("div",AE,[y("span",FE,D(b(n)("endpoint"))+":",1),T(j,{size:"small",value:g.endpoint.value,options:b(c).endpoints,placeholder:"Select a endpoint",isRemote:!0,onChange:L[2]||(L[2]=H=>z("endpoint",H)),onQuery:Y},null,8,["value","options"])])):me("",!0),y("div",VE,[y("span",zE,D(b(n)("status"))+":",1),T(j,{size:"small",value:g.status.value,options:b(Il),placeholder:"Select a status",onChange:L[3]||(L[3]=H=>z("status",H))},null,8,["value","options"])]),T(B,{size:"small",type:"primary",onClick:O,class:"search-btn"},{default:q(()=>[We(D(b(n)("search")),1)]),_:1})]),y("div",jE,[y("div",YE,[y("span",GE,D(b(n)("traceID"))+":",1),T(G,{size:"small",modelValue:r.value,"onUpdate:modelValue":L[4]||(L[4]=H=>r.value=H),class:"traceId"},null,8,["modelValue"])]),y("div",UE,[y("span",HE,D(b(n)("duration"))+":",1),T(G,{size:"small",class:"inputs mr-5",modelValue:d.value,"onUpdate:modelValue":L[5]||(L[5]=H=>d.value=H),type:"number"},null,8,["modelValue"]),WE,T(G,{size:"small",class:"inputs",modelValue:f.value,"onUpdate:modelValue":L[6]||(L[6]=H=>f.value=H),type:"number"},null,8,["modelValue"])])]),y("div",BE,[T(Yh,{type:"TRACE",onUpdate:N})])],64)}}});const XE=ce(qE,[["__scopeId","data-v-aedcf573"]]),KE={class:"trace-wrapper flex-v"},QE={class:"delete cp"},JE={class:"header"},ZE={class:"trace flex-h"},eM=ae({__name:"Trace",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e;o_("options",s.data);const{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",KE,[b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",QE,[T(l,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),y("div",JE,[T(XE,{needQuery:e.needQuery,data:e.data},null,8,["needQuery","data"])]),y("div",ZE,[T(C$),T(I$)])])}}});const __=ce(eM,[["__scopeId","data-v-4f8d6c8d"]]),tM=ni({id:"profile",state:()=>({endpoints:[{value:"",label:"All"}],taskEndpoints:[{value:"",label:"All"}],condition:{serviceId:"",endpointName:""},taskList:[],segmentList:[],currentTask:{},currentSegment:{},segmentSpans:[],currentSpan:{},analyzeTrees:[],taskLogs:[],highlightTop:!0}),actions:{setConditions(e){this.condition=Q(Q({},this.condition),e)},setCurrentTask(e){this.currentTask=e||{},this.analyzeTrees=[]},setSegmentSpans(e){this.currentSpan=e[0]||{},this.segmentSpans=e},setCurrentSpan(e){this.currentSpan=e,this.analyzeTrees=[]},setCurrentSegment(e){this.currentSegment=e,this.segmentSpans=e.spans||[],e.spans?this.currentSpan=e.spans[0]||{}:this.currentSpan={},this.analyzeTrees=[]},setHighlightTop(){this.highlightTop=!this.highlightTop},getEndpoints(e,s){return J(this,null,function*(){const t=yield mt.query("queryEndpoints").params({serviceId:e,duration:Be().durationTime,keyword:s||""});return t.data.errors||(this.endpoints=t.data.data.pods||[]),t.data})},getTaskEndpoints(e,s){return J(this,null,function*(){const t=yield mt.query("queryEndpoints").params({serviceId:e,duration:Be().durationTime,keyword:s||""});return t.data.errors||(this.taskEndpoints=[{value:"",label:"All"},...t.data.data.pods]),t.data})},getTaskList(){return J(this,null,function*(){const e=yield mt.query("getProfileTaskList").params(this.condition);if(e.data.errors)return e.data;const s=e.data.data.taskList||[];return this.taskList=s,this.currentTask=s[0]||{},s.length?(this.getSegmentList({taskID:s[0].id}),e.data):(this.segmentList=[],this.segmentSpans=[],this.analyzeTrees=[],e.data)})},getSegmentList(e){return J(this,null,function*(){if(!e.taskID)return new Promise(r=>r({}));const s=yield mt.query("getProfileTaskSegmentList").params(e);if(s.data.errors)return this.segmentList=[],s.data;const{segmentList:t}=s.data.data;return this.segmentList=t||[],t.length?(t[0]?(this.currentSegment=t[0],this.getSegmentSpans(t[0].segmentId)):this.currentSegment={},s.data):(this.segmentSpans=[],this.analyzeTrees=[],s.data)})},getSegmentSpans(e){return J(this,null,function*(){if(!(e&&e.segmentId))return new Promise(n=>n({}));const s=yield mt.query("queryProfileSegment").params(e);if(s.data.errors)return this.segmentSpans=[],s.data;const{segment:t}=s.data.data;if(!t)return this.segmentSpans=[],this.analyzeTrees=[],s.data;if(this.segmentSpans=t.spans.map(n=>{var a;return pe(Q({},n),{segmentId:(a=this.currentSegment)==null?void 0:a.segmentId,traceId:this.currentSegment.traceIds[0]})}),!(t.spans&&t.spans.length))return this.analyzeTrees=[],s.data;const r=t.spans.length-1||0;return this.currentSpan=t.spans[r],s.data})},getProfileAnalyze(e){return J(this,null,function*(){if(!e.length)return new Promise(n=>n({}));const s=yield mt.query("getProfileAnalyze").params({queries:e});if(s.data.errors)return this.analyzeTrees=[],s.data;const{analyze:t,tip:r}=s.data.data;return r?(this.analyzeTrees=[],s.data):t?(this.analyzeTrees=t.trees,s.data):(this.analyzeTrees=[],s.data)})},createTask(e){return J(this,null,function*(){const s=yield mt.query("saveProfileTask").params({creationRequest:e});return s.data.errors||this.getTaskList(),s.data})},getTaskLogs(e){return J(this,null,function*(){const s=yield mt.query("getProfileTaskLogs").params(e);return s.data.errors||(this.taskLogs=s.data.data.taskLogs),s.data})}}});function vs(){return tM(ri)}const nM=[{label:"Include Children",value:"include"},{label:"Exclude Children",value:"exclude"}],di={serviceSource:[{key:"",label:"None"}],monitorTimeEn:[{value:"0",label:"monitor now"},{value:"1",label:"set start time"}],monitorTimeCn:[{value:"0",label:"此刻"},{value:"1",label:"设置时间"}],monitorDuration:[{value:"5",label:"5 min"},{value:"10",label:"10 min"},{value:"15",label:"15 min"}],dumpPeriod:[{value:"10",label:"10 ms"},{value:"20",label:"20 ms"},{value:"50",label:"50 ms"},{value:"100",label:"100 ms"}],maxSamplingCount:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"}]},rM={class:"profile-task"},iM={class:"label"},sM={class:"label"},aM={class:"date"},oM={class:"label"},lM={class:"label"},cM={class:"label"},uM={class:"label"},dM=ae({__name:"NewTask",emits:["close"],setup(e,{emit:s}){const t=vs(),r=it(),n=Be(),{t:a}=ge(),o=F(""),l=F(di.monitorTimeEn[0].value),c=F(di.monitorDuration[0].value),u=F(n.durationRow.start),d=F(0),f=F(di.dumpPeriod[0].value),p=F(di.maxSamplingCount[0].value);function v(O){return J(this,null,function*(){if(!r.currentService)return;const A=r.currentService.id,z=yield t.getEndpoints(A,O);if(z.errors){ie.error(z.errors);return}o.value=t.taskEndpoints[0].value})}function g(O){l.value=O}function w(O){c.value=O}function _(O){f.value=O}function S(O){p.value=O[0].value}function I(O){o.value=O[0].value}function C(){return J(this,null,function*(){s("close");const O=l.value==="0"?new Date:u.value,A={serviceId:r.currentService.id,endpointName:o.value,startTime:O.getTime(),duration:Number(c.value),minDurationThreshold:Number(d.value),dumpPeriod:Number(f.value),maxSamplingCount:Number(p.value)},z=yield t.createTask(A);if(z.errors){ie.error(z.errors);return}const{tip:N}=z.data;if(N){ie.error(N);return}ie.success("Task created successfully")})}function $(O){u.value=O}return(O,A)=>{const z=Mt,N=Gh,Y=dc,R=l_,L=It;return E(),P("div",rM,[y("div",null,[y("div",iM,D(b(a)("endpointName")),1),T(z,{class:"profile-input",size:"small",value:o.value,options:b(t).endpoints,placeholder:"Select a endpoint",isRemote:!0,onChange:I,onQuery:v},null,8,["value","options"])]),y("div",null,[y("div",sM,D(b(a)("monitorTime")),1),y("div",null,[T(N,{class:"mb-5",value:l.value,options:b(di).monitorTimeEn,onChange:g},null,8,["value","options"]),y("span",aM,[T(Y,{value:u.value,position:"bottom",format:"YYYY-MM-DD HH:mm:ss",onInput:$},null,8,["value"])])])]),y("div",null,[y("div",oM,D(b(a)("monitorDuration")),1),T(N,{class:"mb-5",value:c.value,options:b(di).monitorDuration,onChange:w},null,8,["value","options"])]),y("div",null,[y("div",lM,D(b(a)("minThreshold"))+" (ms)",1),T(R,{size:"small",class:"profile-input",min:0,modelValue:d.value,"onUpdate:modelValue":A[0]||(A[0]=j=>d.value=j)},null,8,["modelValue"])]),y("div",null,[y("div",cM,D(b(a)("dumpPeriod")),1),T(N,{class:"mb-5",value:f.value,options:b(di).dumpPeriod,onChange:_},null,8,["value","options"])]),y("div",null,[y("div",uM,D(b(a)("maxSamplingCount")),1),T(z,{size:"small",value:p.value,options:b(di).maxSamplingCount,placeholder:"Select a data",onChange:S,class:"profile-input"},null,8,["value","options"])]),y("div",null,[T(L,{onClick:C,type:"primary",class:"create-task-btn"},{default:q(()=>[We(D(b(a)("createTask")),1)]),_:1})])])}}});const hM=ce(dM,[["__scopeId","data-v-8975fec3"]]),fM={class:"flex-h header"},pM={class:"mr-10"},vM={class:"grey mr-5"},mM=ae({__name:"Header",props:{needQuery:{type:Boolean,default:!0}},setup(e){const s=e,t=vs(),r=Be(),n=it(),a=Ce(),{t:o}=ge(),l=F(""),c=F(!1);s.needQuery&&(f(),u(""));function u(v){return J(this,null,function*(){if(!n.currentService)return;const g=n.currentService.id,w=yield t.getEndpoints(g,v);if(w.errors){ie.error(w.errors);return}l.value=t.endpoints[0].value})}function d(v){l.value=v[0].value}function f(){return J(this,null,function*(){t.setConditions({serviceId:n.currentService&&n.currentService.id||"",endpointName:l.value});const v=yield t.getTaskList();v.errors&&ie.error(v.errors)})}function p(){c.value=!0}return He(()=>n.currentService,()=>{f()}),He(()=>r.durationTime,()=>{a.entity===X[1].value&&f()}),(v,g)=>{const w=Mt,_=It,S=Mi;return E(),P(de,null,[y("div",fM,[y("div",pM,[y("span",vM,D(b(o)("endpointName"))+":",1),T(w,{class:"name",size:"small",value:l.value,options:b(t).endpoints,placeholder:"Select a endpoint",isRemote:!0,onChange:d,onQuery:u},null,8,["value","options"])]),T(_,{class:"search-btn",size:"small",type:"primary",onClick:f},{default:q(()=>[We(D(b(o)("search")),1)]),_:1}),T(_,{class:"search-btn",size:"small",onClick:p},{default:q(()=>[We(D(b(o)("newTask")),1)]),_:1})]),T(S,{modelValue:c.value,"onUpdate:modelValue":g[1]||(g[1]=I=>c.value=I),"destroy-on-close":!0,fullscreen:"",onClosed:g[2]||(g[2]=I=>c.value=!1)},{default:q(()=>[T(hM,{onClose:g[0]||(g[0]=I=>c.value=!1)})]),_:1},8,["modelValue"])],64)}}});const gM=ce(mM,[["__scopeId","data-v-767cd10e"]]),yM={class:"profile-task-list flex-v"},_M={class:"profile-task-wrapper flex-v"},bM={class:"profile-t-tool flex-h"},wM={class:"profile-t-wrapper"},kM={class:"profile-t"},SM=["onClick"],xM={class:"ell"},TM=["onClick"],$M={class:"grey ell sm"},CM={class:"mr-10 sm"},IM={class:"mr-10 sm"},DM={key:0,class:"profile-detail flex-v"},EM={class:"mb-10"},MM={class:"mb-10 clear item"},OM={class:"g-sm-4 grey"},PM={class:"g-sm-8 wba"},NM={class:"mb-10 clear item"},LM={class:"g-sm-4 grey"},RM={class:"g-sm-8 wba"},AM={class:"mb-10 clear item"},FM={class:"g-sm-4 grey"},VM={class:"g-sm-8 wba"},zM={class:"mb-10 clear item"},jM={class:"g-sm-4 grey"},YM={class:"g-sm-8 wba"},GM={class:"mb-10 clear item"},UM={class:"g-sm-4 grey"},HM={class:"g-sm-8 wba"},WM={class:"mb-10 clear item"},BM={class:"g-sm-4 grey"},qM={class:"g-sm-8 wba"},XM={class:"mb-10 clear item"},KM={class:"g-sm-4 grey"},QM={class:"g-sm-8 wba"},JM={class:"mb-10 sm"},ZM={class:"mr-10 grey"},eO={class:"mr-10 grey"},tO={class:"mr-20"},nO={class:"mr-10 grey"},rO=ae({__name:"TaskList",setup(e){const{t:s}=ge(),t=vs(),r=it(),n=F(!1),a=F(""),o=F({});function l(u){return J(this,null,function*(){t.setCurrentSegment({}),t.setCurrentTask(u);const d=yield t.getSegmentList({taskID:u.id});d.errors&&ie.error(d.errors)})}function c(u,d){return J(this,null,function*(){window.event?window.event.cancelBubble=!0:u.stopPropagation(),n.value=!0,t.setCurrentTask(d),a.value=(r.services.filter(p=>p.id===d.serviceId)[0]||{}).label;const f=yield t.getTaskLogs({taskID:d.id});if(f.errors){ie.error(f.errors);return}d.logs=t.taskLogs,o.value={};for(const p of d.logs)o.value[p.instanceName]?o.value[p.instanceName].push({operationType:p.operationType,operationTime:p.operationTime}):o.value[p.instanceName]=[{operationType:p.operationType,operationTime:p.operationTime}];t.setCurrentTask(d)})}return(u,d)=>{const f=Ue,p=Mi;return E(),P(de,null,[y("div",yM,[y("div",_M,[y("div",bM,D(b(s)("taskList")),1),y("div",wM,[Te(y("div",{class:"no-data"},D(b(s)("noData")),513),[[Ye,!b(t).taskList.length]]),y("table",kM,[(E(!0),P(de,null,Pe(b(t).taskList,(v,g)=>(E(),P("tr",{class:"profile-tr cp",onClick:w=>l(v),key:g},[y("td",{class:Ct(["profile-td",{selected:b(t).currentTask&&b(t).currentTask.id===v.id}])},[y("div",xM,[y("span",null,D(v.endpointName),1),y("a",{class:"profile-btn r",onClick:w=>c(w,v)},[T(f,{iconName:"view",size:"middle"})],8,TM)]),y("div",$M,[y("span",CM,D(b(on)(v.startTime)),1),y("span",IM,D(b(on)(v.startTime+v.duration*60*1e3)),1)])],2)],8,SM))),128))])])])]),T(p,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=v=>n.value=v),"destroy-on-close":!0,fullscreen:"",onClosed:d[1]||(d[1]=v=>n.value=!1)},{default:q(()=>[b(t).currentTask?(E(),P("div",DM,[y("div",null,[y("h5",EM,D(b(s)("task"))+".",1),y("div",MM,[y("span",OM,D(b(s)("service"))+":",1),y("span",PM,D(a.value),1)]),y("div",NM,[y("span",LM,D(b(s)("endpoint"))+":",1),y("span",RM,D(b(t).currentTask.endpointName),1)]),y("div",AM,[y("span",FM,D(b(s)("monitorTime"))+":",1),y("span",VM,D(b(on)(b(t).currentTask.startTime)),1)]),y("div",zM,[y("span",jM,D(b(s)("monitorDuration"))+":",1),y("span",YM,D(b(t).currentTask.duration)+" min",1)]),y("div",GM,[y("span",UM,D(b(s)("minThreshold"))+":",1),y("span",HM,D(b(t).currentTask.minDurationThreshold)+" ms ",1)]),y("div",WM,[y("span",BM,D(b(s)("dumpPeriod"))+":",1),y("span",qM,D(b(t).currentTask.dumpPeriod),1)]),y("div",XM,[y("span",KM,D(b(s)("maxSamplingCount"))+":",1),y("span",QM,D(b(t).currentTask.maxSamplingCount),1)])]),y("div",null,[Te(y("h5",{class:"mb-10 mt-10"},D(b(s)("logs"))+". ",513),[[Ye,b(t).currentTask.logs&&b(t).currentTask.logs.length]]),(E(!0),P(de,null,Pe(Object.keys(o.value),(v,g)=>(E(),P("div",{class:"log-item",key:g},[y("div",JM,[y("span",ZM,D(b(s)("instance"))+":",1),y("span",null,D(v),1)]),(E(!0),P(de,null,Pe(o.value[v],(w,_)=>(E(),P("div",{key:_},[y("span",eO,D(b(s)("operationType"))+":",1),y("span",tO,D(w.operationType),1),y("span",nO,D(b(s)("time"))+":",1),y("span",null,D(b(on)(w.operationTime)),1)]))),128))]))),128))])])):me("",!0)]),_:1},8,["modelValue"])],64)}}});const iO=ce(rO,[["__scopeId","data-v-bd6fcbac"]]),sO={class:"profile-trace-wrapper profile-segment flex-v"},aO={class:"profile-t-tool flex-h"},oO={class:"profile-t-wrapper"},lO={class:"profile-t"},cO=["onClick"],uO={class:"b"},dO={class:"grey ell sm"},hO={class:"tag mr-10 sm"},fO=ae({__name:"SegmentList",setup(e){const{t:s}=ge(),t=vs(),r=Me(()=>t.currentSegment&&t.currentSegment.spans&&t.currentSegment.spans.length&&t.currentSegment.spans[0].segmentId||"");function n(a){return J(this,null,function*(){t.setCurrentSegment(a),t.setSegmentSpans(a.spans)})}return(a,o)=>(E(),P("div",sO,[y("div",aO,D(b(s)("sampledTraces")),1),y("div",oO,[Te(y("div",{class:"no-data"},D(b(s)("noData")),513),[[Ye,!b(t).segmentList.length]]),y("table",lO,[(E(!0),P(de,null,Pe(b(t).segmentList,(l,c)=>(E(),P("tr",{class:"profile-tr cp",onClick:u=>n(l),key:c},[y("td",{class:Ct(["profile-td",{selected:b(r)===l.spans[0].segmentId}])},[y("div",{class:Ct(["ell mb-5",{blue:!l.isError,red:l.isError}])},[y("span",uO,D(l.endpointNames[0]),1)],2),y("div",dO,[y("span",hO,D(l.duration)+" ms ",1),We(" "+D(b(on)(parseInt(l.start))),1)])],2)],8,cO))),128))])])]))}});const pO=ce(fO,[["__scopeId","data-v-1a74e991"]]),vO=e=>(Nn("data-v-7d65ab2f"),e=e(),Ln(),e),mO={key:0,class:"profile-trace-dashboard"},gO={class:"profile-trace-detail-wrapper"},yO=vO(()=>y("label",null,"Trace ID",-1)),_O={class:"profile-table"},bO=ae({__name:"SpanTree",emits:["loading"],setup(e,{emit:s}){const{t}=ge(),r=vs(),n=F("include"),a=F(""),o=F([]);function l(f){r.setCurrentSpan(f)}function c(f){n.value=f[0].value,d()}function u(){return J(this,null,function*(){if(!r.currentSpan.profiled){ie.info("It's a un-profiled span");return}s("loading",!0),d();const f=o.value.map(v=>({segmentId:r.currentSpan.segmentId,timeRange:v})),p=yield r.getProfileAnalyze(f);s("loading",!1),p.errors&&ie.error(p.errors),p.tip&&(a.value=p.tip)})}function d(){if(n.value==="include")o.value=[{start:r.currentSpan.startTime,end:r.currentSpan.endTime}];else{const{children:f,startTime:p,endTime:v}=r.currentSpan;let g=[];if(!f||!f.length){o.value=[{start:p,end:v}];return}for(const w of f)g.push({start:p,end:w.startTime},{start:w.endTime,end:v});g=g.reduce((w,_)=>{let S=!1;for(const I of w)_.start<=I.end&&I.start<=_.start&&(S=!0,I.start=I.start<_.start?_.start:I.start,I.end=I.end<_.end?I.end:_.end);return S||w.push(_),w},[]),o.value=g.filter(w=>w.start!==w.end)}}return(f,p)=>{const v=Yt,g=It;return b(r).currentSegment?(E(),P("div",mO,[y("div",gO,[yO,T(v,{class:"input mr-10 ml-5",readonly:"",value:b(r).currentSegment.traceId,size:"small"},null,8,["value"]),T(Mt,{size:"small",value:n.value,options:b(nM),placeholder:"Select a mode",onChange:c,class:"mr-10"},null,8,["value","options"]),T(g,{type:"primary",size:"small",disabled:!b(r).currentSpan.profiled,onClick:p[0]||(p[0]=w=>u())},{default:q(()=>[We(D(b(t)("analyze")),1)]),_:1},8,["disabled"])]),y("div",_O,[T(D$,{data:b(r).segmentSpans,traceId:b(r).currentSegment.traceId,showBtnDetail:!0,headerType:"profile",onSelect:l},null,8,["data","traceId"])])])):me("",!0)}}});const wO=ce(bO,[["__scopeId","data-v-7d65ab2f"]]),kO={data:{type:Object,default:()=>({})},thread:{type:Number,default:0}},SO=ae({name:"TableItem",props:kO,setup(e){const s=Be(),t=F(!0);function r(){t.value=!t.value}return Q({Themes:xt,appStore:s,toggle:r,displayChildren:t},qh(e))}});const xO={class:"self"},TO={class:"exec-ms"},$O={class:"dump-count"},CO={class:"children-trace"};function IO(e,s,t,r,n,a){const o=Ue,l=Ei,c=bn("table-item");return E(),P("div",null,[y("div",{class:Ct(["profile-item","level"+e.data.parentId]),style:ht({color:e.data.topDur?"#448dfe":e.appStore.theme===e.Themes.Dark?"#fafbfc":"#3d444f"})},[y("div",{class:Ct(["thread","level"+e.data.parentId]),style:ht({"text-indent":e.data.parentId*4+"px",width:`${e.thread}px`})},[e.data.children&&e.data.children.length?(E(),ke(o,{key:0,class:"icon vm cp trans",style:ht(e.displayChildren?"":"transform: rotate(-90deg);"),onClick:oC(e.toggle,["stop"]),iconName:"arrow-down"},null,8,["style","onClick"])):me("",!0),T(l,{content:e.data.codeSignature,placement:"bottom"},{default:q(()=>[y("span",null,D(e.data.codeSignature),1)]),_:1},8,["content"])],6),y("div",xO,D(e.data.duration),1),y("div",TO,D(e.data.durationChildExcluded),1),y("div",$O,D(e.data.count),1)],6),Te(y("div",CO,[(E(!0),P(de,null,Pe(e.data.children,(u,d)=>(E(),ke(c,{thread:e.thread,key:d,data:u},null,8,["thread","data"]))),128))],512),[[Ye,e.data.children&&e.data.children.length&&e.displayChildren]])])}const DO=ce(SO,[["render",IO],["__scopeId","data-v-a9df8318"]]),b_=e=>(Nn("data-v-21bf9c92"),e=e(),Ln(),e),EO={class:"profile"},MO={class:"profile-header"},OO=b_(()=>y("div",{class:"self"},"Duration (ms)",-1)),PO={class:"exec-ms"},NO=b_(()=>y("div",{class:"dump-count"},"Dump Count",-1)),LO=ae({__name:"Container",props:{tableData:{type:Array,default:()=>[]},highlightTop:{type:Boolean,default:!1}},setup(e){const s=F(null),t=F(500),r=vs();Or(()=>{s.value.onmousedown=a=>{const o=a.clientX,l=t.value;document.onmousemove=c=>{const u=c.clientX-o;t.value=l+u},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}}});function n(){r.setHighlightTop()}return(a,o)=>{const l=Ue;return E(),P("div",EO,[y("div",MO,[y("div",{class:"thread",style:ht(`width: ${t.value}px`)},[We(" Thread Stack "),y("span",{class:"r cp dragger",ref_key:"dragger",ref:s},[T(l,{iconName:"settings_ethernet"})],512)],4),OO,y("div",PO,[We(" Self Duration (ms) "),y("a",{class:"profile-set-btn",onClick:n,title:"Highlight top 10 slow methods",style:ht({color:e.highlightTop?"#448dfe":"#484b55"})}," top slow ",4)]),NO]),(E(!0),P(de,null,Pe(e.tableData,(c,u)=>(E(),ke(DO,{thread:t.value,data:c,key:"key"+u},null,8,["thread","data"]))),128)),lC(a.$slots,"default",{},void 0,!0)])}}});const RO=ce(LO,[["__scopeId","data-v-21bf9c92"]]),AO={class:"profile-detail-chart-table"},FO={key:0,class:"profile-tips"},VO=ae({__name:"Index",props:{data:{type:Array,default:()=>[]},highlightTop:{type:Boolean,default:!1}},setup(e){const s=e,{t}=ge(),r=F([]);Or(()=>{r.value=n()});function n(){if(!s.data.length)return[];const o=s.data.map(d=>d.elements.map(f=>f.durationChildExcluded)).flat(1);function l(d,f){return f-d}const c=o.sort(l).filter((d,f)=>f<10&&d!==0),u=[];for(const d of s.data){const f=a(d.elements,c);u.push(...f)}return u}function a(o,l){const c=JSON.parse(JSON.stringify(o)),u={},d=[];for(const f of c)u[f.id]=f;for(const f of c){f.topDur=l.includes(f.durationChildExcluded)&&s.highlightTop,f.parentId==="0"&&d.push(f);for(const p in u)f.id===u[p].parentId&&(f.children?f.children.push(u[p]):f.children=[u[p]])}return d}return He(()=>[s.data,s.highlightTop],()=>{if(!s.data.length){r.value=[];return}r.value=n()}),(o,l)=>(E(),P("div",AO,[T(RO,{tableData:r.value,highlightTop:e.highlightTop},{default:q(()=>[r.value.length?me("",!0):(E(),P("div",FO,D(b(t)("noData")),1))]),_:1},8,["tableData","highlightTop"])]))}});const zO=ce(VO,[["__scopeId","data-v-fe283f14"]]),jO={class:"flex-h content"},YO={class:"list"},GO={class:"item"},UO={class:"thread-stack"},HO={class:"t-loading"},WO=ae({__name:"Content",setup(e){const s=F(!1),t=vs();function r(n){s.value=n}return(n,a)=>{const o=Ue;return E(),P("div",jO,[y("div",YO,[T(iO),T(pO)]),y("div",GO,[T(wO,{onLoading:r}),y("div",UO,[b(t).analyzeTrees.length?(E(),ke(zO,{key:0,data:b(t).analyzeTrees,highlightTop:b(t).highlightTop},null,8,["data","highlightTop"])):me("",!0),Te(y("div",HO,[T(o,{loading:!0,iconName:"spinner",size:"middle"})],512),[[Ye,s.value]])])])])}}});const BO=ce(WO,[["__scopeId","data-v-deffacfe"]]),qO={class:"profile-wrapper flex-v"},XO={class:"delete cp"},KO=ae({__name:"Profile",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",qO,[b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",XO,[T(l,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),T(gM,{needQuery:e.needQuery},null,8,["needQuery"]),T(BO)])}}});const w_=ce(KO,[["__scopeId","data-v-e3133120"]]),QO=[{label:"All",value:"ALL"},{label:"AJAX",value:"AJAX"},{label:"Resource",value:"RESOURCE"},{label:"Vue",value:"VUE"},{label:"Promise",value:"PROMISE"},{label:"JS",value:"JS"},{label:"Unknown",value:"UNKNOWN"}],JO={class:"flex-h row"},ZO={key:0,class:"mr-5"},eP={class:"grey mr-5"},tP={key:1,class:"mr-5"},nP={class:"grey mr-5"},rP={key:2,class:"mr-5"},iP={class:"grey mr-5"},sP={key:3,class:"mr-5"},aP={class:"grey mr-5"},oP={class:"flex-h row"},lP={class:"mr-5 traceId"},cP={class:"grey mr-5"},uP={class:"row tips"},dP={class:"flex-h"},hP={class:"mr-5"},fP={class:"mr-5 grey"},pP={class:"log-tags"},vP=["onClick"],mP={class:"mr-5"},gP={class:"grey mr-5"},yP={class:"log-tags"},_P=["onClick"],bP=ae({__name:"Header",props:{needQuery:{type:Boolean,default:!0},data:{type:Object,default:()=>({graph:{}})}},setup(e){const s=e,{t}=ge(),r=Be(),n=it(),a=Ce(),o=i_(),l=F(s.data.filters&&s.data.filters.traceId||""),c=F(s.data.filters&&s.data.filters.duration||r.durationTime),u=F([]),d=F([]),f=F([]),p=F([]),v=F(""),g=F(""),w=F(a.layerId==="BROWSER"),_=ln({instance:{value:"0",label:"All"},endpoint:{value:"0",label:"All"},service:{value:"",label:""},category:{value:"ALL",label:"All"}});s.needQuery&&S();function S(){return J(this,null,function*(){const G=yield o.getLogsByKeywords();if(G.errors){ie.error(G.errors);return}yield I(),yield A(),_.instance={value:"0",label:"All"},_.endpoint={value:"0",label:"All"}})}function I(){return J(this,null,function*(){if(a.entity===X[1].value){yield C();return}if(a.entity===X[2].value){yield O();return}if(a.entity===X[3].value){yield $();return}a.entity===X[0].value&&(yield O(),yield $())})}function C(){return J(this,null,function*(){const G=yield o.getServices(a.layerId);if(G.errors){ie.error(G.errors);return}_.service=o.services[0],O(_.service.id),$(_.service.id)})}function $(G){return J(this,null,function*(){const H=yield o.getEndpoints(G);if(H.errors){ie.error(H.errors);return}_.endpoint=o.endpoints[0]})}function O(G){return J(this,null,function*(){const H=yield o.getInstances(G);if(H.errors){ie.error(H.errors);return}_.instance=o.instances[0]})}function A(){let G="",H="";if(a.entity===X[2].value&&(G=n.currentPod.id),a.entity===X[3].value&&(H=n.currentPod.id),a.layerId==="BROWSER")o.setLogCondition({serviceId:n.currentService?n.currentService.id:_.service.id,pagePathId:G||_.endpoint.id||void 0,serviceVersionId:H||_.instance.id||void 0,paging:{pageNum:1,pageSize:15},queryDuration:c,category:_.category.value});else{let re,fe;s.data.filters&&(re=s.data.filters.segmentId,fe=s.data.filters.spanId),o.setLogCondition({serviceId:n.currentService?n.currentService.id:_.service.id,endpointId:G||_.endpoint.id||void 0,serviceInstanceId:H||_.instance.id||void 0,queryDuration:c.value,keywordsOfContent:u.value,excludingKeywordsOfContent:d.value,tags:p.value.length?p.value:void 0,paging:{pageNum:1,pageSize:15},relatedTrace:l.value?{traceId:l.value,segmentId:re,spanId:fe}:void 0})}z()}function z(){return J(this,null,function*(){const G=yield o.getLogs();G&&G.errors&&ie.error(G.errors)})}function N(G,H){_[G]=H[0],G==="service"&&($(_.service.id),O(_.service.id))}function Y(G){return J(this,null,function*(){const H=yield o.getEndpoints(_.service.id,G);H.errors&&ie.error(H.errors)})}function R(G){f.value=G.tagsList,p.value=G.tagsMap}function L(G){const H=u.value||[];H.splice(G,1),o.setLogCondition({keywordsOfContent:H}),v.value=""}function j(G){G==="keywordsOfContent"&&!v.value||G==="excludingKeywordsOfContent"&&!g.value||(G==="keywordsOfContent"?(u.value.push(v.value),o.setLogCondition({[G]:u.value}),v.value=""):G==="excludingKeywordsOfContent"&&(d.value.push(g.value),o.setLogCondition({[G]:d.value}),g.value=""))}function B(G){d.value.splice(G,1),o.setLogCondition({excludingKeywordsOfContent:d.value}),g.value=""}return ha(()=>{o.resetState();const G=s.data;delete G.filters,a.setWidget(G)}),He(()=>n.currentService,()=>{a.entity===X[0].value&&S()}),He(()=>[n.currentPod],()=>{a.entity!==X[0].value&&S()}),He(()=>r.durationTime,()=>{c.value=r.durationTime,a.entity===X[1].value&&S()}),He(()=>s.data.filters,(G,H)=>{if(s.data.filters){if(JSON.stringify(G)===JSON.stringify(H))return;l.value=s.data.filters.traceId||"",c.value=s.data.filters.duration||r.durationTime,S()}}),(G,H)=>{const re=Mt,fe=It,oe=Yt,Oe=Ue,xe=Ei;return E(),P(de,null,[y("div",JO,[b(a).entity===b(X)[1].value?(E(),P("div",ZO,[y("span",eP,D(b(t)("service"))+":",1),T(re,{size:"small",value:_.service.value,options:b(o).services,placeholder:"Select a service",onChange:H[0]||(H[0]=Ee=>N("service",Ee))},null,8,["value","options"])])):me("",!0),b(a).entity!==b(X)[3].value?(E(),P("div",tP,[y("span",nP,D(w.value?b(t)("version"):b(t)("instance"))+": ",1),T(re,{size:"small",value:_.instance.value,options:b(o).instances,placeholder:"Select a instance",onChange:H[1]||(H[1]=Ee=>N("instance",Ee))},null,8,["value","options"])])):me("",!0),b(a).entity!==b(X)[2].value?(E(),P("div",rP,[y("span",iP,D(w.value?b(t)("page"):b(t)("endpoint"))+": ",1),T(re,{size:"small",value:_.endpoint.value,options:b(o).endpoints,placeholder:"Select a endpoint",onChange:H[2]||(H[2]=Ee=>N("endpoint",Ee)),isRemote:!0,onQuery:Y},null,8,["value","options"])])):me("",!0),w.value?(E(),P("div",sP,[y("span",aP,D(b(t)("category"))+": ",1),T(re,{size:"small",value:_.category.value,options:b(QO),placeholder:"Select a category",onChange:H[3]||(H[3]=Ee=>N("category",Ee))},null,8,["value","options"])])):me("",!0),T(fe,{class:"search-btn",size:"small",type:"primary",onClick:A},{default:q(()=>[We(D(b(t)("search")),1)]),_:1})]),Te(y("div",oP,[y("div",lP,[y("span",cP,D(b(t)("traceID"))+":",1),T(oe,{modelValue:l.value,"onUpdate:modelValue":H[4]||(H[4]=Ee=>l.value=Ee),class:"inputs-max",size:"small"},null,8,["modelValue"])]),T(Yh,{type:"LOG",onUpdate:R})],512),[[Ye,!w.value]]),Te(y("div",uP,[y("b",null,D(b(t)("conditionNotice")),1)],512),[[Ye,!w.value]]),Te(y("div",dP,[Te(y("div",hP,[y("span",fP,D(b(t)("keywordsOfContent"))+":",1),y("span",pP,[(E(!0),P(de,null,Pe(u.value,(Ee,Z)=>(E(),P("span",{class:"selected",key:`keywordsOfContent${Z}`},[y("span",null,D(Ee),1),y("span",{class:"remove-icon",onClick:U=>L(Z)},"×",8,vP)]))),128))]),T(oe,{size:"small",class:"inputs-max",placeholder:b(t)("addKeywordsOfContent"),modelValue:v.value,"onUpdate:modelValue":H[5]||(H[5]=Ee=>v.value=Ee),onChange:H[6]||(H[6]=Ee=>j("keywordsOfContent"))},null,8,["placeholder","modelValue"])],512),[[Ye,b(o).supportQueryLogsByKeywords]]),Te(y("div",mP,[y("span",gP,D(b(t)("excludingKeywordsOfContent"))+": ",1),y("span",yP,[(E(!0),P(de,null,Pe(d.value,(Ee,Z)=>(E(),P("span",{class:"selected",key:`excludingKeywordsOfContent${Z}`},[y("span",null,D(Ee),1),y("span",{class:"remove-icon",onClick:U=>B(Z)}," × ",8,_P)]))),128))]),T(oe,{class:"inputs-max",size:"small",placeholder:b(t)("addExcludingKeywordsOfContent"),modelValue:g.value,"onUpdate:modelValue":H[7]||(H[7]=Ee=>g.value=Ee),onChange:H[8]||(H[8]=Ee=>j("excludingKeywordsOfContent"))},null,8,["placeholder","modelValue"]),T(xe,{content:b(t)("keywordsOfContentLogTips")},{default:q(()=>[Te(y("span",null,[T(Oe,{iconName:"help",class:"mr-5"})],512),[[Ye,!b(o).supportQueryLogsByKeywords]])]),_:1},8,["content"])],512),[[Ye,b(o).supportQueryLogsByKeywords]])],512),[[Ye,!w.value]])],64)}}});const wP=ce(bP,[["__scopeId","data-v-e6e21c1c"]]),kP={key:0,class:"log-tips"},SP={class:"mt-5 mb-5"},xP=ae({__name:"List",setup(e){const{t:s}=ge(),t=i_(),r=Ce(),n=F(r.layerId==="BROWSER"?"browser":"service"),a=F(15),o=Me(()=>t.logs.length===a.value?a.value*t.conditions.paging.pageNum+1:a.value*t.conditions.paging.pageNum);function l(u){t.setLogCondition({paging:{pageNum:u,pageSize:a.value}}),c()}function c(){return J(this,null,function*(){const u=yield t.getLogs();u&&u.errors&&ie.error(u.errors)})}return(u,d)=>{const f=Di,p=Gn;return E(),P("div",null,[Te((E(),ke(E$,{tableData:b(t).logs||[],type:n.value,noLink:!1},{default:q(()=>[b(t).logs.length?me("",!0):(E(),P("div",kP,D(b(s)("noData")),1))]),_:1},8,["tableData","type"])),[[p,b(t).loadLogs]]),y("div",SP,[T(f,{modelValue:b(t).conditions.paging.pageNum,"onUpdate:modelValue":d[0]||(d[0]=v=>b(t).conditions.paging.pageNum=v),"page-size":a.value,small:!0,layout:"prev, pager, next","pager-count":5,total:b(o),onCurrentChange:l,style:"float: right"},null,8,["modelValue","page-size","total"])])])}}});const TP=ce(xP,[["__scopeId","data-v-ced09e45"]]),$P={class:"log-wrapper flex-v"},CP={class:"delete cp"},IP={class:"header"},DP={class:"log"},EP=ae({__name:"Log",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e;o_("options",s.data);const{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",$P,[b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",CP,[T(l,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),y("div",IP,[T(wP,{needQuery:e.needQuery,data:e.data},null,8,["needQuery","data"])]),y("div",DP,[T(TP)])])}}});const k_=ce(EP,[["__scopeId","data-v-020e9e8e"]]),MP={class:"text"},OP={class:"header"},PP=["href"],NP=ae({__name:"Text",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""}},setup(e){const s=e,{t}=ge(),r=Be(),n=Me(()=>s.data.graph||{}),a=Ce(),o=Me(()=>io[n.value.backgroundColor]||(r.theme===xt.Dark?"#212224":"#fff")),l=Me(()=>io[n.value.fontColor]||(r.theme===xt.Dark?"#fafbfc":"#3d444f"));function c(){a.removeControls(s.data)}function u(){a.setConfigPanel(!0),a.selectWidget(s.data)}return(d,f)=>{const p=Ue,v=jt;return E(),P("div",MP,[y("div",OP,[b(a).editMode?(E(),ke(v,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",null,[T(p,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:u},[y("span",null,D(b(t)("edit")),1)]),y("div",{class:"tools",onClick:c},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0)]),y("div",{class:"body",style:ht({backgroundColor:b(o),justifyContent:b(n).textAlign})},[y("a",{href:b(n).url,target:"_blank",style:ht({color:b(l),fontSize:b(n).fontSize+"px",textDecoration:"underline"})},D(b(n).content),13,PP)],4)])}}});const S_=ce(NP,[["__scopeId","data-v-50119163"]]),LP=ni({id:"eBPF",state:()=>({taskList:[],eBPFSchedules:[],currentSchedule:{},analyzeTrees:[],labels:[{value:"",label:""}],couldProfiling:!1,ebpfTips:"",selectedTask:{},aggregateType:"COUNT"}),actions:{setSelectedTask(e){this.selectedTask=e||{}},setCurrentSchedule(e){this.currentSchedule=e},setAnalyzeTrees(e){this.analyzeTrees=e},getCreateTaskData(e){return J(this,null,function*(){const s=yield mt.query("getCreateTaskData").params({serviceId:e});if(s.data.errors)return s.data;const t=s.data.data.createTaskData;return this.couldProfiling=t.couldProfiling||!1,this.labels=t.processLabels.map(r=>({label:r,value:r})),s.data})},createTask(e){return J(this,null,function*(){const s=yield mt.query("saveEBPFTask").params({request:e});return s.data.errors||this.getTaskList({serviceId:e.serviceId,targets:["ON_CPU","OFF_CPU"],triggerType:fc.FIXED_TIME}),s.data})},getTaskList(e){return J(this,null,function*(){if(!e.serviceId)return new Promise(t=>t({}));const s=yield mt.query("getEBPFTasks").params(e);return this.ebpfTips="",s.data.errors||(this.taskList=s.data.data.queryEBPFTasks||[],this.selectedTask=this.taskList[0]||{},this.setSelectedTask(this.selectedTask),!this.taskList.length)||this.getEBPFSchedules({taskId:String(this.taskList[0].taskId)}),s.data})},getEBPFSchedules(e){return J(this,null,function*(){if(!e.taskId)return new Promise(r=>r({}));const s=yield mt.query("getEBPFSchedules").params(Q({},e));if(s.data.errors)return this.eBPFSchedules=[],s.data;this.ebpfTips="";const{eBPFSchedules:t}=s.data.data;return this.eBPFSchedules=t,t.length||(this.eBPFSchedules=[],this.analyzeTrees=[]),s.data})},getEBPFAnalyze(e){return J(this,null,function*(){if(this.aggregateType=e.aggregateType,!e.scheduleIdList.length)return new Promise(r=>r({}));if(!e.timeRanges.length)return new Promise(r=>r({}));const s=yield mt.query("getEBPFResult").params(e);if(s.data.errors)return this.analyzeTrees=[],s.data;const{analysisEBPFResult:t}=s.data.data;return this.ebpfTips=t.tip,t?t.tip?(this.analyzeTrees=[],s.data):(this.analyzeTrees=t.trees,s.data):(this.analyzeTrees=[],s.data)})}}});function fa(){return LP(ri)}const yv=[{label:"ON_CPU",value:"ON_CPU"},{label:"OFF_CPU",value:"OFF_CPU"}],Hd=[{label:"Count",value:"COUNT"},{label:"Duration",value:"DURATION"}],_v={monitorTimeEn:[{value:"0",label:"monitor now"},{value:"1",label:"set start time"}],monitorTimeCn:[{value:"0",label:"此刻"},{value:"1",label:"设置时间"}],monitorDuration:[{value:"5",label:"5 min"},{value:"10",label:"10 min"},{value:"15",label:"15 min"}]},RP=[{property:"name",label:"Name"},{property:"instanceName",label:"Instance Name"}],AP={key:0,class:"ebpf-task"},FP={class:"label"},VP={class:"label"},zP={class:"label"},jP={class:"date"},YP={class:"label"},GP={key:1},UP=ae({__name:"NewTask",emits:["close"],setup(e,{emit:s}){const t=fa(),r=it(),n=Be(),{t:a}=ge(),o=F([]),l=F(yv[0].value),c=F(_v.monitorTimeEn[0].value),u=F(10),d=F(n.durationRow.start),f=F(!1);function p(S){c.value=S}function v(S){o.value=S.map(I=>I.value)}function g(S){l.value=S[0].value}function w(){return J(this,null,function*(){if(f.value)return;f.value=!0;const S=c.value==="0"?new Date:d.value,I={serviceId:r.currentService.id,processLabels:o.value,startTime:S.getTime(),duration:u.value*60,targetType:l.value},C=yield t.createTask(I);if(C.errors){ie.error(C.errors);return}if(f.value=!1,!C.data.createTaskData.status){ie.error(C.data.createTaskData.errorReason);return}ie.success("Task created successfully"),s("close")})}function _(S){d.value=S}return(S,I)=>{const C=Mt,$=Gh,O=dc,A=Yt,z=It;return b(t).couldProfiling?(E(),P("div",AP,[y("div",null,[y("div",FP,D(b(a)("labels")),1),T(C,{class:"profile-input",size:"small",value:o.value,options:b(t).labels,placeholder:"Select labels",multiple:!0,onChange:v},null,8,["value","options"])]),y("div",null,[y("div",VP,D(b(a)("targetType")),1),T(C,{class:"profile-input",size:"small",value:l.value,options:b(yv),placeholder:"Select a type",isRemote:!0,onChange:g},null,8,["value","options"])]),y("div",null,[y("div",zP,D(b(a)("monitorTime")),1),y("div",null,[T($,{value:c.value,options:b(_v).monitorTimeEn,onChange:p},null,8,["value","options"]),y("span",jP,[T(O,{value:d.value,position:"bottom",format:"YYYY-MM-DD HH:mm:ss",onInput:_},null,8,["value"])])])]),y("div",null,[y("div",YP,D(b(a)("monitorDuration")),1),T(A,{class:"profile-input",modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=N=>u.value=N),size:"small",placeholder:"none",type:"number",min:1,max:60},null,8,["modelValue"]),We(" Min ")]),y("div",null,[T(z,{onClick:w,type:"primary",class:"create-task-btn"},{default:q(()=>[We(D(b(a)("createTask")),1)]),_:1})])])):(E(),P("div",GP,D(b(a)("ebpfTip")),1))}}});const HP=ce(UP,[["__scopeId","data-v-f68d5523"]]),WP=e=>(Nn("data-v-1804faf4"),e=e(),Ln(),e),BP={class:"flex-h header"},qP=WP(()=>y("div",{class:"title"},"eBPF Profiling",-1)),XP=ae({__name:"Header",props:{needQuery:{type:Boolean,default:!0}},setup(e){const s=e,t=fa(),r=Be(),n=it(),a=Ce(),{t:o}=ge(),l=F(!1);s.needQuery&&c();function c(){return J(this,null,function*(){const d=n.currentService&&n.currentService.id||"",f=yield t.getTaskList({serviceId:d,targets:["ON_CPU","OFF_CPU"],triggerType:fc.FIXED_TIME});f.errors&&ie.error(f.errors)})}function u(){return J(this,null,function*(){!n.currentService||(l.value=!0,t.getCreateTaskData(n.currentService.id))})}return He(()=>n.currentService,()=>{c()}),He(()=>r.durationTime,()=>{a.entity===X[1].value&&c()}),(d,f)=>{const p=It,v=Mi;return E(),P(de,null,[y("div",BP,[qP,T(p,{type:"primary",size:"small",onClick:u},{default:q(()=>[We(D(b(o)("newTask")),1)]),_:1})]),T(v,{modelValue:l.value,"onUpdate:modelValue":f[1]||(f[1]=g=>l.value=g),"destroy-on-close":!0,fullscreen:"",onClosed:f[2]||(f[2]=g=>l.value=!1)},{default:q(()=>[T(HP,{onClose:f[0]||(f[0]=g=>l.value=!1)})]),_:1},8,["modelValue"])],64)}}});const KP=ce(XP,[["__scopeId","data-v-1804faf4"]]),QP={class:"profile-detail flex-v"},JP={class:"mb-10"},ZP={class:"mb-10 clear item"},e2={class:"g-sm-4 grey"},t2={class:"g-sm-8 wba"},n2={class:"mb-10 clear item"},r2={class:"g-sm-4 grey"},i2={class:"g-sm-8 wba"},s2={class:"mb-10 clear item"},a2={class:"g-sm-4 grey"},o2={class:"g-sm-8 wba"},l2={class:"mb-10 clear item"},c2={class:"g-sm-4 grey"},u2={class:"g-sm-8 wba"},d2={class:"mb-10 clear item"},h2={class:"g-sm-4 grey"},f2={class:"g-sm-8 wba"},p2={class:"mb-10 clear item"},v2={class:"g-sm-4 grey"},m2={class:"g-sm-8 wba"},g2={class:"mb-10 clear item"},y2={class:"g-sm-4 grey"},_2={class:"g-sm-8 wba"},b2=ae({__name:"TaskDetails",props:{details:{type:Object,default:()=>({})}},setup(e){const{t:s}=ge(),t=(r,n="YYYY-MM-DD HH:mm:ss")=>so(r).format(n);return(r,n)=>(E(),P("div",QP,[y("div",null,[y("h5",JP,D(b(s)("task"))+".",1),y("div",ZP,[y("span",e2,D(b(s)("taskId"))+":",1),y("span",t2,D(e.details.taskId),1)]),y("div",n2,[y("span",r2,D(b(s)("service"))+":",1),y("span",i2,D(e.details.serviceName),1)]),y("div",s2,[y("span",a2,D(b(s)("labels"))+":",1),y("span",o2,D(e.details.processLabels.join(";")),1)]),y("div",l2,[y("span",c2,D(b(s)("monitorTime"))+":",1),y("span",u2,D(t(e.details.taskStartTime)),1)]),y("div",d2,[y("span",h2,D(b(s)("monitorDuration"))+":",1),y("span",f2,D(e.details.fixedTriggerDuration/60)+" min ",1)]),y("div",p2,[y("span",v2,D(b(s)("triggerType"))+":",1),y("span",m2,D(e.details.triggerType),1)]),y("div",g2,[y("span",y2,D(b(s)("targetType"))+":",1),y("span",_2,D(e.details.targetType),1)])])]))}});const x_=ce(b2,[["__scopeId","data-v-856f3240"]]),w2={class:"profile-task-list flex-v"},k2={class:"profile-task-wrapper flex-v"},S2={class:"profile-t-tool flex-h"},x2={class:"profile-t-wrapper"},T2={class:"profile-t"},$2=["onClick"],C2={class:"ell"},I2={class:"grey ell sm"},D2={class:"mr-10 sm"},E2={class:"mr-10 sm"},M2=ae({__name:"TaskList",setup(e){const{t:s}=ge(),t=fa(),r=F(!1);function n(a){return J(this,null,function*(){t.setSelectedTask(a);const o=yield t.getEBPFSchedules({taskId:a.taskId});o.errors&&ie.error(o.errors)})}return(a,o)=>{const l=Ue,c=Mi;return E(),P(de,null,[y("div",w2,[y("div",k2,[y("div",S2,D(b(s)("taskList")),1),y("div",x2,[Te(y("div",{class:"no-data"},D(b(s)("noData")),513),[[Ye,!b(t).taskList.length]]),y("table",T2,[(E(!0),P(de,null,Pe(b(t).taskList,(u,d)=>(E(),P("tr",{class:"profile-tr cp",onClick:f=>n(u),key:d},[y("td",{class:Ct(["profile-td",{selected:b(t).selectedTask.taskId===u.taskId}])},[y("div",C2,[y("span",null,D(u.targetType+": "+(u.processLabels.length?u.processLabels.join(" "):"All Processes")),1),y("a",{class:"profile-btn r",onClick:o[0]||(o[0]=f=>r.value=!0)},[T(l,{iconName:"view",size:"middle"})])]),y("div",I2,[y("span",D2,D(b(on)(u.taskStartTime)),1),y("span",E2,D(b(on)(u.taskStartTime+u.fixedTriggerDuration*1e3)),1)])],2)],8,$2))),128))])])])]),T(c,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=u=>r.value=u),"destroy-on-close":!0,fullscreen:"",onClosed:o[2]||(o[2]=u=>r.value=!1)},{default:q(()=>[T(x_,{details:b(t).selectedTask},null,8,["details"])]),_:1},8,["modelValue"])],64)}}});const O2=ce(M2,[["__scopeId","data-v-07cde2ca"]]),P2=ni({id:"continousProfiling",state:()=>({strategyList:[],selectedStrategy:{},taskList:[],selectedTask:{},errorReason:"",errorTip:"",ebpfTips:"",instances:[],eBPFSchedules:[],currentSchedule:{},analyzeTrees:[],aggregateType:"COUNT",instance:null,instancesLoading:!1,policyLoading:!1}),actions:{setSelectedStrategy(e){this.selectedStrategy=e||{}},setselectedTask(e){this.selectedTask=e||{}},setCurrentSchedule(e){this.currentSchedule=e},setAnalyzeTrees(e){this.analyzeTrees=e},setCurrentInstance(e){this.instance=e},setContinuousProfilingPolicy(e,s){return J(this,null,function*(){const t=yield mt.query("editStrategy").params({request:{serviceId:e,targets:s}});return t.data.errors,t.data})},getStrategyList(e){return J(this,null,function*(){if(!e.serviceId)return new Promise(n=>n({}));this.policyLoading=!0;const s=yield mt.query("getStrategyList").params(e);if(this.policyLoading=!1,s.data.errors)return s.data;const t=s.data.data.strategyList||[];t.length||(this.taskList=[],this.instances=[],this.instance=null);const r=t.length?s.data.data.strategyList:[{type:"",checkItems:[{type:""}]}];return this.strategyList=r.map((n,a)=>pe(Q({},n),{id:a})),this.setSelectedStrategy(this.strategyList[0]),this.selectedStrategy.type&&this.getMonitoringInstances(e.serviceId),s.data})},getMonitoringInstances(e){return J(this,null,function*(){if(this.instancesLoading=!0,!e)return null;const s=yield mt.query("getMonitoringInstances").params({serviceId:e,target:this.selectedStrategy.type});return this.instancesLoading=!1,s.data.errors||(this.instances=(s.data.data.instances||[]).map(t=>{const r=(t.processes||[]).sort((n,a)=>a.lastTriggerTimestamp-n.lastTriggerTimestamp).map(n=>pe(Q({},n),{lastTriggerTime:t.lastTriggerTimestamp?on(t.lastTriggerTimestamp):"",labels:n.labels.join("; ")}));return pe(Q({},t),{processes:r,lastTriggerTime:t.lastTriggerTimestamp?on(t.lastTriggerTimestamp):""})}).sort((t,r)=>r.lastTriggerTimestamp-t.lastTriggerTimestamp),this.instance=this.instances[0]||null),s.data})}}});function pa(){return P2(ri)}const Hs=[{label:"PROCESS_CPU",value:"PROCESS_CPU"},{label:"PROCESS_THREAD_COUNT",value:"PROCESS_THREAD_COUNT"},{label:"SYSTEM_LOAD",value:"SYSTEM_LOAD"},{label:"HTTP_ERROR_RATE",value:"HTTP_ERROR_RATE"},{label:"HTTP_AVG_RESPONSE_TIME",value:"HTTP_AVG_RESPONSE_TIME"}],Xa=[{label:"ON_CPU",value:"ON_CPU"},{label:"OFF_CPU",value:"OFF_CPU"},{label:"NETWORK",value:"NETWORK"}],T_="CONTINOUS_PROFILING",N2=[{value:"triggeredCount",label:"Triggered Count",width:150},{value:"lastTriggerTime",label:"Last Trigger Time",width:170}],L2=[{value:"detectType",label:"Detect Type",width:100},{value:"triggeredCount",label:"Triggered Count",width:120},{value:"lastTriggerTime",label:"Last Trigger Time",width:160},{value:"labels",label:"Labels"}],R2=e=>(Nn("data-v-1143e1d0"),e=e(),Ln(),e),A2={class:"filters"},F2={class:"mb-10 flex-h"},V2={key:0,class:"mr-5 duration"},z2=R2(()=>y("span",null," ~ ",-1)),j2={class:"flex-h"},Y2=ae({__name:"EBPFSchedules",props:{type:{type:String,default:""}},setup(e){const s=e,{t}=ge(),r=s.type===T_?pa():fa(),n=5,a=F(),o=F([]),l=F([{label:"All",value:"0"}]),c=F([]),u=F([]),d=F(["0"]),f=F(""),p=F(Hd[0].value),v=F([]),g=z=>z.map(N=>`${N.name}=${N.value}`).join("; ");function w(z){const N=z.map(Y=>Y.value);d.value=N}function _(z){p.value=z[0].value,r.setAnalyzeTrees([])}const S=z=>{o.value=z.map(N=>N.id)};function I(){return J(this,null,function*(){let z=d.value;d.value.includes("0")&&(z=l.value.map(j=>j.value));const N=[],Y=r.eBPFSchedules.flatMap(j=>{const B=j.process.labels.find(H=>z.includes(H)),G=o.value.includes(j.process.id);if(B||G)return N.push({start:j.startTime,end:j.endTime}),j.scheduleId});let R=[];for(const j of N)if(R.length)for(const B of R)j.start>B.start&&j.start<B.end&&j.end>B.end&&(B.end=j.end);else R.push(j);const L=yield r.getEBPFAnalyze({scheduleIdList:Y,timeRanges:R,aggregateType:p.value});if(L.data&&L.data.errors){ie.error(L.data.errors);return}})}function C(){l.value=[{label:"All",value:"0"}],d.value=["0"],c.value=[];const z=r.eBPFSchedules.map(N=>{for(const Y of N.process.labels)l.value.push({label:Y,value:Y});return c.value.push(N.process),[N.startTime/1e4,N.endTime/1e4]});if(z.length){const N=z.flat(1),Y=Math.min(...N),R=Math.max(...N);v.value=[on(Y*1e4),on(R*1e4)]}else v.value=[];O(0),I()}function $(z){O(z)}function O(z){const N=c.value.filter(Y=>Y.name.includes(f.value)||Y.instanceName.includes(f.value)||A(Y.attributes,f.value));u.value=N.filter((Y,R)=>(z-1||0)*n<=R&&n*(z||1)>R)}function A(z,N){const Y=z.find(R=>R.name==="command_line");return Y?Y.value.includes(N):!1}return He(()=>r.eBPFSchedules,()=>{C()}),(z,N)=>{const Y=Mt,R=It,L=Ue,j=Yt,B=fs,G=Di,H=jt;return E(),P("div",A2,[y("div",F2,[T(Y,{value:d.value,options:l.value,size:"small",placeholder:"Please select labels",onChange:w,class:"inputs mr-10",multiple:!0},null,8,["value","options"]),v.value.length?(E(),P("div",V2,[y("span",null,D(v.value[0]),1),z2,y("span",null,D(v.value[1]),1)])):me("",!0)]),y("div",j2,[b(r).selectedTask.targetType==="OFF_CPU"?(E(),ke(Y,{key:0,value:p.value,options:b(Hd),size:"small",placeholder:"Please select a type",onChange:_,class:"selector mr-10"},null,8,["value","options"])):me("",!0),T(H,{placement:"bottom",width:680,trigger:"click",persistent:!1},{reference:q(()=>[T(R,{size:"small"},{default:q(()=>[We(D(b(t)("processSelect")),1)]),_:1})]),default:q(()=>[T(j,{modelValue:f.value,"onUpdate:modelValue":N[0]||(N[0]=re=>f.value=re),placeholder:"Please input name",class:"input-with-search",size:"small",onChange:N[1]||(N[1]=re=>O(0))},{append:q(()=>[T(R,{size:"small"},{default:q(()=>[T(L,{size:"sm",iconName:"search"})]),_:1})]),_:1},8,["modelValue"]),T(b(da),{data:u.value,ref_key:"multipleTableRef",ref:a,onSelectionChange:S},{default:q(()=>[T(B,{type:"selection",width:"55"}),(E(!0),P(de,null,Pe(b(RP),(re,fe)=>(E(),ke(B,{property:re.property,label:re.label,key:fe,width:"150"},null,8,["property","label"]))),128)),T(B,{width:"300",label:"Attributes"},{default:q(re=>[We(D(g(re.row.attributes)),1)]),_:1})]),_:1},8,["data"]),T(G,{class:"pagination",small:"",layout:"prev, pager, next","page-size":n,total:c.value.length,onCurrentChange:$,onPrevClick:$,onNextClick:$},null,8,["total"])]),_:1}),T(R,{type:"primary",size:"small",onClick:I},{default:q(()=>[We(D(b(t)("analyze")),1)]),_:1})])])}}});const $_=ce(Y2,[["__scopeId","data-v-1143e1d0"]]),C_=ae({__name:"EBPFStack",props:{type:{type:String,default:""}},setup(e){const t=e.type===T_?pa():fa(),r=F(null),n=F(null),a=F(null),o=F(null),l=F(1),c=F(1);function u(){if(o.value&&o.value.destroy(),!t.analyzeTrees.length)return r.value=null;const v={parentId:"0",originId:"1",name:"Virtual Root",children:[],value:0,id:"1",symbol:"Virtual Root",dumpCount:0,stackType:"",rateOfRoot:"",rateOfParent:""};d();for(const I of t.analyzeTrees){const C=f(I.elements);v.children&&v.children.push(C)}const g=(v.children||[]).reduce((I,C)=>(I[0]+=C.value,I[1]+=C.dumpCount,I),[0,0]);v.value=g[0],v.dumpCount=g[1],r.value=v;const w=a.value&&a.value.getBoundingClientRect().width||0,_=w<800?802:w;o.value=dC().width(_-15).cellHeight(18).transitionDuration(750).minFrameSize(1).transitionEase(hC).sort(!0).title("").selfValue(!1).inverted(!0).onClick(I=>{n.value=I.data}).setColorMapper((I,C)=>I.highlight?"#6aff8f":C);const S=fC().attr("class","d3-tip").direction("s").html(I=>{const C=I.data.name.replace("<","&lt;").replace(">","&gt;"),$=t.aggregateType===Hd[0].value?`<div class="mb-5">Dump Count: ${I.data.dumpCount}</div>`:`<div class="mb-5">Duration: ${I.data.dumpCount} ns</div>`,O=I.parent&&`<div class="mb-5">Percentage Of Selected: ${(I.data.dumpCount/(n.value&&n.value.dumpCount||v.dumpCount)*100).toFixed(3)+"%"}</div>`||"",A=`<div class="mb-5">Percentage Of Root: ${(I.data.dumpCount/v.dumpCount*100).toFixed(3)+"%"}</div>`;return`<div class="mb-5 name">Symbol: ${C}</div>${$}${O}${A}`}).style("max-width","400px");o.value.tooltip(S),Qi("#graph-stack").datum(r.value).call(o.value)}function d(){const v=[];for(const g of t.analyzeTrees)for(const w of g.elements)v.push(w.dumpCount);c.value=Math.max(...v),l.value=Math.min(...v)}function f(v){const g=JSON.parse(JSON.stringify(v)),w={};let _=null;for(const I of g)I.parentId=String(Number(I.parentId)+1),I.originId=String(Number(I.id)+1),I.name=I.symbol,delete I.id,w[I.originId]=I;const S=pC().domain([l.value,c.value]).range([1,200]);for(const I of g){if(I.parentId==="1"){const C=Number(S(I.dumpCount).toFixed(4));_=I,_.value=C}for(const C in w)if(I.originId===w[C].parentId){const $=Number(S(w[C].dumpCount).toFixed(4));w[C].value=$,I.children?I.children.push(w[C]):I.children=[w[C]]}}return p([_],I=>{if(I.children){let C=0;for(const $ of I.children)C=$.value+C;I.value=I.value<C?C:I.value}}),_}function p(v,g){for(const w of v)w.children&&p(w.children,g),g(w);return v}return He(()=>t.analyzeTrees,()=>{u()}),(v,g)=>(E(),P("div",{id:"graph-stack",ref_key:"graph",ref:a},[Te(y("span",{class:"tip"},D(b(t).ebpfTips),513),[[Ye,b(t).ebpfTips]])],512))}});const G2={class:"flex-h content"},U2={class:"vis-graph ml-5"},H2={class:"schedules"},W2={class:"item"},B2=ae({__name:"Content",setup(e){return(s,t)=>(E(),P("div",G2,[T(O2),y("div",U2,[y("div",H2,[T($_)]),y("div",W2,[T(C_)])])]))}});const q2=ce(B2,[["__scopeId","data-v-41d7d299"]]),X2={class:"profile-wrapper flex-v"},K2={class:"delete cp"},Q2=ae({__name:"Ebpf",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",X2,[b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",K2,[T(l,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),T(KP,{needQuery:e.needQuery},null,8,["needQuery"]),T(q2)])}}});const I_=ce(Q2,[["__scopeId","data-v-fb7c6126"]]),J2=ni({id:"demandLog",state:()=>({containers:[{label:"",value:""}],instances:[{value:"",label:""}],conditions:{container:"",serviceInstanceId:"",duration:Be().durationTime},selectorStore:it(),logs:[],loadLogs:!1,message:"",total:0}),actions:{setLogCondition(e){this.conditions=Q(Q({},this.conditions),e)},setLogs(e,s){this.logs=e,this.message=s||""},getInstances(e){return J(this,null,function*(){const s=this.selectorStore.currentService?this.selectorStore.currentService.id:e,t=yield mt.query("queryInstances").params({serviceId:s,duration:Be().durationTime});return t.data.errors||(this.instances=t.data.data.pods||[]),t.data})},getContainers(e){return J(this,null,function*(){if(!e)return new Promise(r=>r({errors:"No service instance"}));const s={serviceInstanceId:e},t=yield mt.query("fetchContainers").params({condition:s});return t.data.errors?t.data:t.data.data.containers.errorReason?(this.containers=[{label:"",value:""}],t.data):(this.containers=t.data.data.containers.containers.map(r=>({label:r,value:r})),t.data)})},getDemandLogs(){return J(this,null,function*(){this.loadLogs=!0;const e=yield mt.query("fetchDemandPodLogs").params({condition:this.conditions});if(this.loadLogs=!1,e.data.errors)return e.data;if(e.data.data.logs.errorReason)return this.setLogs([],e.data.data.logs.errorReason),e.data;this.total=e.data.data.logs.logs.length;const s=e.data.data.logs.logs.map(t=>t.content).join(`
`);return this.setLogs(s),e.data})}}});function D_(){return J2(ri)}const Z2=[{label:"From 5 seconds ago -- Now",value:5},{label:"From 10 seconds ago -- Now",value:10},{label:"From 15 seconds ago -- Now",value:15},{label:"From 30 seconds ago -- Now",value:30},{label:"From 45 seconds ago -- Now",value:45},{label:"From 1 minute ago -- Now",value:60},{label:"From 5 minutes ago -- Now",value:300},{label:"From 15 minutes ago -- Now",value:900},{label:"From 30 minutes ago -- Now",value:1800}],eN=[{label:"None",value:0},{label:"5 seconds",value:5},{label:"10 seconds",value:10},{label:"15 seconds",value:15},{label:"30 seconds",value:30},{label:"45 seconds",value:45},{label:"1 minute",value:60}],tN={class:"flex-h row"},nN={key:0,class:"mr-5 mb-5"},rN={class:"grey mr-5"},iN={key:1,class:"mr-5 mb-5"},sN={class:"grey mr-5"},aN={class:"mr-5"},oN={class:"grey mr-5"},lN={class:"mr-5"},cN={class:"grey mr-5"},uN={class:"flex-h row"},dN={class:"mr-5"},hN={class:"mr-5 grey"},fN={class:"log-tags"},pN=["onClick"],vN={class:"mr-5"},mN={class:"grey mr-5"},gN={class:"log-tags"},yN=["onClick"],_N={class:"flex-h row btn-row"},bN=ae({__name:"Header",setup(e){const{t:s}=ge(),t=Be(),r=it(),n=Ce(),a=D_(),o=F([]),l=F([]),c=F(""),u=F(""),d=ln({instance:{value:"",label:""},container:{value:"",label:""},duration:{label:"From 30 minutes ago",value:1800},interval:{label:"30 seconds",value:30}}),f=F(!0),p=F(null);Or(()=>{v()});function v(){return J(this,null,function*(){n.entity!==X[3].value&&(yield w()),g(),p.value&&N()})}function g(){return J(this,null,function*(){if(!(d.instance.id||r.currentPod&&r.currentPod.id))return;const Y=yield a.getContainers(d.instance.id||r.currentPod.id);if(Y.errors){f.value=!0,ie.error(Y.errors);return}if(Y.data.containers.errorReason){f.value=!0,ie.warning(Y.data.containers.errorReason);return}a.containers.length&&(d.container=a.containers[0],f.value=!1)})}function w(){return J(this,null,function*(){const Y=yield a.getInstances();if(Y.errors){ie.error(Y.errors);return}d.instance=a.instances[0]})}function _(){if(p.value){N();return}S(),d.interval.value!==0&&(p.value=setInterval(S,d.interval.value*1e3),setTimeout(()=>{N()},d.duration.value*1e3))}function S(){let Y="";n.entity===X[3].value&&(Y=r.currentPod.id);const R=Y||d.instance&&d.instance.id||"";a.setLogCondition({serviceInstanceId:R,container:d.container.value,duration:I(),keywordsOfContent:o.value.length?o.value:void 0,excludingKeywordsOfContent:l.value.length?l.value:void 0}),R&&C()}function I(){{const Y={start:cr(t.utc,new Date(new Date().getTime()-d.duration.value*1e3)),end:cr(t.utc,new Date),step:"SECOND"};return{start:Mr(Y.start,Y.step,!1),end:Mr(Y.end,Y.step,!1),step:Y.step}}}function C(){return J(this,null,function*(){const Y=yield a.getDemandLogs();Y&&Y.errors&&ie.error(Y.errors)})}function $(Y,R){N(),d[Y]=R[0],Y==="instance"&&g()}function O(Y){const R=o.value||[];R.splice(Y,1),a.setLogCondition({keywordsOfContent:R}),c.value="",N()}function A(Y){Y==="keywordsOfContent"&&!c.value||Y==="excludingKeywordsOfContent"&&!u.value||(Y==="keywordsOfContent"?(o.value.push(c.value),a.setLogCondition({[Y]:o.value}),c.value=""):Y==="excludingKeywordsOfContent"&&(l.value.push(u.value),a.setLogCondition({[Y]:l.value}),u.value=""),N())}function z(Y){l.value.splice(Y,1),a.setLogCondition({excludingKeywordsOfContent:l.value}),u.value="",N()}function N(){!p.value||(clearInterval(p.value),p.value=null)}return ha(()=>{N()}),He(()=>r.currentService,()=>{n.entity===X[0].value&&(v(),a.setLogs(""))}),He(()=>[r.currentPod],()=>{n.entity===X[3].value&&(v(),a.setLogs(""))}),(Y,R)=>{const L=Mt,j=Yt,B=Ue,G=It;return E(),P(de,null,[y("div",tN,[b(n).entity!==b(X)[3].value?(E(),P("div",nN,[y("span",rN,D(b(s)("instance"))+": ",1),T(L,{size:"small",value:d.instance.value,options:b(a).instances,placeholder:"Select a instance",onChange:R[0]||(R[0]=H=>$("instance",H)),class:"selectors"},null,8,["value","options"])])):me("",!0),d.container?(E(),P("div",iN,[y("span",sN,D(b(s)("container"))+":",1),T(L,{size:"small",value:d.container.value,options:b(a).containers,placeholder:"Select a container",onChange:R[1]||(R[1]=H=>$("container",H)),class:"selectors"},null,8,["value","options"])])):me("",!0),y("div",aN,[y("span",oN,D(b(s)("duration"))+":",1),T(L,{size:"small",value:d.duration.value,options:b(Z2),placeholder:"Select a time range",onChange:R[2]||(R[2]=H=>$("duration",H)),class:"duration-range"},null,8,["value","options"])]),y("div",lN,[y("span",cN,D(b(s)("interval"))+":",1),T(L,{size:"small",value:d.interval.value,options:b(eN),onChange:R[3]||(R[3]=H=>$("interval",H))},null,8,["value","options"])])]),y("div",uN,[y("div",dN,[y("span",hN,D(b(s)("keywordsOfContent"))+":",1),y("span",fN,[(E(!0),P(de,null,Pe(o.value,(H,re)=>(E(),P("span",{class:"selected",key:`keywordsOfContent${re}`},[y("span",null,D(H),1),y("span",{class:"remove-icon",onClick:fe=>O(re)},"×",8,pN)]))),128))]),T(j,{size:"small",class:"inputs-max",placeholder:b(s)("addKeywordsOfContent"),modelValue:c.value,"onUpdate:modelValue":R[4]||(R[4]=H=>c.value=H),onChange:R[5]||(R[5]=H=>A("keywordsOfContent"))},null,8,["placeholder","modelValue"])]),y("div",vN,[y("span",mN,D(b(s)("excludingKeywordsOfContent"))+": ",1),y("span",gN,[(E(!0),P(de,null,Pe(l.value,(H,re)=>(E(),P("span",{class:"selected",key:`excludingKeywordsOfContent${re}`},[y("span",null,D(H),1),y("span",{class:"remove-icon",onClick:fe=>z(re)}," × ",8,yN)]))),128))]),T(j,{class:"inputs-max",size:"small",placeholder:b(s)("addExcludingKeywordsOfContent"),modelValue:u.value,"onUpdate:modelValue":R[6]||(R[6]=H=>u.value=H),onChange:R[7]||(R[7]=H=>A("excludingKeywordsOfContent"))},null,8,["placeholder","modelValue"])])]),y("div",_N,[T(G,{class:"search-btn mt-10",size:"small",type:"primary",onClick:_,disabled:f.value},{default:q(()=>[T(B,{size:"middle",iconName:"retry",loading:!!p.value,class:"mr-5"},null,8,["loading"]),We(" "+D(p.value?b(s)("pause"):b(s)("start")),1)]),_:1},8,["disabled"])])],64)}}});const wN=ce(bN,[["__scopeId","data-v-e63b5616"]]),kN={key:0},SN=ae({__name:"Content",setup(e){const s=D_(),t=F(),r=F(null);Or(()=>{n()});function n(){return J(this,null,function*(){const l=yield gC(()=>import("./monaco-editor-97fd89d3.js").then(c=>c.e),["static/js/monaco-editor-97fd89d3.js","static/css/monaco-editor-c7e578d4.css"]);setTimeout(()=>{a(l)},500),window.addEventListener("resize",()=>{o()})})}function a(l){t.value=l.editor.create(r.value,{value:"",language:"text",wordWrap:!0,minimap:{enabled:!1},readonly:!0}),ji(t.value).updateOptions({readOnly:!0}),o()}function o(){if(!r.value)return;const{width:l,height:c}=r.value.getBoundingClientRect();ji(t.value).layout({height:c,width:l})}return ha(()=>{!ji(t.value)||(ji(t.value).dispose(),t.value=null,s.setLogs(""))}),He(()=>s.logs,()=>{!ji(t.value)||(ji(t.value).setValue(s.logs),s.logs&&setTimeout(()=>{ji(t.value).revealPosition({column:1,lineNumber:s.total})},1e3))}),(l,c)=>{const u=Gn;return b(s).message?(E(),P("span",kN,D(b(s).message),1)):Te((E(),P("div",{key:1,class:"log-content",ref_key:"logContent",ref:r,style:{width:"calc(100% - 10px)",height:"calc(100% - 140px)"}},null,512)),[[u,b(s).loadLogs]])}}});const xN=ce(SN,[["__scopeId","data-v-c10daf80"]]),TN={class:"log-wrapper flex-v"},$N={class:"delete cp"},CN={class:"header"},IN=ae({__name:"DemandLog",props:{data:{type:Object,default:()=>({})},activeIndex:{type:String,default:""}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",TN,[b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",$N,[T(l,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),y("div",CN,[T(wN)]),T(xN)])}}});const E_=ce(IN,[["__scopeId","data-v-66d6b1c7"]]),DN=ni({id:"event",state:()=>({loading:!1,events:[],instances:[{value:"",label:"All"}],endpoints:[{value:"",label:"All"}],condition:null}),actions:{setEventCondition(e){this.condition=e},getInstances(){return J(this,null,function*(){const e=it().currentService?it().currentService.id:"",s=yield mt.query("queryInstances").params({serviceId:e,duration:Be().durationTime});return s.data.errors||(this.instances=[{value:"",label:"All"},...s.data.data.pods]),s.data})},getEndpoints(e){return J(this,null,function*(){const s=it().currentService?it().currentService.id:"";if(!s)return;const t=yield mt.query("queryEndpoints").params({serviceId:s,duration:Be().durationTime,keyword:e||""});return t.data.errors||(this.endpoints=[{value:"",label:"All"},...t.data.data.pods]),t.data})},getEvents(){return J(this,null,function*(){this.loading=!0;const e=yield mt.query("queryEvents").params({condition:pe(Q({},this.condition),{time:Be().durationTime})});return this.loading=!1,e.data.errors||e.data.data.fetchEvents&&(this.events=(e.data.data.fetchEvents.events||[]).map(s=>{let t="Service";return s.source.serviceInstance&&(t="ServiceInstance"),s.source.endpoint&&(t="Endpoint"),s.scope=t,(!s.endTime||s.endTime===s.startTime)&&(s.endTime=Number(s.startTime)+6e4),s})),e.data})}}});function M_(){return DN(ri)}const EN=[{label:"All",value:""},{label:"Normal",value:"Normal"},{label:"Error",value:"Error"}],MN={class:"flex-h row"},ON={key:0,class:"mr-5"},PN={class:"grey mr-5"},NN={key:1,class:"mr-5"},LN={class:"grey mr-5"},RN={class:"mr-5"},AN={class:"grey"},FN=ae({__name:"Header",props:{needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Be(),n=it(),a=Ce(),o=M_(),l=20,c=F(1),u=ln({instance:{value:"",label:"All",id:""},endpoint:{value:"",label:"All",id:""},eventType:{value:"",label:"All"}}),d=Me(()=>o.events.length===l?l*c.value+1:l*c.value);s.needQuery&&f();function f(){return J(this,null,function*(){p(),yield w(),u.instance={value:"",label:"All"},u.endpoint={value:"",label:"All"}})}function p(){if(a.entity===X[2].value){g();return}if(a.entity===X[3].value){v();return}a.entity===X[0].value&&(g(),v())}function v(C){return J(this,null,function*(){const $=yield o.getEndpoints(C);if(!!$){if($.errors){ie.error($.errors);return}u.endpoint=o.endpoints[0]}})}function g(C){return J(this,null,function*(){const $=yield o.getInstances(C);if($.errors){ie.error($.errors);return}u.instance=o.instances[0]})}function w(){return J(this,null,function*(){let C=u.endpoint.value,$=u.instance.value;if(a.entity===X[2].value&&(C=n.currentPod&&n.currentPod.id),a.entity===X[3].value&&($=n.currentPod&&n.currentPod.id),!n.currentService)return;o.setEventCondition({paging:{pageNum:c.value,pageSize:l},source:{service:n.currentService.value||"",endpoint:C||"",serviceInstance:$||""},type:u.eventType.value||void 0});const O=yield o.getEvents();O&&O.errors&&ie.error(O.errors)})}function _(C,$){u[C]=$[0]}function S(C){return J(this,null,function*(){const $=yield o.getEndpoints(C);$.errors&&ie.error($.errors)})}function I(C){c.value=C,w()}return He(()=>[n.currentService],()=>{a.entity===X[0].value&&f()}),He(()=>[n.currentPod],()=>{a.entity!==X[0].value&&f()}),He(()=>r.durationTime,()=>{a.entity===X[1].value&&f()}),(C,$)=>{const O=Mt,A=Di,z=It;return E(),P("div",MN,[b(a).entity!==b(X)[3].value?(E(),P("div",ON,[y("span",PN,D(b(t)("instance"))+": ",1),T(O,{size:"small",value:u.instance.value,options:b(o).instances,placeholder:"Select a instance",onChange:$[0]||($[0]=N=>_("instance",N))},null,8,["value","options"])])):me("",!0),b(a).entity!==b(X)[2].value?(E(),P("div",NN,[y("span",LN,D(b(t)("endpoint"))+": ",1),T(O,{size:"small",value:u.endpoint.value,options:b(o).endpoints,placeholder:"Select a endpoint",onChange:$[1]||($[1]=N=>_("endpoint",N)),isRemote:!0,onQuery:S},null,8,["value","options"])])):me("",!0),y("div",RN,[y("span",AN,D(b(t)("eventsType"))+": ",1),T(O,{modelValue:u.eventType,"onUpdate:modelValue":$[2]||($[2]=N=>u.eventType=N),options:b(EN),placeholder:"Select a type",onChange:$[3]||($[3]=N=>_("eventType",N)),class:"event-tool-input",size:"small"},null,8,["modelValue","options"])]),T(A,{modelValue:c.value,"onUpdate:modelValue":$[4]||($[4]=N=>c.value=N),"page-size":l,layout:"prev, pager, next",total:b(d),onCurrentChange:I,"pager-count":5,small:""},null,8,["modelValue","total"]),T(z,{class:"search-btn",size:"small",type:"primary",onClick:w},{default:q(()=>[We(D(b(t)("search")),1)]),_:1})])}}});const VN=ce(FN,[["__scopeId","data-v-25d0f504"]]);var ur=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wu={exports:{}},bv;function Sr(){return bv||(bv=1,function(e,s){(function(t,r){e.exports=r()})(ur,function(){var t;function r(){return t.apply(null,arguments)}function n(h){t=h}function a(h){return h instanceof Array||Object.prototype.toString.call(h)==="[object Array]"}function o(h){return h!=null&&Object.prototype.toString.call(h)==="[object Object]"}function l(h,m){return Object.prototype.hasOwnProperty.call(h,m)}function c(h){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(h).length===0;var m;for(m in h)if(l(h,m))return!1;return!0}function u(h){return h===void 0}function d(h){return typeof h=="number"||Object.prototype.toString.call(h)==="[object Number]"}function f(h){return h instanceof Date||Object.prototype.toString.call(h)==="[object Date]"}function p(h,m){var k=[],x,M=h.length;for(x=0;x<M;++x)k.push(m(h[x],x));return k}function v(h,m){for(var k in m)l(m,k)&&(h[k]=m[k]);return l(m,"toString")&&(h.toString=m.toString),l(m,"valueOf")&&(h.valueOf=m.valueOf),h}function g(h,m,k,x){return Wp(h,m,k,x,!0).utc()}function w(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _(h){return h._pf==null&&(h._pf=w()),h._pf}var S;Array.prototype.some?S=Array.prototype.some:S=function(h){var m=Object(this),k=m.length>>>0,x;for(x=0;x<k;x++)if(x in m&&h.call(this,m[x],x,m))return!0;return!1};function I(h){if(h._isValid==null){var m=_(h),k=S.call(m.parsedDateParts,function(M){return M!=null}),x=!isNaN(h._d.getTime())&&m.overflow<0&&!m.empty&&!m.invalidEra&&!m.invalidMonth&&!m.invalidWeekday&&!m.weekdayMismatch&&!m.nullInput&&!m.invalidFormat&&!m.userInvalidated&&(!m.meridiem||m.meridiem&&k);if(h._strict&&(x=x&&m.charsLeftOver===0&&m.unusedTokens.length===0&&m.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(h))h._isValid=x;else return x}return h._isValid}function C(h){var m=g(NaN);return h!=null?v(_(m),h):_(m).userInvalidated=!0,m}var $=r.momentProperties=[],O=!1;function A(h,m){var k,x,M,W=$.length;if(u(m._isAMomentObject)||(h._isAMomentObject=m._isAMomentObject),u(m._i)||(h._i=m._i),u(m._f)||(h._f=m._f),u(m._l)||(h._l=m._l),u(m._strict)||(h._strict=m._strict),u(m._tzm)||(h._tzm=m._tzm),u(m._isUTC)||(h._isUTC=m._isUTC),u(m._offset)||(h._offset=m._offset),u(m._pf)||(h._pf=_(m)),u(m._locale)||(h._locale=m._locale),W>0)for(k=0;k<W;k++)x=$[k],M=m[x],u(M)||(h[x]=M);return h}function z(h){A(this,h),this._d=new Date(h._d!=null?h._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),O===!1&&(O=!0,r.updateOffset(this),O=!1)}function N(h){return h instanceof z||h!=null&&h._isAMomentObject!=null}function Y(h){r.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+h)}function R(h,m){var k=!0;return v(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,h),k){var x=[],M,W,te,je=arguments.length;for(W=0;W<je;W++){if(M="",typeof arguments[W]=="object"){M+=`
[`+W+"] ";for(te in arguments[0])l(arguments[0],te)&&(M+=te+": "+arguments[0][te]+", ");M=M.slice(0,-2)}else M=arguments[W];x.push(M)}Y(h+`
Arguments: `+Array.prototype.slice.call(x).join("")+`
`+new Error().stack),k=!1}return m.apply(this,arguments)},m)}var L={};function j(h,m){r.deprecationHandler!=null&&r.deprecationHandler(h,m),L[h]||(Y(m),L[h]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function B(h){return typeof Function!="undefined"&&h instanceof Function||Object.prototype.toString.call(h)==="[object Function]"}function G(h){var m,k;for(k in h)l(h,k)&&(m=h[k],B(m)?this[k]=m:this["_"+k]=m);this._config=h,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function H(h,m){var k=v({},h),x;for(x in m)l(m,x)&&(o(h[x])&&o(m[x])?(k[x]={},v(k[x],h[x]),v(k[x],m[x])):m[x]!=null?k[x]=m[x]:delete k[x]);for(x in h)l(h,x)&&!l(m,x)&&o(h[x])&&(k[x]=v({},k[x]));return k}function re(h){h!=null&&this.set(h)}var fe;Object.keys?fe=Object.keys:fe=function(h){var m,k=[];for(m in h)l(h,m)&&k.push(m);return k};var oe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Oe(h,m,k){var x=this._calendar[h]||this._calendar.sameElse;return B(x)?x.call(m,k):x}function xe(h,m,k){var x=""+Math.abs(h),M=m-x.length,W=h>=0;return(W?k?"+":"":"-")+Math.pow(10,Math.max(0,M)).toString().substr(1)+x}var Ee=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},ee={};function K(h,m,k,x){var M=x;typeof x=="string"&&(M=function(){return this[x]()}),h&&(ee[h]=M),m&&(ee[m[0]]=function(){return xe(M.apply(this,arguments),m[1],m[2])}),k&&(ee[k]=function(){return this.localeData().ordinal(M.apply(this,arguments),h)})}function se(h){return h.match(/\[[\s\S]/)?h.replace(/^\[|\]$/g,""):h.replace(/\\/g,"")}function ye(h){var m=h.match(Ee),k,x;for(k=0,x=m.length;k<x;k++)ee[m[k]]?m[k]=ee[m[k]]:m[k]=se(m[k]);return function(M){var W="",te;for(te=0;te<x;te++)W+=B(m[te])?m[te].call(M,h):m[te];return W}}function le(h,m){return h.isValid()?(m=$e(m,h.localeData()),U[m]=U[m]||ye(m),U[m](h)):h.localeData().invalidDate()}function $e(h,m){var k=5;function x(M){return m.longDateFormat(M)||M}for(Z.lastIndex=0;k>=0&&Z.test(h);)h=h.replace(Z,x),Z.lastIndex=0,k-=1;return h}var Re={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function be(h){var m=this._longDateFormat[h],k=this._longDateFormat[h.toUpperCase()];return m||!k?m:(this._longDateFormat[h]=k.match(Ee).map(function(x){return x==="MMMM"||x==="MM"||x==="DD"||x==="dddd"?x.slice(1):x}).join(""),this._longDateFormat[h])}var he="Invalid date";function Ie(){return this._invalidDate}var et="%d",st=/\d{1,2}/;function hn(h){return this._ordinal.replace("%d",h)}var Sn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function _e(h,m,k,x){var M=this._relativeTime[k];return B(M)?M(h,m,k,x):M.replace(/%d/i,h)}function ue(h,m){var k=this._relativeTime[h>0?"future":"past"];return B(k)?k(m):k.replace(/%s/i,m)}var we={};function Ae(h,m){var k=h.toLowerCase();we[k]=we[k+"s"]=we[m]=h}function Xe(h){return typeof h=="string"?we[h]||we[h.toLowerCase()]:void 0}function Ne(h){var m={},k,x;for(x in h)l(h,x)&&(k=Xe(x),k&&(m[k]=h[x]));return m}var Bt={};function Je(h,m){Bt[h]=m}function xn(h){var m=[],k;for(k in h)l(h,k)&&m.push({unit:k,priority:Bt[k]});return m.sort(function(x,M){return x.priority-M.priority}),m}function an(h){return h%4===0&&h%100!==0||h%400===0}function vt(h){return h<0?Math.ceil(h)||0:Math.floor(h)}function Fe(h){var m=+h,k=0;return m!==0&&isFinite(m)&&(k=vt(m)),k}function rn(h,m){return function(k){return k!=null?($p(this,h,k),r.updateOffset(this,m),this):$r(this,h)}}function $r(h,m){return h.isValid()?h._d["get"+(h._isUTC?"UTC":"")+m]():NaN}function $p(h,m,k){h.isValid()&&!isNaN(k)&&(m==="FullYear"&&an(h.year())&&h.month()===1&&h.date()===29?(k=Fe(k),h._d["set"+(h._isUTC?"UTC":"")+m](k,h.month(),Xo(k,h.month()))):h._d["set"+(h._isUTC?"UTC":"")+m](k))}function Ok(h){return h=Xe(h),B(this[h])?this[h]():this}function Pk(h,m){if(typeof h=="object"){h=Ne(h);var k=xn(h),x,M=k.length;for(x=0;x<M;x++)this[k[x].unit](h[k[x].unit])}else if(h=Xe(h),B(this[h]))return this[h](m);return this}var Cp=/\d/,Bn=/\d\d/,Ip=/\d{3}/,Xc=/\d{4}/,Go=/[+-]?\d{6}/,Nt=/\d\d?/,Dp=/\d\d\d\d?/,Ep=/\d\d\d\d\d\d?/,Uo=/\d{1,3}/,Kc=/\d{1,4}/,Ho=/[+-]?\d{1,6}/,Ts=/\d+/,Wo=/[+-]?\d+/,Nk=/Z|[+-]\d\d:?\d\d/gi,Bo=/Z|[+-]\d\d(?::?\d\d)?/gi,Lk=/[+-]?\d+(\.\d{1,3})?/,Ia=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,qo;qo={};function De(h,m,k){qo[h]=B(m)?m:function(x,M){return x&&k?k:m}}function Rk(h,m){return l(qo,h)?qo[h](m._strict,m._locale):new RegExp(Ak(h))}function Ak(h){return qn(h.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(m,k,x,M,W){return k||x||M||W}))}function qn(h){return h.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Qc={};function wt(h,m){var k,x=m,M;for(typeof h=="string"&&(h=[h]),d(m)&&(x=function(W,te){te[m]=Fe(W)}),M=h.length,k=0;k<M;k++)Qc[h[k]]=x}function Da(h,m){wt(h,function(k,x,M,W){M._w=M._w||{},m(k,M._w,M,W)})}function Fk(h,m,k){m!=null&&l(Qc,h)&&Qc[h](m,k._a,k,h)}var pn=0,Ar=1,Cr=2,sn=3,fr=4,Fr=5,Fi=6,Vk=7,zk=8;function jk(h,m){return(h%m+m)%m}var qt;Array.prototype.indexOf?qt=Array.prototype.indexOf:qt=function(h){var m;for(m=0;m<this.length;++m)if(this[m]===h)return m;return-1};function Xo(h,m){if(isNaN(h)||isNaN(m))return NaN;var k=jk(m,12);return h+=(m-k)/12,k===1?an(h)?29:28:31-k%7%2}K("M",["MM",2],"Mo",function(){return this.month()+1}),K("MMM",0,0,function(h){return this.localeData().monthsShort(this,h)}),K("MMMM",0,0,function(h){return this.localeData().months(this,h)}),Ae("month","M"),Je("month",8),De("M",Nt),De("MM",Nt,Bn),De("MMM",function(h,m){return m.monthsShortRegex(h)}),De("MMMM",function(h,m){return m.monthsRegex(h)}),wt(["M","MM"],function(h,m){m[Ar]=Fe(h)-1}),wt(["MMM","MMMM"],function(h,m,k,x){var M=k._locale.monthsParse(h,x,k._strict);M!=null?m[Ar]=M:_(k).invalidMonth=h});var Yk="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Mp="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Op=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gk=Ia,Uk=Ia;function Hk(h,m){return h?a(this._months)?this._months[h.month()]:this._months[(this._months.isFormat||Op).test(m)?"format":"standalone"][h.month()]:a(this._months)?this._months:this._months.standalone}function Wk(h,m){return h?a(this._monthsShort)?this._monthsShort[h.month()]:this._monthsShort[Op.test(m)?"format":"standalone"][h.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Bk(h,m,k){var x,M,W,te=h.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],x=0;x<12;++x)W=g([2e3,x]),this._shortMonthsParse[x]=this.monthsShort(W,"").toLocaleLowerCase(),this._longMonthsParse[x]=this.months(W,"").toLocaleLowerCase();return k?m==="MMM"?(M=qt.call(this._shortMonthsParse,te),M!==-1?M:null):(M=qt.call(this._longMonthsParse,te),M!==-1?M:null):m==="MMM"?(M=qt.call(this._shortMonthsParse,te),M!==-1?M:(M=qt.call(this._longMonthsParse,te),M!==-1?M:null)):(M=qt.call(this._longMonthsParse,te),M!==-1?M:(M=qt.call(this._shortMonthsParse,te),M!==-1?M:null))}function qk(h,m,k){var x,M,W;if(this._monthsParseExact)return Bk.call(this,h,m,k);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),x=0;x<12;x++){if(M=g([2e3,x]),k&&!this._longMonthsParse[x]&&(this._longMonthsParse[x]=new RegExp("^"+this.months(M,"").replace(".","")+"$","i"),this._shortMonthsParse[x]=new RegExp("^"+this.monthsShort(M,"").replace(".","")+"$","i")),!k&&!this._monthsParse[x]&&(W="^"+this.months(M,"")+"|^"+this.monthsShort(M,""),this._monthsParse[x]=new RegExp(W.replace(".",""),"i")),k&&m==="MMMM"&&this._longMonthsParse[x].test(h))return x;if(k&&m==="MMM"&&this._shortMonthsParse[x].test(h))return x;if(!k&&this._monthsParse[x].test(h))return x}}function Pp(h,m){var k;if(!h.isValid())return h;if(typeof m=="string"){if(/^\d+$/.test(m))m=Fe(m);else if(m=h.localeData().monthsParse(m),!d(m))return h}return k=Math.min(h.date(),Xo(h.year(),m)),h._d["set"+(h._isUTC?"UTC":"")+"Month"](m,k),h}function Np(h){return h!=null?(Pp(this,h),r.updateOffset(this,!0),this):$r(this,"Month")}function Xk(){return Xo(this.year(),this.month())}function Kk(h){return this._monthsParseExact?(l(this,"_monthsRegex")||Lp.call(this),h?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Gk),this._monthsShortStrictRegex&&h?this._monthsShortStrictRegex:this._monthsShortRegex)}function Qk(h){return this._monthsParseExact?(l(this,"_monthsRegex")||Lp.call(this),h?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Uk),this._monthsStrictRegex&&h?this._monthsStrictRegex:this._monthsRegex)}function Lp(){function h(te,je){return je.length-te.length}var m=[],k=[],x=[],M,W;for(M=0;M<12;M++)W=g([2e3,M]),m.push(this.monthsShort(W,"")),k.push(this.months(W,"")),x.push(this.months(W,"")),x.push(this.monthsShort(W,""));for(m.sort(h),k.sort(h),x.sort(h),M=0;M<12;M++)m[M]=qn(m[M]),k[M]=qn(k[M]);for(M=0;M<24;M++)x[M]=qn(x[M]);this._monthsRegex=new RegExp("^("+x.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+k.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+m.join("|")+")","i")}K("Y",0,0,function(){var h=this.year();return h<=9999?xe(h,4):"+"+h}),K(0,["YY",2],0,function(){return this.year()%100}),K(0,["YYYY",4],0,"year"),K(0,["YYYYY",5],0,"year"),K(0,["YYYYYY",6,!0],0,"year"),Ae("year","y"),Je("year",1),De("Y",Wo),De("YY",Nt,Bn),De("YYYY",Kc,Xc),De("YYYYY",Ho,Go),De("YYYYYY",Ho,Go),wt(["YYYYY","YYYYYY"],pn),wt("YYYY",function(h,m){m[pn]=h.length===2?r.parseTwoDigitYear(h):Fe(h)}),wt("YY",function(h,m){m[pn]=r.parseTwoDigitYear(h)}),wt("Y",function(h,m){m[pn]=parseInt(h,10)});function Ea(h){return an(h)?366:365}r.parseTwoDigitYear=function(h){return Fe(h)+(Fe(h)>68?1900:2e3)};var Rp=rn("FullYear",!0);function Jk(){return an(this.year())}function Zk(h,m,k,x,M,W,te){var je;return h<100&&h>=0?(je=new Date(h+400,m,k,x,M,W,te),isFinite(je.getFullYear())&&je.setFullYear(h)):je=new Date(h,m,k,x,M,W,te),je}function Ma(h){var m,k;return h<100&&h>=0?(k=Array.prototype.slice.call(arguments),k[0]=h+400,m=new Date(Date.UTC.apply(null,k)),isFinite(m.getUTCFullYear())&&m.setUTCFullYear(h)):m=new Date(Date.UTC.apply(null,arguments)),m}function Ko(h,m,k){var x=7+m-k,M=(7+Ma(h,0,x).getUTCDay()-m)%7;return-M+x-1}function Ap(h,m,k,x,M){var W=(7+k-x)%7,te=Ko(h,x,M),je=1+7*(m-1)+W+te,rt,kt;return je<=0?(rt=h-1,kt=Ea(rt)+je):je>Ea(h)?(rt=h+1,kt=je-Ea(h)):(rt=h,kt=je),{year:rt,dayOfYear:kt}}function Oa(h,m,k){var x=Ko(h.year(),m,k),M=Math.floor((h.dayOfYear()-x-1)/7)+1,W,te;return M<1?(te=h.year()-1,W=M+Vr(te,m,k)):M>Vr(h.year(),m,k)?(W=M-Vr(h.year(),m,k),te=h.year()+1):(te=h.year(),W=M),{week:W,year:te}}function Vr(h,m,k){var x=Ko(h,m,k),M=Ko(h+1,m,k);return(Ea(h)-x+M)/7}K("w",["ww",2],"wo","week"),K("W",["WW",2],"Wo","isoWeek"),Ae("week","w"),Ae("isoWeek","W"),Je("week",5),Je("isoWeek",5),De("w",Nt),De("ww",Nt,Bn),De("W",Nt),De("WW",Nt,Bn),Da(["w","ww","W","WW"],function(h,m,k,x){m[x.substr(0,1)]=Fe(h)});function eS(h){return Oa(h,this._week.dow,this._week.doy).week}var tS={dow:0,doy:6};function nS(){return this._week.dow}function rS(){return this._week.doy}function iS(h){var m=this.localeData().week(this);return h==null?m:this.add((h-m)*7,"d")}function sS(h){var m=Oa(this,1,4).week;return h==null?m:this.add((h-m)*7,"d")}K("d",0,"do","day"),K("dd",0,0,function(h){return this.localeData().weekdaysMin(this,h)}),K("ddd",0,0,function(h){return this.localeData().weekdaysShort(this,h)}),K("dddd",0,0,function(h){return this.localeData().weekdays(this,h)}),K("e",0,0,"weekday"),K("E",0,0,"isoWeekday"),Ae("day","d"),Ae("weekday","e"),Ae("isoWeekday","E"),Je("day",11),Je("weekday",11),Je("isoWeekday",11),De("d",Nt),De("e",Nt),De("E",Nt),De("dd",function(h,m){return m.weekdaysMinRegex(h)}),De("ddd",function(h,m){return m.weekdaysShortRegex(h)}),De("dddd",function(h,m){return m.weekdaysRegex(h)}),Da(["dd","ddd","dddd"],function(h,m,k,x){var M=k._locale.weekdaysParse(h,x,k._strict);M!=null?m.d=M:_(k).invalidWeekday=h}),Da(["d","e","E"],function(h,m,k,x){m[x]=Fe(h)});function aS(h,m){return typeof h!="string"?h:isNaN(h)?(h=m.weekdaysParse(h),typeof h=="number"?h:null):parseInt(h,10)}function oS(h,m){return typeof h=="string"?m.weekdaysParse(h)%7||7:isNaN(h)?null:h}function Jc(h,m){return h.slice(m,7).concat(h.slice(0,m))}var lS="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fp="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),cS="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),uS=Ia,dS=Ia,hS=Ia;function fS(h,m){var k=a(this._weekdays)?this._weekdays:this._weekdays[h&&h!==!0&&this._weekdays.isFormat.test(m)?"format":"standalone"];return h===!0?Jc(k,this._week.dow):h?k[h.day()]:k}function pS(h){return h===!0?Jc(this._weekdaysShort,this._week.dow):h?this._weekdaysShort[h.day()]:this._weekdaysShort}function vS(h){return h===!0?Jc(this._weekdaysMin,this._week.dow):h?this._weekdaysMin[h.day()]:this._weekdaysMin}function mS(h,m,k){var x,M,W,te=h.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],x=0;x<7;++x)W=g([2e3,1]).day(x),this._minWeekdaysParse[x]=this.weekdaysMin(W,"").toLocaleLowerCase(),this._shortWeekdaysParse[x]=this.weekdaysShort(W,"").toLocaleLowerCase(),this._weekdaysParse[x]=this.weekdays(W,"").toLocaleLowerCase();return k?m==="dddd"?(M=qt.call(this._weekdaysParse,te),M!==-1?M:null):m==="ddd"?(M=qt.call(this._shortWeekdaysParse,te),M!==-1?M:null):(M=qt.call(this._minWeekdaysParse,te),M!==-1?M:null):m==="dddd"?(M=qt.call(this._weekdaysParse,te),M!==-1||(M=qt.call(this._shortWeekdaysParse,te),M!==-1)?M:(M=qt.call(this._minWeekdaysParse,te),M!==-1?M:null)):m==="ddd"?(M=qt.call(this._shortWeekdaysParse,te),M!==-1||(M=qt.call(this._weekdaysParse,te),M!==-1)?M:(M=qt.call(this._minWeekdaysParse,te),M!==-1?M:null)):(M=qt.call(this._minWeekdaysParse,te),M!==-1||(M=qt.call(this._weekdaysParse,te),M!==-1)?M:(M=qt.call(this._shortWeekdaysParse,te),M!==-1?M:null))}function gS(h,m,k){var x,M,W;if(this._weekdaysParseExact)return mS.call(this,h,m,k);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),x=0;x<7;x++){if(M=g([2e3,1]).day(x),k&&!this._fullWeekdaysParse[x]&&(this._fullWeekdaysParse[x]=new RegExp("^"+this.weekdays(M,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[x]=new RegExp("^"+this.weekdaysShort(M,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[x]=new RegExp("^"+this.weekdaysMin(M,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[x]||(W="^"+this.weekdays(M,"")+"|^"+this.weekdaysShort(M,"")+"|^"+this.weekdaysMin(M,""),this._weekdaysParse[x]=new RegExp(W.replace(".",""),"i")),k&&m==="dddd"&&this._fullWeekdaysParse[x].test(h))return x;if(k&&m==="ddd"&&this._shortWeekdaysParse[x].test(h))return x;if(k&&m==="dd"&&this._minWeekdaysParse[x].test(h))return x;if(!k&&this._weekdaysParse[x].test(h))return x}}function yS(h){if(!this.isValid())return h!=null?this:NaN;var m=this._isUTC?this._d.getUTCDay():this._d.getDay();return h!=null?(h=aS(h,this.localeData()),this.add(h-m,"d")):m}function _S(h){if(!this.isValid())return h!=null?this:NaN;var m=(this.day()+7-this.localeData()._week.dow)%7;return h==null?m:this.add(h-m,"d")}function bS(h){if(!this.isValid())return h!=null?this:NaN;if(h!=null){var m=oS(h,this.localeData());return this.day(this.day()%7?m:m-7)}else return this.day()||7}function wS(h){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zc.call(this),h?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=uS),this._weekdaysStrictRegex&&h?this._weekdaysStrictRegex:this._weekdaysRegex)}function kS(h){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zc.call(this),h?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=dS),this._weekdaysShortStrictRegex&&h?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function SS(h){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zc.call(this),h?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=hS),this._weekdaysMinStrictRegex&&h?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zc(){function h(Tn,Ur){return Ur.length-Tn.length}var m=[],k=[],x=[],M=[],W,te,je,rt,kt;for(W=0;W<7;W++)te=g([2e3,1]).day(W),je=qn(this.weekdaysMin(te,"")),rt=qn(this.weekdaysShort(te,"")),kt=qn(this.weekdays(te,"")),m.push(je),k.push(rt),x.push(kt),M.push(je),M.push(rt),M.push(kt);m.sort(h),k.sort(h),x.sort(h),M.sort(h),this._weekdaysRegex=new RegExp("^("+M.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+x.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+m.join("|")+")","i")}function eu(){return this.hours()%12||12}function xS(){return this.hours()||24}K("H",["HH",2],0,"hour"),K("h",["hh",2],0,eu),K("k",["kk",2],0,xS),K("hmm",0,0,function(){return""+eu.apply(this)+xe(this.minutes(),2)}),K("hmmss",0,0,function(){return""+eu.apply(this)+xe(this.minutes(),2)+xe(this.seconds(),2)}),K("Hmm",0,0,function(){return""+this.hours()+xe(this.minutes(),2)}),K("Hmmss",0,0,function(){return""+this.hours()+xe(this.minutes(),2)+xe(this.seconds(),2)});function Vp(h,m){K(h,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),m)})}Vp("a",!0),Vp("A",!1),Ae("hour","h"),Je("hour",13);function zp(h,m){return m._meridiemParse}De("a",zp),De("A",zp),De("H",Nt),De("h",Nt),De("k",Nt),De("HH",Nt,Bn),De("hh",Nt,Bn),De("kk",Nt,Bn),De("hmm",Dp),De("hmmss",Ep),De("Hmm",Dp),De("Hmmss",Ep),wt(["H","HH"],sn),wt(["k","kk"],function(h,m,k){var x=Fe(h);m[sn]=x===24?0:x}),wt(["a","A"],function(h,m,k){k._isPm=k._locale.isPM(h),k._meridiem=h}),wt(["h","hh"],function(h,m,k){m[sn]=Fe(h),_(k).bigHour=!0}),wt("hmm",function(h,m,k){var x=h.length-2;m[sn]=Fe(h.substr(0,x)),m[fr]=Fe(h.substr(x)),_(k).bigHour=!0}),wt("hmmss",function(h,m,k){var x=h.length-4,M=h.length-2;m[sn]=Fe(h.substr(0,x)),m[fr]=Fe(h.substr(x,2)),m[Fr]=Fe(h.substr(M)),_(k).bigHour=!0}),wt("Hmm",function(h,m,k){var x=h.length-2;m[sn]=Fe(h.substr(0,x)),m[fr]=Fe(h.substr(x))}),wt("Hmmss",function(h,m,k){var x=h.length-4,M=h.length-2;m[sn]=Fe(h.substr(0,x)),m[fr]=Fe(h.substr(x,2)),m[Fr]=Fe(h.substr(M))});function TS(h){return(h+"").toLowerCase().charAt(0)==="p"}var $S=/[ap]\.?m?\.?/i,CS=rn("Hours",!0);function IS(h,m,k){return h>11?k?"pm":"PM":k?"am":"AM"}var jp={calendar:oe,longDateFormat:Re,invalidDate:he,ordinal:et,dayOfMonthOrdinalParse:st,relativeTime:Sn,months:Yk,monthsShort:Mp,week:tS,weekdays:lS,weekdaysMin:cS,weekdaysShort:Fp,meridiemParse:$S},At={},Pa={},Na;function DS(h,m){var k,x=Math.min(h.length,m.length);for(k=0;k<x;k+=1)if(h[k]!==m[k])return k;return x}function Yp(h){return h&&h.toLowerCase().replace("_","-")}function ES(h){for(var m=0,k,x,M,W;m<h.length;){for(W=Yp(h[m]).split("-"),k=W.length,x=Yp(h[m+1]),x=x?x.split("-"):null;k>0;){if(M=Qo(W.slice(0,k).join("-")),M)return M;if(x&&x.length>=k&&DS(W,x)>=k-1)break;k--}m++}return Na}function MS(h){return h.match("^[^/\\\\]*$")!=null}function Qo(h){var m=null,k;if(At[h]===void 0&&!0&&e&&e.exports&&MS(h))try{m=Na._abbr,k=Pr,k("./locale/"+h),li(m)}catch(x){At[h]=null}return At[h]}function li(h,m){var k;return h&&(u(m)?k=zr(h):k=tu(h,m),k?Na=k:typeof console!="undefined"&&console.warn&&console.warn("Locale "+h+" not found. Did you forget to load it?")),Na._abbr}function tu(h,m){if(m!==null){var k,x=jp;if(m.abbr=h,At[h]!=null)j("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),x=At[h]._config;else if(m.parentLocale!=null)if(At[m.parentLocale]!=null)x=At[m.parentLocale]._config;else if(k=Qo(m.parentLocale),k!=null)x=k._config;else return Pa[m.parentLocale]||(Pa[m.parentLocale]=[]),Pa[m.parentLocale].push({name:h,config:m}),null;return At[h]=new re(H(x,m)),Pa[h]&&Pa[h].forEach(function(M){tu(M.name,M.config)}),li(h),At[h]}else return delete At[h],null}function OS(h,m){if(m!=null){var k,x,M=jp;At[h]!=null&&At[h].parentLocale!=null?At[h].set(H(At[h]._config,m)):(x=Qo(h),x!=null&&(M=x._config),m=H(M,m),x==null&&(m.abbr=h),k=new re(m),k.parentLocale=At[h],At[h]=k),li(h)}else At[h]!=null&&(At[h].parentLocale!=null?(At[h]=At[h].parentLocale,h===li()&&li(h)):At[h]!=null&&delete At[h]);return At[h]}function zr(h){var m;if(h&&h._locale&&h._locale._abbr&&(h=h._locale._abbr),!h)return Na;if(!a(h)){if(m=Qo(h),m)return m;h=[h]}return ES(h)}function PS(){return fe(At)}function nu(h){var m,k=h._a;return k&&_(h).overflow===-2&&(m=k[Ar]<0||k[Ar]>11?Ar:k[Cr]<1||k[Cr]>Xo(k[pn],k[Ar])?Cr:k[sn]<0||k[sn]>24||k[sn]===24&&(k[fr]!==0||k[Fr]!==0||k[Fi]!==0)?sn:k[fr]<0||k[fr]>59?fr:k[Fr]<0||k[Fr]>59?Fr:k[Fi]<0||k[Fi]>999?Fi:-1,_(h)._overflowDayOfYear&&(m<pn||m>Cr)&&(m=Cr),_(h)._overflowWeeks&&m===-1&&(m=Vk),_(h)._overflowWeekday&&m===-1&&(m=zk),_(h).overflow=m),h}var NS=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,LS=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,RS=/Z|[+-]\d\d(?::?\d\d)?/,Jo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ru=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],AS=/^\/?Date\((-?\d+)/i,FS=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,VS={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Gp(h){var m,k,x=h._i,M=NS.exec(x)||LS.exec(x),W,te,je,rt,kt=Jo.length,Tn=ru.length;if(M){for(_(h).iso=!0,m=0,k=kt;m<k;m++)if(Jo[m][1].exec(M[1])){te=Jo[m][0],W=Jo[m][2]!==!1;break}if(te==null){h._isValid=!1;return}if(M[3]){for(m=0,k=Tn;m<k;m++)if(ru[m][1].exec(M[3])){je=(M[2]||" ")+ru[m][0];break}if(je==null){h._isValid=!1;return}}if(!W&&je!=null){h._isValid=!1;return}if(M[4])if(RS.exec(M[4]))rt="Z";else{h._isValid=!1;return}h._f=te+(je||"")+(rt||""),su(h)}else h._isValid=!1}function zS(h,m,k,x,M,W){var te=[jS(h),Mp.indexOf(m),parseInt(k,10),parseInt(x,10),parseInt(M,10)];return W&&te.push(parseInt(W,10)),te}function jS(h){var m=parseInt(h,10);return m<=49?2e3+m:m<=999?1900+m:m}function YS(h){return h.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function GS(h,m,k){if(h){var x=Fp.indexOf(h),M=new Date(m[0],m[1],m[2]).getDay();if(x!==M)return _(k).weekdayMismatch=!0,k._isValid=!1,!1}return!0}function US(h,m,k){if(h)return VS[h];if(m)return 0;var x=parseInt(k,10),M=x%100,W=(x-M)/100;return W*60+M}function Up(h){var m=FS.exec(YS(h._i)),k;if(m){if(k=zS(m[4],m[3],m[2],m[5],m[6],m[7]),!GS(m[1],k,h))return;h._a=k,h._tzm=US(m[8],m[9],m[10]),h._d=Ma.apply(null,h._a),h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),_(h).rfc2822=!0}else h._isValid=!1}function HS(h){var m=AS.exec(h._i);if(m!==null){h._d=new Date(+m[1]);return}if(Gp(h),h._isValid===!1)delete h._isValid;else return;if(Up(h),h._isValid===!1)delete h._isValid;else return;h._strict?h._isValid=!1:r.createFromInputFallback(h)}r.createFromInputFallback=R("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(h){h._d=new Date(h._i+(h._useUTC?" UTC":""))});function $s(h,m,k){return h!=null?h:m!=null?m:k}function WS(h){var m=new Date(r.now());return h._useUTC?[m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()]:[m.getFullYear(),m.getMonth(),m.getDate()]}function iu(h){var m,k,x=[],M,W,te;if(!h._d){for(M=WS(h),h._w&&h._a[Cr]==null&&h._a[Ar]==null&&BS(h),h._dayOfYear!=null&&(te=$s(h._a[pn],M[pn]),(h._dayOfYear>Ea(te)||h._dayOfYear===0)&&(_(h)._overflowDayOfYear=!0),k=Ma(te,0,h._dayOfYear),h._a[Ar]=k.getUTCMonth(),h._a[Cr]=k.getUTCDate()),m=0;m<3&&h._a[m]==null;++m)h._a[m]=x[m]=M[m];for(;m<7;m++)h._a[m]=x[m]=h._a[m]==null?m===2?1:0:h._a[m];h._a[sn]===24&&h._a[fr]===0&&h._a[Fr]===0&&h._a[Fi]===0&&(h._nextDay=!0,h._a[sn]=0),h._d=(h._useUTC?Ma:Zk).apply(null,x),W=h._useUTC?h._d.getUTCDay():h._d.getDay(),h._tzm!=null&&h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),h._nextDay&&(h._a[sn]=24),h._w&&typeof h._w.d!="undefined"&&h._w.d!==W&&(_(h).weekdayMismatch=!0)}}function BS(h){var m,k,x,M,W,te,je,rt,kt;m=h._w,m.GG!=null||m.W!=null||m.E!=null?(W=1,te=4,k=$s(m.GG,h._a[pn],Oa(Lt(),1,4).year),x=$s(m.W,1),M=$s(m.E,1),(M<1||M>7)&&(rt=!0)):(W=h._locale._week.dow,te=h._locale._week.doy,kt=Oa(Lt(),W,te),k=$s(m.gg,h._a[pn],kt.year),x=$s(m.w,kt.week),m.d!=null?(M=m.d,(M<0||M>6)&&(rt=!0)):m.e!=null?(M=m.e+W,(m.e<0||m.e>6)&&(rt=!0)):M=W),x<1||x>Vr(k,W,te)?_(h)._overflowWeeks=!0:rt!=null?_(h)._overflowWeekday=!0:(je=Ap(k,x,M,W,te),h._a[pn]=je.year,h._dayOfYear=je.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function su(h){if(h._f===r.ISO_8601){Gp(h);return}if(h._f===r.RFC_2822){Up(h);return}h._a=[],_(h).empty=!0;var m=""+h._i,k,x,M,W,te,je=m.length,rt=0,kt,Tn;for(M=$e(h._f,h._locale).match(Ee)||[],Tn=M.length,k=0;k<Tn;k++)W=M[k],x=(m.match(Rk(W,h))||[])[0],x&&(te=m.substr(0,m.indexOf(x)),te.length>0&&_(h).unusedInput.push(te),m=m.slice(m.indexOf(x)+x.length),rt+=x.length),ee[W]?(x?_(h).empty=!1:_(h).unusedTokens.push(W),Fk(W,x,h)):h._strict&&!x&&_(h).unusedTokens.push(W);_(h).charsLeftOver=je-rt,m.length>0&&_(h).unusedInput.push(m),h._a[sn]<=12&&_(h).bigHour===!0&&h._a[sn]>0&&(_(h).bigHour=void 0),_(h).parsedDateParts=h._a.slice(0),_(h).meridiem=h._meridiem,h._a[sn]=qS(h._locale,h._a[sn],h._meridiem),kt=_(h).era,kt!==null&&(h._a[pn]=h._locale.erasConvertYear(kt,h._a[pn])),iu(h),nu(h)}function qS(h,m,k){var x;return k==null?m:h.meridiemHour!=null?h.meridiemHour(m,k):(h.isPM!=null&&(x=h.isPM(k),x&&m<12&&(m+=12),!x&&m===12&&(m=0)),m)}function XS(h){var m,k,x,M,W,te,je=!1,rt=h._f.length;if(rt===0){_(h).invalidFormat=!0,h._d=new Date(NaN);return}for(M=0;M<rt;M++)W=0,te=!1,m=A({},h),h._useUTC!=null&&(m._useUTC=h._useUTC),m._f=h._f[M],su(m),I(m)&&(te=!0),W+=_(m).charsLeftOver,W+=_(m).unusedTokens.length*10,_(m).score=W,je?W<x&&(x=W,k=m):(x==null||W<x||te)&&(x=W,k=m,te&&(je=!0));v(h,k||m)}function KS(h){if(!h._d){var m=Ne(h._i),k=m.day===void 0?m.date:m.day;h._a=p([m.year,m.month,k,m.hour,m.minute,m.second,m.millisecond],function(x){return x&&parseInt(x,10)}),iu(h)}}function QS(h){var m=new z(nu(Hp(h)));return m._nextDay&&(m.add(1,"d"),m._nextDay=void 0),m}function Hp(h){var m=h._i,k=h._f;return h._locale=h._locale||zr(h._l),m===null||k===void 0&&m===""?C({nullInput:!0}):(typeof m=="string"&&(h._i=m=h._locale.preparse(m)),N(m)?new z(nu(m)):(f(m)?h._d=m:a(k)?XS(h):k?su(h):JS(h),I(h)||(h._d=null),h))}function JS(h){var m=h._i;u(m)?h._d=new Date(r.now()):f(m)?h._d=new Date(m.valueOf()):typeof m=="string"?HS(h):a(m)?(h._a=p(m.slice(0),function(k){return parseInt(k,10)}),iu(h)):o(m)?KS(h):d(m)?h._d=new Date(m):r.createFromInputFallback(h)}function Wp(h,m,k,x,M){var W={};return(m===!0||m===!1)&&(x=m,m=void 0),(k===!0||k===!1)&&(x=k,k=void 0),(o(h)&&c(h)||a(h)&&h.length===0)&&(h=void 0),W._isAMomentObject=!0,W._useUTC=W._isUTC=M,W._l=k,W._i=h,W._f=m,W._strict=x,QS(W)}function Lt(h,m,k,x){return Wp(h,m,k,x,!1)}var ZS=R("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var h=Lt.apply(null,arguments);return this.isValid()&&h.isValid()?h<this?this:h:C()}),ex=R("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var h=Lt.apply(null,arguments);return this.isValid()&&h.isValid()?h>this?this:h:C()});function Bp(h,m){var k,x;if(m.length===1&&a(m[0])&&(m=m[0]),!m.length)return Lt();for(k=m[0],x=1;x<m.length;++x)(!m[x].isValid()||m[x][h](k))&&(k=m[x]);return k}function tx(){var h=[].slice.call(arguments,0);return Bp("isBefore",h)}function nx(){var h=[].slice.call(arguments,0);return Bp("isAfter",h)}var rx=function(){return Date.now?Date.now():+new Date},La=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ix(h){var m,k=!1,x,M=La.length;for(m in h)if(l(h,m)&&!(qt.call(La,m)!==-1&&(h[m]==null||!isNaN(h[m]))))return!1;for(x=0;x<M;++x)if(h[La[x]]){if(k)return!1;parseFloat(h[La[x]])!==Fe(h[La[x]])&&(k=!0)}return!0}function sx(){return this._isValid}function ax(){return pr(NaN)}function Zo(h){var m=Ne(h),k=m.year||0,x=m.quarter||0,M=m.month||0,W=m.week||m.isoWeek||0,te=m.day||0,je=m.hour||0,rt=m.minute||0,kt=m.second||0,Tn=m.millisecond||0;this._isValid=ix(m),this._milliseconds=+Tn+kt*1e3+rt*6e4+je*1e3*60*60,this._days=+te+W*7,this._months=+M+x*3+k*12,this._data={},this._locale=zr(),this._bubble()}function el(h){return h instanceof Zo}function au(h){return h<0?Math.round(-1*h)*-1:Math.round(h)}function ox(h,m,k){var x=Math.min(h.length,m.length),M=Math.abs(h.length-m.length),W=0,te;for(te=0;te<x;te++)(k&&h[te]!==m[te]||!k&&Fe(h[te])!==Fe(m[te]))&&W++;return W+M}function qp(h,m){K(h,0,0,function(){var k=this.utcOffset(),x="+";return k<0&&(k=-k,x="-"),x+xe(~~(k/60),2)+m+xe(~~k%60,2)})}qp("Z",":"),qp("ZZ",""),De("Z",Bo),De("ZZ",Bo),wt(["Z","ZZ"],function(h,m,k){k._useUTC=!0,k._tzm=ou(Bo,h)});var lx=/([\+\-]|\d\d)/gi;function ou(h,m){var k=(m||"").match(h),x,M,W;return k===null?null:(x=k[k.length-1]||[],M=(x+"").match(lx)||["-",0,0],W=+(M[1]*60)+Fe(M[2]),W===0?0:M[0]==="+"?W:-W)}function lu(h,m){var k,x;return m._isUTC?(k=m.clone(),x=(N(h)||f(h)?h.valueOf():Lt(h).valueOf())-k.valueOf(),k._d.setTime(k._d.valueOf()+x),r.updateOffset(k,!1),k):Lt(h).local()}function cu(h){return-Math.round(h._d.getTimezoneOffset())}r.updateOffset=function(){};function cx(h,m,k){var x=this._offset||0,M;if(!this.isValid())return h!=null?this:NaN;if(h!=null){if(typeof h=="string"){if(h=ou(Bo,h),h===null)return this}else Math.abs(h)<16&&!k&&(h=h*60);return!this._isUTC&&m&&(M=cu(this)),this._offset=h,this._isUTC=!0,M!=null&&this.add(M,"m"),x!==h&&(!m||this._changeInProgress?Jp(this,pr(h-x,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?x:cu(this)}function ux(h,m){return h!=null?(typeof h!="string"&&(h=-h),this.utcOffset(h,m),this):-this.utcOffset()}function dx(h){return this.utcOffset(0,h)}function hx(h){return this._isUTC&&(this.utcOffset(0,h),this._isUTC=!1,h&&this.subtract(cu(this),"m")),this}function fx(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var h=ou(Nk,this._i);h!=null?this.utcOffset(h):this.utcOffset(0,!0)}return this}function px(h){return this.isValid()?(h=h?Lt(h).utcOffset():0,(this.utcOffset()-h)%60===0):!1}function vx(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function mx(){if(!u(this._isDSTShifted))return this._isDSTShifted;var h={},m;return A(h,this),h=Hp(h),h._a?(m=h._isUTC?g(h._a):Lt(h._a),this._isDSTShifted=this.isValid()&&ox(h._a,m.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function gx(){return this.isValid()?!this._isUTC:!1}function yx(){return this.isValid()?this._isUTC:!1}function Xp(){return this.isValid()?this._isUTC&&this._offset===0:!1}var _x=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,bx=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function pr(h,m){var k=h,x=null,M,W,te;return el(h)?k={ms:h._milliseconds,d:h._days,M:h._months}:d(h)||!isNaN(+h)?(k={},m?k[m]=+h:k.milliseconds=+h):(x=_x.exec(h))?(M=x[1]==="-"?-1:1,k={y:0,d:Fe(x[Cr])*M,h:Fe(x[sn])*M,m:Fe(x[fr])*M,s:Fe(x[Fr])*M,ms:Fe(au(x[Fi]*1e3))*M}):(x=bx.exec(h))?(M=x[1]==="-"?-1:1,k={y:Vi(x[2],M),M:Vi(x[3],M),w:Vi(x[4],M),d:Vi(x[5],M),h:Vi(x[6],M),m:Vi(x[7],M),s:Vi(x[8],M)}):k==null?k={}:typeof k=="object"&&("from"in k||"to"in k)&&(te=wx(Lt(k.from),Lt(k.to)),k={},k.ms=te.milliseconds,k.M=te.months),W=new Zo(k),el(h)&&l(h,"_locale")&&(W._locale=h._locale),el(h)&&l(h,"_isValid")&&(W._isValid=h._isValid),W}pr.fn=Zo.prototype,pr.invalid=ax;function Vi(h,m){var k=h&&parseFloat(h.replace(",","."));return(isNaN(k)?0:k)*m}function Kp(h,m){var k={};return k.months=m.month()-h.month()+(m.year()-h.year())*12,h.clone().add(k.months,"M").isAfter(m)&&--k.months,k.milliseconds=+m-+h.clone().add(k.months,"M"),k}function wx(h,m){var k;return h.isValid()&&m.isValid()?(m=lu(m,h),h.isBefore(m)?k=Kp(h,m):(k=Kp(m,h),k.milliseconds=-k.milliseconds,k.months=-k.months),k):{milliseconds:0,months:0}}function Qp(h,m){return function(k,x){var M,W;return x!==null&&!isNaN(+x)&&(j(m,"moment()."+m+"(period, number) is deprecated. Please use moment()."+m+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),W=k,k=x,x=W),M=pr(k,x),Jp(this,M,h),this}}function Jp(h,m,k,x){var M=m._milliseconds,W=au(m._days),te=au(m._months);!h.isValid()||(x=x==null?!0:x,te&&Pp(h,$r(h,"Month")+te*k),W&&$p(h,"Date",$r(h,"Date")+W*k),M&&h._d.setTime(h._d.valueOf()+M*k),x&&r.updateOffset(h,W||te))}var kx=Qp(1,"add"),Sx=Qp(-1,"subtract");function Zp(h){return typeof h=="string"||h instanceof String}function xx(h){return N(h)||f(h)||Zp(h)||d(h)||$x(h)||Tx(h)||h===null||h===void 0}function Tx(h){var m=o(h)&&!c(h),k=!1,x=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],M,W,te=x.length;for(M=0;M<te;M+=1)W=x[M],k=k||l(h,W);return m&&k}function $x(h){var m=a(h),k=!1;return m&&(k=h.filter(function(x){return!d(x)&&Zp(h)}).length===0),m&&k}function Cx(h){var m=o(h)&&!c(h),k=!1,x=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],M,W;for(M=0;M<x.length;M+=1)W=x[M],k=k||l(h,W);return m&&k}function Ix(h,m){var k=h.diff(m,"days",!0);return k<-6?"sameElse":k<-1?"lastWeek":k<0?"lastDay":k<1?"sameDay":k<2?"nextDay":k<7?"nextWeek":"sameElse"}function Dx(h,m){arguments.length===1&&(arguments[0]?xx(arguments[0])?(h=arguments[0],m=void 0):Cx(arguments[0])&&(m=arguments[0],h=void 0):(h=void 0,m=void 0));var k=h||Lt(),x=lu(k,this).startOf("day"),M=r.calendarFormat(this,x)||"sameElse",W=m&&(B(m[M])?m[M].call(this,k):m[M]);return this.format(W||this.localeData().calendar(M,this,Lt(k)))}function Ex(){return new z(this)}function Mx(h,m){var k=N(h)?h:Lt(h);return this.isValid()&&k.isValid()?(m=Xe(m)||"millisecond",m==="millisecond"?this.valueOf()>k.valueOf():k.valueOf()<this.clone().startOf(m).valueOf()):!1}function Ox(h,m){var k=N(h)?h:Lt(h);return this.isValid()&&k.isValid()?(m=Xe(m)||"millisecond",m==="millisecond"?this.valueOf()<k.valueOf():this.clone().endOf(m).valueOf()<k.valueOf()):!1}function Px(h,m,k,x){var M=N(h)?h:Lt(h),W=N(m)?m:Lt(m);return this.isValid()&&M.isValid()&&W.isValid()?(x=x||"()",(x[0]==="("?this.isAfter(M,k):!this.isBefore(M,k))&&(x[1]===")"?this.isBefore(W,k):!this.isAfter(W,k))):!1}function Nx(h,m){var k=N(h)?h:Lt(h),x;return this.isValid()&&k.isValid()?(m=Xe(m)||"millisecond",m==="millisecond"?this.valueOf()===k.valueOf():(x=k.valueOf(),this.clone().startOf(m).valueOf()<=x&&x<=this.clone().endOf(m).valueOf())):!1}function Lx(h,m){return this.isSame(h,m)||this.isAfter(h,m)}function Rx(h,m){return this.isSame(h,m)||this.isBefore(h,m)}function Ax(h,m,k){var x,M,W;if(!this.isValid())return NaN;if(x=lu(h,this),!x.isValid())return NaN;switch(M=(x.utcOffset()-this.utcOffset())*6e4,m=Xe(m),m){case"year":W=tl(this,x)/12;break;case"month":W=tl(this,x);break;case"quarter":W=tl(this,x)/3;break;case"second":W=(this-x)/1e3;break;case"minute":W=(this-x)/6e4;break;case"hour":W=(this-x)/36e5;break;case"day":W=(this-x-M)/864e5;break;case"week":W=(this-x-M)/6048e5;break;default:W=this-x}return k?W:vt(W)}function tl(h,m){if(h.date()<m.date())return-tl(m,h);var k=(m.year()-h.year())*12+(m.month()-h.month()),x=h.clone().add(k,"months"),M,W;return m-x<0?(M=h.clone().add(k-1,"months"),W=(m-x)/(x-M)):(M=h.clone().add(k+1,"months"),W=(m-x)/(M-x)),-(k+W)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Fx(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vx(h){if(!this.isValid())return null;var m=h!==!0,k=m?this.clone().utc():this;return k.year()<0||k.year()>9999?le(k,m?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):B(Date.prototype.toISOString)?m?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",le(k,"Z")):le(k,m?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function zx(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var h="moment",m="",k,x,M,W;return this.isLocal()||(h=this.utcOffset()===0?"moment.utc":"moment.parseZone",m="Z"),k="["+h+'("]',x=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",M="-MM-DD[T]HH:mm:ss.SSS",W=m+'[")]',this.format(k+x+M+W)}function jx(h){h||(h=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var m=le(this,h);return this.localeData().postformat(m)}function Yx(h,m){return this.isValid()&&(N(h)&&h.isValid()||Lt(h).isValid())?pr({to:this,from:h}).locale(this.locale()).humanize(!m):this.localeData().invalidDate()}function Gx(h){return this.from(Lt(),h)}function Ux(h,m){return this.isValid()&&(N(h)&&h.isValid()||Lt(h).isValid())?pr({from:this,to:h}).locale(this.locale()).humanize(!m):this.localeData().invalidDate()}function Hx(h){return this.to(Lt(),h)}function ev(h){var m;return h===void 0?this._locale._abbr:(m=zr(h),m!=null&&(this._locale=m),this)}var tv=R("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(h){return h===void 0?this.localeData():this.locale(h)});function nv(){return this._locale}var nl=1e3,Cs=60*nl,rl=60*Cs,rv=(365*400+97)*24*rl;function Is(h,m){return(h%m+m)%m}function iv(h,m,k){return h<100&&h>=0?new Date(h+400,m,k)-rv:new Date(h,m,k).valueOf()}function sv(h,m,k){return h<100&&h>=0?Date.UTC(h+400,m,k)-rv:Date.UTC(h,m,k)}function Wx(h){var m,k;if(h=Xe(h),h===void 0||h==="millisecond"||!this.isValid())return this;switch(k=this._isUTC?sv:iv,h){case"year":m=k(this.year(),0,1);break;case"quarter":m=k(this.year(),this.month()-this.month()%3,1);break;case"month":m=k(this.year(),this.month(),1);break;case"week":m=k(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":m=k(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":m=k(this.year(),this.month(),this.date());break;case"hour":m=this._d.valueOf(),m-=Is(m+(this._isUTC?0:this.utcOffset()*Cs),rl);break;case"minute":m=this._d.valueOf(),m-=Is(m,Cs);break;case"second":m=this._d.valueOf(),m-=Is(m,nl);break}return this._d.setTime(m),r.updateOffset(this,!0),this}function Bx(h){var m,k;if(h=Xe(h),h===void 0||h==="millisecond"||!this.isValid())return this;switch(k=this._isUTC?sv:iv,h){case"year":m=k(this.year()+1,0,1)-1;break;case"quarter":m=k(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":m=k(this.year(),this.month()+1,1)-1;break;case"week":m=k(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":m=k(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":m=k(this.year(),this.month(),this.date()+1)-1;break;case"hour":m=this._d.valueOf(),m+=rl-Is(m+(this._isUTC?0:this.utcOffset()*Cs),rl)-1;break;case"minute":m=this._d.valueOf(),m+=Cs-Is(m,Cs)-1;break;case"second":m=this._d.valueOf(),m+=nl-Is(m,nl)-1;break}return this._d.setTime(m),r.updateOffset(this,!0),this}function qx(){return this._d.valueOf()-(this._offset||0)*6e4}function Xx(){return Math.floor(this.valueOf()/1e3)}function Kx(){return new Date(this.valueOf())}function Qx(){var h=this;return[h.year(),h.month(),h.date(),h.hour(),h.minute(),h.second(),h.millisecond()]}function Jx(){var h=this;return{years:h.year(),months:h.month(),date:h.date(),hours:h.hours(),minutes:h.minutes(),seconds:h.seconds(),milliseconds:h.milliseconds()}}function Zx(){return this.isValid()?this.toISOString():null}function eT(){return I(this)}function tT(){return v({},_(this))}function nT(){return _(this).overflow}function rT(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}K("N",0,0,"eraAbbr"),K("NN",0,0,"eraAbbr"),K("NNN",0,0,"eraAbbr"),K("NNNN",0,0,"eraName"),K("NNNNN",0,0,"eraNarrow"),K("y",["y",1],"yo","eraYear"),K("y",["yy",2],0,"eraYear"),K("y",["yyy",3],0,"eraYear"),K("y",["yyyy",4],0,"eraYear"),De("N",uu),De("NN",uu),De("NNN",uu),De("NNNN",pT),De("NNNNN",vT),wt(["N","NN","NNN","NNNN","NNNNN"],function(h,m,k,x){var M=k._locale.erasParse(h,x,k._strict);M?_(k).era=M:_(k).invalidEra=h}),De("y",Ts),De("yy",Ts),De("yyy",Ts),De("yyyy",Ts),De("yo",mT),wt(["y","yy","yyy","yyyy"],pn),wt(["yo"],function(h,m,k,x){var M;k._locale._eraYearOrdinalRegex&&(M=h.match(k._locale._eraYearOrdinalRegex)),k._locale.eraYearOrdinalParse?m[pn]=k._locale.eraYearOrdinalParse(h,M):m[pn]=parseInt(h,10)});function iT(h,m){var k,x,M,W=this._eras||zr("en")._eras;for(k=0,x=W.length;k<x;++k){switch(typeof W[k].since){case"string":M=r(W[k].since).startOf("day"),W[k].since=M.valueOf();break}switch(typeof W[k].until){case"undefined":W[k].until=1/0;break;case"string":M=r(W[k].until).startOf("day").valueOf(),W[k].until=M.valueOf();break}}return W}function sT(h,m,k){var x,M,W=this.eras(),te,je,rt;for(h=h.toUpperCase(),x=0,M=W.length;x<M;++x)if(te=W[x].name.toUpperCase(),je=W[x].abbr.toUpperCase(),rt=W[x].narrow.toUpperCase(),k)switch(m){case"N":case"NN":case"NNN":if(je===h)return W[x];break;case"NNNN":if(te===h)return W[x];break;case"NNNNN":if(rt===h)return W[x];break}else if([te,je,rt].indexOf(h)>=0)return W[x]}function aT(h,m){var k=h.since<=h.until?1:-1;return m===void 0?r(h.since).year():r(h.since).year()+(m-h.offset)*k}function oT(){var h,m,k,x=this.localeData().eras();for(h=0,m=x.length;h<m;++h)if(k=this.clone().startOf("day").valueOf(),x[h].since<=k&&k<=x[h].until||x[h].until<=k&&k<=x[h].since)return x[h].name;return""}function lT(){var h,m,k,x=this.localeData().eras();for(h=0,m=x.length;h<m;++h)if(k=this.clone().startOf("day").valueOf(),x[h].since<=k&&k<=x[h].until||x[h].until<=k&&k<=x[h].since)return x[h].narrow;return""}function cT(){var h,m,k,x=this.localeData().eras();for(h=0,m=x.length;h<m;++h)if(k=this.clone().startOf("day").valueOf(),x[h].since<=k&&k<=x[h].until||x[h].until<=k&&k<=x[h].since)return x[h].abbr;return""}function uT(){var h,m,k,x,M=this.localeData().eras();for(h=0,m=M.length;h<m;++h)if(k=M[h].since<=M[h].until?1:-1,x=this.clone().startOf("day").valueOf(),M[h].since<=x&&x<=M[h].until||M[h].until<=x&&x<=M[h].since)return(this.year()-r(M[h].since).year())*k+M[h].offset;return this.year()}function dT(h){return l(this,"_erasNameRegex")||du.call(this),h?this._erasNameRegex:this._erasRegex}function hT(h){return l(this,"_erasAbbrRegex")||du.call(this),h?this._erasAbbrRegex:this._erasRegex}function fT(h){return l(this,"_erasNarrowRegex")||du.call(this),h?this._erasNarrowRegex:this._erasRegex}function uu(h,m){return m.erasAbbrRegex(h)}function pT(h,m){return m.erasNameRegex(h)}function vT(h,m){return m.erasNarrowRegex(h)}function mT(h,m){return m._eraYearOrdinalRegex||Ts}function du(){var h=[],m=[],k=[],x=[],M,W,te=this.eras();for(M=0,W=te.length;M<W;++M)m.push(qn(te[M].name)),h.push(qn(te[M].abbr)),k.push(qn(te[M].narrow)),x.push(qn(te[M].name)),x.push(qn(te[M].abbr)),x.push(qn(te[M].narrow));this._erasRegex=new RegExp("^("+x.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+m.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+h.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+k.join("|")+")","i")}K(0,["gg",2],0,function(){return this.weekYear()%100}),K(0,["GG",2],0,function(){return this.isoWeekYear()%100});function il(h,m){K(0,[h,h.length],0,m)}il("gggg","weekYear"),il("ggggg","weekYear"),il("GGGG","isoWeekYear"),il("GGGGG","isoWeekYear"),Ae("weekYear","gg"),Ae("isoWeekYear","GG"),Je("weekYear",1),Je("isoWeekYear",1),De("G",Wo),De("g",Wo),De("GG",Nt,Bn),De("gg",Nt,Bn),De("GGGG",Kc,Xc),De("gggg",Kc,Xc),De("GGGGG",Ho,Go),De("ggggg",Ho,Go),Da(["gggg","ggggg","GGGG","GGGGG"],function(h,m,k,x){m[x.substr(0,2)]=Fe(h)}),Da(["gg","GG"],function(h,m,k,x){m[x]=r.parseTwoDigitYear(h)});function gT(h){return av.call(this,h,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function yT(h){return av.call(this,h,this.isoWeek(),this.isoWeekday(),1,4)}function _T(){return Vr(this.year(),1,4)}function bT(){return Vr(this.isoWeekYear(),1,4)}function wT(){var h=this.localeData()._week;return Vr(this.year(),h.dow,h.doy)}function kT(){var h=this.localeData()._week;return Vr(this.weekYear(),h.dow,h.doy)}function av(h,m,k,x,M){var W;return h==null?Oa(this,x,M).year:(W=Vr(h,x,M),m>W&&(m=W),ST.call(this,h,m,k,x,M))}function ST(h,m,k,x,M){var W=Ap(h,m,k,x,M),te=Ma(W.year,0,W.dayOfYear);return this.year(te.getUTCFullYear()),this.month(te.getUTCMonth()),this.date(te.getUTCDate()),this}K("Q",0,"Qo","quarter"),Ae("quarter","Q"),Je("quarter",7),De("Q",Cp),wt("Q",function(h,m){m[Ar]=(Fe(h)-1)*3});function xT(h){return h==null?Math.ceil((this.month()+1)/3):this.month((h-1)*3+this.month()%3)}K("D",["DD",2],"Do","date"),Ae("date","D"),Je("date",9),De("D",Nt),De("DD",Nt,Bn),De("Do",function(h,m){return h?m._dayOfMonthOrdinalParse||m._ordinalParse:m._dayOfMonthOrdinalParseLenient}),wt(["D","DD"],Cr),wt("Do",function(h,m){m[Cr]=Fe(h.match(Nt)[0])});var ov=rn("Date",!0);K("DDD",["DDDD",3],"DDDo","dayOfYear"),Ae("dayOfYear","DDD"),Je("dayOfYear",4),De("DDD",Uo),De("DDDD",Ip),wt(["DDD","DDDD"],function(h,m,k){k._dayOfYear=Fe(h)});function TT(h){var m=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return h==null?m:this.add(h-m,"d")}K("m",["mm",2],0,"minute"),Ae("minute","m"),Je("minute",14),De("m",Nt),De("mm",Nt,Bn),wt(["m","mm"],fr);var $T=rn("Minutes",!1);K("s",["ss",2],0,"second"),Ae("second","s"),Je("second",15),De("s",Nt),De("ss",Nt,Bn),wt(["s","ss"],Fr);var CT=rn("Seconds",!1);K("S",0,0,function(){return~~(this.millisecond()/100)}),K(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),K(0,["SSS",3],0,"millisecond"),K(0,["SSSS",4],0,function(){return this.millisecond()*10}),K(0,["SSSSS",5],0,function(){return this.millisecond()*100}),K(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),K(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),K(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),K(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ae("millisecond","ms"),Je("millisecond",16),De("S",Uo,Cp),De("SS",Uo,Bn),De("SSS",Uo,Ip);var ci,lv;for(ci="SSSS";ci.length<=9;ci+="S")De(ci,Ts);function IT(h,m){m[Fi]=Fe(("0."+h)*1e3)}for(ci="S";ci.length<=9;ci+="S")wt(ci,IT);lv=rn("Milliseconds",!1),K("z",0,0,"zoneAbbr"),K("zz",0,0,"zoneName");function DT(){return this._isUTC?"UTC":""}function ET(){return this._isUTC?"Coordinated Universal Time":""}var ve=z.prototype;ve.add=kx,ve.calendar=Dx,ve.clone=Ex,ve.diff=Ax,ve.endOf=Bx,ve.format=jx,ve.from=Yx,ve.fromNow=Gx,ve.to=Ux,ve.toNow=Hx,ve.get=Ok,ve.invalidAt=nT,ve.isAfter=Mx,ve.isBefore=Ox,ve.isBetween=Px,ve.isSame=Nx,ve.isSameOrAfter=Lx,ve.isSameOrBefore=Rx,ve.isValid=eT,ve.lang=tv,ve.locale=ev,ve.localeData=nv,ve.max=ex,ve.min=ZS,ve.parsingFlags=tT,ve.set=Pk,ve.startOf=Wx,ve.subtract=Sx,ve.toArray=Qx,ve.toObject=Jx,ve.toDate=Kx,ve.toISOString=Vx,ve.inspect=zx,typeof Symbol!="undefined"&&Symbol.for!=null&&(ve[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ve.toJSON=Zx,ve.toString=Fx,ve.unix=Xx,ve.valueOf=qx,ve.creationData=rT,ve.eraName=oT,ve.eraNarrow=lT,ve.eraAbbr=cT,ve.eraYear=uT,ve.year=Rp,ve.isLeapYear=Jk,ve.weekYear=gT,ve.isoWeekYear=yT,ve.quarter=ve.quarters=xT,ve.month=Np,ve.daysInMonth=Xk,ve.week=ve.weeks=iS,ve.isoWeek=ve.isoWeeks=sS,ve.weeksInYear=wT,ve.weeksInWeekYear=kT,ve.isoWeeksInYear=_T,ve.isoWeeksInISOWeekYear=bT,ve.date=ov,ve.day=ve.days=yS,ve.weekday=_S,ve.isoWeekday=bS,ve.dayOfYear=TT,ve.hour=ve.hours=CS,ve.minute=ve.minutes=$T,ve.second=ve.seconds=CT,ve.millisecond=ve.milliseconds=lv,ve.utcOffset=cx,ve.utc=dx,ve.local=hx,ve.parseZone=fx,ve.hasAlignedHourOffset=px,ve.isDST=vx,ve.isLocal=gx,ve.isUtcOffset=yx,ve.isUtc=Xp,ve.isUTC=Xp,ve.zoneAbbr=DT,ve.zoneName=ET,ve.dates=R("dates accessor is deprecated. Use date instead.",ov),ve.months=R("months accessor is deprecated. Use month instead",Np),ve.years=R("years accessor is deprecated. Use year instead",Rp),ve.zone=R("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ux),ve.isDSTShifted=R("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mx);function MT(h){return Lt(h*1e3)}function OT(){return Lt.apply(null,arguments).parseZone()}function cv(h){return h}var dt=re.prototype;dt.calendar=Oe,dt.longDateFormat=be,dt.invalidDate=Ie,dt.ordinal=hn,dt.preparse=cv,dt.postformat=cv,dt.relativeTime=_e,dt.pastFuture=ue,dt.set=G,dt.eras=iT,dt.erasParse=sT,dt.erasConvertYear=aT,dt.erasAbbrRegex=hT,dt.erasNameRegex=dT,dt.erasNarrowRegex=fT,dt.months=Hk,dt.monthsShort=Wk,dt.monthsParse=qk,dt.monthsRegex=Qk,dt.monthsShortRegex=Kk,dt.week=eS,dt.firstDayOfYear=rS,dt.firstDayOfWeek=nS,dt.weekdays=fS,dt.weekdaysMin=vS,dt.weekdaysShort=pS,dt.weekdaysParse=gS,dt.weekdaysRegex=wS,dt.weekdaysShortRegex=kS,dt.weekdaysMinRegex=SS,dt.isPM=TS,dt.meridiem=IS;function sl(h,m,k,x){var M=zr(),W=g().set(x,m);return M[k](W,h)}function uv(h,m,k){if(d(h)&&(m=h,h=void 0),h=h||"",m!=null)return sl(h,m,k,"month");var x,M=[];for(x=0;x<12;x++)M[x]=sl(h,x,k,"month");return M}function hu(h,m,k,x){typeof h=="boolean"?(d(m)&&(k=m,m=void 0),m=m||""):(m=h,k=m,h=!1,d(m)&&(k=m,m=void 0),m=m||"");var M=zr(),W=h?M._week.dow:0,te,je=[];if(k!=null)return sl(m,(k+W)%7,x,"day");for(te=0;te<7;te++)je[te]=sl(m,(te+W)%7,x,"day");return je}function PT(h,m){return uv(h,m,"months")}function NT(h,m){return uv(h,m,"monthsShort")}function LT(h,m,k){return hu(h,m,k,"weekdays")}function RT(h,m,k){return hu(h,m,k,"weekdaysShort")}function AT(h,m,k){return hu(h,m,k,"weekdaysMin")}li("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(h){var m=h%10,k=Fe(h%100/10)===1?"th":m===1?"st":m===2?"nd":m===3?"rd":"th";return h+k}}),r.lang=R("moment.lang is deprecated. Use moment.locale instead.",li),r.langData=R("moment.langData is deprecated. Use moment.localeData instead.",zr);var jr=Math.abs;function FT(){var h=this._data;return this._milliseconds=jr(this._milliseconds),this._days=jr(this._days),this._months=jr(this._months),h.milliseconds=jr(h.milliseconds),h.seconds=jr(h.seconds),h.minutes=jr(h.minutes),h.hours=jr(h.hours),h.months=jr(h.months),h.years=jr(h.years),this}function dv(h,m,k,x){var M=pr(m,k);return h._milliseconds+=x*M._milliseconds,h._days+=x*M._days,h._months+=x*M._months,h._bubble()}function VT(h,m){return dv(this,h,m,1)}function zT(h,m){return dv(this,h,m,-1)}function hv(h){return h<0?Math.floor(h):Math.ceil(h)}function jT(){var h=this._milliseconds,m=this._days,k=this._months,x=this._data,M,W,te,je,rt;return h>=0&&m>=0&&k>=0||h<=0&&m<=0&&k<=0||(h+=hv(fu(k)+m)*864e5,m=0,k=0),x.milliseconds=h%1e3,M=vt(h/1e3),x.seconds=M%60,W=vt(M/60),x.minutes=W%60,te=vt(W/60),x.hours=te%24,m+=vt(te/24),rt=vt(fv(m)),k+=rt,m-=hv(fu(rt)),je=vt(k/12),k%=12,x.days=m,x.months=k,x.years=je,this}function fv(h){return h*4800/146097}function fu(h){return h*146097/4800}function YT(h){if(!this.isValid())return NaN;var m,k,x=this._milliseconds;if(h=Xe(h),h==="month"||h==="quarter"||h==="year")switch(m=this._days+x/864e5,k=this._months+fv(m),h){case"month":return k;case"quarter":return k/3;case"year":return k/12}else switch(m=this._days+Math.round(fu(this._months)),h){case"week":return m/7+x/6048e5;case"day":return m+x/864e5;case"hour":return m*24+x/36e5;case"minute":return m*1440+x/6e4;case"second":return m*86400+x/1e3;case"millisecond":return Math.floor(m*864e5)+x;default:throw new Error("Unknown unit "+h)}}function GT(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Fe(this._months/12)*31536e6:NaN}function Yr(h){return function(){return this.as(h)}}var UT=Yr("ms"),HT=Yr("s"),WT=Yr("m"),BT=Yr("h"),qT=Yr("d"),XT=Yr("w"),KT=Yr("M"),QT=Yr("Q"),JT=Yr("y");function ZT(){return pr(this)}function e$(h){return h=Xe(h),this.isValid()?this[h+"s"]():NaN}function zi(h){return function(){return this.isValid()?this._data[h]:NaN}}var t$=zi("milliseconds"),n$=zi("seconds"),r$=zi("minutes"),i$=zi("hours"),s$=zi("days"),a$=zi("months"),o$=zi("years");function l$(){return vt(this.days()/7)}var Gr=Math.round,Ds={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function c$(h,m,k,x,M){return M.relativeTime(m||1,!!k,h,x)}function u$(h,m,k,x){var M=pr(h).abs(),W=Gr(M.as("s")),te=Gr(M.as("m")),je=Gr(M.as("h")),rt=Gr(M.as("d")),kt=Gr(M.as("M")),Tn=Gr(M.as("w")),Ur=Gr(M.as("y")),ui=W<=k.ss&&["s",W]||W<k.s&&["ss",W]||te<=1&&["m"]||te<k.m&&["mm",te]||je<=1&&["h"]||je<k.h&&["hh",je]||rt<=1&&["d"]||rt<k.d&&["dd",rt];return k.w!=null&&(ui=ui||Tn<=1&&["w"]||Tn<k.w&&["ww",Tn]),ui=ui||kt<=1&&["M"]||kt<k.M&&["MM",kt]||Ur<=1&&["y"]||["yy",Ur],ui[2]=m,ui[3]=+h>0,ui[4]=x,c$.apply(null,ui)}function d$(h){return h===void 0?Gr:typeof h=="function"?(Gr=h,!0):!1}function h$(h,m){return Ds[h]===void 0?!1:m===void 0?Ds[h]:(Ds[h]=m,h==="s"&&(Ds.ss=m-1),!0)}function f$(h,m){if(!this.isValid())return this.localeData().invalidDate();var k=!1,x=Ds,M,W;return typeof h=="object"&&(m=h,h=!1),typeof h=="boolean"&&(k=h),typeof m=="object"&&(x=Object.assign({},Ds,m),m.s!=null&&m.ss==null&&(x.ss=m.s-1)),M=this.localeData(),W=u$(this,!k,x,M),k&&(W=M.pastFuture(+this,W)),M.postformat(W)}var pu=Math.abs;function Es(h){return(h>0)-(h<0)||+h}function al(){if(!this.isValid())return this.localeData().invalidDate();var h=pu(this._milliseconds)/1e3,m=pu(this._days),k=pu(this._months),x,M,W,te,je=this.asSeconds(),rt,kt,Tn,Ur;return je?(x=vt(h/60),M=vt(x/60),h%=60,x%=60,W=vt(k/12),k%=12,te=h?h.toFixed(3).replace(/\.?0+$/,""):"",rt=je<0?"-":"",kt=Es(this._months)!==Es(je)?"-":"",Tn=Es(this._days)!==Es(je)?"-":"",Ur=Es(this._milliseconds)!==Es(je)?"-":"",rt+"P"+(W?kt+W+"Y":"")+(k?kt+k+"M":"")+(m?Tn+m+"D":"")+(M||x||h?"T":"")+(M?Ur+M+"H":"")+(x?Ur+x+"M":"")+(h?Ur+te+"S":"")):"P0D"}var ct=Zo.prototype;ct.isValid=sx,ct.abs=FT,ct.add=VT,ct.subtract=zT,ct.as=YT,ct.asMilliseconds=UT,ct.asSeconds=HT,ct.asMinutes=WT,ct.asHours=BT,ct.asDays=qT,ct.asWeeks=XT,ct.asMonths=KT,ct.asQuarters=QT,ct.asYears=JT,ct.valueOf=GT,ct._bubble=jT,ct.clone=ZT,ct.get=e$,ct.milliseconds=t$,ct.seconds=n$,ct.minutes=r$,ct.hours=i$,ct.days=s$,ct.weeks=l$,ct.months=a$,ct.years=o$,ct.humanize=f$,ct.toISOString=al,ct.toString=al,ct.toJSON=al,ct.locale=ev,ct.localeData=nv,ct.toIsoString=R("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",al),ct.lang=tv,K("X",0,0,"unix"),K("x",0,0,"valueOf"),De("x",Wo),De("X",Lk),wt("X",function(h,m,k){k._d=new Date(parseFloat(h)*1e3)}),wt("x",function(h,m,k){k._d=new Date(Fe(h))});return r.version="2.29.4",n(Lt),r.fn=ve,r.min=tx,r.max=nx,r.now=rx,r.utc=g,r.unix=MT,r.months=PT,r.isDate=f,r.locale=li,r.invalid=C,r.duration=pr,r.isMoment=N,r.weekdays=LT,r.parseZone=OT,r.localeData=zr,r.isDuration=el,r.monthsShort=NT,r.weekdaysMin=AT,r.defineLocale=tu,r.updateLocale=OS,r.locales=PS,r.weekdaysShort=RT,r.normalizeUnits=Xe,r.relativeTimeRounding=d$,r.relativeTimeThreshold=h$,r.calendarFormat=Ix,r.prototype=ve,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})}(wu)),wu.exports}(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){function r(a,o,l,c){var u={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return o?u[l][0]:u[l][1]}var n=t.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:r,mm:"%d Minuten",h:r,hh:"%d Stunden",d:r,dd:r,w:r,ww:"%d Wochen",M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){var r="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),a=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,l=t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(c,u){return c?/-MMM-/.test(u)?n[c.month()]:r[c.month()]:r},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"});return l})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){var r=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,n=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,a=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,o=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i],l=t.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:r,monthsShortStrictRegex:n,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(c,u){switch(u){case"D":return c+(c===1?"er":"");default:case"M":case"Q":case"DDD":case"d":return c+(c===1?"er":"e");case"w":case"W":return c+(c===1?"re":"e")}},week:{dow:1,doy:4}});return l})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){var r=t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return r})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){var r=t.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(n,a){return a[1]==="元"?1:parseInt(a[1]||n,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(n){return n==="午後"},meridiem:function(n,a,o){return n<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(n){return n.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(n){return this.week()!==n.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(n,a){switch(a){case"y":return n===1?"元年":n+"年";case"d":case"D":case"DDD":return n+"日";default:return n}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}});return r})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){var r="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),a=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,l=t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(c,u){return c?/-MMM-/.test(u)?n[c.month()]:r[c.month()]:r},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",w:"één week",ww:"%d weken",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(c){return c+(c===1||c===8||c>=20?"ste":"de")},week:{dow:1,doy:4}});return l})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){var r="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),a=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];function o(u){return u%10<5&&u%10>1&&~~(u/10)%10!==1}function l(u,d,f){var p=u+" ";switch(f){case"ss":return p+(o(u)?"sekundy":"sekund");case"m":return d?"minuta":"minutę";case"mm":return p+(o(u)?"minuty":"minut");case"h":return d?"godzina":"godzinę";case"hh":return p+(o(u)?"godziny":"godzin");case"ww":return p+(o(u)?"tygodnie":"tygodni");case"MM":return p+(o(u)?"miesiące":"miesięcy");case"yy":return p+(o(u)?"lata":"lat")}}var c=t.defineLocale("pl",{months:function(u,d){return u?/D MMMM/.test(d)?n[u.month()]:r[u.month()]:r},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:l,m:l,mm:l,h:l,hh:l,d:"1 dzień",dd:"%d dni",w:"tydzień",ww:l,M:"miesiąc",MM:l,y:"rok",yy:l},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return c})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){function r(l,c){var u=l.split("_");return c%10===1&&c%100!==11?u[0]:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?u[1]:u[2]}function n(l,c,u){var d={ss:c?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:c?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return u==="m"?c?"минута":"минуту":l+" "+r(d[u],+l)}var a=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],o=t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:a,longMonthsParse:a,shortMonthsParse:a,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}else return this.day()===2?"[Во] dddd, [в] LT":"[В] dddd, [в] LT"},lastWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}else return this.day()===2?"[Во] dddd, [в] LT":"[В] dddd, [в] LT"},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:n,m:n,mm:n,h:"час",hh:n,d:"день",dd:n,w:"неделя",ww:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(l){return/^(дня|вечера)$/.test(l)},meridiem:function(l,c,u){return l<4?"ночи":l<12?"утра":l<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(l,c){switch(c){case"M":case"d":case"DDD":return l+"-й";case"D":return l+"-го";case"w":case"W":return l+"-я";default:return l}},week:{dow:1,doy:4}});return o})})();(function(e,s){(function(t,r){r(typeof Pr=="function"?Sr():t.moment)})(ur,function(t){function r(c,u){var d=c.split("_");return u%10===1&&u%100!==11?d[0]:u%10>=2&&u%10<=4&&(u%100<10||u%100>=20)?d[1]:d[2]}function n(c,u,d){var f={ss:u?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:u?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:u?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return d==="m"?u?"хвилина":"хвилину":d==="h"?u?"година":"годину":c+" "+r(f[d],+c)}function a(c,u){var d={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},f;return c===!0?d.nominative.slice(1,7).concat(d.nominative.slice(0,1)):c?(f=/(\[[ВвУу]\]) ?dddd/.test(u)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(u)?"genitive":"nominative",d[f][c.day()]):d.nominative}function o(c){return function(){return c+"о"+(this.hours()===11?"б":"")+"] LT"}}var l=t.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:a,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:o("[Сьогодні "),nextDay:o("[Завтра "),lastDay:o("[Вчора "),nextWeek:o("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[Минулої] dddd [").call(this);case 1:case 2:case 4:return o("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:n,m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(c){return/^(дня|вечора)$/.test(c)},meridiem:function(c,u,d){return c<4?"ночі":c<12?"ранку":c<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(c,u){switch(u){case"M":case"d":case"DDD":case"w":case"W":return c+"-й";case"D":return c+"-го";default:return c}},week:{dow:1,doy:7}});return l})})();var O_={exports:{}},ft=function(e){try{return!!e()}catch(s){return!0}},zN=ft,wo=!zN(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),P_=wo,N_=Function.prototype,jN=N_.bind,Wd=N_.call,YN=P_&&jN.bind(Wd,Wd),pt=P_?function(e){return e&&YN(e)}:function(e){return e&&function(){return Wd.apply(e,arguments)}},GN=Math.ceil,UN=Math.floor,ko=function(e){var s=+e;return s!==s||s===0?0:(s>0?UN:GN)(s)},ol=function(e){return e&&e.Math==Math&&e},ze=ol(typeof globalThis=="object"&&globalThis)||ol(typeof window=="object"&&window)||ol(typeof self=="object"&&self)||ol(typeof ur=="object"&&ur)||function(){return this}()||Function("return this")(),vc={exports:{}},HN=!0,wv=ze,WN=Object.defineProperty,BN=function(e,s){try{WN(wv,e,{value:s,configurable:!0,writable:!0})}catch(t){wv[e]=s}return s},qN=ze,XN=BN,kv="__core-js_shared__",KN=qN[kv]||XN(kv,{}),of=KN,Sv=of;(vc.exports=function(e,s){return Sv[e]||(Sv[e]=s!==void 0?s:{})})("versions",[]).push({version:"3.21.1",mode:"pure",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var QN=ze,JN=QN.TypeError,va=function(e){if(e==null)throw JN("Can't call method on "+e);return e},ZN=ze,eL=va,tL=ZN.Object,Un=function(e){return tL(eL(e))},nL=pt,rL=Un,iL=nL({}.hasOwnProperty),cn=Object.hasOwn||function(s,t){return iL(rL(s),t)},sL=pt,aL=0,oL=Math.random(),lL=sL(1 .toString),mc=function(e){return"Symbol("+(e===void 0?"":e)+")_"+lL(++aL+oL,36)},bt={},nn=function(e){return typeof e=="function"},ku=bt,Su=ze,cL=nn,xv=function(e){return cL(e)?e:void 0},dr=function(e,s){return arguments.length<2?xv(ku[e])||xv(Su[e]):ku[e]&&ku[e][s]||Su[e]&&Su[e][s]},uL=dr,Oi=uL("navigator","userAgent")||"",L_=ze,xu=Oi,Tv=L_.process,$v=L_.Deno,Cv=Tv&&Tv.versions||$v&&$v.version,Iv=Cv&&Cv.v8,yr,jl;Iv&&(yr=Iv.split("."),jl=yr[0]>0&&yr[0]<4?1:+(yr[0]+yr[1]));!jl&&xu&&(yr=xu.match(/Edge\/(\d+)/),(!yr||yr[1]>=74)&&(yr=xu.match(/Chrome\/(\d+)/),yr&&(jl=+yr[1])));var ma=jl,Dv=ma,dL=ft,lf=!!Object.getOwnPropertySymbols&&!dL(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Dv&&Dv<41}),hL=lf,R_=hL&&!Symbol.sham&&typeof Symbol.iterator=="symbol",fL=ze,pL=vc.exports,Ev=cn,vL=mc,Mv=lf,A_=R_,Os=pL("wks"),Ji=fL.Symbol,Ov=Ji&&Ji.for,mL=A_?Ji:Ji&&Ji.withoutSetter||vL,Wt=function(e){if(!Ev(Os,e)||!(Mv||typeof Os[e]=="string")){var s="Symbol."+e;Mv&&Ev(Ji,e)?Os[e]=Ji[e]:A_&&Ov?Os[e]=Ov(s):Os[e]=mL(s)}return Os[e]},gL=Wt,yL=gL("toStringTag"),F_={};F_[yL]="z";var cf=String(F_)==="[object z]",V_=pt,_L=V_({}.toString),bL=V_("".slice),ms=function(e){return bL(_L(e),8,-1)},wL=ze,kL=cf,SL=nn,El=ms,xL=Wt,TL=xL("toStringTag"),$L=wL.Object,CL=El(function(){return arguments}())=="Arguments",IL=function(e,s){try{return e[s]}catch(t){}},ii=kL?El:function(e){var s,t,r;return e===void 0?"Undefined":e===null?"Null":typeof(t=IL(s=$L(e),TL))=="string"?t:CL?El(s):(r=El(s))=="Object"&&SL(s.callee)?"Arguments":r},DL=ze,EL=ii,ML=DL.String,Nr=function(e){if(EL(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return ML(e)},uf=pt,OL=ko,PL=Nr,NL=va,LL=uf("".charAt),Pv=uf("".charCodeAt),RL=uf("".slice),Nv=function(e){return function(s,t){var r=PL(NL(s)),n=OL(t),a=r.length,o,l;return n<0||n>=a?e?"":void 0:(o=Pv(r,n),o<55296||o>56319||n+1===a||(l=Pv(r,n+1))<56320||l>57343?e?LL(r,n):o:e?RL(r,n,n+2):(o-55296<<10)+(l-56320)+65536)}},AL={codeAt:Nv(!1),charAt:Nv(!0)},FL=pt,VL=nn,Bd=of,zL=FL(Function.toString);VL(Bd.inspectSource)||(Bd.inspectSource=function(e){return zL(e)});var df=Bd.inspectSource,jL=ze,YL=nn,GL=df,Lv=jL.WeakMap,UL=YL(Lv)&&/native code/.test(GL(Lv)),HL=nn,un=function(e){return typeof e=="object"?e!==null:HL(e)},WL=ft,dn=!WL(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Hn={},BL=ze,Rv=un,qd=BL.document,qL=Rv(qd)&&Rv(qd.createElement),hf=function(e){return qL?qd.createElement(e):{}},XL=dn,KL=ft,QL=hf,z_=!XL&&!KL(function(){return Object.defineProperty(QL("div"),"a",{get:function(){return 7}}).a!=7}),JL=dn,ZL=ft,j_=JL&&ZL(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Y_=ze,eR=un,tR=Y_.String,nR=Y_.TypeError,nr=function(e){if(eR(e))return e;throw nR(tR(e)+" is not an object")},rR=wo,ll=Function.prototype.call,rr=rR?ll.bind(ll):function(){return ll.apply(ll,arguments)},iR=pt,Dt=iR({}.isPrototypeOf),sR=ze,aR=dr,oR=nn,lR=Dt,cR=R_,uR=sR.Object,ff=cR?function(e){return typeof e=="symbol"}:function(e){var s=aR("Symbol");return oR(s)&&lR(s.prototype,uR(e))},dR=ze,hR=dR.String,gc=function(e){try{return hR(e)}catch(s){return"Object"}},fR=ze,pR=nn,vR=gc,mR=fR.TypeError,xr=function(e){if(pR(e))return e;throw mR(vR(e)+" is not a function")},gR=xr,pf=function(e,s){var t=e[s];return t==null?void 0:gR(t)},yR=ze,Tu=rr,$u=nn,Cu=un,_R=yR.TypeError,bR=function(e,s){var t,r;if(s==="string"&&$u(t=e.toString)&&!Cu(r=Tu(t,e))||$u(t=e.valueOf)&&!Cu(r=Tu(t,e))||s!=="string"&&$u(t=e.toString)&&!Cu(r=Tu(t,e)))return r;throw _R("Can't convert object to primitive value")},wR=ze,kR=rr,Av=un,Fv=ff,SR=pf,xR=bR,TR=Wt,$R=wR.TypeError,CR=TR("toPrimitive"),IR=function(e,s){if(!Av(e)||Fv(e))return e;var t=SR(e,CR),r;if(t){if(s===void 0&&(s="default"),r=kR(t,e,s),!Av(r)||Fv(r))return r;throw $R("Can't convert object to primitive value")}return s===void 0&&(s="number"),xR(e,s)},DR=IR,ER=ff,yc=function(e){var s=DR(e,"string");return ER(s)?s:s+""},MR=ze,OR=dn,PR=z_,NR=j_,cl=nr,Vv=yc,LR=MR.TypeError,Iu=Object.defineProperty,RR=Object.getOwnPropertyDescriptor,Du="enumerable",Eu="configurable",Mu="writable";Hn.f=OR?NR?function(s,t,r){if(cl(s),t=Vv(t),cl(r),typeof s=="function"&&t==="prototype"&&"value"in r&&Mu in r&&!r[Mu]){var n=RR(s,t);n&&n[Mu]&&(s[t]=r.value,r={configurable:Eu in r?r[Eu]:n[Eu],enumerable:Du in r?r[Du]:n[Du],writable:!1})}return Iu(s,t,r)}:Iu:function(s,t,r){if(cl(s),t=Vv(t),cl(r),PR)try{return Iu(s,t,r)}catch(n){}if("get"in r||"set"in r)throw LR("Accessors not supported");return"value"in r&&(s[t]=r.value),s};var gs=function(e,s){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:s}},AR=dn,FR=Hn,VR=gs,Pi=AR?function(e,s,t){return FR.f(e,s,VR(1,t))}:function(e,s,t){return e[s]=t,e},zR=vc.exports,jR=mc,zv=zR("keys"),_c=function(e){return zv[e]||(zv[e]=jR(e))},So={},YR=UL,G_=ze,Ou=pt,GR=un,UR=Pi,Pu=cn,Nu=of,HR=_c,WR=So,jv="Object already initialized",Xd=G_.TypeError,BR=G_.WeakMap,Yl,ao,Gl,qR=function(e){return Gl(e)?ao(e):Yl(e,{})},XR=function(e){return function(s){var t;if(!GR(s)||(t=ao(s)).type!==e)throw Xd("Incompatible receiver, "+e+" required");return t}};if(YR||Nu.state){var Yi=Nu.state||(Nu.state=new BR),KR=Ou(Yi.get),Yv=Ou(Yi.has),QR=Ou(Yi.set);Yl=function(e,s){if(Yv(Yi,e))throw new Xd(jv);return s.facade=e,QR(Yi,e,s),s},ao=function(e){return KR(Yi,e)||{}},Gl=function(e){return Yv(Yi,e)}}else{var Ps=HR("state");WR[Ps]=!0,Yl=function(e,s){if(Pu(e,Ps))throw new Xd(jv);return s.facade=e,UR(e,Ps,s),s},ao=function(e){return Pu(e,Ps)?e[Ps]:{}},Gl=function(e){return Pu(e,Ps)}}var ga={set:Yl,get:ao,has:Gl,enforce:qR,getterFor:XR},JR=wo,U_=Function.prototype,Gv=U_.apply,Uv=U_.call,ys=typeof Reflect=="object"&&Reflect.apply||(JR?Uv.bind(Gv):function(){return Uv.apply(Gv,arguments)}),_s={},xo={},H_={}.propertyIsEnumerable,W_=Object.getOwnPropertyDescriptor,ZR=W_&&!H_.call({1:2},1);xo.f=ZR?function(s){var t=W_(this,s);return!!t&&t.enumerable}:H_;var eA=ze,tA=pt,nA=ft,rA=ms,Lu=eA.Object,iA=tA("".split),bc=nA(function(){return!Lu("z").propertyIsEnumerable(0)})?function(e){return rA(e)=="String"?iA(e,""):Lu(e)}:Lu,sA=bc,aA=va,Tr=function(e){return sA(aA(e))},oA=dn,lA=rr,cA=xo,uA=gs,dA=Tr,hA=yc,fA=cn,pA=z_,Hv=Object.getOwnPropertyDescriptor;_s.f=oA?Hv:function(s,t){if(s=dA(s),t=hA(t),pA)try{return Hv(s,t)}catch(r){}if(fA(s,t))return uA(!lA(cA.f,s,t),s[t])};var vA=ft,mA=nn,gA=/#|\.prototype\./,To=function(e,s){var t=_A[yA(e)];return t==wA?!0:t==bA?!1:mA(s)?vA(s):!!s},yA=To.normalize=function(e){return String(e).replace(gA,".").toLowerCase()},_A=To.data={},bA=To.NATIVE="N",wA=To.POLYFILL="P",B_=To,Wv=pt,kA=xr,SA=wo,xA=Wv(Wv.bind),Ni=function(e,s){return kA(e),s===void 0?e:SA?xA(e,s):function(){return e.apply(s,arguments)}},ul=ze,TA=ys,$A=pt,CA=nn,IA=_s.f,DA=B_,Ns=bt,EA=Ni,Ls=Pi,Bv=cn,MA=function(e){var s=function(t,r,n){if(this instanceof s){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return TA(e,this,arguments)};return s.prototype=e.prototype,s},qe=function(e,s){var t=e.target,r=e.global,n=e.stat,a=e.proto,o=r?ul:n?ul[t]:(ul[t]||{}).prototype,l=r?Ns:Ns[t]||Ls(Ns,t,{})[t],c=l.prototype,u,d,f,p,v,g,w,_,S;for(p in s)u=DA(r?p:t+(n?".":"#")+p,e.forced),d=!u&&o&&Bv(o,p),g=l[p],d&&(e.noTargetGet?(S=IA(o,p),w=S&&S.value):w=o[p]),v=d&&w?w:s[p],!(d&&typeof g==typeof v)&&(e.bind&&d?_=EA(v,ul):e.wrap&&d?_=MA(v):a&&CA(v)?_=$A(v):_=v,(e.sham||v&&v.sham||g&&g.sham)&&Ls(_,"sham",!0),Ls(l,p,_),a&&(f=t+"Prototype",Bv(Ns,f)||Ls(Ns,f,{}),Ls(Ns[f],p,v),e.real&&c&&!c[p]&&Ls(c,p,v)))},Kd=dn,OA=cn,q_=Function.prototype,PA=Kd&&Object.getOwnPropertyDescriptor,vf=OA(q_,"name"),NA=vf&&function(){}.name==="something",LA=vf&&(!Kd||Kd&&PA(q_,"name").configurable),X_={EXISTS:vf,PROPER:NA,CONFIGURABLE:LA},wc={},RA=ko,AA=Math.max,FA=Math.min,$o=function(e,s){var t=RA(e);return t<0?AA(t+s,0):FA(t,s)},VA=ko,zA=Math.min,jA=function(e){return e>0?zA(VA(e),9007199254740991):0},YA=jA,ir=function(e){return YA(e.length)},GA=Tr,UA=$o,HA=ir,qv=function(e){return function(s,t,r){var n=GA(s),a=HA(n),o=UA(r,a),l;if(e&&t!=t){for(;a>o;)if(l=n[o++],l!=l)return!0}else for(;a>o;o++)if((e||o in n)&&n[o]===t)return e||o||0;return!e&&-1}},mf={includes:qv(!0),indexOf:qv(!1)},WA=pt,Ru=cn,BA=Tr,qA=mf.indexOf,XA=So,Xv=WA([].push),K_=function(e,s){var t=BA(e),r=0,n=[],a;for(a in t)!Ru(XA,a)&&Ru(t,a)&&Xv(n,a);for(;s.length>r;)Ru(t,a=s[r++])&&(~qA(n,a)||Xv(n,a));return n},gf=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],KA=K_,QA=gf,Co=Object.keys||function(s){return KA(s,QA)},JA=dn,ZA=j_,e5=Hn,t5=nr,n5=Tr,r5=Co;wc.f=JA&&!ZA?Object.defineProperties:function(s,t){t5(s);for(var r=n5(t),n=r5(t),a=n.length,o=0,l;a>o;)e5.f(s,l=n[o++],r[l]);return s};var i5=dr,Q_=i5("document","documentElement"),s5=nr,a5=wc,Kv=gf,o5=So,l5=Q_,c5=hf,u5=_c,Qv=">",Jv="<",Qd="prototype",Jd="script",J_=u5("IE_PROTO"),Au=function(){},Z_=function(e){return Jv+Jd+Qv+e+Jv+"/"+Jd+Qv},Zv=function(e){e.write(Z_("")),e.close();var s=e.parentWindow.Object;return e=null,s},d5=function(){var e=c5("iframe"),s="java"+Jd+":",t;return e.style.display="none",l5.appendChild(e),e.src=String(s),t=e.contentWindow.document,t.open(),t.write(Z_("document.F=Object")),t.close(),t.F},dl,Ml=function(){try{dl=new ActiveXObject("htmlfile")}catch(s){}Ml=typeof document!="undefined"?document.domain&&dl?Zv(dl):d5():Zv(dl);for(var e=Kv.length;e--;)delete Ml[Qd][Kv[e]];return Ml()};o5[J_]=!0;var bs=Object.create||function(s,t){var r;return s!==null?(Au[Qd]=s5(s),r=new Au,Au[Qd]=null,r[J_]=s):r=Ml(),t===void 0?r:a5.f(r,t)},h5=ft,eb=!h5(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),f5=ze,p5=cn,v5=nn,m5=Un,g5=_c,y5=eb,em=g5("IE_PROTO"),Zd=f5.Object,_5=Zd.prototype,kc=y5?Zd.getPrototypeOf:function(e){var s=m5(e);if(p5(s,em))return s[em];var t=s.constructor;return v5(t)&&s instanceof t?t.prototype:s instanceof Zd?_5:null},b5=Pi,Sc=function(e,s,t,r){r&&r.enumerable?e[s]=t:b5(e,s,t)},w5=ft,k5=nn,S5=bs,tm=kc,x5=Sc,T5=Wt,eh=T5("iterator"),tb=!1,Hr,Fu,Vu;[].keys&&(Vu=[].keys(),"next"in Vu?(Fu=tm(tm(Vu)),Fu!==Object.prototype&&(Hr=Fu)):tb=!0);var $5=Hr==null||w5(function(){var e={};return Hr[eh].call(e)!==e});$5?Hr={}:Hr=S5(Hr);k5(Hr[eh])||x5(Hr,eh,function(){return this});var nb={IteratorPrototype:Hr,BUGGY_SAFARI_ITERATORS:tb},C5=cf,I5=ii,D5=C5?{}.toString:function(){return"[object "+I5(this)+"]"},E5=cf,M5=Hn.f,O5=Pi,P5=cn,N5=D5,L5=Wt,nm=L5("toStringTag"),ya=function(e,s,t,r){if(e){var n=t?e:e.prototype;P5(n,nm)||M5(n,nm,{configurable:!0,value:s}),r&&!E5&&O5(n,"toString",N5)}},_a={},R5=nb.IteratorPrototype,A5=bs,F5=gs,V5=ya,z5=_a,j5=function(){return this},Y5=function(e,s,t,r){var n=s+" Iterator";return e.prototype=A5(R5,{next:F5(+!r,t)}),V5(e,n,!1,!0),z5[n]=j5,e},rb=ze,G5=nn,U5=rb.String,H5=rb.TypeError,W5=function(e){if(typeof e=="object"||G5(e))return e;throw H5("Can't set "+U5(e)+" as a prototype")},B5=pt,q5=nr,X5=W5,ib=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,s={},t;try{t=B5(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(s,[]),e=s instanceof Array}catch(r){}return function(n,a){return q5(n),X5(a),e?t(n,a):n.__proto__=a,n}}():void 0),K5=qe,Q5=rr,J5=X_,Z5=Y5,e8=kc,t8=ya,rm=Sc,n8=Wt,im=_a,r8=nb,i8=J5.PROPER,hl=r8.BUGGY_SAFARI_ITERATORS,zu=n8("iterator"),sm="keys",fl="values",am="entries",s8=function(){return this},yf=function(e,s,t,r,n,a,o){Z5(t,s,r);var l=function(S){if(S===n&&p)return p;if(!hl&&S in d)return d[S];switch(S){case sm:return function(){return new t(this,S)};case fl:return function(){return new t(this,S)};case am:return function(){return new t(this,S)}}return function(){return new t(this)}},c=s+" Iterator",u=!1,d=e.prototype,f=d[zu]||d["@@iterator"]||n&&d[n],p=!hl&&f||l(n),v=s=="Array"&&d.entries||f,g,w,_;if(v&&(g=e8(v.call(new e)),g!==Object.prototype&&g.next&&(t8(g,c,!0,!0),im[c]=s8)),i8&&n==fl&&f&&f.name!==fl&&(u=!0,p=function(){return Q5(f,this)}),n)if(w={values:l(fl),keys:a?p:l(sm),entries:l(am)},o)for(_ in w)(hl||u||!(_ in d))&&rm(d,_,w[_]);else K5({target:s,proto:!0,forced:hl||u},w);return o&&d[zu]!==p&&rm(d,zu,p,{name:n}),im[s]=p,w},a8=AL.charAt,o8=Nr,sb=ga,l8=yf,ab="String Iterator",c8=sb.set,u8=sb.getterFor(ab);l8(String,"String",function(e){c8(this,{type:ab,string:o8(e),index:0})},function(){var s=u8(this),t=s.string,r=s.index,n;return r>=t.length?{value:void 0,done:!0}:(n=a8(t,r),s.index+=n.length,{value:n,done:!1})});var d8=rr,om=nr,h8=pf,ob=function(e,s,t){var r,n;om(e);try{if(r=h8(e,"return"),!r){if(s==="throw")throw t;return t}r=d8(r,e)}catch(a){n=!0,r=a}if(s==="throw")throw t;if(n)throw r;return om(r),t},f8=nr,p8=ob,v8=function(e,s,t,r){try{return r?s(f8(t)[0],t[1]):s(t)}catch(n){p8(e,"throw",n)}},m8=Wt,g8=_a,y8=m8("iterator"),_8=Array.prototype,lb=function(e){return e!==void 0&&(g8.Array===e||_8[y8]===e)},b8=pt,w8=ft,cb=nn,k8=ii,S8=dr,x8=df,ub=function(){},T8=[],db=S8("Reflect","construct"),_f=/^\s*(?:class|function)\b/,$8=b8(_f.exec),C8=!_f.exec(ub),Fa=function(s){if(!cb(s))return!1;try{return db(ub,T8,s),!0}catch(t){return!1}},hb=function(s){if(!cb(s))return!1;switch(k8(s)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return C8||!!$8(_f,x8(s))}catch(t){return!0}};hb.sham=!0;var xc=!db||w8(function(){var e;return Fa(Fa.call)||!Fa(Object)||!Fa(function(){e=!0})||e})?hb:Fa,I8=yc,D8=Hn,E8=gs,ba=function(e,s,t){var r=I8(s);r in e?D8.f(e,r,E8(0,t)):e[r]=t},M8=ii,lm=pf,O8=_a,P8=Wt,N8=P8("iterator"),Tc=function(e){if(e!=null)return lm(e,N8)||lm(e,"@@iterator")||O8[M8(e)]},L8=ze,R8=rr,A8=xr,F8=nr,V8=gc,z8=Tc,j8=L8.TypeError,bf=function(e,s){var t=arguments.length<2?z8(e):s;if(A8(t))return F8(R8(t,e));throw j8(V8(e)+" is not iterable")},Y8=ze,G8=Ni,U8=rr,H8=Un,W8=v8,B8=lb,q8=xc,X8=ir,cm=ba,K8=bf,Q8=Tc,um=Y8.Array,J8=function(s){var t=H8(s),r=q8(this),n=arguments.length,a=n>1?arguments[1]:void 0,o=a!==void 0;o&&(a=G8(a,n>2?arguments[2]:void 0));var l=Q8(t),c=0,u,d,f,p,v,g;if(l&&!(this==um&&B8(l)))for(p=K8(t,l),v=p.next,d=r?new this:[];!(f=U8(v,p)).done;c++)g=o?W8(p,a,[f.value,c],!0):f.value,cm(d,c,g);else for(u=X8(t),d=r?new this(u):um(u);u>c;c++)g=o?a(t[c],c):t[c],cm(d,c,g);return d.length=c,d},Z8=Wt,fb=Z8("iterator"),pb=!1;try{var e3=0,dm={next:function(){return{done:!!e3++}},return:function(){pb=!0}};dm[fb]=function(){return this},Array.from(dm,function(){throw 2})}catch(e){}var vb=function(e,s){if(!s&&!pb)return!1;var t=!1;try{var r={};r[fb]=function(){return{next:function(){return{done:t=!0}}}},e(r)}catch(n){}return t},t3=qe,n3=J8,r3=vb,i3=!r3(function(e){Array.from(e)});t3({target:"Array",stat:!0,forced:i3},{from:n3});var s3=bt,a3=s3.Array.from,o3=a3,mb=o3;(function(e){e.exports=mb})(O_);var Li=Le(O_.exports),gb={exports:{}},l3=Tr,hm=_a,yb=ga;Hn.f;var c3=yf,_b="Array Iterator",u3=yb.set,d3=yb.getterFor(_b);c3(Array,"Array",function(e,s){u3(this,{type:_b,target:l3(e),index:0,kind:s})},function(){var e=d3(this),s=e.target,t=e.kind,r=e.index++;return!s||r>=s.length?(e.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:r,done:!1}:t=="values"?{value:s[r],done:!1}:{value:[r,s[r]],done:!1}},"values");hm.Arguments=hm.Array;var h3=Tc,f3=h3,p3={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},v3=p3,m3=ze,g3=ii,y3=Pi,fm=_a,_3=Wt,pm=_3("toStringTag");for(var ju in v3){var vm=m3[ju],Yu=vm&&vm.prototype;Yu&&g3(Yu)!==pm&&y3(Yu,pm,ju),fm[ju]=fm.Array}var b3=f3,w3=b3,k3=w3,S3=k3,x3=S3,T3=x3;(function(e){e.exports=T3})(gb);var Lr=Le(gb.exports),bb={exports:{}},$3=ms,ws=Array.isArray||function(s){return $3(s)=="Array"},Io={},C3=K_,I3=gf,D3=I3.concat("length","prototype");Io.f=Object.getOwnPropertyNames||function(s){return C3(s,D3)};var wf={},E3=ze,mm=$o,M3=ir,O3=ba,P3=E3.Array,N3=Math.max,wb=function(e,s,t){for(var r=M3(e),n=mm(s,r),a=mm(t===void 0?r:t,r),o=P3(N3(a-n,0)),l=0;n<a;n++,l++)O3(o,l,e[n]);return o.length=l,o},L3=ms,R3=Tr,kb=Io.f,A3=wb,Sb=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],F3=function(e){try{return kb(e)}catch(s){return A3(Sb)}};wf.f=function(s){return Sb&&L3(s)=="Window"?F3(s):kb(R3(s))};var $c={};$c.f=Object.getOwnPropertySymbols;var V3=pt,Do=V3([].slice),Cc={},z3=Wt;Cc.f=z3;var gm=bt,j3=cn,Y3=Cc,G3=Hn.f,Qt=function(e){var s=gm.Symbol||(gm.Symbol={});j3(s,e)||G3(s,e,{value:Y3.f(e)})},U3=ze,ym=ws,H3=xc,W3=un,B3=Wt,q3=B3("species"),_m=U3.Array,X3=function(e){var s;return ym(e)&&(s=e.constructor,H3(s)&&(s===_m||ym(s.prototype))?s=void 0:W3(s)&&(s=s[q3],s===null&&(s=void 0))),s===void 0?_m:s},K3=X3,Ic=function(e,s){return new(K3(e))(s===0?0:s)},Q3=Ni,J3=pt,Z3=bc,e4=Un,t4=ir,n4=Ic,bm=J3([].push),hi=function(e){var s=e==1,t=e==2,r=e==3,n=e==4,a=e==6,o=e==7,l=e==5||a;return function(c,u,d,f){for(var p=e4(c),v=Z3(p),g=Q3(u,d),w=t4(v),_=0,S=f||n4,I=s?S(c,w):t||o?S(c,0):void 0,C,$;w>_;_++)if((l||_ in v)&&(C=v[_],$=g(C,_,p),e))if(s)I[_]=$;else if($)switch(e){case 3:return!0;case 5:return C;case 6:return _;case 2:bm(I,C)}else switch(e){case 4:return!1;case 7:bm(I,C)}return a?-1:r||n?n:I}},si={forEach:hi(0),map:hi(1),filter:hi(2),some:hi(3),every:hi(4),find:hi(5),findIndex:hi(6),filterReject:hi(7)},wa=qe,kf=ze,r4=dr,i4=ys,Eo=rr,s4=pt,ta=dn,is=lf,Sf=ft,Jt=cn,a4=ws,o4=nn,l4=un,c4=Dt,th=ff,nh=nr,u4=Un,Dc=Tr,xf=yc,xb=Nr,rh=gs,oo=bs,Tb=Co,d4=Io,$b=wf,ih=$c,Cb=_s,Ib=Hn,h4=wc,Db=xo,f4=Do,sh=Sc,Mo=vc.exports,p4=_c,Eb=So,wm=mc,Mb=Wt,v4=Cc,m4=Qt,g4=ya,Ob=ga,Ec=si.forEach,zn=p4("hidden"),Mc="Symbol",lo="prototype",km=Mb("toPrimitive"),y4=Ob.set,Sm=Ob.getterFor(Mc),_r=Object[lo],Wr=kf.Symbol,wi=Wr&&Wr[lo],Pb=kf.TypeError,Gu=kf.QObject,Va=r4("JSON","stringify"),Nb=Cb.f,yi=Ib.f,Lb=$b.f,_4=Db.f,Rb=s4([].push),Kr=Mo("symbols"),Oo=Mo("op-symbols"),Uu=Mo("string-to-symbol-registry"),Hu=Mo("symbol-to-string-registry"),b4=Mo("wks"),ah=!Gu||!Gu[lo]||!Gu[lo].findChild,oh=ta&&Sf(function(){return oo(yi({},"a",{get:function(){return yi(this,"a",{value:7}).a}})).a!=7})?function(e,s,t){var r=Nb(_r,s);r&&delete _r[s],yi(e,s,t),r&&e!==_r&&yi(_r,s,r)}:yi,Wu=function(e,s){var t=Kr[e]=oo(wi);return y4(t,{type:Mc,tag:e,description:s}),ta||(t.description=s),t},Oc=function(s,t,r){s===_r&&Oc(Oo,t,r),nh(s);var n=xf(t);return nh(r),Jt(Kr,n)?(r.enumerable?(Jt(s,zn)&&s[zn][n]&&(s[zn][n]=!1),r=oo(r,{enumerable:rh(0,!1)})):(Jt(s,zn)||yi(s,zn,rh(1,{})),s[zn][n]=!0),oh(s,n,r)):yi(s,n,r)},Tf=function(s,t){nh(s);var r=Dc(t),n=Tb(r).concat($f(r));return Ec(n,function(a){(!ta||Eo(Ab,r,a))&&Oc(s,a,r[a])}),s},w4=function(s,t){return t===void 0?oo(s):Tf(oo(s),t)},Ab=function(s){var t=xf(s),r=Eo(_4,this,t);return this===_r&&Jt(Kr,t)&&!Jt(Oo,t)?!1:r||!Jt(this,t)||!Jt(Kr,t)||Jt(this,zn)&&this[zn][t]?r:!0},Fb=function(s,t){var r=Dc(s),n=xf(t);if(!(r===_r&&Jt(Kr,n)&&!Jt(Oo,n))){var a=Nb(r,n);return a&&Jt(Kr,n)&&!(Jt(r,zn)&&r[zn][n])&&(a.enumerable=!0),a}},Vb=function(s){var t=Lb(Dc(s)),r=[];return Ec(t,function(n){!Jt(Kr,n)&&!Jt(Eb,n)&&Rb(r,n)}),r},$f=function(s){var t=s===_r,r=Lb(t?Oo:Dc(s)),n=[];return Ec(r,function(a){Jt(Kr,a)&&(!t||Jt(_r,a))&&Rb(n,Kr[a])}),n};is||(Wr=function(){if(c4(wi,this))throw Pb("Symbol is not a constructor");var s=!arguments.length||arguments[0]===void 0?void 0:xb(arguments[0]),t=wm(s),r=function(n){this===_r&&Eo(r,Oo,n),Jt(this,zn)&&Jt(this[zn],t)&&(this[zn][t]=!1),oh(this,t,rh(1,n))};return ta&&ah&&oh(_r,t,{configurable:!0,set:r}),Wu(t,s)},wi=Wr[lo],sh(wi,"toString",function(){return Sm(this).tag}),sh(Wr,"withoutSetter",function(e){return Wu(wm(e),e)}),Db.f=Ab,Ib.f=Oc,h4.f=Tf,Cb.f=Fb,d4.f=$b.f=Vb,ih.f=$f,v4.f=function(e){return Wu(Mb(e),e)},ta&&yi(wi,"description",{configurable:!0,get:function(){return Sm(this).description}}));wa({global:!0,wrap:!0,forced:!is,sham:!is},{Symbol:Wr});Ec(Tb(b4),function(e){m4(e)});wa({target:Mc,stat:!0,forced:!is},{for:function(e){var s=xb(e);if(Jt(Uu,s))return Uu[s];var t=Wr(s);return Uu[s]=t,Hu[t]=s,t},keyFor:function(s){if(!th(s))throw Pb(s+" is not a symbol");if(Jt(Hu,s))return Hu[s]},useSetter:function(){ah=!0},useSimple:function(){ah=!1}});wa({target:"Object",stat:!0,forced:!is,sham:!ta},{create:w4,defineProperty:Oc,defineProperties:Tf,getOwnPropertyDescriptor:Fb});wa({target:"Object",stat:!0,forced:!is},{getOwnPropertyNames:Vb,getOwnPropertySymbols:$f});wa({target:"Object",stat:!0,forced:Sf(function(){ih.f(1)})},{getOwnPropertySymbols:function(s){return ih.f(u4(s))}});if(Va){var k4=!is||Sf(function(){var e=Wr();return Va([e])!="[null]"||Va({a:e})!="{}"||Va(Object(e))!="{}"});wa({target:"JSON",stat:!0,forced:k4},{stringify:function(s,t,r){var n=f4(arguments),a=t;if(!(!l4(t)&&s===void 0||th(s)))return a4(t)||(t=function(o,l){if(o4(a)&&(l=Eo(a,this,o,l)),!th(l))return l}),n[1]=t,i4(Va,null,n)}})}if(!wi[km]){var S4=wi.valueOf;sh(wi,km,function(e){return Eo(S4,this)})}g4(Wr,Mc);Eb[zn]=!0;var x4=bt,T4=x4.Object.getOwnPropertySymbols,$4=T4,C4=$4;(function(e){e.exports=C4})(bb);var na=Le(bb.exports),zb={exports:{}},jb={exports:{}},I4=qe,D4=ft,E4=Tr,Yb=_s.f,Gb=dn,M4=D4(function(){Yb(1)}),O4=!Gb||M4;I4({target:"Object",stat:!0,forced:O4,sham:!Gb},{getOwnPropertyDescriptor:function(s,t){return Yb(E4(s),t)}});var P4=bt,Ub=P4.Object,N4=jb.exports=function(s,t){return Ub.getOwnPropertyDescriptor(s,t)};Ub.getOwnPropertyDescriptor.sham&&(N4.sham=!0);var L4=jb.exports,R4=L4;(function(e){e.exports=R4})(zb);var ka=Le(zb.exports),Hb={exports:{}},A4=dr,F4=pt,V4=Io,z4=$c,j4=nr,Y4=F4([].concat),Cf=A4("Reflect","ownKeys")||function(s){var t=V4.f(j4(s)),r=z4.f;return r?Y4(t,r(s)):t},G4=qe,U4=dn,H4=Cf,W4=Tr,B4=_s,q4=ba;G4({target:"Object",stat:!0,sham:!U4},{getOwnPropertyDescriptors:function(s){for(var t=W4(s),r=B4.f,n=H4(t),a={},o=0,l,c;n.length>o;)c=r(t,l=n[o++]),c!==void 0&&q4(a,l,c);return a}});var X4=bt,K4=X4.Object.getOwnPropertyDescriptors,Q4=K4,J4=Q4;(function(e){e.exports=J4})(Hb);var ra=Le(Hb.exports),Wb={exports:{}},Bb={exports:{}},Z4=qe,eF=dn,xm=wc.f;Z4({target:"Object",stat:!0,forced:Object.defineProperties!==xm,sham:!eF},{defineProperties:xm});var tF=bt,qb=tF.Object,nF=Bb.exports=function(s,t){return qb.defineProperties(s,t)};qb.defineProperties.sham&&(nF.sham=!0);var rF=Bb.exports,iF=rF;(function(e){e.exports=iF})(Wb);var If=Le(Wb.exports),Xb={exports:{}},Kb={exports:{}},sF=qe,aF=dn,Tm=Hn.f;sF({target:"Object",stat:!0,forced:Object.defineProperty!==Tm,sham:!aF},{defineProperty:Tm});var oF=bt,Qb=oF.Object,lF=Kb.exports=function(s,t,r){return Qb.defineProperty(s,t,r)};Qb.defineProperty.sham&&(lF.sham=!0);var cF=Kb.exports,Jb=cF;(function(e){e.exports=Jb})(Xb);var Po=Le(Xb.exports);function ot(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var Df={exports:{}},uF=Jb,dF=uF,hF=dF,fF=hF;(function(e){e.exports=fF})(Df);var Pc=Le(Df.exports);function $m(e,s){for(var t=0;t<s.length;t++){var r=s[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Pc(e,r.key,r)}}function lt(e,s,t){return s&&$m(e.prototype,s),t&&$m(e,t),Pc(e,"prototype",{writable:!1}),e}function at(e,s,t){return s in e?Pc(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}var Zb={exports:{}},pF=qe,vF=ws;pF({target:"Array",stat:!0},{isArray:vF});var mF=bt,gF=mF.Array.isArray,yF=gF,e0=yF,_F=e0,bF=_F,wF=bF,kF=wF;(function(e){e.exports=kF})(Zb);var t0=Le(Zb.exports);function SF(e){if(t0(e))return e}var Nc={exports:{}},xF=ft,TF=Wt,$F=ma,CF=TF("species"),No=function(e){return $F>=51||!xF(function(){var s=[],t=s.constructor={};return t[CF]=function(){return{foo:1}},s[e](Boolean).foo!==1})},IF=qe,DF=ze,EF=ft,MF=ws,OF=un,PF=Un,NF=ir,Cm=ba,LF=Ic,RF=No,AF=Wt,FF=ma,n0=AF("isConcatSpreadable"),Im=9007199254740991,Dm="Maximum allowed index exceeded",Em=DF.TypeError,VF=FF>=51||!EF(function(){var e=[];return e[n0]=!1,e.concat()[0]!==e}),zF=RF("concat"),jF=function(e){if(!OF(e))return!1;var s=e[n0];return s!==void 0?!!s:MF(e)},YF=!VF||!zF;IF({target:"Array",proto:!0,forced:YF},{concat:function(s){var t=PF(this),r=LF(t,0),n=0,a,o,l,c,u;for(a=-1,l=arguments.length;a<l;a++)if(u=a===-1?t:arguments[a],jF(u)){if(c=NF(u),n+c>Im)throw Em(Dm);for(o=0;o<c;o++,n++)o in u&&Cm(r,n,u[o])}else{if(n>=Im)throw Em(Dm);Cm(r,n++,u)}return r.length=n,r}});var GF=Qt;GF("asyncIterator");var UF=Qt;UF("hasInstance");var HF=Qt;HF("isConcatSpreadable");var WF=Qt;WF("iterator");var BF=Qt;BF("match");var qF=Qt;qF("matchAll");var XF=Qt;XF("replace");var KF=Qt;KF("search");var QF=Qt;QF("species");var JF=Qt;JF("split");var ZF=Qt;ZF("toPrimitive");var eV=Qt;eV("toStringTag");var tV=Qt;tV("unscopables");var nV=ze,rV=ya;rV(nV.JSON,"JSON",!0);var iV=bt,sV=iV.Symbol,aV=sV,r0=aV,oV=r0,lV=oV,cV=Qt;cV("asyncDispose");var uV=Qt;uV("dispose");var dV=Qt;dV("matcher");var hV=Qt;hV("metadata");var fV=Qt;fV("observable");var pV=Qt;pV("patternMatch");var vV=Qt;vV("replaceAll");var mV=lV,gV=mV;(function(e){e.exports=gV})(Nc);var Ws=Le(Nc.exports);function yV(e,s){var t=e==null?null:typeof Ws!="undefined"&&Lr(e)||e["@@iterator"];if(t!=null){var r=[],n=!0,a=!1,o,l;try{for(t=t.call(e);!(n=(o=t.next()).done)&&(r.push(o.value),!(s&&r.length===s));n=!0);}catch(c){a=!0,l=c}finally{try{!n&&t.return!=null&&t.return()}finally{if(a)throw l}}return r}}var Ef={exports:{}},_V=qe,bV=ze,Mm=ws,wV=xc,kV=un,Om=$o,SV=ir,xV=Tr,TV=ba,$V=Wt,CV=No,IV=Do,DV=CV("slice"),EV=$V("species"),Bu=bV.Array,MV=Math.max;_V({target:"Array",proto:!0,forced:!DV},{slice:function(s,t){var r=xV(this),n=SV(r),a=Om(s,n),o=Om(t===void 0?n:t,n),l,c,u;if(Mm(r)&&(l=r.constructor,wV(l)&&(l===Bu||Mm(l.prototype))?l=void 0:kV(l)&&(l=l[EV],l===null&&(l=void 0)),l===Bu||l===void 0))return IV(r,a,o);for(c=new(l===void 0?Bu:l)(MV(o-a,0)),u=0;a<o;a++,u++)a in r&&TV(c,u,r[a]);return c.length=u,c}});var OV=bt,Gt=function(e){return OV[e+"Prototype"]},PV=Gt,NV=PV("Array").slice,LV=Dt,RV=NV,qu=Array.prototype,AV=function(e){var s=e.slice;return e===qu||LV(qu,e)&&s===qu.slice?RV:s},FV=AV,i0=FV,VV=i0,zV=VV,jV=zV,YV=jV;(function(e){e.exports=YV})(Ef);var GV=Le(Ef.exports),s0={exports:{}},UV=mb,HV=UV,WV=HV,BV=WV;(function(e){e.exports=BV})(s0);var a0=Le(s0.exports);function lh(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}function o0(e,s){var t;if(!!e){if(typeof e=="string")return lh(e,s);var r=GV(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return a0(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lh(e,s)}}function qV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cn(e,s){return SF(e)||yV(e,s)||o0(e,s)||qV()}var Mf={exports:{}},XV=Cc,KV=XV.f("iterator"),QV=KV,l0=QV,JV=l0,ZV=JV,ez=ZV,tz=ez;(function(e){e.exports=tz})(Mf);var nz=Le(Mf.exports);function Ke(e){return Ke=typeof Ws=="function"&&typeof nz=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Ws=="function"&&s.constructor===Ws&&s!==Ws.prototype?"symbol":typeof s},Ke(e)}function rz(e){if(t0(e))return lh(e)}function iz(e){if(typeof Ws!="undefined"&&Lr(e)!=null||e["@@iterator"]!=null)return a0(e)}function sz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zt(e){return rz(e)||iz(e)||o0(e)||sz()}var c0={exports:{}};(function(e){e.exports=r0})(c0);var ai=Le(c0.exports),u0={exports:{}},az=Gt,oz=az("Array").concat,lz=Dt,cz=oz,Xu=Array.prototype,uz=function(e){var s=e.concat;return e===Xu||lz(Xu,e)&&s===Xu.concat?cz:s},dz=uz,hz=dz;(function(e){e.exports=hz})(u0);var Pt=Le(u0.exports),d0={exports:{}};(function(e){e.exports=i0})(d0);var kn=Le(d0.exports),h0={exports:{}},fz=qe,pz=Cf;fz({target:"Reflect",stat:!0},{ownKeys:pz});var vz=bt,mz=vz.Reflect.ownKeys,gz=mz,yz=gz;(function(e){e.exports=yz})(h0);var f0=Le(h0.exports),p0={exports:{}};(function(e){e.exports=e0})(p0);var Qe=Le(p0.exports),v0={exports:{}},_z=qe,bz=si.map,wz=No,kz=wz("map");_z({target:"Array",proto:!0,forced:!kz},{map:function(s){return bz(this,s,arguments.length>1?arguments[1]:void 0)}});var Sz=Gt,xz=Sz("Array").map,Tz=Dt,$z=xz,Ku=Array.prototype,Cz=function(e){var s=e.map;return e===Ku||Tz(Ku,e)&&s===Ku.map?$z:s},Iz=Cz,Dz=Iz;(function(e){e.exports=Dz})(v0);var yt=Le(v0.exports),m0={exports:{}},Ez=qe,Mz=Un,g0=Co,Oz=ft,Pz=Oz(function(){g0(1)});Ez({target:"Object",stat:!0,forced:Pz},{keys:function(s){return g0(Mz(s))}});var Nz=bt,Lz=Nz.Object.keys,Rz=Lz,Az=Rz;(function(e){e.exports=Az})(m0);var tn=Le(m0.exports),y0={exports:{}},Fz=qe,Vz=ze,zz=pt,_0=Vz.Date,jz=zz(_0.prototype.getTime);Fz({target:"Date",stat:!0},{now:function(){return jz(new _0)}});var Yz=bt,Gz=Yz.Date.now,Uz=Gz,Hz=Uz;(function(e){e.exports=Hz})(y0);var Kn=Le(y0.exports),b0={exports:{}},Wz=ze,w0=pt,Bz=xr,qz=un,Xz=cn,Pm=Do,Kz=wo,k0=Wz.Function,Qz=w0([].concat),Jz=w0([].join),Qu={},Zz=function(e,s,t){if(!Xz(Qu,s)){for(var r=[],n=0;n<s;n++)r[n]="a["+n+"]";Qu[s]=k0("C,a","return new C("+Jz(r,",")+")")}return Qu[s](e,t)},S0=Kz?k0.bind:function(s){var t=Bz(this),r=t.prototype,n=Pm(arguments,1),a=function(){var l=Qz(n,Pm(arguments));return this instanceof a?Zz(t,l.length,l):t.apply(s,l)};return qz(r)&&(a.prototype=r),a},e6=qe,Nm=S0;e6({target:"Function",proto:!0,forced:Function.bind!==Nm},{bind:Nm});var t6=Gt,n6=t6("Function").bind,r6=Dt,i6=n6,Ju=Function.prototype,s6=function(e){var s=e.bind;return e===Ju||r6(Ju,e)&&s===Ju.bind?i6:s},a6=s6,x0=a6;(function(e){e.exports=x0})(b0);var ne=Le(b0.exports),T0={exports:{}},o6=ft,Sa=function(e,s){var t=[][e];return!!t&&o6(function(){t.call(null,s||function(){return 1},1)})},l6=si.forEach,c6=Sa,u6=c6("forEach"),d6=u6?[].forEach:function(s){return l6(this,s,arguments.length>1?arguments[1]:void 0)},h6=qe,Lm=d6;h6({target:"Array",proto:!0,forced:[].forEach!=Lm},{forEach:Lm});var f6=Gt,p6=f6("Array").forEach,v6=p6,m6=v6,g6=ii,y6=cn,_6=Dt,b6=m6,Zu=Array.prototype,w6={DOMTokenList:!0,NodeList:!0},$0=function(e){var s=e.forEach;return e===Zu||_6(Zu,e)&&s===Zu.forEach||y6(w6,g6(e))?b6:s};(function(e){e.exports=$0})(T0);var Se=Le(T0.exports),C0={exports:{}},k6=qe,S6=pt,x6=ws,T6=S6([].reverse),Rm=[1,2];k6({target:"Array",proto:!0,forced:String(Rm)===String(Rm.reverse())},{reverse:function(){return x6(this)&&(this.length=this.length),T6(this)}});var $6=Gt,C6=$6("Array").reverse,I6=Dt,D6=C6,ed=Array.prototype,E6=function(e){var s=e.reverse;return e===ed||I6(ed,e)&&s===ed.reverse?D6:s},M6=E6,I0=M6;(function(e){e.exports=I0})(C0);var O6=Le(C0.exports),D0={exports:{}},P6=qe,N6=ze,L6=$o,R6=ko,A6=ir,F6=Un,V6=Ic,z6=ba,j6=No,Y6=j6("splice"),G6=N6.TypeError,U6=Math.max,H6=Math.min,W6=9007199254740991,B6="Maximum allowed length exceeded";P6({target:"Array",proto:!0,forced:!Y6},{splice:function(s,t){var r=F6(this),n=A6(r),a=L6(s,n),o=arguments.length,l,c,u,d,f,p;if(o===0?l=c=0:o===1?(l=0,c=n-a):(l=o-2,c=H6(U6(R6(t),0),n-a)),n+l-c>W6)throw G6(B6);for(u=V6(r,c),d=0;d<c;d++)f=a+d,f in r&&z6(u,d,r[f]);if(u.length=c,l<c){for(d=a;d<n-c;d++)f=d+c,p=d+l,f in r?r[p]=r[f]:delete r[p];for(d=n;d>n-c+l;d--)delete r[d-1]}else if(l>c)for(d=n-c;d>a;d--)f=d+c-1,p=d+l-1,f in r?r[p]=r[f]:delete r[p];for(d=0;d<l;d++)r[d+a]=arguments[d+2];return r.length=n-c+l,u}});var q6=Gt,X6=q6("Array").splice,K6=Dt,Q6=X6,td=Array.prototype,J6=function(e){var s=e.splice;return e===td||K6(td,e)&&s===td.splice?Q6:s},Z6=J6,ej=Z6;(function(e){e.exports=ej})(D0);var Dn=Le(D0.exports),E0={exports:{}},Am=dn,tj=pt,nj=rr,rj=ft,nd=Co,ij=$c,sj=xo,aj=Un,oj=bc,Rs=Object.assign,Fm=Object.defineProperty,lj=tj([].concat),cj=!Rs||rj(function(){if(Am&&Rs({b:1},Rs(Fm({},"a",{enumerable:!0,get:function(){Fm(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},s={},t=Symbol(),r="abcdefghijklmnopqrst";return e[t]=7,r.split("").forEach(function(n){s[n]=n}),Rs({},e)[t]!=7||nd(Rs({},s)).join("")!=r})?function(s,t){for(var r=aj(s),n=arguments.length,a=1,o=ij.f,l=sj.f;n>a;)for(var c=oj(arguments[a++]),u=o?lj(nd(c),o(c)):nd(c),d=u.length,f=0,p;d>f;)p=u[f++],(!Am||nj(l,c,p))&&(r[p]=c[p]);return r}:Rs,uj=qe,Vm=cj;uj({target:"Object",stat:!0,forced:Object.assign!==Vm},{assign:Vm});var dj=bt,hj=dj.Object.assign,fj=hj,pj=fj;(function(e){e.exports=pj})(E0);var Qr=Le(E0.exports),M0={exports:{}},vj=qe,mj=mf.includes;vj({target:"Array",proto:!0},{includes:function(s){return mj(this,s,arguments.length>1?arguments[1]:void 0)}});var gj=Gt,yj=gj("Array").includes,_j=un,bj=ms,wj=Wt,kj=wj("match"),Sj=function(e){var s;return _j(e)&&((s=e[kj])!==void 0?!!s:bj(e)=="RegExp")},xj=ze,Tj=Sj,$j=xj.TypeError,Cj=function(e){if(Tj(e))throw $j("The method doesn't accept regular expressions");return e},Ij=Wt,Dj=Ij("match"),Ej=function(e){var s=/./;try{"/./"[e](s)}catch(t){try{return s[Dj]=!1,"/./"[e](s)}catch(r){}}return!1},Mj=qe,Oj=pt,Pj=Cj,Nj=va,zm=Nr,Lj=Ej,Rj=Oj("".indexOf);Mj({target:"String",proto:!0,forced:!Lj("includes")},{includes:function(s){return!!~Rj(zm(Nj(this)),zm(Pj(s)),arguments.length>1?arguments[1]:void 0)}});var Aj=Gt,Fj=Aj("String").includes,jm=Dt,Vj=yj,zj=Fj,rd=Array.prototype,id=String.prototype,jj=function(e){var s=e.includes;return e===rd||jm(rd,e)&&s===rd.includes?Vj:typeof e=="string"||e===id||jm(id,e)&&s===id.includes?zj:s},Yj=jj,Gj=Yj;(function(e){e.exports=Gj})(M0);var Ci=Le(M0.exports),O0={exports:{}},Uj=qe,Hj=ft,Wj=Un,P0=kc,Bj=eb,qj=Hj(function(){P0(1)});Uj({target:"Object",stat:!0,forced:qj,sham:!Bj},{getPrototypeOf:function(s){return P0(Wj(s))}});var Xj=bt,Kj=Xj.Object.getPrototypeOf,Qj=Kj,N0=Qj;(function(e){e.exports=N0})(O0);var Ym=Le(O0.exports),L0={exports:{}},Jj=qe,Zj=si.filter,eY=No,tY=eY("filter");Jj({target:"Array",proto:!0,forced:!tY},{filter:function(s){return Zj(this,s,arguments.length>1?arguments[1]:void 0)}});var nY=Gt,rY=nY("Array").filter,iY=Dt,sY=rY,sd=Array.prototype,aY=function(e){var s=e.filter;return e===sd||iY(sd,e)&&s===sd.filter?sY:s},oY=aY,lY=oY;(function(e){e.exports=lY})(L0);var Ge=Le(L0.exports),R0={exports:{}},cY=dn,A0=pt,uY=Co,dY=Tr,hY=xo.f,fY=A0(hY),pY=A0([].push),Gm=function(e){return function(s){for(var t=dY(s),r=uY(t),n=r.length,a=0,o=[],l;n>a;)l=r[a++],(!cY||fY(t,l))&&pY(o,e?[l,t[l]]:t[l]);return o}},vY={entries:Gm(!0),values:Gm(!1)},mY=qe,gY=vY.values;mY({target:"Object",stat:!0},{values:function(s){return gY(s)}});var yY=bt,_Y=yY.Object.values,bY=_Y,wY=bY;(function(e){e.exports=wY})(R0);var Of=Le(R0.exports),F0={exports:{}},Lc=`	
\v\f\r                　\u2028\u2029\uFEFF`,kY=pt,SY=va,xY=Nr,TY=Lc,Um=kY("".replace),Ul="["+TY+"]",$Y=RegExp("^"+Ul+Ul+"*"),CY=RegExp(Ul+Ul+"*$"),ad=function(e){return function(s){var t=xY(SY(s));return e&1&&(t=Um(t,$Y,"")),e&2&&(t=Um(t,CY,"")),t}},Pf={start:ad(1),end:ad(2),trim:ad(3)},V0=ze,IY=ft,DY=pt,EY=Nr,MY=Pf.trim,Hm=Lc,Ka=V0.parseInt,Wm=V0.Symbol,Bm=Wm&&Wm.iterator,z0=/^[+-]?0x/i,OY=DY(z0.exec),PY=Ka(Hm+"08")!==8||Ka(Hm+"0x16")!==22||Bm&&!IY(function(){Ka(Object(Bm))}),NY=PY?function(s,t){var r=MY(EY(s));return Ka(r,t>>>0||(OY(z0,r)?16:10))}:Ka,LY=qe,qm=NY;LY({global:!0,forced:parseInt!=qm},{parseInt:qm});var RY=bt,AY=RY.parseInt,FY=AY,VY=FY;(function(e){e.exports=VY})(F0);var Qn=Le(F0.exports),j0={exports:{}},zY=qe,jY=pt,YY=mf.indexOf,GY=Sa,ch=jY([].indexOf),Xm=!!ch&&1/ch([1],1,-0)<0,UY=GY("indexOf");zY({target:"Array",proto:!0,forced:Xm||!UY},{indexOf:function(s){var t=arguments.length>1?arguments[1]:void 0;return Xm?ch(this,s,t)||0:YY(this,s,t)}});var HY=Gt,WY=HY("Array").indexOf,BY=Dt,qY=WY,od=Array.prototype,XY=function(e){var s=e.indexOf;return e===od||BY(od,e)&&s===od.indexOf?qY:s},KY=XY,QY=KY;(function(e){e.exports=QY})(j0);var $t=Le(j0.exports),Y0={exports:{}},JY=X_.PROPER,ZY=ft,Km=Lc,Qm="​᠎",eG=function(e){return ZY(function(){return!!Km[e]()||Qm[e]()!==Qm||JY&&Km[e].name!==e})},tG=qe,nG=Pf.trim,rG=eG;tG({target:"String",proto:!0,forced:rG("trim")},{trim:function(){return nG(this)}});var iG=Gt,sG=iG("String").trim,aG=Dt,oG=sG,ld=String.prototype,lG=function(e){var s=e.trim;return typeof e=="string"||e===ld||aG(ld,e)&&s===ld.trim?oG:s},cG=lG,uG=cG;(function(e){e.exports=uG})(Y0);var cd=Le(Y0.exports),G0={exports:{}},dG=qe,hG=dn,fG=bs;dG({target:"Object",stat:!0,sham:!hG},{create:fG});var pG=bt,vG=pG.Object,mG=function(s,t){return vG.create(s,t)},gG=mG,U0=gG;(function(e){e.exports=U0})(G0);var Lo=Le(G0.exports),H0={exports:{}},yG=qe,_G=ze,bG=dr,wG=ys,Ro=pt,kG=ft,SG=_G.Array,Hl=bG("JSON","stringify"),pl=Ro(/./.exec),Jm=Ro("".charAt),xG=Ro("".charCodeAt),TG=Ro("".replace),$G=Ro(1 .toString),CG=/[\uD800-\uDFFF]/g,Zm=/^[\uD800-\uDBFF]$/,eg=/^[\uDC00-\uDFFF]$/,IG=function(e,s,t){var r=Jm(t,s-1),n=Jm(t,s+1);return pl(Zm,e)&&!pl(eg,n)||pl(eg,e)&&!pl(Zm,r)?"\\u"+$G(xG(e,0),16):e},DG=kG(function(){return Hl("\uDF06\uD834")!=='"\\udf06\\ud834"'||Hl("\uDEAD")!=='"\\udead"'});Hl&&yG({target:"JSON",stat:!0,forced:DG},{stringify:function(s,t,r){for(var n=0,a=arguments.length,o=SG(a);n<a;n++)o[n]=arguments[n];var l=wG(Hl,null,o);return typeof l=="string"?TG(l,CG,IG):l}});var uh=bt,EG=ys;uh.JSON||(uh.JSON={stringify:JSON.stringify});var MG=function(s,t,r){return EG(uh.JSON.stringify,null,arguments)},OG=MG,PG=OG;(function(e){e.exports=PG})(H0);var jn=Le(H0.exports),W0={exports:{}},NG=ze,LG=NG.TypeError,B0=function(e,s){if(e<s)throw LG("Not enough arguments");return e},RG=qe,dh=ze,AG=ys,FG=nn,VG=Oi,zG=Do,jG=B0,YG=/MSIE .\./.test(VG),GG=dh.Function,tg=function(e){return function(s,t){var r=jG(arguments.length,1)>2,n=FG(s)?s:GG(s),a=r?zG(arguments,2):void 0;return e(r?function(){AG(n,this,a)}:n,t)}};RG({global:!0,bind:!0,forced:YG},{setTimeout:tg(dh.setTimeout),setInterval:tg(dh.setInterval)});var UG=bt,HG=UG.setTimeout;(function(e){e.exports=HG})(W0);var wn=Le(W0.exports),q0={exports:{}},WG=Un,ng=$o,BG=ir,qG=function(s){for(var t=WG(this),r=BG(t),n=arguments.length,a=ng(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,l=o===void 0?r:ng(o,r);l>a;)t[a++]=s;return t},XG=qe,KG=qG;XG({target:"Array",proto:!0},{fill:KG});var QG=Gt,JG=QG("Array").fill,ZG=Dt,eU=JG,ud=Array.prototype,tU=function(e){var s=e.fill;return e===ud||ZG(ud,e)&&s===ud.fill?eU:s},nU=tU,rU=nU;(function(e){e.exports=rU})(q0);var X0=Le(q0.exports),K0={exports:{}};(function(e){e.exports=s;function s(r){if(r)return t(r)}function t(r){for(var n in s.prototype)r[n]=s.prototype[n];return r}s.prototype.on=s.prototype.addEventListener=function(r,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(n),this},s.prototype.once=function(r,n){function a(){this.off(r,a),n.apply(this,arguments)}return a.fn=n,this.on(r,a),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(r,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+r];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var o,l=0;l<a.length;l++)if(o=a[l],o===n||o.fn===n){a.splice(l,1);break}return a.length===0&&delete this._callbacks["$"+r],this},s.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),a=this._callbacks["$"+r],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,l=a.length;o<l;++o)a[o].apply(this,n)}return this},s.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},s.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(K0);var Nf=K0.exports;function kr(){return kr=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},kr.apply(this,arguments)}function hr(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,e.__proto__=s}function vl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var hh;typeof Object.assign!="function"?hh=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(s),r=1;r<arguments.length;r++){var n=arguments[r];if(n!=null)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t}:hh=Object.assign;var ss=hh,rg=["","webkit","Moz","MS","ms","o"],iU=typeof document=="undefined"?{style:{}}:document.createElement("div"),sU="function",Bs=Math.round,as=Math.abs,Lf=Date.now;function Rc(e,s){for(var t,r,n=s[0].toUpperCase()+s.slice(1),a=0;a<rg.length;){if(t=rg[a],r=t?t+n:s,r in e)return r;a++}}var Br;typeof window=="undefined"?Br={}:Br=window;var Q0=Rc(iU.style,"touchAction"),J0=Q0!==void 0;function aU(){if(!J0)return!1;var e={},s=Br.CSS&&Br.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=s?Br.CSS.supports("touch-action",t):!0}),e}var Z0="compute",e1="auto",fh="manipulation",Zi="none",co="pan-x",uo="pan-y",ml=aU(),oU=/mobile|tablet|ip(ad|hone|od)|android/i,t1="ontouchstart"in Br,lU=Rc(Br,"PointerEvent")!==void 0,cU=t1&&oU.test(navigator.userAgent),Ao="touch",uU="pen",Rf="mouse",dU="kinect",hU=25,On=1,ks=2,en=4,Yn=8,Wl=1,Fo=2,Vo=4,zo=8,ia=16,Er=Fo|Vo,es=zo|ia,n1=Er|es,r1=["x","y"],Bl=["clientX","clientY"];function qr(e,s,t){var r;if(!!e)if(e.forEach)e.forEach(s,t);else if(e.length!==void 0)for(r=0;r<e.length;)s.call(t,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&s.call(t,e[r],r,e)}function Ac(e,s){return typeof e===sU?e.apply(s&&s[0]||void 0,s):e}function Xi(e,s){return e.indexOf(s)>-1}function fU(e){if(Xi(e,Zi))return Zi;var s=Xi(e,co),t=Xi(e,uo);return s&&t?Zi:s||t?s?co:uo:Xi(e,fh)?fh:e1}var i1=function(){function e(t,r){this.manager=t,this.set(r)}var s=e.prototype;return s.set=function(r){r===Z0&&(r=this.compute()),J0&&this.manager.element.style&&ml[r]&&(this.manager.element.style[Q0]=r),this.actions=r.toLowerCase().trim()},s.update=function(){this.set(this.manager.options.touchAction)},s.compute=function(){var r=[];return qr(this.manager.recognizers,function(n){Ac(n.options.enable,[n])&&(r=r.concat(n.getTouchAction()))}),fU(r.join(" "))},s.preventDefaults=function(r){var n=r.srcEvent,a=r.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var o=this.actions,l=Xi(o,Zi)&&!ml[Zi],c=Xi(o,uo)&&!ml[uo],u=Xi(o,co)&&!ml[co];if(l){var d=r.pointers.length===1,f=r.distance<2,p=r.deltaTime<250;if(d&&f&&p)return}if(!(u&&c)&&(l||c&&a&Er||u&&a&es))return this.preventSrc(n)},s.preventSrc=function(r){this.manager.session.prevented=!0,r.preventDefault()},e}();function Af(e,s){for(;e;){if(e===s)return!0;e=e.parentNode}return!1}function s1(e){var s=e.length;if(s===1)return{x:Bs(e[0].clientX),y:Bs(e[0].clientY)};for(var t=0,r=0,n=0;n<s;)t+=e[n].clientX,r+=e[n].clientY,n++;return{x:Bs(t/s),y:Bs(r/s)}}function ig(e){for(var s=[],t=0;t<e.pointers.length;)s[t]={clientX:Bs(e.pointers[t].clientX),clientY:Bs(e.pointers[t].clientY)},t++;return{timeStamp:Lf(),pointers:s,center:s1(s),deltaX:e.deltaX,deltaY:e.deltaY}}function ql(e,s,t){t||(t=r1);var r=s[t[0]]-e[t[0]],n=s[t[1]]-e[t[1]];return Math.sqrt(r*r+n*n)}function ph(e,s,t){t||(t=r1);var r=s[t[0]]-e[t[0]],n=s[t[1]]-e[t[1]];return Math.atan2(n,r)*180/Math.PI}function a1(e,s){return e===s?Wl:as(e)>=as(s)?e<0?Fo:Vo:s<0?zo:ia}function pU(e,s){var t=s.center,r=e.offsetDelta||{},n=e.prevDelta||{},a=e.prevInput||{};(s.eventType===On||a.eventType===en)&&(n=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:t.x,y:t.y}),s.deltaX=n.x+(t.x-r.x),s.deltaY=n.y+(t.y-r.y)}function o1(e,s,t){return{x:s/e||0,y:t/e||0}}function vU(e,s){return ql(s[0],s[1],Bl)/ql(e[0],e[1],Bl)}function mU(e,s){return ph(s[1],s[0],Bl)+ph(e[1],e[0],Bl)}function gU(e,s){var t=e.lastInterval||s,r=s.timeStamp-t.timeStamp,n,a,o,l;if(s.eventType!==Yn&&(r>hU||t.velocity===void 0)){var c=s.deltaX-t.deltaX,u=s.deltaY-t.deltaY,d=o1(r,c,u);a=d.x,o=d.y,n=as(d.x)>as(d.y)?d.x:d.y,l=a1(c,u),e.lastInterval=s}else n=t.velocity,a=t.velocityX,o=t.velocityY,l=t.direction;s.velocity=n,s.velocityX=a,s.velocityY=o,s.direction=l}function yU(e,s){var t=e.session,r=s.pointers,n=r.length;t.firstInput||(t.firstInput=ig(s)),n>1&&!t.firstMultiple?t.firstMultiple=ig(s):n===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,l=o?o.center:a.center,c=s.center=s1(r);s.timeStamp=Lf(),s.deltaTime=s.timeStamp-a.timeStamp,s.angle=ph(l,c),s.distance=ql(l,c),pU(t,s),s.offsetDirection=a1(s.deltaX,s.deltaY);var u=o1(s.deltaTime,s.deltaX,s.deltaY);s.overallVelocityX=u.x,s.overallVelocityY=u.y,s.overallVelocity=as(u.x)>as(u.y)?u.x:u.y,s.scale=o?vU(o.pointers,r):1,s.rotation=o?mU(o.pointers,r):0,s.maxPointers=t.prevInput?s.pointers.length>t.prevInput.maxPointers?s.pointers.length:t.prevInput.maxPointers:s.pointers.length,gU(t,s);var d=e.element,f=s.srcEvent,p;f.composedPath?p=f.composedPath()[0]:f.path?p=f.path[0]:p=f.target,Af(p,d)&&(d=p),s.target=d}function _U(e,s,t){var r=t.pointers.length,n=t.changedPointers.length,a=s&On&&r-n===0,o=s&(en|Yn)&&r-n===0;t.isFirst=!!a,t.isFinal=!!o,a&&(e.session={}),t.eventType=s,yU(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function ho(e){return e.trim().split(/\s+/g)}function Qa(e,s,t){qr(ho(s),function(r){e.addEventListener(r,t,!1)})}function Ja(e,s,t){qr(ho(s),function(r){e.removeEventListener(r,t,!1)})}function sg(e){var s=e.ownerDocument||e;return s.defaultView||s.parentWindow||window}var xa=function(){function e(t,r){var n=this;this.manager=t,this.callback=r,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){Ac(t.options.enable,[t])&&n.handler(a)},this.init()}var s=e.prototype;return s.handler=function(){},s.init=function(){this.evEl&&Qa(this.element,this.evEl,this.domHandler),this.evTarget&&Qa(this.target,this.evTarget,this.domHandler),this.evWin&&Qa(sg(this.element),this.evWin,this.domHandler)},s.destroy=function(){this.evEl&&Ja(this.element,this.evEl,this.domHandler),this.evTarget&&Ja(this.target,this.evTarget,this.domHandler),this.evWin&&Ja(sg(this.element),this.evWin,this.domHandler)},e}();function os(e,s,t){if(e.indexOf&&!t)return e.indexOf(s);for(var r=0;r<e.length;){if(t&&e[r][t]==s||!t&&e[r]===s)return r;r++}return-1}var bU={pointerdown:On,pointermove:ks,pointerup:en,pointercancel:Yn,pointerout:Yn},wU={2:Ao,3:uU,4:Rf,5:dU},l1="pointerdown",c1="pointermove pointerup pointercancel";Br.MSPointerEvent&&!Br.PointerEvent&&(l1="MSPointerDown",c1="MSPointerMove MSPointerUp MSPointerCancel");var u1=function(e){hr(s,e);function s(){var r,n=s.prototype;return n.evEl=l1,n.evWin=c1,r=e.apply(this,arguments)||this,r.store=r.manager.session.pointerEvents=[],r}var t=s.prototype;return t.handler=function(n){var a=this.store,o=!1,l=n.type.toLowerCase().replace("ms",""),c=bU[l],u=wU[n.pointerType]||n.pointerType,d=u===Ao,f=os(a,n.pointerId,"pointerId");c&On&&(n.button===0||d)?f<0&&(a.push(n),f=a.length-1):c&(en|Yn)&&(o=!0),!(f<0)&&(a[f]=n,this.callback(this.manager,c,{pointers:a,changedPointers:[n],pointerType:u,srcEvent:n}),o&&a.splice(f,1))},s}(xa);function fo(e){return Array.prototype.slice.call(e,0)}function Ff(e,s,t){for(var r=[],n=[],a=0;a<e.length;){var o=s?e[a][s]:e[a];os(n,o)<0&&r.push(e[a]),n[a]=o,a++}return t&&(s?r=r.sort(function(l,c){return l[s]>c[s]}):r=r.sort()),r}var kU={touchstart:On,touchmove:ks,touchend:en,touchcancel:Yn},SU="touchstart touchmove touchend touchcancel",Vf=function(e){hr(s,e);function s(){var r;return s.prototype.evTarget=SU,r=e.apply(this,arguments)||this,r.targetIds={},r}var t=s.prototype;return t.handler=function(n){var a=kU[n.type],o=xU.call(this,n,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Ao,srcEvent:n})},s}(xa);function xU(e,s){var t=fo(e.touches),r=this.targetIds;if(s&(On|ks)&&t.length===1)return r[t[0].identifier]=!0,[t,t];var n,a,o=fo(e.changedTouches),l=[],c=this.target;if(a=t.filter(function(u){return Af(u.target,c)}),s===On)for(n=0;n<a.length;)r[a[n].identifier]=!0,n++;for(n=0;n<o.length;)r[o[n].identifier]&&l.push(o[n]),s&(en|Yn)&&delete r[o[n].identifier],n++;if(!!l.length)return[Ff(a.concat(l),"identifier",!0),l]}var TU={mousedown:On,mousemove:ks,mouseup:en},$U="mousedown",CU="mousemove mouseup",zf=function(e){hr(s,e);function s(){var r,n=s.prototype;return n.evEl=$U,n.evWin=CU,r=e.apply(this,arguments)||this,r.pressed=!1,r}var t=s.prototype;return t.handler=function(n){var a=TU[n.type];a&On&&n.button===0&&(this.pressed=!0),a&ks&&n.which!==1&&(a=en),this.pressed&&(a&en&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[n],changedPointers:[n],pointerType:Rf,srcEvent:n}))},s}(xa),IU=2500,ag=25;function og(e){var s=e.changedPointers,t=s[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(r);var a=function(){var l=n.indexOf(r);l>-1&&n.splice(l,1)};setTimeout(a,IU)}}function DU(e,s){e&On?(this.primaryTouch=s.changedPointers[0].identifier,og.call(this,s)):e&(en|Yn)&&og.call(this,s)}function EU(e){for(var s=e.srcEvent.clientX,t=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var n=this.lastTouches[r],a=Math.abs(s-n.x),o=Math.abs(t-n.y);if(a<=ag&&o<=ag)return!0}return!1}var d1=function(){var e=function(s){hr(t,s);function t(n,a){var o;return o=s.call(this,n,a)||this,o.handler=function(l,c,u){var d=u.pointerType===Ao,f=u.pointerType===Rf;if(!(f&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)DU.call(vl(vl(o)),c,u);else if(f&&EU.call(vl(vl(o)),u))return;o.callback(l,c,u)}},o.touch=new Vf(o.manager,o.handler),o.mouse=new zf(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var r=t.prototype;return r.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(xa);return e}();function MU(e){var s,t=e.options.inputClass;return t?s=t:lU?s=u1:cU?s=Vf:t1?s=d1:s=zf,new s(e,_U)}function qs(e,s,t){return Array.isArray(e)?(qr(e,t[s],t),!0):!1}var Ol=1,or=2,sa=4,xi=8,Xr=xi,po=16,Ir=32,OU=1;function PU(){return OU++}function gl(e,s){var t=s.manager;return t?t.get(e):e}function lg(e){return e&po?"cancel":e&xi?"end":e&sa?"move":e&or?"start":""}var jo=function(){function e(t){t===void 0&&(t={}),this.options=kr({enable:!0},t),this.id=PU(),this.manager=null,this.state=Ol,this.simultaneous={},this.requireFail=[]}var s=e.prototype;return s.set=function(r){return ss(this.options,r),this.manager&&this.manager.touchAction.update(),this},s.recognizeWith=function(r){if(qs(r,"recognizeWith",this))return this;var n=this.simultaneous;return r=gl(r,this),n[r.id]||(n[r.id]=r,r.recognizeWith(this)),this},s.dropRecognizeWith=function(r){return qs(r,"dropRecognizeWith",this)?this:(r=gl(r,this),delete this.simultaneous[r.id],this)},s.requireFailure=function(r){if(qs(r,"requireFailure",this))return this;var n=this.requireFail;return r=gl(r,this),os(n,r)===-1&&(n.push(r),r.requireFailure(this)),this},s.dropRequireFailure=function(r){if(qs(r,"dropRequireFailure",this))return this;r=gl(r,this);var n=os(this.requireFail,r);return n>-1&&this.requireFail.splice(n,1),this},s.hasRequireFailures=function(){return this.requireFail.length>0},s.canRecognizeWith=function(r){return!!this.simultaneous[r.id]},s.emit=function(r){var n=this,a=this.state;function o(l){n.manager.emit(l,r)}a<xi&&o(n.options.event+lg(a)),o(n.options.event),r.additionalEvent&&o(r.additionalEvent),a>=xi&&o(n.options.event+lg(a))},s.tryEmit=function(r){if(this.canEmit())return this.emit(r);this.state=Ir},s.canEmit=function(){for(var r=0;r<this.requireFail.length;){if(!(this.requireFail[r].state&(Ir|Ol)))return!1;r++}return!0},s.recognize=function(r){var n=ss({},r);if(!Ac(this.options.enable,[this,n])){this.reset(),this.state=Ir;return}this.state&(Xr|po|Ir)&&(this.state=Ol),this.state=this.process(n),this.state&(or|sa|xi|po)&&this.tryEmit(n)},s.process=function(r){},s.getTouchAction=function(){},s.reset=function(){},e}(),vh=function(e){hr(s,e);function s(r){var n;return r===void 0&&(r={}),n=e.call(this,kr({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},r))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=s.prototype;return t.getTouchAction=function(){return[fh]},t.process=function(n){var a=this,o=this.options,l=n.pointers.length===o.pointers,c=n.distance<o.threshold,u=n.deltaTime<o.time;if(this.reset(),n.eventType&On&&this.count===0)return this.failTimeout();if(c&&u&&l){if(n.eventType!==en)return this.failTimeout();var d=this.pTime?n.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||ql(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!f||!d?this.count=1:this.count+=1,this._input=n;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Xr,a.tryEmit()},o.interval),or):Xr}return Ir},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=Ir},this.options.interval),Ir},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Xr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},s}(jo),aa=function(e){hr(s,e);function s(r){return r===void 0&&(r={}),e.call(this,kr({pointers:1},r))||this}var t=s.prototype;return t.attrTest=function(n){var a=this.options.pointers;return a===0||n.pointers.length===a},t.process=function(n){var a=this.state,o=n.eventType,l=a&(or|sa),c=this.attrTest(n);return l&&(o&Yn||!c)?a|po:l||c?o&en?a|xi:a&or?a|sa:or:Ir},s}(jo);function h1(e){return e===ia?"down":e===zo?"up":e===Fo?"left":e===Vo?"right":""}var jf=function(e){hr(s,e);function s(r){var n;return r===void 0&&(r={}),n=e.call(this,kr({event:"pan",threshold:10,pointers:1,direction:n1},r))||this,n.pX=null,n.pY=null,n}var t=s.prototype;return t.getTouchAction=function(){var n=this.options.direction,a=[];return n&Er&&a.push(uo),n&es&&a.push(co),a},t.directionTest=function(n){var a=this.options,o=!0,l=n.distance,c=n.direction,u=n.deltaX,d=n.deltaY;return c&a.direction||(a.direction&Er?(c=u===0?Wl:u<0?Fo:Vo,o=u!==this.pX,l=Math.abs(n.deltaX)):(c=d===0?Wl:d<0?zo:ia,o=d!==this.pY,l=Math.abs(n.deltaY))),n.direction=c,o&&l>a.threshold&&c&a.direction},t.attrTest=function(n){return aa.prototype.attrTest.call(this,n)&&(this.state&or||!(this.state&or)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var a=h1(n.direction);a&&(n.additionalEvent=this.options.event+a),e.prototype.emit.call(this,n)},s}(aa),f1=function(e){hr(s,e);function s(r){return r===void 0&&(r={}),e.call(this,kr({event:"swipe",threshold:10,velocity:.3,direction:Er|es,pointers:1},r))||this}var t=s.prototype;return t.getTouchAction=function(){return jf.prototype.getTouchAction.call(this)},t.attrTest=function(n){var a=this.options.direction,o;return a&(Er|es)?o=n.overallVelocity:a&Er?o=n.overallVelocityX:a&es&&(o=n.overallVelocityY),e.prototype.attrTest.call(this,n)&&a&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&as(o)>this.options.velocity&&n.eventType&en},t.emit=function(n){var a=h1(n.offsetDirection);a&&this.manager.emit(this.options.event+a,n),this.manager.emit(this.options.event,n)},s}(aa),p1=function(e){hr(s,e);function s(r){return r===void 0&&(r={}),e.call(this,kr({event:"pinch",threshold:0,pointers:2},r))||this}var t=s.prototype;return t.getTouchAction=function(){return[Zi]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&or)},t.emit=function(n){if(n.scale!==1){var a=n.scale<1?"in":"out";n.additionalEvent=this.options.event+a}e.prototype.emit.call(this,n)},s}(aa),v1=function(e){hr(s,e);function s(r){return r===void 0&&(r={}),e.call(this,kr({event:"rotate",threshold:0,pointers:2},r))||this}var t=s.prototype;return t.getTouchAction=function(){return[Zi]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&or)},s}(aa),m1=function(e){hr(s,e);function s(r){var n;return r===void 0&&(r={}),n=e.call(this,kr({event:"press",pointers:1,time:251,threshold:9},r))||this,n._timer=null,n._input=null,n}var t=s.prototype;return t.getTouchAction=function(){return[e1]},t.process=function(n){var a=this,o=this.options,l=n.pointers.length===o.pointers,c=n.distance<o.threshold,u=n.deltaTime>o.time;if(this._input=n,!c||!l||n.eventType&(en|Yn)&&!u)this.reset();else if(n.eventType&On)this.reset(),this._timer=setTimeout(function(){a.state=Xr,a.tryEmit()},o.time);else if(n.eventType&en)return Xr;return Ir},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===Xr&&(n&&n.eventType&en?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=Lf(),this.manager.emit(this.options.event,this._input)))},s}(jo),g1={domEvents:!1,touchAction:Z0,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},cg=[[v1,{enable:!1}],[p1,{enable:!1},["rotate"]],[f1,{direction:Er}],[jf,{direction:Er},["swipe"]],[vh],[vh,{event:"doubletap",taps:2},["tap"]],[m1]],NU=1,ug=2;function dg(e,s){var t=e.element;if(!!t.style){var r;qr(e.options.cssProps,function(n,a){r=Rc(t.style,a),s?(e.oldCssProps[r]=t.style[r],t.style[r]=n):t.style[r]=e.oldCssProps[r]||""}),s||(e.oldCssProps={})}}function LU(e,s){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=s,s.target.dispatchEvent(t)}var hg=function(){function e(t,r){var n=this;this.options=ss({},g1,r||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=MU(this),this.touchAction=new i1(this,this.options.touchAction),dg(this,!0),qr(this.options.recognizers,function(a){var o=n.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var s=e.prototype;return s.set=function(r){return ss(this.options,r),r.touchAction&&this.touchAction.update(),r.inputTarget&&(this.input.destroy(),this.input.target=r.inputTarget,this.input.init()),this},s.stop=function(r){this.session.stopped=r?ug:NU},s.recognize=function(r){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(r);var a,o=this.recognizers,l=n.curRecognizer;(!l||l&&l.state&Xr)&&(n.curRecognizer=null,l=null);for(var c=0;c<o.length;)a=o[c],n.stopped!==ug&&(!l||a===l||a.canRecognizeWith(l))?a.recognize(r):a.reset(),!l&&a.state&(or|sa|xi)&&(n.curRecognizer=a,l=a),c++}},s.get=function(r){if(r instanceof jo)return r;for(var n=this.recognizers,a=0;a<n.length;a++)if(n[a].options.event===r)return n[a];return null},s.add=function(r){if(qs(r,"add",this))return this;var n=this.get(r.options.event);return n&&this.remove(n),this.recognizers.push(r),r.manager=this,this.touchAction.update(),r},s.remove=function(r){if(qs(r,"remove",this))return this;var n=this.get(r);if(r){var a=this.recognizers,o=os(a,n);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},s.on=function(r,n){if(r===void 0||n===void 0)return this;var a=this.handlers;return qr(ho(r),function(o){a[o]=a[o]||[],a[o].push(n)}),this},s.off=function(r,n){if(r===void 0)return this;var a=this.handlers;return qr(ho(r),function(o){n?a[o]&&a[o].splice(os(a[o],n),1):delete a[o]}),this},s.emit=function(r,n){this.options.domEvents&&LU(r,n);var a=this.handlers[r]&&this.handlers[r].slice();if(!(!a||!a.length)){n.type=r,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](n),o++}},s.destroy=function(){this.element&&dg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),RU={touchstart:On,touchmove:ks,touchend:en,touchcancel:Yn},AU="touchstart",FU="touchstart touchmove touchend touchcancel",VU=function(e){hr(s,e);function s(){var r,n=s.prototype;return n.evTarget=AU,n.evWin=FU,r=e.apply(this,arguments)||this,r.started=!1,r}var t=s.prototype;return t.handler=function(n){var a=RU[n.type];if(a===On&&(this.started=!0),!!this.started){var o=zU.call(this,n,a);a&(en|Yn)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Ao,srcEvent:n})}},s}(xa);function zU(e,s){var t=fo(e.touches),r=fo(e.changedTouches);return s&(en|Yn)&&(t=Ff(t.concat(r),"identifier",!0)),[t,r]}function y1(e,s,t){var r="DEPRECATED METHOD: "+s+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),a=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,r,a),e.apply(this,arguments)}}var _1=y1(function(e,s,t){for(var r=Object.keys(s),n=0;n<r.length;)(!t||t&&e[r[n]]===void 0)&&(e[r[n]]=s[r[n]]),n++;return e},"extend","Use `assign`."),jU=y1(function(e,s){return _1(e,s,!0)},"merge","Use `assign`.");function YU(e,s,t){var r=s.prototype,n;n=e.prototype=Object.create(r),n.constructor=e,n._super=r,t&&ss(n,t)}function fg(e,s){return function(){return e.apply(s,arguments)}}var Yf=function(){var e=function(t,r){return r===void 0&&(r={}),new hg(t,kr({recognizers:cg.concat()},r))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=n1,e.DIRECTION_DOWN=ia,e.DIRECTION_LEFT=Fo,e.DIRECTION_RIGHT=Vo,e.DIRECTION_UP=zo,e.DIRECTION_HORIZONTAL=Er,e.DIRECTION_VERTICAL=es,e.DIRECTION_NONE=Wl,e.DIRECTION_DOWN=ia,e.INPUT_START=On,e.INPUT_MOVE=ks,e.INPUT_END=en,e.INPUT_CANCEL=Yn,e.STATE_POSSIBLE=Ol,e.STATE_BEGAN=or,e.STATE_CHANGED=sa,e.STATE_ENDED=xi,e.STATE_RECOGNIZED=Xr,e.STATE_CANCELLED=po,e.STATE_FAILED=Ir,e.Manager=hg,e.Input=xa,e.TouchAction=i1,e.TouchInput=Vf,e.MouseInput=zf,e.PointerEventInput=u1,e.TouchMouseInput=d1,e.SingleTouchInput=VU,e.Recognizer=jo,e.AttrRecognizer=aa,e.Tap=vh,e.Pan=jf,e.Swipe=f1,e.Pinch=p1,e.Rotate=v1,e.Press=m1,e.on=Qa,e.off=Ja,e.each=qr,e.merge=jU,e.extend=_1,e.bindFn=fg,e.assign=ss,e.inherit=YU,e.bindFn=fg,e.prefixed=Rc,e.toArray=fo,e.inArray=os,e.uniqueArray=Ff,e.splitStr=ho,e.boolOrFn=Ac,e.hasParent=Af,e.addEventListeners=Qa,e.removeEventListeners=Ja,e.defaults=ss({},g1,{preset:cg}),e}();Yf.defaults;function pg(e,s){var t=tn(e);if(na){var r=na(e);s&&(r=Ge(r).call(r,function(n){return ka(e,n).enumerable})),t.push.apply(t,r)}return t}function vg(e){for(var s=1;s<arguments.length;s++){var t,r,n=arguments[s]!=null?arguments[s]:{};s%2?Se(t=pg(Object(n),!0)).call(t,function(a){at(e,a,n[a])}):ra?If(e,ra(n)):Se(r=pg(Object(n))).call(r,function(a){Po(e,a,ka(n,a))})}return e}function Gf(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=GU(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function GU(e,s){var t;if(!!e){if(typeof e=="string")return mg(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mg(e,s)}}function mg(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}var Uf=ai("DELETE");function b1(e){for(var s,t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Hf.apply(void 0,Pt(s=[{},e]).call(s,r))}function Hf(){var e=Xl.apply(void 0,arguments);return k1(e),e}function Xl(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];if(s.length<2)return s[0];if(s.length>2){var r;return Xl.apply(void 0,Pt(r=[Hf(s[0],s[1])]).call(r,zt(kn(s).call(s,2))))}var n=s[0],a=s[1],o=Gf(f0(a)),l;try{for(o.s();!(l=o.n()).done;){var c=l.value;Object.prototype.propertyIsEnumerable.call(a,c)&&(a[c]===Uf?delete n[c]:n[c]!==null&&a[c]!==null&&Ke(n[c])==="object"&&Ke(a[c])==="object"&&!Qe(n[c])&&!Qe(a[c])?n[c]=Xl(n[c],a[c]):n[c]=w1(a[c]))}}catch(u){o.e(u)}finally{o.f()}return n}function w1(e){return Qe(e)?yt(e).call(e,function(s){return w1(s)}):Ke(e)==="object"&&e!==null?Xl({},e):e}function k1(e){for(var s=0,t=tn(e);s<t.length;s++){var r=t[s];e[r]===Uf?delete e[r]:Ke(e[r])==="object"&&e[r]!==null&&k1(e[r])}}function UU(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return HU(s.length?s:[Kn()])}function HU(e){var s=WU(e),t=Cn(s,3),r=t[0],n=t[1],a=t[2],o=1,l=function(){var u=2091639*r+o*23283064365386963e-26;return r=n,n=a,a=u-(o=u|0)};return l.uint32=function(){return l()*4294967296},l.fract53=function(){return l()+(l()*2097152|0)*11102230246251565e-32},l.algorithm="Alea",l.seed=e,l.version="0.9",l}function WU(){for(var e=BU(),s=e(" "),t=e(" "),r=e(" "),n=0;n<arguments.length;n++)s-=e(n<0||arguments.length<=n?void 0:arguments[n]),s<0&&(s+=1),t-=e(n<0||arguments.length<=n?void 0:arguments[n]),t<0&&(t+=1),r-=e(n<0||arguments.length<=n?void 0:arguments[n]),r<0&&(r+=1);return[s,t,r]}function BU(){var e=4022871197;return function(s){for(var t=s.toString(),r=0;r<t.length;r++){e+=t.charCodeAt(r);var n=.02519603282416938*e;e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=n*4294967296}return(e>>>0)*23283064365386963e-26}}function qU(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var Wf=typeof window!="undefined"?window.Hammer||Yf:function(){return qU()};function Dr(e){var s=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){s._dom.overlay.parentNode.removeChild(s._dom.overlay)});var r=Wf(this._dom.overlay);r.on("tap",ne(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){r.destroy()});var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Se(n).call(n,function(a){r.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){XU(a.target,e)||s.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",s._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&s.deactivate()}}Nf(Dr.prototype);Dr.current=null;Dr.prototype.destroy=function(){var e,s;this.deactivate();var t=Gf(O6(e=Dn(s=this._cleanupQueue).call(s,0)).call(e)),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n()}}catch(a){t.e(a)}finally{t.f()}};Dr.prototype.activate=function(){Dr.current&&Dr.current.deactivate(),Dr.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Dr.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Dr.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function XU(e,s){for(;e;){if(e===s)return!0;e=e.parentNode}return!1}var KU=/^\/?Date\((-?\d+)/i,QU=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,JU=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ZU=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,eH=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Za(e){return e instanceof Number||typeof e=="number"}function S1(e){if(e)for(;e.hasChildNodes()===!0;){var s=e.firstChild;s&&(S1(s),e.removeChild(s))}}function Jn(e){return e instanceof String||typeof e=="string"}function mh(e){return Ke(e)==="object"&&e!==null}function tH(e){if(e instanceof Date)return!0;if(Jn(e)){var s=KU.exec(e);if(s)return!0;if(!isNaN(Date.parse(e)))return!0}return!1}function ls(e,s,t,r){var n=!1;r===!0&&(n=s[t]===null&&e[t]!==void 0),n?delete e[t]:e[t]=s[t]}function x1(e,s){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var r in e)if(s[r]!==void 0)if(s[r]===null||Ke(s[r])!=="object")ls(e,s,r,t);else{var n=e[r],a=s[r];mh(n)&&mh(a)&&x1(n,a,t)}}var nH=Qr;function rH(e,s){if(!Qe(e))throw new Error("Array with property names expected as first argument");for(var t=arguments.length,r=new Array(t>2?t-2:0),n=2;n<t;n++)r[n-2]=arguments[n];for(var a=0,o=r;a<o.length;a++)for(var l=o[a],c=0;c<e.length;c++){var u=e[c];l&&Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])}return s}function iH(e,s,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Qe(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n=0;n<e.length;n++){var a=e[n];if(Object.prototype.hasOwnProperty.call(t,a))if(t[a]&&t[a].constructor===Object)s[a]===void 0&&(s[a]={}),s[a].constructor===Object?vo(s[a],t[a],!1,r):ls(s,t,a,r);else{if(Qe(t[a]))throw new TypeError("Arrays are not supported by deepExtend");ls(s,t,a,r)}}return s}function sH(e,s,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Qe(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(!!Object.prototype.hasOwnProperty.call(t,n)&&!Ci(e).call(e,n))if(t[n]&&t[n].constructor===Object)s[n]===void 0&&(s[n]={}),s[n].constructor===Object?vo(s[n],t[n]):ls(s,t,n,r);else if(Qe(t[n])){s[n]=[];for(var a=0;a<t[n].length;a++)s[n].push(t[n][a])}else ls(s,t,n,r);return s}function vo(e,s){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)||t===!0)if(Ke(s[n])==="object"&&s[n]!==null&&Ym(s[n])===Object.prototype)e[n]===void 0?e[n]=vo({},s[n],t):Ke(e[n])==="object"&&e[n]!==null&&Ym(e[n])===Object.prototype?vo(e[n],s[n],t):ls(e,s,n,r);else if(Qe(s[n])){var a;e[n]=kn(a=s[n]).call(a)}else ls(e,s,n,r);return e}function aH(e,s){if(e.length!==s.length)return!1;for(var t=0,r=e.length;t<r;t++)if(e[t]!=s[t])return!1;return!0}function Ha(e){var s=Ke(e);return s==="object"?e===null?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":Qe(e)?"Array":e instanceof Date?"Date":"Object":s==="number"?"Number":s==="boolean"?"Boolean":s==="string"?"String":s===void 0?"undefined":s}function mo(e,s){var t;return Pt(t=[]).call(t,zt(e),[s])}function T1(e){return kn(e).call(e)}function oH(e){return e.getBoundingClientRect().left}function lH(e){return e.getBoundingClientRect().right}function cH(e){return e.getBoundingClientRect().top}function uH(e,s){var t=e.className.split(" "),r=s.split(" ");t=Pt(t).call(t,Ge(r).call(r,function(n){return!Ci(t).call(t,n)})),e.className=t.join(" ")}function dH(e,s){var t=e.className.split(" "),r=s.split(" ");t=Ge(t).call(t,function(n){return!Ci(r).call(r,n)}),e.className=t.join(" ")}function hH(e,s){if(Qe(e))for(var t=e.length,r=0;r<t;r++)s(e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s(e[n],n,e)}var fH=Of;function pH(e,s,t){return e[s]!==t?(e[s]=t,!0):!1}function vH(e){var s=!1;return function(){s||(s=!0,requestAnimationFrame(function(){s=!1,e()}))}}function mH(e,s,t,r){if(e.addEventListener){var n;r===void 0&&(r=!1),s==="mousewheel"&&Ci(n=navigator.userAgent).call(n,"Firefox")&&(s="DOMMouseScroll"),e.addEventListener(s,t,r)}else e.attachEvent("on"+s,t)}function gH(e,s,t,r){if(e.removeEventListener){var n;r===void 0&&(r=!1),s==="mousewheel"&&Ci(n=navigator.userAgent).call(n,"Firefox")&&(s="DOMMouseScroll"),e.removeEventListener(s,t,r)}else e.detachEvent("on"+s,t)}function yH(e){e||(e=window.event),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}function _H(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,s=null;return e&&(e.target?s=e.target:e.srcElement&&(s=e.srcElement)),!(s instanceof Element)||s.nodeType!=null&&s.nodeType==3&&(s=s.parentNode,!(s instanceof Element))?null:s}function bH(e,s){for(var t=e;t;){if(t===s)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}var wH={asBoolean:function(s,t){return typeof s=="function"&&(s=s()),s!=null?s!=!1:t||null},asNumber:function(s,t){return typeof s=="function"&&(s=s()),s!=null?Number(s)||t||null:t||null},asString:function(s,t){return typeof s=="function"&&(s=s()),s!=null?String(s):t||null},asSize:function(s,t){return typeof s=="function"&&(s=s()),Jn(s)?s:Za(s)?s+"px":t||null},asElement:function(s,t){return typeof s=="function"&&(s=s()),s||t||null}};function Fc(e){var s;switch(e.length){case 3:case 4:return s=JU.exec(e),s?{r:Qn(s[1]+s[1],16),g:Qn(s[2]+s[2],16),b:Qn(s[3]+s[3],16)}:null;case 6:case 7:return s=QU.exec(e),s?{r:Qn(s[1],16),g:Qn(s[2],16),b:Qn(s[3],16)}:null;default:return null}}function kH(e,s){if(Ci(e).call(e,"rgba"))return e;if(Ci(e).call(e,"rgb")){var t=e.substr($t(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+s+")"}else{var r=Fc(e);return r==null?e:"rgba("+r.r+","+r.g+","+r.b+","+s+")"}}function Bf(e,s,t){var r;return"#"+kn(r=((1<<24)+(e<<16)+(s<<8)+t).toString(16)).call(r,1)}function SH(e,s){if(Jn(e)){var t=e;if(Xf(t)){var r,n=yt(r=t.substr(4).substr(0,t.length-5).split(",")).call(r,function(p){return Qn(p)});t=Bf(n[0],n[1],n[2])}if(qf(t)===!0){var a=$1(t),o={h:a.h,s:a.s*.8,v:Math.min(1,a.v*1.02)},l={h:a.h,s:Math.min(1,a.s*1.25),v:a.v*.8},c=gh(l.h,l.s,l.v),u=gh(o.h,o.s,o.v);return{background:t,border:c,highlight:{background:u,border:c},hover:{background:u,border:c}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(s){var d={background:e.background||s.background,border:e.border||s.border,highlight:Jn(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||s.highlight.background,border:e.highlight&&e.highlight.border||s.highlight.border},hover:Jn(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||s.hover.border,background:e.hover&&e.hover.background||s.hover.background}};return d}else{var f={background:e.background||void 0,border:e.border||void 0,highlight:Jn(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:Jn(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return f}}function Xs(e,s,t){e=e/255,s=s/255,t=t/255;var r=Math.min(e,Math.min(s,t)),n=Math.max(e,Math.max(s,t));if(r===n)return{h:0,s:0,v:r};var a=e===r?s-t:t===r?e-s:t-e,o=e===r?3:t===r?1:5,l=60*(o-a/(n-r))/360,c=(n-r)/n,u=n;return{h:l,s:c,v:u}}var Qs={split:function(s){var t,r={};return Se(t=s.split(";")).call(t,function(n){if(cd(n).call(n)!=""){var a,o,l=n.split(":"),c=cd(a=l[0]).call(a),u=cd(o=l[1]).call(o);r[c]=u}}),r},join:function(s){var t;return yt(t=tn(s)).call(t,function(r){return r+": "+s[r]}).join("; ")}};function xH(e,s){var t=Qs.split(e.style.cssText),r=Qs.split(s),n=vg(vg({},t),r);e.style.cssText=Qs.join(n)}function TH(e,s){var t=Qs.split(e.style.cssText),r=Qs.split(s);for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&delete t[n];e.style.cssText=Qs.join(t)}function eo(e,s,t){var r,n,a,o=Math.floor(e*6),l=e*6-o,c=t*(1-s),u=t*(1-l*s),d=t*(1-(1-l)*s);switch(o%6){case 0:r=t,n=d,a=c;break;case 1:r=u,n=t,a=c;break;case 2:r=c,n=t,a=d;break;case 3:r=c,n=u,a=t;break;case 4:r=d,n=c,a=t;break;case 5:r=t,n=c,a=u;break}return{r:Math.floor(r*255),g:Math.floor(n*255),b:Math.floor(a*255)}}function gh(e,s,t){var r=eo(e,s,t);return Bf(r.r,r.g,r.b)}function $1(e){var s=Fc(e);if(!s)throw new TypeError("'".concat(e,"' is not a valid color."));return Xs(s.r,s.g,s.b)}function qf(e){var s=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return s}function Xf(e){return ZU.test(e)}function C1(e){return eH.test(e)}function $H(e,s){if(s!==null&&Ke(s)==="object"){for(var t=Lo(s),r=0;r<e.length;r++)Object.prototype.hasOwnProperty.call(s,e[r])&&Ke(s[e[r]])=="object"&&(t[e[r]]=Kf(s[e[r]]));return t}else return null}function Kf(e){if(e===null||Ke(e)!=="object")return null;if(e instanceof Element)return e;var s=Lo(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&Ke(e[t])=="object"&&(s[t]=Kf(e[t]));return s}function CH(e,s){for(var t=0;t<e.length;t++){var r=e[t],n=void 0;for(n=t;n>0&&s(r,e[n-1])<0;n--)e[n]=e[n-1];e[n]=r}return e}function IH(e,s,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=function(g){return g!=null},a=function(g){return g!==null&&Ke(g)==="object"},o=function(g){for(var w in g)if(Object.prototype.hasOwnProperty.call(g,w))return!1;return!0};if(!a(e))throw new Error("Parameter mergeTarget must be an object");if(!a(s))throw new Error("Parameter options must be an object");if(!n(t))throw new Error("Parameter option must have a value");if(!a(r))throw new Error("Parameter globalOptions must be an object");var l=function(g,w,_){a(g[_])||(g[_]={});var S=w[_],I=g[_];for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(I[C]=S[C])},c=s[t],u=a(r)&&!o(r),d=u?r[t]:void 0,f=d?d.enabled:void 0;if(c!==void 0){if(typeof c=="boolean"){a(e[t])||(e[t]={}),e[t].enabled=c;return}if(c===null&&!a(e[t]))if(n(d))e[t]=Lo(d);else return;if(!!a(c)){var p=!0;c.enabled!==void 0?p=c.enabled:f!==void 0&&(p=d.enabled),l(e,s,t),e[t].enabled=p}}}function DH(e,s,t,r){for(var n=1e4,a=0,o=0,l=e.length-1;o<=l&&a<n;){var c=Math.floor((o+l)/2),u=e[c],d=r===void 0?u[t]:u[t][r],f=s(d);if(f==0)return c;f==-1?o=c+1:l=c-1,a++}return-1}function EH(e,s,t,r,n){var a=1e4,o=0,l=0,c=e.length-1,u,d,f,p;for(n=n!=null?n:function(v,g){return v==g?0:v<g?-1:1};l<=c&&o<a;){if(p=Math.floor(.5*(c+l)),u=e[Math.max(0,p-1)][t],d=e[p][t],f=e[Math.min(e.length-1,p+1)][t],n(d,s)==0)return p;if(n(u,s)<0&&n(d,s)>0)return r=="before"?Math.max(0,p-1):p;if(n(d,s)<0&&n(f,s)>0)return r=="before"?p:Math.min(e.length-1,p+1);n(d,s)<0?l=p+1:c=p-1,o++}return-1}var MH={linear:function(s){return s},easeInQuad:function(s){return s*s},easeOutQuad:function(s){return s*(2-s)},easeInOutQuad:function(s){return s<.5?2*s*s:-1+(4-2*s)*s},easeInCubic:function(s){return s*s*s},easeOutCubic:function(s){return--s*s*s+1},easeInOutCubic:function(s){return s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1},easeInQuart:function(s){return s*s*s*s},easeOutQuart:function(s){return 1- --s*s*s*s},easeInOutQuart:function(s){return s<.5?8*s*s*s*s:1-8*--s*s*s*s},easeInQuint:function(s){return s*s*s*s*s},easeOutQuint:function(s){return 1+--s*s*s*s*s},easeInOutQuint:function(s){return s<.5?16*s*s*s*s*s:1+16*--s*s*s*s*s}};function OH(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var s=document.createElement("div");s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.visibility="hidden",s.style.width="200px",s.style.height="150px",s.style.overflow="hidden",s.appendChild(e),document.body.appendChild(s);var t=e.offsetWidth;s.style.overflow="scroll";var r=e.offsetWidth;return t==r&&(r=s.clientWidth),document.body.removeChild(s),t-r}function PH(e,s){var t;Qe(s)||(s=[s]);var r=Gf(e),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){t=a[s[0]];for(var o=1;o<s.length;o++)t&&(t=t[s[o]]);if(typeof t!="undefined")break}}}catch(l){r.e(l)}finally{r.f()}return t}var NH={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},I1=function(){function e(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ot(this,e),this.pixelRatio=s,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return lt(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return NH[t]}},{key:"setColor",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var n,a=this._isColorString(t);if(a!==void 0&&(t=a),Jn(t)===!0){if(Xf(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(C1(t)===!0){var l=t.substr(5).substr(0,t.length-6).split(",");n={r:l[0],g:l[1],b:l[2],a:l[3]}}else if(qf(t)===!0){var c=Fc(t);n={r:c.r,g:c.g,b:c.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:u}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+jn(t));this._setColor(n,r)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r===!0&&(this.previousColor=Qr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",wn(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r===!0&&(this.initialColor=Qr({},t)),this.color=t;var n=Xs(t.r,t.g,t.b),a=2*Math.PI,o=this.r*n.s,l=this.centerCoordinates.x+o*Math.sin(a*n.h),c=this.centerCoordinates.y+o*Math.cos(a*n.h);this.colorPickerSelector.style.left=l-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var r=Xs(this.color.r,this.color.g,this.color.b);r.v=t/100;var n=eo(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,r=Xs(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,a,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),X0(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,r,n,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var l=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(u){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(u){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var c=this;this.opacityRange.onchange=function(){c._setOpacity(this.value)},this.opacityRange.oninput=function(){c._setOpacity(this.value)},this.brightnessRange.onchange=function(){c._setBrightness(this.value)},this.brightnessRange.oninput=function(){c._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ne(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ne(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ne(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ne(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new Wf(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(r){r.isFirst&&t._moveSelector(r)}),this.hammer.on("tap",function(r){t._moveSelector(r)}),this.hammer.on("panstart",function(r){t._moveSelector(r)}),this.hammer.on("panmove",function(r){t._moveSelector(r)}),this.hammer.on("panend",function(r){t._moveSelector(r)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,r,n);var a,o,l,c;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;var u=2*Math.PI/360,d=1/360,f=1/this.r,p;for(l=0;l<360;l++)for(c=0;c<this.r;c++)a=this.centerCoordinates.x+c*Math.sin(u*l),o=this.centerCoordinates.y+c*Math.cos(u*l),p=eo(l*d,c*f,1),t.fillStyle="rgb("+p.r+","+p.g+","+p.b+")",t.fillRect(a-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,r,n)}this.generated=!0}},{key:"_moveSelector",value:function(t){var r=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-r.left,a=t.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,l=.5*this.colorPickerDiv.clientWidth,c=n-l,u=a-o,d=Math.atan2(c,u),f=.98*Math.min(Math.sqrt(c*c+u*u),l),p=Math.cos(d)*f+o,v=Math.sin(d)*f+l;this.colorPickerSelector.style.top=p-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=v-.5*this.colorPickerSelector.clientWidth+"px";var g=d/(2*Math.PI);g=g<0?g+1:g;var w=f/this.r,_=Xs(this.color.r,this.color.g,this.color.b);_.h=g,_.s=w;var S=eo(_.h,_.s,_.v);S.a=this.color.a,this.color=S,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function yh(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];if(s.length<1)throw new TypeError("Invalid arguments.");if(s.length===1)return document.createTextNode(s[0]);var r=document.createElement(s[0]);return r.appendChild(yh.apply(void 0,zt(kn(s).call(s,1)))),r}var LH=function(){function e(s,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};ot(this,e),this.parent=s,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=a,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Qr(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new I1(n),this.wrapper=void 0}return lt(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var r=!0;if(typeof t=="string")this.options.filter=t;else if(Qe(t))this.options.filter=t.join();else if(Ke(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Ge(t)!==void 0&&(this.options.filter=Ge(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(r=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,r=t):typeof t=="function"&&(this.options.filter=t,r=!0);Ge(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Ge(this.options),r=0,n=!1;for(var a in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,a)&&(this.allowCreation=!1,n=!1,typeof t=="function"?(n=t(a,[]),n=n||this._handleObject(this.configureOptions[a],[a],!0)):(t===!0||$t(t).call(t,a)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),r++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var r=this.moduleOptions,n=0;n<t.length;n++)if(r[t[n]]!==void 0)r=r[t[n]];else{r=void 0;break}return r}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return Se(a).call(a,function(l){r.appendChild(l)}),this.domElements.push(r),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=t,this._makeItem([],r)}},{key:"_makeLabel",value:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");if(a.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(yh("i","b",t))}else a.innerText=t+":";return a}},{key:"_makeDropdown",value:function(t,r,n){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;r!==void 0&&$t(t).call(t,r)!==-1&&(o=$t(t).call(t,r));for(var l=0;l<t.length;l++){var c=document.createElement("option");c.value=t[l],l===o&&(c.selected="selected"),c.innerText=t[l],a.appendChild(c)}var u=this;a.onchange=function(){u._update(this.value,n)};var d=this._makeLabel(n[n.length-1],n);this._makeItem(n,d,a)}},{key:"_makeRange",value:function(t,r,n){var a=t[0],o=t[1],l=t[2],c=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=l}catch(S){}u.step=c;var d="",f=0;if(r!==void 0){var p=1.2;r<0&&r*p<o?(u.min=Math.ceil(r*p),f=u.min,d="range increased"):r/p<o&&(u.min=Math.ceil(r/p),f=u.min,d="range increased"),r*p>l&&l!==1&&(u.max=Math.ceil(r*p),f=u.max,d="range increased"),u.value=r}else u.value=a;var v=document.createElement("input");v.className="vis-configuration vis-config-rangeinput",v.value=u.value;var g=this;u.onchange=function(){v.value=this.value,g._update(Number(this.value),n)},u.oninput=function(){v.value=this.value};var w=this._makeLabel(n[n.length-1],n),_=this._makeItem(n,w,u,v);d!==""&&this.popupHistory[_]!==f&&(this.popupHistory[_]=f,this._setupPopup(d,_))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-button",r.innerText="generate options",r.onclick=function(){t._printOptions()},r.onmouseover=function(){r.className="vis-configuration vis-config-button hover"},r.onmouseout=function(){r.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(r)}}},{key:"_setupPopup",value:function(t,r){var n=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerText=t,a.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:r}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var r=this.domElements[this.popupDiv.index],n=r.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=wn(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=wn(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,r,n){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=t,r!==void 0&&(a.checked=r,r!==t&&(Ke(t)==="object"?r!==t.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));var o=this;a.onchange=function(){o._update(this.checked,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,a)}},{key:"_makeTextInput",value:function(t,r,n){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=r,r!==t&&this.changedOptions.push({path:n,value:r});var o=this;a.onchange=function(){o._update(this.value,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,a)}},{key:"_makeColorField",value:function(t,r,n){var a=this,o=t[1],l=document.createElement("div");r=r===void 0?o:r,r!=="none"?(l.className="vis-configuration vis-config-colorBlock",l.style.backgroundColor=r):l.className="vis-configuration vis-config-colorBlock none",r=r===void 0?o:r,l.onclick=function(){a._showColorPicker(r,l,n)};var c=this._makeLabel(n[n.length-1],n);this._makeItem(n,c,l)}},{key:"_showColorPicker",value:function(t,r,n){var a=this;r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var l="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";r.style.backgroundColor=l,a._update(l,n)}),this.colorPicker.setCloseCallback(function(){r.onclick=function(){a._showColorPicker(t,r,n)}})}},{key:"_handleObject",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=Ge(this.options),l=!1;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){a=!0;var u=t[c],d=mo(r,c);if(typeof o=="function"&&(a=o(c,r),a===!1&&!Qe(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,a=this._handleObject(u,d,!0),this.allowCreation=n===!1)),a!==!1){l=!0;var f=this._getValue(d);if(Qe(u))this._handleArray(u,f,d);else if(typeof u=="string")this._makeTextInput(u,f,d);else if(typeof u=="boolean")this._makeCheckbox(u,f,d);else if(u instanceof Object){if(!this.hideOption(r,c,this.moduleOptions))if(u.enabled!==void 0){var p=mo(d,"enabled"),v=this._getValue(p);if(v===!0){var g=this._makeLabel(c,d,!0);this._makeItem(d,g),l=this._handleObject(u,d)||l}else this._makeCheckbox(u,v,d)}else{var w=this._makeLabel(c,d,!0);this._makeItem(d,w),l=this._handleObject(u,d)||l}}else console.error("dont know how to handle",u,c,d)}}return l}},{key:"_handleArray",value:function(t,r,n){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,r,n),t[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof t[0]=="string"?(this._makeDropdown(t,r,n),t[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof t[0]=="number"&&(this._makeRange(t,r,n),t[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}},{key:"_update",value:function(t,r){var n=this._constructOptions(t,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<r.length;o++)r[o]!=="global"&&(a[r[o]]===void 0&&(a[r[o]]={}),o!==r.length-1?a=a[r[o]]:a[r[o]]=t);return n}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(yh("pre","const options = "+jn(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,t);return t}}]),e}(),RH=function(){function e(s,t){ot(this,e),this.container=s,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return lt(e,[{key:"setPosition",value:function(t,r){this.x=Qn(t),this.y=Qn(r)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var r=this.frame.clientHeight,n=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,l=0,c=0;if(this.overflowMethod=="flip"){var u=!1,d=!0;this.y-r<this.padding&&(d=!1),this.x+n>o-this.padding&&(u=!0),u?l=this.x-n:l=this.x,d?c=this.y-r:c=this.y}else c=this.y-r,c+r+this.padding>a&&(c=a-r-this.padding),c<this.padding&&(c=this.padding),l=this.x,l+n+this.padding>o&&(l=o-n-this.padding),l<this.padding&&(l=this.padding);this.frame.style.left=l+"px",this.frame.style.top=c+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),za=!1,gg,_h="background: #FFeeee; color: #dd0000",AH=function(){function e(){ot(this,e)}return lt(e,null,[{key:"validate",value:function(t,r,n){za=!1,gg=r;var a=r;return n!==void 0&&(a=r[n]),e.parse(t,a,[]),za}},{key:"parse",value:function(t,r,n){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.check(a,t,r,n)}},{key:"check",value:function(t,r,n,a){if(n[t]===void 0&&n.__any__===void 0){e.getSuggestion(t,n,a);return}var o=t,l=!0;n[t]===void 0&&n.__any__!==void 0&&(o="__any__",l=e.getType(r[t])==="object");var c=n[o];l&&c.__type__!==void 0&&(c=c.__type__),e.checkFields(t,r,n,o,c,a)}},{key:"checkFields",value:function(t,r,n,a,o,l){var c=function(p){console.error("%c"+p+e.printLocation(l,t),_h)},u=e.getType(r[t]),d=o[u];d!==void 0?e.getType(d)==="array"&&$t(d).call(d,r[t])===-1?(c('Invalid option detected in "'+t+'". Allowed values are:'+e.print(d)+' not "'+r[t]+'". '),za=!0):u==="object"&&a!=="__any__"&&(l=mo(l,t),e.parse(r[t],n[a],l)):o.any===void 0&&(c('Invalid type received for "'+t+'". Expected: '+e.print(tn(o))+". Received ["+u+'] "'+r[t]+'"'),za=!0)}},{key:"getType",value:function(t){var r=Ke(t);return r==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Qe(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}},{key:"getSuggestion",value:function(t,r,n){var a=e.findInOptions(t,r,n,!1),o=e.findInOptions(t,gg,[],!0),l=8,c=4,u;a.indexMatch!==void 0?u=" in "+e.printLocation(a.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=c&&a.distance>o.distance?u=" in "+e.printLocation(a.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):a.distance<=l?u='. Did you mean "'+a.closestMatch+'"?'+e.printLocation(a.path,t):u=". Did you mean one of these: "+e.print(tn(r))+e.printLocation(n,t),console.error('%cUnknown option detected: "'+t+'"'+u,_h),za=!0}},{key:"findInOptions",value:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,l="",c=[],u=t.toLowerCase(),d=void 0;for(var f in r){var p=void 0;if(r[f].__type__!==void 0&&a===!0){var v=e.findInOptions(t,r[f],mo(n,f));o>v.distance&&(l=v.closestMatch,c=v.path,o=v.distance,d=v.indexMatch)}else{var g;$t(g=f.toLowerCase()).call(g,u)!==-1&&(d=f),p=e.levenshteinDistance(t,f),o>p&&(l=f,c=T1(n),o=p)}}return{closestMatch:l,path:c,distance:o,indexMatch:d}}},{key:"printLocation",value:function(t,r){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+n+`options = {
`,o=0;o<t.length;o++){for(var l=0;l<o+1;l++)a+="  ";a+=t[o]+`: {
`}for(var c=0;c<t.length+1;c++)a+="  ";a+=r+`
`;for(var u=0;u<t.length+1;u++){for(var d=0;d<t.length-u;d++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(t){return jn(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,r){if(t.length===0)return r.length;if(r.length===0)return t.length;var n=[],a;for(a=0;a<=r.length;a++)n[a]=[a];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(a=1;a<=r.length;a++)for(o=1;o<=t.length;o++)r.charAt(a-1)==t.charAt(o-1)?n[a][o]=n[a-1][o-1]:n[a][o]=Math.min(n[a-1][o-1]+1,Math.min(n[a][o-1]+1,n[a-1][o]+1));return n[r.length][t.length]}}]),e}(),FH=Dr,VH=I1,zH=LH,jH=Wf,YH=RH,GH=_h,UH=AH,HH=Object.freeze({__proto__:null,Activator:FH,Alea:UU,ColorPicker:VH,Configurator:zH,DELETE:Uf,HSVToHex:gh,HSVToRGB:eo,Hammer:jH,Popup:YH,RGBToHSV:Xs,RGBToHex:Bf,VALIDATOR_PRINT_STYLE:GH,Validator:UH,addClassName:uH,addCssText:xH,addEventListener:mH,binarySearchCustom:DH,binarySearchValue:EH,bridgeObject:Kf,copyAndExtendArray:mo,copyArray:T1,deepExtend:vo,deepObjectAssign:Hf,easingFunctions:MH,equalArray:aH,extend:nH,fillIfDefined:x1,forEach:hH,getAbsoluteLeft:oH,getAbsoluteRight:lH,getAbsoluteTop:cH,getScrollBarWidth:OH,getTarget:_H,getType:Ha,hasParent:bH,hexToHSV:$1,hexToRGB:Fc,insertSort:CH,isDate:tH,isNumber:Za,isObject:mh,isString:Jn,isValidHex:qf,isValidRGB:Xf,isValidRGBA:C1,mergeOptions:IH,option:wH,overrideOpacity:kH,parseColor:SH,preventDefault:yH,pureDeepObjectAssign:b1,recursiveDOMDelete:S1,removeClassName:dH,removeCssText:TH,removeEventListener:gH,selectiveBridgeObject:$H,selectiveDeepExtend:iH,selectiveExtend:rH,selectiveNotDeepExtend:sH,throttle:vH,toArray:fH,topMost:PH,updateProperty:pH});function _i(e){for(var s in e)e.hasOwnProperty(s)&&(e[s].redundant=e[s].used,e[s].used=[])}function sr(e){for(var s in e)if(e.hasOwnProperty(s)&&e[s].redundant){for(var t=0;t<e[s].redundant.length;t++)e[s].redundant[t].parentNode.removeChild(e[s].redundant[t]);e[s].redundant=[]}}function WH(e){_i(e),sr(e),_i(e)}function wr(e,s,t){var r;return s.hasOwnProperty(e)?s[e].redundant.length>0?(r=s[e].redundant[0],s[e].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",e),t.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",e),s[e]={used:[],redundant:[]},t.appendChild(r)),s[e].used.push(r),r}function dd(e,s,t,r){var n;return s.hasOwnProperty(e)?s[e].redundant.length>0?(n=s[e].redundant[0],s[e].redundant.shift()):(n=document.createElement(e),r!==void 0?t.insertBefore(n,r):t.appendChild(n)):(n=document.createElement(e),s[e]={used:[],redundant:[]},r!==void 0?t.insertBefore(n,r):t.appendChild(n)),s[e].used.push(n),n}function oa(e,s,t,r,n,a){var o;if(t.style=="circle"?(o=wr("circle",r,n),o.setAttributeNS(null,"cx",e),o.setAttributeNS(null,"cy",s),o.setAttributeNS(null,"r",.5*t.size)):(o=wr("rect",r,n),o.setAttributeNS(null,"x",e-.5*t.size),o.setAttributeNS(null,"y",s-.5*t.size),o.setAttributeNS(null,"width",t.size),o.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&o.setAttributeNS(null,"style",t.styles),o.setAttributeNS(null,"class",t.className+" vis-point"),a){var l=wr("text",r,n);a.xOffset&&(e=e+a.xOffset),a.yOffset&&(s=s+a.yOffset),a.content&&(l.textContent=a.content),a.className&&l.setAttributeNS(null,"class",a.className+" vis-label"),l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",s)}return o}function bh(e,s,t,r,n,a,o,l){if(r!=0){r<0&&(r*=-1,s-=r);var c=wr("rect",a,o);c.setAttributeNS(null,"x",e-.5*t),c.setAttributeNS(null,"y",s),c.setAttributeNS(null,"width",t),c.setAttributeNS(null,"height",r),c.setAttributeNS(null,"class",n),l&&c.setAttributeNS(null,"style",l)}}function BH(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(e){return"en"}}var D1={exports:{}},qH=ze,XH=xc,KH=gc,QH=qH.TypeError,E1=function(e){if(XH(e))return e;throw QH(KH(e)+" is not a constructor")},JH=qe,ZH=dr,hd=ys,eW=S0,yg=E1,tW=nr,_g=un,nW=bs,M1=ft,Qf=ZH("Reflect","construct"),rW=Object.prototype,iW=[].push,O1=M1(function(){function e(){}return!(Qf(function(){},[],e)instanceof e)}),P1=!M1(function(){Qf(function(){})}),bg=O1||P1;JH({target:"Reflect",stat:!0,forced:bg,sham:bg},{construct:function(s,t){yg(s),tW(t);var r=arguments.length<3?s:yg(arguments[2]);if(P1&&!O1)return Qf(s,t,r);if(s==r){switch(t.length){case 0:return new s;case 1:return new s(t[0]);case 2:return new s(t[0],t[1]);case 3:return new s(t[0],t[1],t[2]);case 4:return new s(t[0],t[1],t[2],t[3])}var n=[null];return hd(iW,n,t),new(hd(eW,s,n))}var a=r.prototype,o=nW(_g(a)?a:rW),l=hd(s,o,t);return _g(l)?l:o}});var sW=bt,aW=sW.Reflect.construct,oW=aW,lW=oW;(function(e){e.exports=lW})(D1);var Ve=Le(D1.exports);function Tt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Jf={exports:{}},cW=U0,uW=cW,dW=uW,hW=dW;(function(e){e.exports=hW})(Jf);var fW=Le(Jf.exports),Zf={exports:{}},pW=qe,vW=ib;pW({target:"Object",stat:!0},{setPrototypeOf:vW});var mW=bt,gW=mW.Object.setPrototypeOf,yW=gW,_W=yW,bW=_W,wW=bW,kW=wW,SW=kW;(function(e){e.exports=SW})(Zf);var wh=Le(Zf.exports),N1={exports:{}},xW=x0,TW=xW,$W=TW,CW=$W;(function(e){e.exports=CW})(N1);var L1=Le(N1.exports);function kh(e,s){var t;return kh=wh?L1(t=wh).call(t):function(n,a){return n.__proto__=a,n},kh(e,s)}function Rn(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=fW(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Pc(e,"prototype",{writable:!1}),s&&kh(e,s)}function Wn(e,s){if(s&&(Ke(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}var ep={exports:{}},IW=N0,DW=IW,EW=DW,MW=EW;(function(e){e.exports=MW})(ep);var wg=Le(ep.exports);function _t(e){var s;return _t=wh?L1(s=wg).call(s):function(r){return r.__proto__||wg(r)},_t(e)}var R1={exports:{}},A1={exports:{}};(function(e){var s=Nc.exports,t=Mf.exports;function r(n){return e.exports=r=typeof s=="function"&&typeof t=="symbol"?function(a){return typeof a}:function(a){return a&&typeof s=="function"&&a.constructor===s&&a!==s.prototype?"symbol":typeof a},e.exports.__esModule=!0,e.exports.default=e.exports,r(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(A1);var F1={exports:{}},OW=$0,PW=OW,NW=PW,LW=NW;(function(e){e.exports=LW})(F1);var V1={exports:{}},kg=cn,RW=Cf,AW=_s,FW=Hn,VW=function(e,s,t){for(var r=RW(s),n=FW.f,a=AW.f,o=0;o<r.length;o++){var l=r[o];!kg(e,l)&&!(t&&kg(t,l))&&n(e,l,a(s,l))}},zW=pt,jW=zW("".replace),YW=function(e){return String(Error(e).stack)}("zxcasd"),z1=/\n\s*at [^:]*:[^\n]*/,GW=z1.test(YW),UW=function(e,s){if(GW&&typeof e=="string")for(;s--;)e=jW(e,z1,"");return e},HW=un,WW=Pi,BW=function(e,s){HW(s)&&"cause"in s&&WW(e,"cause",s.cause)},qW=ze,XW=Ni,KW=rr,QW=nr,JW=gc,ZW=lb,e9=ir,Sg=Dt,t9=bf,n9=Tc,xg=ob,r9=qW.TypeError,Pl=function(e,s){this.stopped=e,this.result=s},Tg=Pl.prototype,Ta=function(e,s,t){var r=t&&t.that,n=!!(t&&t.AS_ENTRIES),a=!!(t&&t.IS_ITERATOR),o=!!(t&&t.INTERRUPTED),l=XW(s,r),c,u,d,f,p,v,g,w=function(S){return c&&xg(c,"normal",S),new Pl(!0,S)},_=function(S){return n?(QW(S),o?l(S[0],S[1],w):l(S[0],S[1])):o?l(S,w):l(S)};if(a)c=e;else{if(u=n9(e),!u)throw r9(JW(e)+" is not iterable");if(ZW(u)){for(d=0,f=e9(e);f>d;d++)if(p=_(e[d]),p&&Sg(Tg,p))return p;return new Pl(!1)}c=t9(e,u)}for(v=c.next;!(g=KW(v,c)).done;){try{p=_(g.value)}catch(S){xg(c,"throw",S)}if(typeof p=="object"&&p&&Sg(Tg,p))return p}return new Pl(!1)},i9=Nr,s9=function(e,s){return e===void 0?arguments.length<2?"":s:i9(e)},a9=ft,o9=gs,l9=!a9(function(){var e=Error("a");return"stack"in e?(Object.defineProperty(e,"stack",o9(1,7)),e.stack!==7):!0}),c9=qe,u9=ze,d9=Dt,h9=kc,Kl=ib,f9=VW,j1=bs,yl=Pi,fd=gs,p9=UW,v9=BW,m9=Ta,g9=s9,y9=Wt,_9=l9,b9=y9("toStringTag"),Ql=u9.Error,w9=[].push,go=function(s,t){var r=arguments.length>2?arguments[2]:void 0,n=d9(pd,this),a;Kl?a=Kl(new Ql,n?h9(this):pd):(a=n?this:j1(pd),yl(a,b9,"Error")),t!==void 0&&yl(a,"message",g9(t)),_9&&yl(a,"stack",p9(a.stack,1)),v9(a,r);var o=[];return m9(s,w9,{that:o}),yl(a,"errors",o),a};Kl?Kl(go,Ql):f9(go,Ql,{name:!0});var pd=go.prototype=j1(Ql.prototype,{constructor:fd(1,go),message:fd(1,""),name:fd(1,"AggregateError")});c9({global:!0},{AggregateError:go});var k9=ze,Y1=k9.Promise,S9=Sc,G1=function(e,s,t){for(var r in s)t&&t.unsafe&&e[r]?e[r]=s[r]:S9(e,r,s[r],t);return e},x9=dr,T9=Hn,$9=Wt,C9=dn,$g=$9("species"),U1=function(e){var s=x9(e),t=T9.f;C9&&s&&!s[$g]&&t(s,$g,{configurable:!0,get:function(){return this}})},I9=ze,D9=Dt,E9=I9.TypeError,tp=function(e,s){if(D9(s,e))return e;throw E9("Incorrect invocation")},Cg=nr,M9=E1,O9=Wt,P9=O9("species"),H1=function(e,s){var t=Cg(e).constructor,r;return t===void 0||(r=Cg(t)[P9])==null?s:M9(r)},N9=Oi,W1=/(?:ipad|iphone|ipod).*applewebkit/i.test(N9),L9=ms,R9=ze,Vc=L9(R9.process)=="process",Zn=ze,A9=ys,F9=Ni,Ig=nn,V9=cn,z9=ft,Dg=Q_,j9=Do,Eg=hf,Y9=B0,G9=W1,U9=Vc,Sh=Zn.setImmediate,xh=Zn.clearImmediate,H9=Zn.process,vd=Zn.Dispatch,W9=Zn.Function,Mg=Zn.MessageChannel,B9=Zn.String,md=0,to={},Og="onreadystatechange",yo,Gi,gd,yd;try{yo=Zn.location}catch(e){}var np=function(e){if(V9(to,e)){var s=to[e];delete to[e],s()}},_d=function(e){return function(){np(e)}},Pg=function(e){np(e.data)},Ng=function(e){Zn.postMessage(B9(e),yo.protocol+"//"+yo.host)};(!Sh||!xh)&&(Sh=function(s){Y9(arguments.length,1);var t=Ig(s)?s:W9(s),r=j9(arguments,1);return to[++md]=function(){A9(t,void 0,r)},Gi(md),md},xh=function(s){delete to[s]},U9?Gi=function(e){H9.nextTick(_d(e))}:vd&&vd.now?Gi=function(e){vd.now(_d(e))}:Mg&&!G9?(gd=new Mg,yd=gd.port2,gd.port1.onmessage=Pg,Gi=F9(yd.postMessage,yd)):Zn.addEventListener&&Ig(Zn.postMessage)&&!Zn.importScripts&&yo&&yo.protocol!=="file:"&&!z9(Ng)?(Gi=Ng,Zn.addEventListener("message",Pg,!1)):Og in Eg("script")?Gi=function(e){Dg.appendChild(Eg("script"))[Og]=function(){Dg.removeChild(this),np(e)}}:Gi=function(e){setTimeout(_d(e),0)});var B1={set:Sh,clear:xh},q9=Oi,X9=ze,K9=/ipad|iphone|ipod/i.test(q9)&&X9.Pebble!==void 0,Q9=Oi,J9=/web0s(?!.*chrome)/i.test(Q9),cs=ze,Lg=Ni,Z9=_s.f,bd=B1.set,eB=W1,tB=K9,nB=J9,wd=Vc,Rg=cs.MutationObserver||cs.WebKitMutationObserver,Ag=cs.document,Fg=cs.process,_l=cs.Promise,Vg=Z9(cs,"queueMicrotask"),q1=Vg&&Vg.value,ja,qi,no,Ys,kd,Sd,bl,zg;q1||(ja=function(){var e,s;for(wd&&(e=Fg.domain)&&e.exit();qi;){s=qi.fn,qi=qi.next;try{s()}catch(t){throw qi?Ys():no=void 0,t}}no=void 0,e&&e.enter()},!eB&&!wd&&!nB&&Rg&&Ag?(kd=!0,Sd=Ag.createTextNode(""),new Rg(ja).observe(Sd,{characterData:!0}),Ys=function(){Sd.data=kd=!kd}):!tB&&_l&&_l.resolve?(bl=_l.resolve(void 0),bl.constructor=_l,zg=Lg(bl.then,bl),Ys=function(){zg(ja)}):wd?Ys=function(){Fg.nextTick(ja)}:(bd=Lg(bd,cs),Ys=function(){bd(ja)}));var rB=q1||function(e){var s={fn:e,next:void 0};no&&(no.next=s),qi||(qi=s,Ys()),no=s},$a={},jg=xr,iB=function(e){var s,t;this.promise=new e(function(r,n){if(s!==void 0||t!==void 0)throw TypeError("Bad Promise constructor");s=r,t=n}),this.resolve=jg(s),this.reject=jg(t)};$a.f=function(e){return new iB(e)};var sB=nr,aB=un,oB=$a,X1=function(e,s){if(sB(e),aB(s)&&s.constructor===e)return s;var t=oB.f(e),r=t.resolve;return r(s),t.promise},lB=ze,cB=function(e,s){var t=lB.console;t&&t.error&&(arguments.length==1?t.error(e):t.error(e,s))},zc=function(e){try{return{error:!1,value:e()}}catch(s){return{error:!0,value:s}}},K1=function(){this.head=null,this.tail=null};K1.prototype={add:function(e){var s={item:e,next:null};this.head?this.tail.next=s:this.head=s,this.tail=s},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var uB=K1,dB=typeof window=="object",jc=qe,hB=HN,Jr=ze,fB=dr,Ii=rr,Th=Y1,pB=G1,vB=ya,mB=U1,$h=xr,Jl=nn,gB=un,yB=tp,_B=df,Yg=Ta,bB=vb,wB=H1,Q1=B1.set,rp=rB,kB=X1,SB=cB,J1=$a,Ch=zc,xB=uB,ip=ga,TB=B_,$B=Wt,CB=dB,Zl=Vc,Gg=ma,IB=$B("species"),Rr="Promise",Ug=ip.getterFor(Rr),DB=ip.set,EB=ip.getterFor(Rr),MB=Th&&Th.prototype,br=Th,Nl=MB,Z1=Jr.TypeError,Ih=Jr.document,sp=Jr.process,la=J1.f,OB=la,PB=!!(Ih&&Ih.createEvent&&Jr.dispatchEvent),ew=Jl(Jr.PromiseRejectionEvent),tw="unhandledrejection",NB="rejectionhandled",Hg=0,nw=1,LB=2,ap=1,rw=2,Wg=!1,wl,Bg,op,Yc=TB(Rr,function(){var e=_B(br),s=e!==String(br);if(!s&&Gg===66||!Nl.finally)return!0;if(Gg>=51&&/native code/.test(e))return!1;var t=new br(function(a){a(1)}),r=function(a){a(function(){},function(){})},n=t.constructor={};return n[IB]=r,Wg=t.then(function(){})instanceof r,Wg?!s&&CB&&!ew:!0}),RB=Yc||!bB(function(e){br.all(e).catch(function(){})}),iw=function(e){var s;return gB(e)&&Jl(s=e.then)?s:!1},sw=function(e,s){var t=s.value,r=s.state==nw,n=r?e.ok:e.fail,a=e.resolve,o=e.reject,l=e.domain,c,u,d;try{n?(r||(s.rejection===rw&&FB(s),s.rejection=ap),n===!0?c=t:(l&&l.enter(),c=n(t),l&&(l.exit(),d=!0)),c===e.promise?o(Z1("Promise-chain cycle")):(u=iw(c))?Ii(u,c,a,o):a(c)):o(t)}catch(f){l&&!d&&l.exit(),o(f)}},aw=function(e,s){e.notified||(e.notified=!0,rp(function(){for(var t=e.reactions,r;r=t.get();)sw(r,e);e.notified=!1,s&&!e.rejection&&AB(e)}))},ow=function(e,s,t){var r,n;PB?(r=Ih.createEvent("Event"),r.promise=s,r.reason=t,r.initEvent(e,!1,!0),Jr.dispatchEvent(r)):r={promise:s,reason:t},!ew&&(n=Jr["on"+e])?n(r):e===tw&&SB("Unhandled promise rejection",t)},AB=function(e){Ii(Q1,Jr,function(){var s=e.facade,t=e.value,r=qg(e),n;if(r&&(n=Ch(function(){Zl?sp.emit("unhandledRejection",t,s):ow(tw,s,t)}),e.rejection=Zl||qg(e)?rw:ap,n.error))throw n.value})},qg=function(e){return e.rejection!==ap&&!e.parent},FB=function(e){Ii(Q1,Jr,function(){var s=e.facade;Zl?sp.emit("rejectionHandled",s):ow(NB,s,e.value)})},Ks=function(e,s,t){return function(r){e(s,r,t)}},Js=function(e,s,t){e.done||(e.done=!0,t&&(e=t),e.value=s,e.state=LB,aw(e,!0))},Dh=function(e,s,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===s)throw Z1("Promise can't be resolved itself");var r=iw(s);r?rp(function(){var n={done:!1};try{Ii(r,s,Ks(Dh,n,e),Ks(Js,n,e))}catch(a){Js(n,a,e)}}):(e.value=s,e.state=nw,aw(e,!1))}catch(n){Js({done:!1},n,e)}}};Yc&&(br=function(s){yB(this,Nl),$h(s),Ii(wl,this);var t=Ug(this);try{s(Ks(Dh,t),Ks(Js,t))}catch(r){Js(t,r)}},Nl=br.prototype,wl=function(s){DB(this,{type:Rr,done:!1,notified:!1,parent:!1,reactions:new xB,rejection:!1,state:Hg,value:void 0})},wl.prototype=pB(Nl,{then:function(s,t){var r=EB(this),n=la(wB(this,br));return r.parent=!0,n.ok=Jl(s)?s:!0,n.fail=Jl(t)&&t,n.domain=Zl?sp.domain:void 0,r.state==Hg?r.reactions.add(n):rp(function(){sw(n,r)}),n.promise},catch:function(e){return this.then(void 0,e)}}),Bg=function(){var e=new wl,s=Ug(e);this.promise=e,this.resolve=Ks(Dh,s),this.reject=Ks(Js,s)},J1.f=la=function(e){return e===br||e===op?new Bg(e):OB(e)});jc({global:!0,wrap:!0,forced:Yc},{Promise:br});vB(br,Rr,!1,!0);mB(Rr);op=fB(Rr);jc({target:Rr,stat:!0,forced:Yc},{reject:function(s){var t=la(this);return Ii(t.reject,void 0,s),t.promise}});jc({target:Rr,stat:!0,forced:hB},{resolve:function(s){return kB(this===op?br:this,s)}});jc({target:Rr,stat:!0,forced:RB},{all:function(s){var t=this,r=la(t),n=r.resolve,a=r.reject,o=Ch(function(){var l=$h(t.resolve),c=[],u=0,d=1;Yg(s,function(f){var p=u++,v=!1;d++,Ii(l,t,f).then(function(g){v||(v=!0,c[p]=g,--d||n(c))},a)}),--d||n(c)});return o.error&&a(o.value),r.promise},race:function(s){var t=this,r=la(t),n=r.reject,a=Ch(function(){var o=$h(t.resolve);Yg(s,function(l){Ii(o,t,l).then(r.resolve,n)})});return a.error&&n(a.value),r.promise}});var VB=qe,zB=rr,jB=xr,YB=$a,GB=zc,UB=Ta;VB({target:"Promise",stat:!0},{allSettled:function(s){var t=this,r=YB.f(t),n=r.resolve,a=r.reject,o=GB(function(){var l=jB(t.resolve),c=[],u=0,d=1;UB(s,function(f){var p=u++,v=!1;d++,zB(l,t,f).then(function(g){v||(v=!0,c[p]={status:"fulfilled",value:g},--d||n(c))},function(g){v||(v=!0,c[p]={status:"rejected",reason:g},--d||n(c))})}),--d||n(c)});return o.error&&a(o.value),r.promise}});var HB=qe,WB=xr,BB=dr,qB=rr,XB=$a,KB=zc,QB=Ta,Xg="No one promise resolved";HB({target:"Promise",stat:!0},{any:function(s){var t=this,r=BB("AggregateError"),n=XB.f(t),a=n.resolve,o=n.reject,l=KB(function(){var c=WB(t.resolve),u=[],d=0,f=1,p=!1;QB(s,function(v){var g=d++,w=!1;f++,qB(c,t,v).then(function(_){w||p||(p=!0,a(_))},function(_){w||p||(w=!0,u[g]=_,--f||o(new r(u,Xg)))})}),--f||o(new r(u,Xg))});return l.error&&o(l.value),n.promise}});var JB=qe,Kg=Y1,ZB=ft,e7=dr,t7=nn,n7=H1,Qg=X1,r7=!!Kg&&ZB(function(){Kg.prototype.finally.call({then:function(){}},function(){})});JB({target:"Promise",proto:!0,real:!0,forced:r7},{finally:function(e){var s=n7(this,e7("Promise")),t=t7(e);return this.then(t?function(r){return Qg(s,e()).then(function(){return r})}:e,t?function(r){return Qg(s,e()).then(function(){throw r})}:e)}});var i7=bt,s7=i7.Promise,a7=s7,o7=a7,l7=o7,c7=l7,u7=qe,d7=$a,h7=zc;u7({target:"Promise",stat:!0,forced:!0},{try:function(e){var s=d7.f(this),t=h7(e);return(t.error?s.reject:s.resolve)(t.value),s.promise}});var f7=c7,p7=f7;(function(e){e.exports=p7})(V1);var lw={exports:{}},v7=I0,m7=v7,g7=m7,y7=g7;(function(e){e.exports=y7})(lw);(function(e){var s=A1.exports.default,t=Nc.exports,r=Df.exports,n=Jf.exports,a=ep.exports,o=F1.exports,l=Zf.exports,c=V1.exports,u=lw.exports,d=Ef.exports;function f(){e.exports=f=function(){return p},e.exports.__esModule=!0,e.exports.default=e.exports;var p={},v=Object.prototype,g=v.hasOwnProperty,w=typeof t=="function"?t:{},_=w.iterator||"@@iterator",S=w.asyncIterator||"@@asyncIterator",I=w.toStringTag||"@@toStringTag";function C(Z,U,ee){return r(Z,U,{value:ee,enumerable:!0,configurable:!0,writable:!0}),Z[U]}try{C({},"")}catch(Z){C=function(ee,K,se){return ee[K]=se}}function $(Z,U,ee,K){var se=U&&U.prototype instanceof z?U:z,ye=n(se.prototype),le=new Oe(K||[]);return ye._invoke=function($e,Re,be){var he="suspendedStart";return function(Ie,et){if(he==="executing")throw new Error("Generator is already running");if(he==="completed"){if(Ie==="throw")throw et;return Ee()}for(be.method=Ie,be.arg=et;;){var st=be.delegate;if(st){var hn=re(st,be);if(hn){if(hn===A)continue;return hn}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if(he==="suspendedStart")throw he="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);he="executing";var Sn=O($e,Re,be);if(Sn.type==="normal"){if(he=be.done?"completed":"suspendedYield",Sn.arg===A)continue;return{value:Sn.arg,done:be.done}}Sn.type==="throw"&&(he="completed",be.method="throw",be.arg=Sn.arg)}}}(Z,ee,le),ye}function O(Z,U,ee){try{return{type:"normal",arg:Z.call(U,ee)}}catch(K){return{type:"throw",arg:K}}}p.wrap=$;var A={};function z(){}function N(){}function Y(){}var R={};C(R,_,function(){return this});var L=a,j=L&&L(L(xe([])));j&&j!==v&&g.call(j,_)&&(R=j);var B=Y.prototype=z.prototype=n(R);function G(Z){var U;o(U=["next","throw","return"]).call(U,function(ee){C(Z,ee,function(K){return this._invoke(ee,K)})})}function H(Z,U){function ee(se,ye,le,$e){var Re=O(Z[se],Z,ye);if(Re.type!=="throw"){var be=Re.arg,he=be.value;return he&&s(he)=="object"&&g.call(he,"__await")?U.resolve(he.__await).then(function(Ie){ee("next",Ie,le,$e)},function(Ie){ee("throw",Ie,le,$e)}):U.resolve(he).then(function(Ie){be.value=Ie,le(be)},function(Ie){return ee("throw",Ie,le,$e)})}$e(Re.arg)}var K;this._invoke=function(se,ye){function le(){return new U(function($e,Re){ee(se,ye,$e,Re)})}return K=K?K.then(le,le):le()}}function re(Z,U){var ee=Z.iterator[U.method];if(ee===void 0){if(U.delegate=null,U.method==="throw"){if(Z.iterator.return&&(U.method="return",U.arg=void 0,re(Z,U),U.method==="throw"))return A;U.method="throw",U.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var K=O(ee,Z.iterator,U.arg);if(K.type==="throw")return U.method="throw",U.arg=K.arg,U.delegate=null,A;var se=K.arg;return se?se.done?(U[Z.resultName]=se.value,U.next=Z.nextLoc,U.method!=="return"&&(U.method="next",U.arg=void 0),U.delegate=null,A):se:(U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,A)}function fe(Z){var U={tryLoc:Z[0]};1 in Z&&(U.catchLoc=Z[1]),2 in Z&&(U.finallyLoc=Z[2],U.afterLoc=Z[3]),this.tryEntries.push(U)}function oe(Z){var U=Z.completion||{};U.type="normal",delete U.arg,Z.completion=U}function Oe(Z){this.tryEntries=[{tryLoc:"root"}],o(Z).call(Z,fe,this),this.reset(!0)}function xe(Z){if(Z){var U=Z[_];if(U)return U.call(Z);if(typeof Z.next=="function")return Z;if(!isNaN(Z.length)){var ee=-1,K=function se(){for(;++ee<Z.length;)if(g.call(Z,ee))return se.value=Z[ee],se.done=!1,se;return se.value=void 0,se.done=!0,se};return K.next=K}}return{next:Ee}}function Ee(){return{value:void 0,done:!0}}return N.prototype=Y,C(B,"constructor",Y),C(Y,"constructor",N),N.displayName=C(Y,I,"GeneratorFunction"),p.isGeneratorFunction=function(Z){var U=typeof Z=="function"&&Z.constructor;return!!U&&(U===N||(U.displayName||U.name)==="GeneratorFunction")},p.mark=function(Z){return l?l(Z,Y):(Z.__proto__=Y,C(Z,I,"GeneratorFunction")),Z.prototype=n(B),Z},p.awrap=function(Z){return{__await:Z}},G(H.prototype),C(H.prototype,S,function(){return this}),p.AsyncIterator=H,p.async=function(Z,U,ee,K,se){se===void 0&&(se=c);var ye=new H($(Z,U,ee,K),se);return p.isGeneratorFunction(U)?ye:ye.next().then(function(le){return le.done?le.value:ye.next()})},G(B),C(B,I,"Generator"),C(B,_,function(){return this}),C(B,"toString",function(){return"[object Generator]"}),p.keys=function(Z){var U=[];for(var ee in Z)U.push(ee);return u(U).call(U),function K(){for(;U.length;){var se=U.pop();if(se in Z)return K.value=se,K.done=!1,K}return K.done=!0,K}},p.values=xe,Oe.prototype={constructor:Oe,reset:function(U){var ee;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(ee=this.tryEntries).call(ee,oe),!U)for(var K in this)K.charAt(0)==="t"&&g.call(this,K)&&!isNaN(+d(K).call(K,1))&&(this[K]=void 0)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var ee=this;function K(be,he){return le.type="throw",le.arg=U,ee.next=be,he&&(ee.method="next",ee.arg=void 0),!!he}for(var se=this.tryEntries.length-1;se>=0;--se){var ye=this.tryEntries[se],le=ye.completion;if(ye.tryLoc==="root")return K("end");if(ye.tryLoc<=this.prev){var $e=g.call(ye,"catchLoc"),Re=g.call(ye,"finallyLoc");if($e&&Re){if(this.prev<ye.catchLoc)return K(ye.catchLoc,!0);if(this.prev<ye.finallyLoc)return K(ye.finallyLoc)}else if($e){if(this.prev<ye.catchLoc)return K(ye.catchLoc,!0)}else{if(!Re)throw new Error("try statement without catch or finally");if(this.prev<ye.finallyLoc)return K(ye.finallyLoc)}}}},abrupt:function(U,ee){for(var K=this.tryEntries.length-1;K>=0;--K){var se=this.tryEntries[K];if(se.tryLoc<=this.prev&&g.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var ye=se;break}}ye&&(U==="break"||U==="continue")&&ye.tryLoc<=ee&&ee<=ye.finallyLoc&&(ye=null);var le=ye?ye.completion:{};return le.type=U,le.arg=ee,ye?(this.method="next",this.next=ye.finallyLoc,A):this.complete(le)},complete:function(U,ee){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&ee&&(this.next=ee),A},finish:function(U){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var K=this.tryEntries[ee];if(K.finallyLoc===U)return this.complete(K.completion,K.afterLoc),oe(K),A}},catch:function(U){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var K=this.tryEntries[ee];if(K.tryLoc===U){var se=K.completion;if(se.type==="throw"){var ye=se.arg;oe(K)}return ye}}throw new Error("illegal catch attempt")},delegateYield:function(U,ee,K){return this.delegate={iterator:xe(U),resultName:ee,nextLoc:K},this.method==="next"&&(this.arg=void 0),A}},p}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports})(R1);var Ll=R1.exports(),Fn=Ll;try{regeneratorRuntime=Ll}catch(e){typeof globalThis=="object"?globalThis.regeneratorRuntime=Ll:Function("r","regeneratorRuntime = r")(Ll)}var cw={exports:{}},_7=ze,b7=xr,w7=Un,k7=bc,S7=ir,x7=_7.TypeError,Jg=function(e){return function(s,t,r,n){b7(t);var a=w7(s),o=k7(a),l=S7(a),c=e?l-1:0,u=e?-1:1;if(r<2)for(;;){if(c in o){n=o[c],c+=u;break}if(c+=u,e?c<0:l<=c)throw x7("Reduce of empty array with no initial value")}for(;e?c>=0:l>c;c+=u)c in o&&(n=t(n,o[c],c,a));return n}},T7={left:Jg(!1),right:Jg(!0)},$7=qe,C7=T7.left,I7=Sa,Zg=ma,D7=Vc,E7=I7("reduce"),M7=!D7&&Zg>79&&Zg<83;$7({target:"Array",proto:!0,forced:!E7||M7},{reduce:function(s){var t=arguments.length;return C7(this,s,t,t>1?arguments[1]:void 0)}});var O7=Gt,P7=O7("Array").reduce,N7=Dt,L7=P7,xd=Array.prototype,R7=function(e){var s=e.reduce;return e===xd||N7(xd,e)&&s===xd.reduce?L7:s},A7=R7,F7=A7;(function(e){e.exports=F7})(cw);var Gc=Le(cw.exports),uw={exports:{}},V7=ze,z7=ws,j7=ir,Y7=Ni,G7=V7.TypeError,dw=function(e,s,t,r,n,a,o,l){for(var c=n,u=0,d=o?Y7(o,l):!1,f,p;u<r;){if(u in t){if(f=d?d(t[u],u,s):t[u],a>0&&z7(f))p=j7(f),c=dw(e,s,f,p,c,a-1)-1;else{if(c>=9007199254740991)throw G7("Exceed the acceptable array length");e[c]=f}c++}u++}return c},U7=dw,H7=qe,W7=U7,B7=xr,q7=Un,X7=ir,K7=Ic;H7({target:"Array",proto:!0},{flatMap:function(s){var t=q7(this),r=X7(t),n;return B7(s),n=K7(t,0),n.length=W7(n,t,t,r,0,1,s,arguments.length>1?arguments[1]:void 0),n}});var Q7=Gt,J7=Q7("Array").flatMap,Z7=Dt,eq=J7,Td=Array.prototype,tq=function(e){var s=e.flatMap;return e===Td||Z7(Td,e)&&s===Td.flatMap?eq:s},nq=tq,rq=nq;(function(e){e.exports=rq})(uw);var iq=Le(uw.exports),hw={exports:{}},lp={exports:{}},sq=ft,aq=sq(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),oq=ft,lq=un,cq=ms,ey=aq,Rl=Object.isExtensible,uq=oq(function(){Rl(1)}),dq=uq||ey?function(s){return!lq(s)||ey&&cq(s)=="ArrayBuffer"?!1:Rl?Rl(s):!0}:Rl,hq=ft,fq=!hq(function(){return Object.isExtensible(Object.preventExtensions({}))}),pq=qe,vq=pt,mq=So,gq=un,cp=cn,yq=Hn.f,ty=Io,_q=wf,up=dq,bq=mc,wq=fq,fw=!1,Zr=bq("meta"),kq=0,dp=function(e){yq(e,Zr,{value:{objectID:"O"+kq++,weakData:{}}})},Sq=function(e,s){if(!gq(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!cp(e,Zr)){if(!up(e))return"F";if(!s)return"E";dp(e)}return e[Zr].objectID},xq=function(e,s){if(!cp(e,Zr)){if(!up(e))return!0;if(!s)return!1;dp(e)}return e[Zr].weakData},Tq=function(e){return wq&&fw&&up(e)&&!cp(e,Zr)&&dp(e),e},$q=function(){Cq.enable=function(){},fw=!0;var e=ty.f,s=vq([].splice),t={};t[Zr]=1,e(t).length&&(ty.f=function(r){for(var n=e(r),a=0,o=n.length;a<o;a++)if(n[a]===Zr){s(n,a,1);break}return n},pq({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_q.f}))},Cq=lp.exports={enable:$q,fastKey:Sq,getWeakData:xq,onFreeze:Tq};mq[Zr]=!0;var Iq=qe,Dq=ze,Eq=lp.exports,Mq=ft,Oq=Pi,Pq=Ta,Nq=tp,Lq=nn,Rq=un,Aq=ya,Fq=Hn.f,Vq=si.forEach,zq=dn,pw=ga,jq=pw.set,Yq=pw.getterFor,vw=function(e,s,t){var r=e.indexOf("Map")!==-1,n=e.indexOf("Weak")!==-1,a=r?"set":"add",o=Dq[e],l=o&&o.prototype,c={},u;if(!zq||!Lq(o)||!(n||l.forEach&&!Mq(function(){new o().entries().next()})))u=t.getConstructor(s,e,r,a),Eq.enable();else{u=s(function(p,v){jq(Nq(p,d),{type:e,collection:new o}),v!=null&&Pq(v,p[a],{that:p,AS_ENTRIES:r})});var d=u.prototype,f=Yq(e);Vq(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var v=p=="add"||p=="set";p in l&&!(n&&p=="clear")&&Oq(d,p,function(g,w){var _=f(this).collection;if(!v&&n&&!Rq(g))return p=="get"?void 0:!1;var S=_[p](g===0?0:g,w);return v?this:S})}),n||Fq(d,"size",{configurable:!0,get:function(){return f(this).collection.size}})}return Aq(u,e,!1,!0),c[e]=u,Iq({global:!0,forced:!0},c),n||t.setStrong(u,e,r),u},Gq=Hn.f,Uq=bs,ny=G1,Hq=Ni,Wq=tp,Bq=Ta,qq=yf,Xq=U1,Ya=dn,ry=lp.exports.fastKey,mw=ga,iy=mw.set,$d=mw.getterFor,gw={getConstructor:function(e,s,t,r){var n=e(function(u,d){Wq(u,a),iy(u,{type:s,index:Uq(null),first:void 0,last:void 0,size:0}),Ya||(u.size=0),d!=null&&Bq(d,u[r],{that:u,AS_ENTRIES:t})}),a=n.prototype,o=$d(s),l=function(u,d,f){var p=o(u),v=c(u,d),g,w;return v?v.value=f:(p.last=v={index:w=ry(d,!0),key:d,value:f,previous:g=p.last,next:void 0,removed:!1},p.first||(p.first=v),g&&(g.next=v),Ya?p.size++:u.size++,w!=="F"&&(p.index[w]=v)),u},c=function(u,d){var f=o(u),p=ry(d),v;if(p!=="F")return f.index[p];for(v=f.first;v;v=v.next)if(v.key==d)return v};return ny(a,{clear:function(){for(var d=this,f=o(d),p=f.index,v=f.first;v;)v.removed=!0,v.previous&&(v.previous=v.previous.next=void 0),delete p[v.index],v=v.next;f.first=f.last=void 0,Ya?f.size=0:d.size=0},delete:function(u){var d=this,f=o(d),p=c(d,u);if(p){var v=p.next,g=p.previous;delete f.index[p.index],p.removed=!0,g&&(g.next=v),v&&(v.previous=g),f.first==p&&(f.first=v),f.last==p&&(f.last=g),Ya?f.size--:d.size--}return!!p},forEach:function(d){for(var f=o(this),p=Hq(d,arguments.length>1?arguments[1]:void 0),v;v=v?v.next:f.first;)for(p(v.value,v.key,this);v&&v.removed;)v=v.previous},has:function(d){return!!c(this,d)}}),ny(a,t?{get:function(d){var f=c(this,d);return f&&f.value},set:function(d,f){return l(this,d===0?0:d,f)}}:{add:function(d){return l(this,d=d===0?0:d,d)}}),Ya&&Gq(a,"size",{get:function(){return o(this).size}}),n},setStrong:function(e,s,t){var r=s+" Iterator",n=$d(s),a=$d(r);qq(e,s,function(o,l){iy(this,{type:r,target:o,state:n(o),kind:l,last:void 0})},function(){for(var o=a(this),l=o.kind,c=o.last;c&&c.removed;)c=c.previous;return!o.target||!(o.last=c=c?c.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):l=="keys"?{value:c.key,done:!1}:l=="values"?{value:c.value,done:!1}:{value:[c.key,c.value],done:!1}},t?"entries":"values",!t,!0),Xq(s)}},Kq=vw,Qq=gw;Kq("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Qq);var Jq=bt,Zq=Jq.Map,eX=Zq,tX=eX;(function(e){e.exports=tX})(hw);var yw=Le(hw.exports),_w={exports:{}},nX=vw,rX=gw;nX("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},rX);var iX=bt,sX=iX.Set,aX=sX,oX=aX;(function(e){e.exports=oX})(_w);var Ti=Le(_w.exports),bw={exports:{}};(function(e){e.exports=l0})(bw);var ts=Le(bw.exports),ww={exports:{}},lX=bf,cX=lX,uX=cX,dX=uX,hX=dX,fX=hX,pX=fX,vX=pX;(function(e){e.exports=vX})(ww);var Cd=Le(ww.exports),kw={exports:{}},sy=wb,mX=Math.floor,Eh=function(e,s){var t=e.length,r=mX(t/2);return t<8?gX(e,s):yX(e,Eh(sy(e,0,r),s),Eh(sy(e,r),s),s)},gX=function(e,s){for(var t=e.length,r=1,n,a;r<t;){for(a=r,n=e[r];a&&s(e[a-1],n)>0;)e[a]=e[--a];a!==r++&&(e[a]=n)}return e},yX=function(e,s,t,r){for(var n=s.length,a=t.length,o=0,l=0;o<n||l<a;)e[o+l]=o<n&&l<a?r(s[o],t[l])<=0?s[o++]:t[l++]:o<n?s[o++]:t[l++];return e},_X=Eh,bX=Oi,ay=bX.match(/firefox\/(\d+)/i),wX=!!ay&&+ay[1],kX=Oi,SX=/MSIE|Trident/.test(kX),xX=Oi,oy=xX.match(/AppleWebKit\/(\d+)\./),TX=!!oy&&+oy[1],$X=qe,Sw=pt,CX=xr,IX=Un,DX=ir,ly=Nr,hp=ft,EX=_X,MX=Sa,cy=wX,OX=SX,uy=ma,dy=TX,ki=[],hy=Sw(ki.sort),PX=Sw(ki.push),NX=hp(function(){ki.sort(void 0)}),LX=hp(function(){ki.sort(null)}),RX=MX("sort"),xw=!hp(function(){if(uy)return uy<70;if(!(cy&&cy>3)){if(OX)return!0;if(dy)return dy<603;var e="",s,t,r,n;for(s=65;s<76;s++){switch(t=String.fromCharCode(s),s){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)ki.push({k:t+n,v:r})}for(ki.sort(function(a,o){return o.v-a.v}),n=0;n<ki.length;n++)t=ki[n].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),AX=NX||!LX||!RX||!xw,FX=function(e){return function(s,t){return t===void 0?-1:s===void 0?1:e!==void 0?+e(s,t)||0:ly(s)>ly(t)?1:-1}};$X({target:"Array",proto:!0,forced:AX},{sort:function(s){s!==void 0&&CX(s);var t=IX(this);if(xw)return s===void 0?hy(t):hy(t,s);var r=[],n=DX(t),a,o;for(o=0;o<n;o++)o in t&&PX(r,t[o]);for(EX(r,FX(s)),a=r.length,o=0;o<a;)t[o]=r[o++];for(;o<n;)delete t[o++];return t}});var VX=Gt,zX=VX("Array").sort,jX=Dt,YX=zX,Id=Array.prototype,GX=function(e){var s=e.sort;return e===Id||jX(Id,e)&&s===Id.sort?YX:s},UX=GX,HX=UX;(function(e){e.exports=HX})(kw);var Kt=Le(kw.exports),Tw={exports:{}},WX=qe,BX=si.some,qX=Sa,XX=qX("some");WX({target:"Array",proto:!0,forced:!XX},{some:function(s){return BX(this,s,arguments.length>1?arguments[1]:void 0)}});var KX=Gt,QX=KX("Array").some,JX=Dt,ZX=QX,Dd=Array.prototype,eK=function(e){var s=e.some;return e===Dd||JX(Dd,e)&&s===Dd.some?ZX:s},tK=eK,nK=tK;(function(e){e.exports=nK})(Tw);var fp=Le(Tw.exports),$w={exports:{}},rK=Gt,iK=rK("Array").keys,sK=iK,aK=sK,oK=ii,lK=cn,cK=Dt,uK=aK,Ed=Array.prototype,dK={DOMTokenList:!0,NodeList:!0},hK=function(e){var s=e.keys;return e===Ed||cK(Ed,e)&&s===Ed.keys||lK(dK,oK(e))?uK:s};(function(e){e.exports=hK})($w);var Hi=Le($w.exports),Cw={exports:{}},fK=Gt,pK=fK("Array").values,vK=pK,mK=vK,gK=ii,yK=cn,_K=Dt,bK=mK,Md=Array.prototype,wK={DOMTokenList:!0,NodeList:!0},kK=function(e){var s=e.values;return e===Md||_K(Md,e)&&s===Md.values||yK(wK,gK(e))?bK:s};(function(e){e.exports=kK})(Cw);var fy=Le(Cw.exports),Iw={exports:{}},SK=Gt,xK=SK("Array").entries,TK=xK,$K=TK,CK=ii,IK=cn,DK=Dt,EK=$K,Od=Array.prototype,MK={DOMTokenList:!0,NodeList:!0},OK=function(e){var s=e.entries;return e===Od||DK(Od,e)&&s===Od.entries||IK(MK,CK(e))?EK:s};(function(e){e.exports=OK})(Iw);var PK=Le(Iw.exports),py=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),NK=new Uint8Array(16);function LK(){if(!py)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return py(NK)}var Dw=[];for(var kl=0;kl<256;++kl)Dw[kl]=(kl+256).toString(16).substr(1);function Ew(e,s){var t=s||0,r=Dw;return[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")}function RK(e){var s=[];return e.replace(/[a-fA-F0-9]{2}/g,function(t){s.push(parseInt(t,16))}),s}function AK(e){e=unescape(encodeURIComponent(e));for(var s=new Array(e.length),t=0;t<e.length;t++)s[t]=e.charCodeAt(t);return s}var FK="6ba7b810-9dad-11d1-80b4-00c04fd430c8",VK="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Mw(e,s,t){var r=function(a,o,l,c){var u=l&&c||0;if(typeof a=="string"&&(a=AK(a)),typeof o=="string"&&(o=RK(o)),!Array.isArray(a))throw TypeError("value must be an array of bytes");if(!Array.isArray(o)||o.length!==16)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var d=t(o.concat(a));if(d[6]=d[6]&15|s,d[8]=d[8]&63|128,l)for(var f=0;f<16;++f)l[u+f]=d[f];return l||Ew(d)};try{r.name=e}catch(n){}return r.DNS=FK,r.URL=VK,r}function zK(e){if(typeof e=="string"){var s=unescape(encodeURIComponent(e));e=new Array(s.length);for(var t=0;t<s.length;t++)e[t]=s.charCodeAt(t)}return jK(YK(GK(e),e.length*8))}function jK(e){var s,t,r=[],n=e.length*32,a="0123456789abcdef",o;for(s=0;s<n;s+=8)t=e[s>>5]>>>s%32&255,o=parseInt(a.charAt(t>>>4&15)+a.charAt(t&15),16),r.push(o);return r}function YK(e,s){e[s>>5]|=128<<s%32,e[(s+64>>>9<<4)+14]=s;var t,r,n,a,o,l=1732584193,c=-271733879,u=-1732584194,d=271733878;for(t=0;t<e.length;t+=16)r=l,n=c,a=u,o=d,l=vn(l,c,u,d,e[t],7,-680876936),d=vn(d,l,c,u,e[t+1],12,-389564586),u=vn(u,d,l,c,e[t+2],17,606105819),c=vn(c,u,d,l,e[t+3],22,-1044525330),l=vn(l,c,u,d,e[t+4],7,-176418897),d=vn(d,l,c,u,e[t+5],12,1200080426),u=vn(u,d,l,c,e[t+6],17,-1473231341),c=vn(c,u,d,l,e[t+7],22,-45705983),l=vn(l,c,u,d,e[t+8],7,1770035416),d=vn(d,l,c,u,e[t+9],12,-1958414417),u=vn(u,d,l,c,e[t+10],17,-42063),c=vn(c,u,d,l,e[t+11],22,-1990404162),l=vn(l,c,u,d,e[t+12],7,1804603682),d=vn(d,l,c,u,e[t+13],12,-40341101),u=vn(u,d,l,c,e[t+14],17,-1502002290),c=vn(c,u,d,l,e[t+15],22,1236535329),l=mn(l,c,u,d,e[t+1],5,-165796510),d=mn(d,l,c,u,e[t+6],9,-1069501632),u=mn(u,d,l,c,e[t+11],14,643717713),c=mn(c,u,d,l,e[t],20,-373897302),l=mn(l,c,u,d,e[t+5],5,-701558691),d=mn(d,l,c,u,e[t+10],9,38016083),u=mn(u,d,l,c,e[t+15],14,-660478335),c=mn(c,u,d,l,e[t+4],20,-405537848),l=mn(l,c,u,d,e[t+9],5,568446438),d=mn(d,l,c,u,e[t+14],9,-1019803690),u=mn(u,d,l,c,e[t+3],14,-187363961),c=mn(c,u,d,l,e[t+8],20,1163531501),l=mn(l,c,u,d,e[t+13],5,-1444681467),d=mn(d,l,c,u,e[t+2],9,-51403784),u=mn(u,d,l,c,e[t+7],14,1735328473),c=mn(c,u,d,l,e[t+12],20,-1926607734),l=gn(l,c,u,d,e[t+5],4,-378558),d=gn(d,l,c,u,e[t+8],11,-2022574463),u=gn(u,d,l,c,e[t+11],16,1839030562),c=gn(c,u,d,l,e[t+14],23,-35309556),l=gn(l,c,u,d,e[t+1],4,-1530992060),d=gn(d,l,c,u,e[t+4],11,1272893353),u=gn(u,d,l,c,e[t+7],16,-155497632),c=gn(c,u,d,l,e[t+10],23,-1094730640),l=gn(l,c,u,d,e[t+13],4,681279174),d=gn(d,l,c,u,e[t],11,-358537222),u=gn(u,d,l,c,e[t+3],16,-722521979),c=gn(c,u,d,l,e[t+6],23,76029189),l=gn(l,c,u,d,e[t+9],4,-640364487),d=gn(d,l,c,u,e[t+12],11,-421815835),u=gn(u,d,l,c,e[t+15],16,530742520),c=gn(c,u,d,l,e[t+2],23,-995338651),l=yn(l,c,u,d,e[t],6,-198630844),d=yn(d,l,c,u,e[t+7],10,1126891415),u=yn(u,d,l,c,e[t+14],15,-1416354905),c=yn(c,u,d,l,e[t+5],21,-57434055),l=yn(l,c,u,d,e[t+12],6,1700485571),d=yn(d,l,c,u,e[t+3],10,-1894986606),u=yn(u,d,l,c,e[t+10],15,-1051523),c=yn(c,u,d,l,e[t+1],21,-2054922799),l=yn(l,c,u,d,e[t+8],6,1873313359),d=yn(d,l,c,u,e[t+15],10,-30611744),u=yn(u,d,l,c,e[t+6],15,-1560198380),c=yn(c,u,d,l,e[t+13],21,1309151649),l=yn(l,c,u,d,e[t+4],6,-145523070),d=yn(d,l,c,u,e[t+11],10,-1120210379),u=yn(u,d,l,c,e[t+2],15,718787259),c=yn(c,u,d,l,e[t+9],21,-343485551),l=Si(l,r),c=Si(c,n),u=Si(u,a),d=Si(d,o);return[l,c,u,d]}function GK(e){var s,t=[];for(t[(e.length>>2)-1]=void 0,s=0;s<t.length;s+=1)t[s]=0;var r=e.length*8;for(s=0;s<r;s+=8)t[s>>5]|=(e[s/8]&255)<<s%32;return t}function Si(e,s){var t=(e&65535)+(s&65535),r=(e>>16)+(s>>16)+(t>>16);return r<<16|t&65535}function UK(e,s){return e<<s|e>>>32-s}function Uc(e,s,t,r,n,a){return Si(UK(Si(Si(s,e),Si(r,a)),n),t)}function vn(e,s,t,r,n,a,o){return Uc(s&t|~s&r,e,s,n,a,o)}function mn(e,s,t,r,n,a,o){return Uc(s&r|t&~r,e,s,n,a,o)}function gn(e,s,t,r,n,a,o){return Uc(s^t^r,e,s,n,a,o)}function yn(e,s,t,r,n,a,o){return Uc(t^(s|~r),e,s,n,a,o)}Mw("v3",48,zK);function ns(e,s,t){var r=s&&t||0;typeof e=="string"&&(s=e==="binary"?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||LK)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,s)for(var a=0;a<16;++a)s[r+a]=n[a];return s||Ew(n)}function HK(e,s,t,r){switch(e){case 0:return s&t^~s&r;case 1:return s^t^r;case 2:return s&t^s&r^t&r;case 3:return s^t^r}}function Pd(e,s){return e<<s|e>>>32-s}function WK(e){var s=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=new Array(r.length);for(var n=0;n<r.length;n++)e[n]=r.charCodeAt(n)}e.push(128);for(var a=e.length/4+2,o=Math.ceil(a/16),l=new Array(o),n=0;n<o;n++){l[n]=new Array(16);for(var c=0;c<16;c++)l[n][c]=e[n*64+c*4]<<24|e[n*64+c*4+1]<<16|e[n*64+c*4+2]<<8|e[n*64+c*4+3]}l[o-1][14]=(e.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(e.length-1)*8&4294967295;for(var n=0;n<o;n++){for(var u=new Array(80),d=0;d<16;d++)u[d]=l[n][d];for(var d=16;d<80;d++)u[d]=Pd(u[d-3]^u[d-8]^u[d-14]^u[d-16],1);for(var f=t[0],p=t[1],v=t[2],g=t[3],w=t[4],d=0;d<80;d++){var _=Math.floor(d/20),S=Pd(f,5)+HK(_,p,v,g)+w+s[_]+u[d]>>>0;w=g,g=v,v=Pd(p,30)>>>0,p=f,f=S}t[0]=t[0]+f>>>0,t[1]=t[1]+p>>>0,t[2]=t[2]+v>>>0,t[3]=t[3]+g>>>0,t[4]=t[4]+w>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}Mw("v5",80,WK);var Ow;function vy(e,s){var t=tn(e);if(na){var r=na(e);s&&(r=Ge(r).call(r,function(n){return ka(e,n).enumerable})),t.push.apply(t,r)}return t}function my(e){for(var s=1;s<arguments.length;s++){var t,r,n=arguments[s]!=null?arguments[s]:{};s%2?Se(t=vy(Object(n),!0)).call(t,function(a){at(e,a,n[a])}):ra?If(e,ra(n)):Se(r=vy(Object(n))).call(r,function(a){Po(e,a,ka(n,a))})}return e}function Pw(e){var s=BK();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function BK(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}function Vn(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=qK(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function qK(e,s){var t;if(!!e){if(typeof e=="string")return gy(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gy(e,s)}}function gy(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}function XK(e){return new QK(e)}var KK=function(){function e(s,t,r){var n,a,o;ot(this,e),at(this,"_source",void 0),at(this,"_transformers",void 0),at(this,"_target",void 0),at(this,"_listeners",{add:ne(n=this._add).call(n,this),remove:ne(a=this._remove).call(a,this),update:ne(o=this._update).call(o,this)}),this._source=s,this._transformers=t,this._target=r}return lt(e,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var r;return Gc(r=this._transformers).call(r,function(n,a){return a(n)},t)}},{key:"_add",value:function(t,r){r!=null&&this._target.add(this._transformItems(this._source.get(r.items)))}},{key:"_update",value:function(t,r){r!=null&&this._target.update(this._transformItems(this._source.get(r.items)))}},{key:"_remove",value:function(t,r){r!=null&&this._target.remove(this._transformItems(r.oldData))}}]),e}(),QK=function(){function e(s){ot(this,e),at(this,"_source",void 0),at(this,"_transformers",[]),this._source=s}return lt(e,[{key:"filter",value:function(t){return this._transformers.push(function(r){return Ge(r).call(r,t)}),this}},{key:"map",value:function(t){return this._transformers.push(function(r){return yt(r).call(r,t)}),this}},{key:"flatMap",value:function(t){return this._transformers.push(function(r){return iq(r).call(r,t)}),this}},{key:"to",value:function(t){return new KK(this._source,this._transformers,t)}}]),e}();function Mh(e){return typeof e=="string"||typeof e=="number"}var JK=function(){function e(s){ot(this,e),at(this,"delay",void 0),at(this,"max",void 0),at(this,"_queue",[]),at(this,"_timeout",null),at(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(s)}return lt(e,[{key:"setOptions",value:function(t){t&&typeof t.delay!="undefined"&&(this.delay=t.delay),t&&typeof t.max!="undefined"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,r=this._extended.methods,n=0;n<r.length;n++){var a=r[n];a.original?t[a.name]=a.original:delete t[a.name]}this._extended=null}}},{key:"replace",value:function(t,r){var n=this,a=t[r];if(!a)throw new Error("Method "+r+" undefined");t[r]=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n.queue({args:l,fn:a,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=wn(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,r;Se(t=Dn(r=this._queue).call(r,0)).call(t,function(n){n.fn.apply(n.context||n.fn,n.args||[])})}}],[{key:"extend",value:function(t,r){var n=new e(r);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var a=[{name:"flush",original:void 0}];if(r&&r.replace)for(var o=0;o<r.replace.length;o++){var l=r.replace[o];a.push({name:l,original:t[l]}),n.replace(t,l)}return n._extended={object:t,methods:a},n}}]),e}(),Nw=function(){function e(){ot(this,e),at(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),at(this,"subscribe",e.prototype.on),at(this,"unsubscribe",e.prototype.off)}return lt(e,[{key:"_trigger",value:function(t,r,n){var a,o;if(t==="*")throw new Error("Cannot trigger event *");Se(a=Pt(o=[]).call(o,zt(this._subscribers[t]),zt(this._subscribers["*"]))).call(a,function(l){l(t,r,n!=null?n:null)})}},{key:"on",value:function(t,r){typeof r=="function"&&this._subscribers[t].push(r)}},{key:"off",value:function(t,r){var n;this._subscribers[t]=Ge(n=this._subscribers[t]).call(n,function(a){return a!==r})}}]),e}();Ow=ts;var yy=function(){function e(s){ot(this,e),at(this,"_pairs",void 0),this._pairs=s}return lt(e,[{key:Ow,value:Fn.mark(function s(){var t,r,n,a,o;return Fn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=Vn(this._pairs),c.prev=1,t.s();case 3:if((r=t.n()).done){c.next=9;break}return n=Cn(r.value,2),a=n[0],o=n[1],c.next=7,[a,o];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),t.e(c.t0);case 14:return c.prev=14,t.f(),c.finish(14);case 17:case"end":return c.stop()}},s,this,[[1,11,14,17]])})},{key:"entries",value:Fn.mark(function s(){var t,r,n,a,o;return Fn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=Vn(this._pairs),c.prev=1,t.s();case 3:if((r=t.n()).done){c.next=9;break}return n=Cn(r.value,2),a=n[0],o=n[1],c.next=7,[a,o];case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),t.e(c.t0);case 14:return c.prev=14,t.f(),c.finish(14);case 17:case"end":return c.stop()}},s,this,[[1,11,14,17]])})},{key:"keys",value:Fn.mark(function s(){var t,r,n,a;return Fn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=Vn(this._pairs),l.prev=1,t.s();case 3:if((r=t.n()).done){l.next=9;break}return n=Cn(r.value,1),a=n[0],l.next=7,a;case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},s,this,[[1,11,14,17]])})},{key:"values",value:Fn.mark(function s(){var t,r,n,a;return Fn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=Vn(this._pairs),l.prev=1,t.s();case 3:if((r=t.n()).done){l.next=9;break}return n=Cn(r.value,2),a=n[1],l.next=7,a;case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},s,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return yt(t=zt(this._pairs)).call(t,function(r){return r[0]})}},{key:"toItemArray",value:function(){var t;return yt(t=zt(this._pairs)).call(t,function(r){return r[1]})}},{key:"toEntryArray",value:function(){return zt(this._pairs)}},{key:"toObjectMap",value:function(){var t=Lo(null),r=Vn(this._pairs),n;try{for(r.s();!(n=r.n()).done;){var a=Cn(n.value,2),o=a[0],l=a[1];t[o]=l}}catch(c){r.e(c)}finally{r.f()}return t}},{key:"toMap",value:function(){return new yw(this._pairs)}},{key:"toIdSet",value:function(){return new Ti(this.toIdArray())}},{key:"toItemSet",value:function(){return new Ti(this.toItemArray())}},{key:"cache",value:function(){return new e(zt(this._pairs))}},{key:"distinct",value:function(t){var r=new Ti,n=Vn(this._pairs),a;try{for(n.s();!(a=n.n()).done;){var o=Cn(a.value,2),l=o[0],c=o[1];r.add(t(c,l))}}catch(u){n.e(u)}finally{n.f()}return r}},{key:"filter",value:function(t){var r=this._pairs;return new e(at({},ts,Fn.mark(function n(){var a,o,l,c,u;return Fn.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=Vn(r),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=10;break}if(l=Cn(o.value,2),c=l[0],u=l[1],!t(u,c)){f.next=8;break}return f.next=8,[c,u];case 8:f.next=3;break;case 10:f.next=15;break;case 12:f.prev=12,f.t0=f.catch(1),a.e(f.t0);case 15:return f.prev=15,a.f(),f.finish(15);case 18:case"end":return f.stop()}},n,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var r=Vn(this._pairs),n;try{for(r.s();!(n=r.n()).done;){var a=Cn(n.value,2),o=a[0],l=a[1];t(l,o)}}catch(c){r.e(c)}finally{r.f()}}},{key:"map",value:function(t){var r=this._pairs;return new e(at({},ts,Fn.mark(function n(){var a,o,l,c,u;return Fn.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=Vn(r),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=9;break}return l=Cn(o.value,2),c=l[0],u=l[1],f.next=7,[c,t(u,c)];case 7:f.next=3;break;case 9:f.next=14;break;case 11:f.prev=11,f.t0=f.catch(1),a.e(f.t0);case 14:return f.prev=14,a.f(),f.finish(14);case 17:case"end":return f.stop()}},n,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var r=Cd(this._pairs),n=r.next();if(n.done)return null;for(var a=n.value[1],o=t(n.value[1],n.value[0]);!(n=r.next()).done;){var l=Cn(n.value,2),c=l[0],u=l[1],d=t(u,c);d>o&&(o=d,a=u)}return a}},{key:"min",value:function(t){var r=Cd(this._pairs),n=r.next();if(n.done)return null;for(var a=n.value[1],o=t(n.value[1],n.value[0]);!(n=r.next()).done;){var l=Cn(n.value,2),c=l[0],u=l[1],d=t(u,c);d<o&&(o=d,a=u)}return a}},{key:"reduce",value:function(t,r){var n=Vn(this._pairs),a;try{for(n.s();!(a=n.n()).done;){var o=Cn(a.value,2),l=o[0],c=o[1];r=t(r,c,l)}}catch(u){n.e(u)}finally{n.f()}return r}},{key:"sort",value:function(t){var r=this;return new e(at({},ts,function(){var n;return Cd(Kt(n=zt(r._pairs)).call(n,function(a,o){var l=Cn(a,2),c=l[0],u=l[1],d=Cn(o,2),f=d[0],p=d[1];return t(u,p,c,f)}))}))}}]),e}();function ZK(e,s){return e[s]==null&&(e[s]=ns()),e}var ei=function(e){Rn(t,e);var s=Pw(t);function t(r,n){var a;return ot(this,t),a=s.call(this),at(Tt(a),"flush",void 0),at(Tt(a),"length",void 0),at(Tt(a),"_options",void 0),at(Tt(a),"_data",void 0),at(Tt(a),"_idProp",void 0),at(Tt(a),"_queue",null),r&&!Qe(r)&&(n=r,r=[]),a._options=n||{},a._data=new yw,a.length=0,a._idProp=a._options.fieldId||"id",r&&r.length&&a.add(r),a.setOptions(n),a}return lt(t,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(n){n&&n.queue!==void 0&&(n.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=JK.extend(this,{replace:["add","update","remove"]})),n.queue&&Ke(n.queue)==="object"&&this._queue.setOptions(n.queue)))}},{key:"add",value:function(n,a){var o=this,l=[],c;if(Qe(n)){var u=yt(n).call(n,function(p){return p[o._idProp]});if(fp(u).call(u,function(p){return o._data.has(p)}))throw new Error("A duplicate id was found in the parameter array.");for(var d=0,f=n.length;d<f;d++)c=this._addItem(n[d]),l.push(c)}else if(n&&Ke(n)==="object")c=this._addItem(n),l.push(c);else throw new Error("Unknown dataType");return l.length&&this._trigger("add",{items:l},a),l}},{key:"update",value:function(n,a){var o=this,l=[],c=[],u=[],d=[],f=this._idProp,p=function(S){var I=S[f];if(I!=null&&o._data.has(I)){var C=S,$=Qr({},o._data.get(I)),O=o._updateItem(C);c.push(O),d.push(C),u.push($)}else{var A=o._addItem(S);l.push(A)}};if(Qe(n))for(var v=0,g=n.length;v<g;v++)n[v]&&Ke(n[v])==="object"?p(n[v]):console.warn("Ignoring input item, which is not an object at index "+v);else if(n&&Ke(n)==="object")p(n);else throw new Error("Unknown dataType");if(l.length&&this._trigger("add",{items:l},a),c.length){var w={items:c,oldData:u,data:d};this._trigger("update",w,a)}return Pt(l).call(l,c)}},{key:"updateOnly",value:function(n,a){var o,l=this;Qe(n)||(n=[n]);var c=yt(o=yt(n).call(n,function(d){var f=l._data.get(d[l._idProp]);if(f==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:f,update:d}})).call(o,function(d){var f=d.oldData,p=d.update,v=f[l._idProp],g=b1(f,p);return l._data.set(v,g),{id:v,oldData:f,updatedData:g}});if(c.length){var u={items:yt(c).call(c,function(d){return d.id}),oldData:yt(c).call(c,function(d){return d.oldData}),data:yt(c).call(c,function(d){return d.updatedData})};return this._trigger("update",u,a),u.items}else return[]}},{key:"get",value:function(n,a){var o=void 0,l=void 0,c=void 0;Mh(n)?(o=n,c=a):Qe(n)?(l=n,c=a):c=n;var u=c&&c.returnType==="Object"?"Object":"Array",d=c&&Ge(c),f=[],p=void 0,v=void 0,g=void 0;if(o!=null)p=this._data.get(o),p&&d&&!d(p)&&(p=void 0);else if(l!=null)for(var w=0,_=l.length;w<_;w++)p=this._data.get(l[w]),p!=null&&(!d||d(p))&&f.push(p);else{var S;v=zt(Hi(S=this._data).call(S));for(var I=0,C=v.length;I<C;I++)g=v[I],p=this._data.get(g),p!=null&&(!d||d(p))&&f.push(p)}if(c&&c.order&&o==null&&this._sort(f,c.order),c&&c.fields){var $=c.fields;if(o!=null&&p!=null)p=this._filterFields(p,$);else for(var O=0,A=f.length;O<A;O++)f[O]=this._filterFields(f[O],$)}if(u=="Object"){for(var z={},N=0,Y=f.length;N<Y;N++){var R=f[N],L=R[this._idProp];z[L]=R}return z}else if(o!=null){var j;return(j=p)!==null&&j!==void 0?j:null}else return f}},{key:"getIds",value:function(n){var a=this._data,o=n&&Ge(n),l=n&&n.order,c=zt(Hi(a).call(a)),u=[];if(o)if(l){for(var d=[],f=0,p=c.length;f<p;f++){var v=c[f],g=this._data.get(v);g!=null&&o(g)&&d.push(g)}this._sort(d,l);for(var w=0,_=d.length;w<_;w++)u.push(d[w][this._idProp])}else for(var S=0,I=c.length;S<I;S++){var C=c[S],$=this._data.get(C);$!=null&&o($)&&u.push($[this._idProp])}else if(l){for(var O=[],A=0,z=c.length;A<z;A++){var N=c[A];O.push(a.get(N))}this._sort(O,l);for(var Y=0,R=O.length;Y<R;Y++)u.push(O[Y][this._idProp])}else for(var L=0,j=c.length;L<j;L++){var B=c[L],G=a.get(B);G!=null&&u.push(G[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(n,a){var o=a&&Ge(a),l=this._data,c=zt(Hi(l).call(l));if(a&&a.order)for(var u=this.get(a),d=0,f=u.length;d<f;d++){var p=u[d],v=p[this._idProp];n(p,v)}else for(var g=0,w=c.length;g<w;g++){var _=c[g],S=this._data.get(_);S!=null&&(!o||o(S))&&n(S,_)}}},{key:"map",value:function(n,a){for(var o=a&&Ge(a),l=[],c=this._data,u=zt(Hi(c).call(c)),d=0,f=u.length;d<f;d++){var p=u[d],v=this._data.get(p);v!=null&&(!o||o(v))&&l.push(n(v,p))}return a&&a.order&&this._sort(l,a.order),l}},{key:"_filterFields",value:function(n,a){var o;return n&&Gc(o=Qe(a)?a:tn(a)).call(o,function(l,c){return l[c]=n[c],l},{})}},{key:"_sort",value:function(n,a){if(typeof a=="string"){var o=a;Kt(n).call(n,function(l,c){var u=l[o],d=c[o];return u>d?1:u<d?-1:0})}else if(typeof a=="function")Kt(n).call(n,a);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(n,a){for(var o=[],l=[],c=Qe(n)?n:[n],u=0,d=c.length;u<d;u++){var f=this._remove(c[u]);if(f){var p=f[this._idProp];p!=null&&(o.push(p),l.push(f))}}return o.length&&this._trigger("remove",{items:o,oldData:l},a),o}},{key:"_remove",value:function(n){var a;if(Mh(n)?a=n:n&&Ke(n)==="object"&&(a=n[this._idProp]),a!=null&&this._data.has(a)){var o=this._data.get(a)||null;return this._data.delete(a),--this.length,o}return null}},{key:"clear",value:function(n){for(var a,o=zt(Hi(a=this._data).call(a)),l=[],c=0,u=o.length;c<u;c++)l.push(this._data.get(o[c]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:l},n),o}},{key:"max",value:function(n){var a,o=null,l=null,c=Vn(fy(a=this._data).call(a)),u;try{for(c.s();!(u=c.n()).done;){var d=u.value,f=d[n];typeof f=="number"&&(l==null||f>l)&&(o=d,l=f)}}catch(p){c.e(p)}finally{c.f()}return o||null}},{key:"min",value:function(n){var a,o=null,l=null,c=Vn(fy(a=this._data).call(a)),u;try{for(c.s();!(u=c.n()).done;){var d=u.value,f=d[n];typeof f=="number"&&(l==null||f<l)&&(o=d,l=f)}}catch(p){c.e(p)}finally{c.f()}return o||null}},{key:"distinct",value:function(n){for(var a=this._data,o=zt(Hi(a).call(a)),l=[],c=0,u=0,d=o.length;u<d;u++){for(var f=o[u],p=a.get(f),v=p[n],g=!1,w=0;w<c;w++)if(l[w]==v){g=!0;break}!g&&v!==void 0&&(l[c]=v,c++)}return l}},{key:"_addItem",value:function(n){var a=ZK(n,this._idProp),o=a[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,a),++this.length,o}},{key:"_updateItem",value:function(n){var a=n[this._idProp];if(a==null)throw new Error("Cannot update item: item has no id (item: "+jn(n)+")");var o=this._data.get(a);if(!o)throw new Error("Cannot update item: no item with id "+a+" found");return this._data.set(a,my(my({},o),n)),a}},{key:"stream",value:function(n){if(n){var a=this._data;return new yy(at({},ts,Fn.mark(function l(){var c,u,d,f;return Fn.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c=Vn(n),v.prev=1,c.s();case 3:if((u=c.n()).done){v.next=11;break}if(d=u.value,f=a.get(d),f==null){v.next=9;break}return v.next=9,[d,f];case 9:v.next=3;break;case 11:v.next=16;break;case 13:v.prev=13,v.t0=v.catch(1),c.e(v.t0);case 16:return v.prev=16,c.f(),v.finish(16);case 19:case"end":return v.stop()}},l,null,[[1,13,16,19]])})))}else{var o;return new yy(at({},ts,ne(o=PK(this._data)).call(o,this._data)))}}}]),t}(Nw),eQ=function(e){Rn(t,e);var s=Pw(t);function t(r,n){var a,o;return ot(this,t),o=s.call(this),at(Tt(o),"length",0),at(Tt(o),"_listener",void 0),at(Tt(o),"_data",void 0),at(Tt(o),"_ids",new Ti),at(Tt(o),"_options",void 0),o._options=n||{},o._listener=ne(a=o._onEvent).call(a,Tt(o)),o.setData(r),o}return lt(t,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(n){if(this._data){this._data.off&&this._data.off("*",this._listener);var a=this._data.getIds({filter:Ge(this._options)}),o=this._data.get(a);this._ids.clear(),this.length=0,this._trigger("remove",{items:a,oldData:o})}if(n!=null){this._data=n;for(var l=this._data.getIds({filter:Ge(this._options)}),c=0,u=l.length;c<u;c++){var d=l[c];this._ids.add(d)}this.length=l.length,this._trigger("add",{items:l})}else this._data=new ei;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var n=this._data.getIds({filter:Ge(this._options)}),a=zt(this._ids),o={},l=[],c=[],u=[],d=0,f=n.length;d<f;d++){var p=n[d];o[p]=!0,this._ids.has(p)||(l.push(p),this._ids.add(p))}for(var v=0,g=a.length;v<g;v++){var w=a[v],_=this._data.get(w);_==null?console.error("If you see this, report it please."):o[w]||(c.push(w),u.push(_),this._ids.delete(w))}this.length+=l.length-c.length,l.length&&this._trigger("add",{items:l}),c.length&&this._trigger("remove",{items:c,oldData:u})}},{key:"get",value:function(n,a){if(this._data==null)return null;var o=null,l;Mh(n)||Qe(n)?(o=n,l=a):l=n;var c=Qr({},this._options,l),u=Ge(this._options),d=l&&Ge(l);return u&&d&&(c.filter=function(f){return u(f)&&d(f)}),o==null?this._data.get(c):this._data.get(o,c)}},{key:"getIds",value:function(n){if(this._data.length){var a=Ge(this._options),o=n!=null?Ge(n):null,l;return o?a?l=function(u){return a(u)&&o(u)}:l=o:l=a,this._data.getIds({filter:l,order:n&&n.order})}else return[]}},{key:"forEach",value:function(n,a){if(this._data){var o,l=Ge(this._options),c=a&&Ge(a),u;c?l?u=function(f){return l(f)&&c(f)}:u=c:u=l,Se(o=this._data).call(o,n,{filter:u,order:a&&a.order})}}},{key:"map",value:function(n,a){if(this._data){var o,l=Ge(this._options),c=a&&Ge(a),u;return c?l?u=function(f){return l(f)&&c(f)}:u=c:u=l,yt(o=this._data).call(o,n,{filter:u,order:a&&a.order})}else return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(n){var a;return this._data.stream(n||at({},ts,ne(a=Hi(this._ids)).call(a,this._ids)))}},{key:"dispose",value:function(){var n;(n=this._data)!==null&&n!==void 0&&n.off&&this._data.off("*",this._listener);var a="This data view has already been disposed of.",o={get:function(){throw new Error(a)},set:function(){throw new Error(a)},configurable:!1},l=Vn(f0(t.prototype)),c;try{for(l.s();!(c=l.n()).done;){var u=c.value;Po(this,u,o)}}catch(d){l.e(d)}finally{l.f()}}},{key:"_onEvent",value:function(n,a,o){if(!(!a||!a.items||!this._data)){var l=a.items,c=[],u=[],d=[],f=[],p=[],v=[];switch(n){case"add":for(var g=0,w=l.length;g<w;g++){var _=l[g],S=this.get(_);S&&(this._ids.add(_),c.push(_))}break;case"update":for(var I=0,C=l.length;I<C;I++){var $=l[I],O=this.get($);O?this._ids.has($)?(u.push($),p.push(a.data[I]),f.push(a.oldData[I])):(this._ids.add($),c.push($)):this._ids.has($)&&(this._ids.delete($),d.push($),v.push(a.oldData[I]))}break;case"remove":for(var A=0,z=l.length;A<z;A++){var N=l[A];this._ids.has(N)&&(this._ids.delete(N),d.push(N),v.push(a.oldData[A]))}break}this.length+=c.length-d.length,c.length&&this._trigger("add",{items:c},o),u.length&&this._trigger("update",{items:u,oldData:f,data:p},o),d.length&&this._trigger("remove",{items:d,oldData:v},o)}}}]),t}(Nw);function tQ(e,s){return Ke(s)==="object"&&s!==null&&e===s.idProp&&typeof s.add=="function"&&typeof s.clear=="function"&&typeof s.distinct=="function"&&typeof Se(s)=="function"&&typeof s.get=="function"&&typeof s.getDataSet=="function"&&typeof s.getIds=="function"&&typeof s.length=="number"&&typeof yt(s)=="function"&&typeof s.max=="function"&&typeof s.min=="function"&&typeof s.off=="function"&&typeof s.on=="function"&&typeof s.remove=="function"&&typeof s.setOptions=="function"&&typeof s.stream=="function"&&typeof s.update=="function"&&typeof s.updateOnly=="function"}function nQ(e,s){return Ke(s)==="object"&&s!==null&&e===s.idProp&&typeof Se(s)=="function"&&typeof s.get=="function"&&typeof s.getDataSet=="function"&&typeof s.getIds=="function"&&typeof s.length=="number"&&typeof yt(s)=="function"&&typeof s.off=="function"&&typeof s.on=="function"&&typeof s.stream=="function"&&tQ(e,s.getDataSet())}var En=typeof window!="undefined"&&window.moment||Sr(),vr=Sr(),Oh={exports:{}},Ht={},_o={exports:{}},Ss={};function Lw(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function rQ(e,s,t){}function iQ(e,s,t){}var sQ=/javascript\s*\:/img;function aQ(e,s){return sQ.test(s)?"":s}Ss.whiteList=Lw();Ss.getDefaultWhiteList=Lw;Ss.onAttr=rQ;Ss.onIgnoreAttr=iQ;Ss.safeAttrValue=aQ;var oQ={indexOf:function(e,s){var t,r;if(Array.prototype.indexOf)return e.indexOf(s);for(t=0,r=e.length;t<r;t++)if(e[t]===s)return t;return-1},forEach:function(e,s,t){var r,n;if(Array.prototype.forEach)return e.forEach(s,t);for(r=0,n=e.length;r<n;r++)s.call(t,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Ga=oQ;function lQ(e,s){e=Ga.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,r=!1,n=0,a=0,o="";function l(){if(!r){var d=Ga.trim(e.slice(n,a)),f=d.indexOf(":");if(f!==-1){var p=Ga.trim(d.slice(0,f)),v=Ga.trim(d.slice(f+1));if(p){var g=s(n,o.length,p,v,d);g&&(o+=g+"; ")}}}n=a+1}for(;a<t;a++){var c=e[a];if(c==="/"&&e[a+1]==="*"){var u=e.indexOf("*/",a+2);if(u===-1)break;a=u+1,n=a+1,r=!1}else c==="("?r=!0:c===")"?r=!1:c===";"?r||l():c===`
`&&l()}return Ga.trim(o)}var cQ=lQ,Sl=Ss,uQ=cQ;function _y(e){return e==null}function dQ(e){var s={};for(var t in e)s[t]=e[t];return s}function Rw(e){e=dQ(e||{}),e.whiteList=e.whiteList||Sl.whiteList,e.onAttr=e.onAttr||Sl.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Sl.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Sl.safeAttrValue,this.options=e}Rw.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var s=this,t=s.options,r=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,o=t.safeAttrValue,l=uQ(e,function(c,u,d,f,p){var v=r[d],g=!1;if(v===!0?g=v:typeof v=="function"?g=v(f):v instanceof RegExp&&(g=v.test(f)),g!==!0&&(g=!1),f=o(d,f),!!f){var w={position:u,sourcePosition:c,source:p,isWhite:g};if(g){var _=n(d,f,w);return _y(_)?d+":"+f:_}else{var _=a(d,f,w);if(!_y(_))return _}}});return l};var hQ=Rw;(function(e,s){var t=Ss,r=hQ;function n(o,l){var c=new r(l);return c.process(o)}s=e.exports=n,s.FilterCSS=r;for(var a in t)s[a]=t[a];typeof window!="undefined"&&(window.filterCSS=e.exports)})(_o,_o.exports);var pp={indexOf:function(e,s){var t,r;if(Array.prototype.indexOf)return e.indexOf(s);for(t=0,r=e.length;t<r;t++)if(e[t]===s)return t;return-1},forEach:function(e,s,t){var r,n;if(Array.prototype.forEach)return e.forEach(s,t);for(r=0,n=e.length;r<n;r++)s.call(t,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var s=/\s|\n|\t/,t=s.exec(e);return t?t.index:-1}},fQ=_o.exports.FilterCSS,pQ=_o.exports.getDefaultWhiteList,ec=pp;function Aw(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Fw=new fQ;function vQ(e,s,t){}function mQ(e,s,t){}function gQ(e,s,t){}function yQ(e,s,t){}function Vw(e){return e.replace(bQ,"&lt;").replace(wQ,"&gt;")}function _Q(e,s,t,r){if(t=Hw(t),s==="href"||s==="src"){if(t=ec.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(s==="background"){if(xl.lastIndex=0,xl.test(t))return""}else if(s==="style"){if(by.lastIndex=0,by.test(t)||(wy.lastIndex=0,wy.test(t)&&(xl.lastIndex=0,xl.test(t))))return"";r!==!1&&(r=r||Fw,t=r.process(t))}return t=Ww(t),t}var bQ=/</g,wQ=/>/g,kQ=/"/g,SQ=/&quot;/g,xQ=/&#([a-zA-Z0-9]*);?/gim,TQ=/&colon;?/gim,$Q=/&newline;?/gim,xl=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,by=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,wy=/u\s*r\s*l\s*\(.*/gi;function zw(e){return e.replace(kQ,"&quot;")}function jw(e){return e.replace(SQ,'"')}function Yw(e){return e.replace(xQ,function(t,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Gw(e){return e.replace(TQ,":").replace($Q," ")}function Uw(e){for(var s="",t=0,r=e.length;t<r;t++)s+=e.charCodeAt(t)<32?" ":e.charAt(t);return ec.trim(s)}function Hw(e){return e=jw(e),e=Yw(e),e=Gw(e),e=Uw(e),e}function Ww(e){return e=zw(e),e=Vw(e),e}function CQ(){return""}function IQ(e,s){typeof s!="function"&&(s=function(){});var t=!Array.isArray(e);function r(o){return t?!0:ec.indexOf(e,o)!==-1}var n=[],a=!1;return{onIgnoreTag:function(o,l,c){if(r(o))if(c.isClosing){var u="[/removed]",d=c.position+u.length;return n.push([a!==!1?a:c.position,d]),a=!1,u}else return a||(a=c.position),"[removed]";else return s(o,l,c)},remove:function(o){var l="",c=0;return ec.forEach(n,function(u){l+=o.slice(c,u[0]),c=u[1]}),l+=o.slice(c),l}}}function DQ(e){for(var s="",t=0;t<e.length;){var r=e.indexOf("<!--",t);if(r===-1){s+=e.slice(t);break}s+=e.slice(t,r);var n=e.indexOf("-->",r);if(n===-1)break;t=n+3}return s}function EQ(e){var s=e.split("");return s=s.filter(function(t){var r=t.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),s.join("")}Ht.whiteList=Aw();Ht.getDefaultWhiteList=Aw;Ht.onTag=vQ;Ht.onIgnoreTag=mQ;Ht.onTagAttr=gQ;Ht.onIgnoreTagAttr=yQ;Ht.safeAttrValue=_Q;Ht.escapeHtml=Vw;Ht.escapeQuote=zw;Ht.unescapeQuote=jw;Ht.escapeHtmlEntities=Yw;Ht.escapeDangerHtml5Entities=Gw;Ht.clearNonPrintableCharacter=Uw;Ht.friendlyAttrValue=Hw;Ht.escapeAttrValue=Ww;Ht.onIgnoreTagStripAll=CQ;Ht.StripTagBody=IQ;Ht.stripCommentTag=DQ;Ht.stripBlankChar=EQ;Ht.cssFilter=Fw;Ht.getDefaultCSSWhiteList=pQ;var Hc={},mi=pp;function MQ(e){var s=mi.spaceIndex(e),t;return s===-1?t=e.slice(1,-1):t=e.slice(1,s+1),t=mi.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function OQ(e){return e.slice(0,2)==="</"}function PQ(e,s,t){var r="",n=0,a=!1,o=!1,l=0,c=e.length,u="",d="";e:for(l=0;l<c;l++){var f=e.charAt(l);if(a===!1){if(f==="<"){a=l;continue}}else if(o===!1){if(f==="<"){r+=t(e.slice(n,l)),a=l,n=l;continue}if(f===">"){r+=t(e.slice(n,a)),d=e.slice(a,l+1),u=MQ(d),r+=s(a,r.length,u,d,OQ(d)),n=l+1,a=!1;continue}if(f==='"'||f==="'")for(var p=1,v=e.charAt(l-p);v.trim()===""||v==="=";){if(v==="="){o=f;continue e}v=e.charAt(l-++p)}}else if(f===o){o=!1;continue}}return n<e.length&&(r+=t(e.substr(n))),r}var NQ=/[^a-zA-Z0-9\\_:.-]/gim;function LQ(e,s){var t=0,r=0,n=[],a=!1,o=e.length;function l(p,v){if(p=mi.trim(p),p=p.replace(NQ,"").toLowerCase(),!(p.length<1)){var g=s(p,v||"");g&&n.push(g)}}for(var c=0;c<o;c++){var u=e.charAt(c),d,f;if(a===!1&&u==="="){a=e.slice(t,c),t=c+1,r=e.charAt(t)==='"'||e.charAt(t)==="'"?t:AQ(e,c+1);continue}if(a!==!1&&c===r){if(f=e.indexOf(u,c+1),f===-1)break;d=mi.trim(e.slice(r+1,f)),l(a,d),a=!1,c=f,t=c+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(f=RQ(e,c),f===-1){d=mi.trim(e.slice(t,c)),l(d),a=!1,t=c+1;continue}else{c=f-1;continue}else if(f=FQ(e,c-1),f===-1){d=mi.trim(e.slice(t,c)),d=ky(d),l(a,d),a=!1,t=c+1;continue}else continue}return t<e.length&&(a===!1?l(e.slice(t)):l(a,ky(mi.trim(e.slice(t))))),mi.trim(n.join(" "))}function RQ(e,s){for(;s<e.length;s++){var t=e[s];if(t!==" ")return t==="="?s:-1}}function AQ(e,s){for(;s<e.length;s++){var t=e[s];if(t!==" ")return t==="'"||t==='"'?s:-1}}function FQ(e,s){for(;s>0;s--){var t=e[s];if(t!==" ")return t==="="?s:-1}}function VQ(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function ky(e){return VQ(e)?e.substr(1,e.length-2):e}Hc.parseTag=PQ;Hc.parseAttr=LQ;var zQ=_o.exports.FilterCSS,gr=Ht,Bw=Hc,jQ=Bw.parseTag,YQ=Bw.parseAttr,Al=pp;function Tl(e){return e==null}function GQ(e){var s=Al.spaceIndex(e);if(s===-1)return{html:"",closing:e[e.length-2]==="/"};e=Al.trim(e.slice(s+1,-1));var t=e[e.length-1]==="/";return t&&(e=Al.trim(e.slice(0,-1))),{html:e,closing:t}}function UQ(e){var s={};for(var t in e)s[t]=e[t];return s}function HQ(e){var s={};for(var t in e)Array.isArray(e[t])?s[t.toLowerCase()]=e[t].map(function(r){return r.toLowerCase()}):s[t.toLowerCase()]=e[t];return s}function qw(e){e=UQ(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=gr.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=HQ(e.whiteList||e.allowList):e.whiteList=gr.whiteList,e.onTag=e.onTag||gr.onTag,e.onTagAttr=e.onTagAttr||gr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||gr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||gr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||gr.safeAttrValue,e.escapeHtml=e.escapeHtml||gr.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new zQ(e.css))}qw.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var s=this,t=s.options,r=t.whiteList,n=t.onTag,a=t.onIgnoreTag,o=t.onTagAttr,l=t.onIgnoreTagAttr,c=t.safeAttrValue,u=t.escapeHtml,d=s.cssFilter;t.stripBlankChar&&(e=gr.stripBlankChar(e)),t.allowCommentTag||(e=gr.stripCommentTag(e));var f=!1;t.stripIgnoreTagBody&&(f=gr.StripTagBody(t.stripIgnoreTagBody,a),a=f.onIgnoreTag);var p=jQ(e,function(v,g,w,_,S){var I={sourcePosition:v,position:g,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(r,w)},C=n(w,_,I);if(!Tl(C))return C;if(I.isWhite){if(I.isClosing)return"</"+w+">";var $=GQ(_),O=r[w],A=YQ($.html,function(z,N){var Y=Al.indexOf(O,z)!==-1,R=o(w,z,N,Y);return Tl(R)?Y?(N=c(w,z,N,d),N?z+'="'+N+'"':z):(R=l(w,z,N,Y),Tl(R)?void 0:R):R});return _="<"+w,A&&(_+=" "+A),$.closing&&(_+=" /"),_+=">",_}else return C=a(w,_,I),Tl(C)?u(_):C},u);return f&&(p=f.remove(p)),p};var WQ=qw;(function(e,s){var t=Ht,r=Hc,n=WQ;function a(l,c){var u=new n(c);return u.process(l)}s=e.exports=a,s.filterXSS=a,s.FilterXSS=n,function(){for(var l in t)s[l]=t[l];for(var c in r)s[c]=r[c]}(),typeof window!="undefined"&&(window.filterXSS=e.exports);function o(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Oh,Oh.exports);var BQ=Oh.exports;function Sy(e,s){var t=tn(e);if(na){var r=na(e);s&&(r=Ge(r).call(r,function(n){return ka(e,n).enumerable})),t.push.apply(t,r)}return t}function xy(e){for(var s=1;s<arguments.length;s++){var t,r,n=arguments[s]!=null?arguments[s]:{};s%2?Se(t=Sy(Object(n),!0)).call(t,function(a){at(e,a,n[a])}):ra?If(e,ra(n)):Se(r=Sy(Object(n))).call(r,function(a){Po(e,a,ka(n,a))})}return e}function ti(e){var s;if(!e)return!1;var t=(s=e.idProp)!==null&&s!==void 0?s:e._idProp;return t?nQ(t,e):!1}var Nd=/^\/?Date\((-?\d+)/i,qQ=/^\d+$/;function vp(e,s){var t;if(e!==void 0){if(e===null)return null;if(!s)return e;if(typeof s!="string"&&!(s instanceof String))throw new Error("Type must be a string");switch(s){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return Jn(e)&&!isNaN(Date.parse(e))?vr(e).valueOf():Number(e.valueOf());case"string":case"String":return String(e);case"Date":try{return vp(e,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+Ha(e)+" to type "+s):n}case"Moment":if(Za(e))return vr(e);if(e instanceof Date)return vr(e.valueOf());if(vr.isMoment(e))return vr(e);if(Jn(e))return t=Nd.exec(e),t?vr(Number(t[1])):(t=qQ.exec(e),vr(t?Number(e):e));throw new TypeError("Cannot convert object of type "+Ha(e)+" to type "+s);case"ISODate":if(Za(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(vr.isMoment(e))return e.toDate().toISOString();if(Jn(e))return t=Nd.exec(e),t?new Date(Number(t[1])).toISOString():vr(e).format();throw new Error("Cannot convert object of type "+Ha(e)+" to type ISODate");case"ASPDate":if(Za(e))return"/Date("+e+")/";if(e instanceof Date||vr.isMoment(e))return"/Date("+e.valueOf()+")/";if(Jn(e)){t=Nd.exec(e);var r;return t?r=new Date(Number(t[1])).valueOf():r=new Date(e).valueOf(),"/Date("+r+")/"}else throw new Error("Cannot convert object of type "+Ha(e)+" to type ASPDate");default:throw new Error("Unknown type ".concat(s))}}}function ca(e){var s,t,r,n,a,o,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"},c=e._idProp,u=new ei({fieldId:c}),d=yt(s=XK(e)).call(s,function(f){var p;return Gc(p=tn(f)).call(p,function(v,g){return v[g]=vp(f[g],l[g]),v},{})}).to(u);return d.all().start(),{add:function(){var p;return(p=e.getDataSet()).add.apply(p,arguments)},remove:function(){var p;return(p=e.getDataSet()).remove.apply(p,arguments)},update:function(){var p;return(p=e.getDataSet()).update.apply(p,arguments)},updateOnly:function(){var p;return(p=e.getDataSet()).updateOnly.apply(p,arguments)},clear:function(){var p;return(p=e.getDataSet()).clear.apply(p,arguments)},forEach:ne(t=Se(u)).call(t,u),get:ne(r=u.get).call(r,u),getIds:ne(n=u.getIds).call(n,u),off:ne(a=u.off).call(a,u),on:ne(o=u.on).call(o,u),get length(){return u.length},idProp:c,type:l,rawDS:e,coercedDS:u,dispose:function(){return d.stop()}}}var Xw=function(s){var t=new BQ.FilterXSS(s);return function(r){return t.process(r)}},XQ=function(s){return s},Ph=Xw(),KQ=function(s){!s||(s.disabled===!0?(Ph=XQ,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):s.filterOptions&&(Ph=Xw(s.filterOptions)))},V=xy(xy({},HH),{},{convert:vp,setupXSSProtection:KQ});Po(V,"xss",{get:function(){return Ph}});var Kw={exports:{}},Qw=ze,QQ=ft,JQ=pt,ZQ=Nr,eJ=Pf.trim,tJ=Lc,nJ=JQ("".charAt),tc=Qw.parseFloat,Ty=Qw.Symbol,$y=Ty&&Ty.iterator,rJ=1/tc(tJ+"-0")!==-1/0||$y&&!QQ(function(){tc(Object($y))}),iJ=rJ?function(s){var t=eJ(ZQ(s)),r=tc(t);return r===0&&nJ(t,0)=="-"?-0:r}:tc,sJ=qe,Cy=iJ;sJ({global:!0,forced:parseFloat!=Cy},{parseFloat:Cy});var aJ=bt,oJ=aJ.parseFloat,lJ=oJ,cJ=lJ;(function(e){e.exports=cJ})(Kw);var nc=Le(Kw.exports),Ri=function(){function e(s,t){ot(this,e),this.options=null,this.props=null}return lt(e,[{key:"setOptions",value:function(t){t&&V.extend(this.options,t)}},{key:"redraw",value:function(){return!1}},{key:"destroy",value:function(){}},{key:"_isResized",value:function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t}}]),e}(),Jw={exports:{}},uJ=ze,dJ=ko,hJ=Nr,fJ=va,pJ=uJ.RangeError,vJ=function(s){var t=hJ(fJ(this)),r="",n=dJ(s);if(n<0||n==1/0)throw pJ("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))n&1&&(r+=t);return r},mJ=qe,gJ=vJ;mJ({target:"String",proto:!0},{repeat:gJ});var yJ=Gt,_J=yJ("String").repeat,bJ=Dt,wJ=_J,Ld=String.prototype,kJ=function(e){var s=e.repeat;return typeof e=="string"||e===Ld||bJ(Ld,e)&&s===Ld.repeat?wJ:s},SJ=kJ,xJ=SJ;(function(e){e.exports=xJ})(Jw);var Gs=Le(Jw.exports);function mp(e,s,t){if(t&&!Qe(t))return mp(e,s,[t]);if(s.hiddenDates=[],t&&Qe(t)==!0){for(var r,n=0;n<t.length;n++)if(Gs(t[n])===void 0){var a={};a.start=e(t[n].start).toDate().valueOf(),a.end=e(t[n].end).toDate().valueOf(),s.hiddenDates.push(a)}Kt(r=s.hiddenDates).call(r,function(o,l){return o.start-l.start})}}function rc(e,s,t){if(t&&!Qe(t))return rc(e,s,[t]);if(t&&s.domProps.centerContainer.width!==void 0){mp(e,s,t);for(var r=e(s.range.start),n=e(s.range.end),a=s.range.end-s.range.start,o=a/s.domProps.centerContainer.width,l=0;l<t.length;l++)if(Gs(t[l])!==void 0){var c=e(t[l].start),u=e(t[l].end);if(c._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(t[l].start));if(u._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(t[l].end));var d=u-c;if(d>=4*o){var f=0,p=n.clone();switch(Gs(t[l])){case"daily":c.day()!=u.day()&&(f=1),c.dayOfYear(r.dayOfYear()),c.year(r.year()),c.subtract(7,"days"),u.dayOfYear(r.dayOfYear()),u.year(r.year()),u.subtract(7-f,"days"),p.add(1,"weeks");break;case"weekly":{var v=u.diff(c,"days"),g=c.day();c.date(r.date()),c.month(r.month()),c.year(r.year()),u=c.clone(),c.day(g),u.day(g),u.add(v,"days"),c.subtract(1,"weeks"),u.subtract(1,"weeks"),p.add(1,"weeks");break}case"monthly":c.month()!=u.month()&&(f=1),c.month(r.month()),c.year(r.year()),c.subtract(1,"months"),u.month(r.month()),u.year(r.year()),u.subtract(1,"months"),u.add(f,"months"),p.add(1,"months");break;case"yearly":c.year()!=u.year()&&(f=1),c.year(r.year()),c.subtract(1,"years"),u.year(r.year()),u.subtract(1,"years"),u.add(f,"years"),p.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Gs(t[l]));return}for(;c<p;)switch(s.hiddenDates.push({start:c.valueOf(),end:u.valueOf()}),Gs(t[l])){case"daily":c.add(1,"days"),u.add(1,"days");break;case"weekly":c.add(1,"weeks"),u.add(1,"weeks");break;case"monthly":c.add(1,"months"),u.add(1,"months");break;case"yearly":c.add(1,"y"),u.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Gs(t[l]));return}s.hiddenDates.push({start:c.valueOf(),end:u.valueOf()})}}TJ(s);var w=sc(s.range.start,s.hiddenDates),_=sc(s.range.end,s.hiddenDates),S=s.range.start,I=s.range.end;w.hidden==!0&&(S=s.range.startToFront==!0?w.startDate-1:w.endDate+1),_.hidden==!0&&(I=s.range.endToFront==!0?_.startDate-1:_.endDate+1),(w.hidden==!0||_.hidden==!0)&&s.range._applyRange(S,I)}}function TJ(e){for(var s,t=e.hiddenDates,r=[],n=0;n<t.length;n++)for(var a=0;a<t.length;a++)n!=a&&t[a].remove!=!0&&t[n].remove!=!0&&(t[a].start>=t[n].start&&t[a].end<=t[n].end?t[a].remove=!0:t[a].start>=t[n].start&&t[a].start<=t[n].end?(t[n].end=t[a].end,t[a].remove=!0):t[a].end>=t[n].start&&t[a].end<=t[n].end&&(t[n].start=t[a].start,t[a].remove=!0));for(n=0;n<t.length;n++)t[n].remove!==!0&&r.push(t[n]);e.hiddenDates=r,Kt(s=e.hiddenDates).call(s,function(o,l){return o.start-l.start})}function $J(e,s,t){for(var r=!1,n=s.current.valueOf(),a=0;a<s.hiddenDates.length;a++){var o=s.hiddenDates[a].start,l=s.hiddenDates[a].end;if(n>=o&&n<l){r=!0;break}}if(r==!0&&n<s._end.valueOf()&&n!=t){var c=e(t),u=e(l);c.year()!=u.year()?s.switchedYear=!0:c.month()!=u.month()?s.switchedMonth=!0:c.dayOfYear()!=u.dayOfYear()&&(s.switchedDay=!0),s.current=u}}function Iy(e,s,t){var r;if(e.body.hiddenDates.length==0)return r=e.range.conversion(t),(s.valueOf()-r.offset)*r.scale;var n=sc(s,e.body.hiddenDates);n.hidden==!0&&(s=n.startDate);var a=ro(e.body.hiddenDates,e.range.start,e.range.end);if(s<e.range.start){r=e.range.conversion(t,a);var o=CJ(e.body.hiddenDates,s,r.offset);return s=e.options.moment(s).toDate().valueOf(),s=s+o,-(r.offset-s.valueOf())*r.scale}else if(s>e.range.end){var l={start:e.range.start,end:s};return s=Ey(e.options.moment,e.body.hiddenDates,l,s),r=e.range.conversion(t,a),(s.valueOf()-r.offset)*r.scale}else return s=Ey(e.options.moment,e.body.hiddenDates,e.range,s),r=e.range.conversion(t,a),(s.valueOf()-r.offset)*r.scale}function Dy(e,s,t){if(e.body.hiddenDates.length==0){var r=e.range.conversion(t);return new Date(s/r.scale+r.offset)}else{var n=ro(e.body.hiddenDates,e.range.start,e.range.end),a=e.range.end-e.range.start-n,o=a*s/t,l=IJ(e.body.hiddenDates,e.range,o);return new Date(l+o+e.range.start)}}function ro(e,s,t){for(var r=0,n=0;n<e.length;n++){var a=e[n].start,o=e[n].end;a>=s&&o<t&&(r+=o-a)}return r}function CJ(e,s,t){for(var r=0,n=0;n<e.length;n++){var a=e[n].start,o=e[n].end;a>=s&&o<=t&&(r+=o-a)}return r}function Ey(e,s,t,r){return r=e(r).toDate().valueOf(),r-=ic(e,s,t,r),r}function ic(e,s,t,r){var n=0;r=e(r).toDate().valueOf();for(var a=0;a<s.length;a++){var o=s[a].start,l=s[a].end;o>=t.start&&l<t.end&&r>=l&&(n+=l-o)}return n}function IJ(e,s,t){for(var r=0,n=0,a=s.start,o=0;o<e.length;o++){var l=e[o].start,c=e[o].end;if(l>=s.start&&c<s.end){if(n+=l-a,a=c,n>=t)break;r+=c-l}}return r}function Wi(e,s,t,r){var n=sc(s,e);return n.hidden==!0?t<0?r==!0?n.startDate-(n.endDate-s)-1:n.startDate-1:r==!0?n.endDate+(s-n.startDate)+1:n.endDate+1:s}function sc(e,s){for(var t=0;t<s.length;t++){var r=s[t].start,n=s[t].end;if(e>=r&&e<n)return{hidden:!0,startDate:r,endDate:n}}return{hidden:!1,startDate:r,endDate:n}}function DJ(e){var s=EJ();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function EJ(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var Zw=function(e){Rn(t,e);var s=DJ(t);function t(r,n){var a,o,l,c,u,d,f,p;ot(this,t),p=s.call(this);var v=En().hours(0).minutes(0).seconds(0).milliseconds(0),g=v.clone().add(-3,"days").valueOf(),w=v.clone().add(3,"days").valueOf();return p.millisecondsPerPixelCache=void 0,n===void 0?(p.start=g,p.end=w):(p.start=n.start||g,p.end=n.end||w),p.rolling=!1,p.body=r,p.deltaDifference=0,p.scaleOffset=0,p.startToFront=!1,p.endToFront=!0,p.defaultOptions={rtl:!1,start:null,end:null,moment:En,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},p.options=V.extend({},p.defaultOptions),p.props={touch:{}},p.animationTimer=null,p.body.emitter.on("panstart",ne(a=p._onDragStart).call(a,Tt(p))),p.body.emitter.on("panmove",ne(o=p._onDrag).call(o,Tt(p))),p.body.emitter.on("panend",ne(l=p._onDragEnd).call(l,Tt(p))),p.body.emitter.on("mousewheel",ne(c=p._onMouseWheel).call(c,Tt(p))),p.body.emitter.on("touch",ne(u=p._onTouch).call(u,Tt(p))),p.body.emitter.on("pinch",ne(d=p._onPinch).call(d,Tt(p))),p.body.dom.rollingModeBtn.addEventListener("click",ne(f=p.startRolling).call(f,Tt(p))),p.setOptions(n),p}return lt(t,[{key:"setOptions",value:function(n){if(n){var a=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];V.selectiveExtend(a,this.options,n),n.rollingMode&&n.rollingMode.follow&&this.startRolling(),("start"in n||"end"in n)&&this.setRange(n.start,n.end)}}},{key:"startRolling",value:function(){var n=this;function a(){n.stopRolling(),n.rolling=!0;var o=n.end-n.start,l=V.convert(new Date,"Date").valueOf(),c=n.options.rollingMode&&n.options.rollingMode.offset||.5,u=l-o*c,d=l+o*(1-c),f={animation:!1};n.setRange(u,d,f);var p=n.conversion(n.body.domProps.center.width).scale;o=1/p/10,o<30&&(o=30),o>1e3&&(o=1e3),n.body.dom.rollingModeBtn.style.visibility="hidden",n.currentTimeTimer=wn(a,o)}a()}},{key:"stopRolling",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}},{key:"setRange",value:function(n,a,o,l,c){o||(o={}),o.byUser!==!0&&(o.byUser=!1);var u=this,d=n!=null?V.convert(n,"Date").valueOf():null,f=a!=null?V.convert(a,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,o.animation){var p=this.start,v=this.end,g=Ke(o.animation)==="object"&&"duration"in o.animation?o.animation.duration:500,w=Ke(o.animation)==="object"&&"easingFunction"in o.animation?o.animation.easingFunction:"easeInOutQuad",_=V.easingFunctions[w];if(!_){var S;throw new Error(Pt(S="Unknown easing function ".concat(jn(w),". Choose from: ")).call(S,tn(V.easingFunctions).join(", ")))}var I=Kn(),C=!1,$=function z(){if(!u.props.touch.dragging){var N=Kn(),Y=N-I,R=_(Y/g),L=Y>g,j=L||d===null?d:p+(d-p)*R,B=L||f===null?f:v+(f-v)*R;O=u._applyRange(j,B),rc(u.options.moment,u.body,u.options.hiddenDates),C=C||O;var G={start:new Date(u.start),end:new Date(u.end),byUser:o.byUser,event:o.event};if(c&&c(R,O,L),O&&u.body.emitter.emit("rangechange",G),L){if(C&&(u.body.emitter.emit("rangechanged",G),l))return l()}else u.animationTimer=wn(z,20)}};return $()}else{var O=this._applyRange(d,f);if(rc(this.options.moment,this.body,this.options.hiddenDates),O){var A={start:new Date(this.start),end:new Date(this.end),byUser:o.byUser,event:o.event};if(this.body.emitter.emit("rangechange",A),clearTimeout(u.timeoutID),u.timeoutID=wn(function(){u.body.emitter.emit("rangechanged",A)},200),l)return l()}}}},{key:"getMillisecondsPerPixel",value:function(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}},{key:"_cancelAnimation",value:function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}},{key:"_applyRange",value:function(n,a){var o=n!=null?V.convert(n,"Date").valueOf():this.start,l=a!=null?V.convert(a,"Date").valueOf():this.end,c=this.options.max!=null?V.convert(this.options.max,"Date").valueOf():null,u=this.options.min!=null?V.convert(this.options.min,"Date").valueOf():null,d;if(isNaN(o)||o===null)throw new Error('Invalid start "'.concat(n,'"'));if(isNaN(l)||l===null)throw new Error('Invalid end "'.concat(a,'"'));if(l<o&&(l=o),u!==null&&o<u&&(d=u-o,o+=d,l+=d,c!=null&&l>c&&(l=c)),c!==null&&l>c&&(d=l-c,o-=d,l-=d,u!=null&&o<u&&(o=u)),this.options.zoomMin!==null){var f=nc(this.options.zoomMin);if(f<0&&(f=0),l-o<f){var p=.5;this.end-this.start===f&&o>=this.start-p&&l<=this.end?(o=this.start,l=this.end):(d=f-(l-o),o-=d/2,l+=d/2)}}if(this.options.zoomMax!==null){var v=nc(this.options.zoomMax);v<0&&(v=0),l-o>v&&(this.end-this.start===v&&o<this.start&&l>this.end?(o=this.start,l=this.end):(d=l-o-v,o+=d/2,l-=d/2))}var g=this.start!=o||this.end!=l;return!(o>=this.start&&o<=this.end||l>=this.start&&l<=this.end)&&!(this.start>=o&&this.start<=l||this.end>=o&&this.end<=l)&&this.body.emitter.emit("checkRangedItems"),this.start=o,this.end=l,g}},{key:"getRange",value:function(){return{start:this.start,end:this.end}}},{key:"conversion",value:function(n,a){return t.conversion(this.start,this.end,n,a)}},{key:"_onDragStart",value:function(n){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&(!this._isInsideRange(n)||!this.props.touch.allowDragging||(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move")))}},{key:"_onDrag",value:function(n){if(!!n&&!!this.props.touch.dragging&&!!this.options.moveable&&!!this.props.touch.allowDragging){var a=this.options.direction;My(a);var o=a=="horizontal"?n.deltaX:n.deltaY;o-=this.deltaDifference;var l=this.props.touch.end-this.props.touch.start,c=ro(this.body.hiddenDates,this.start,this.end);l-=c;var u=a=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height,d;this.options.rtl?d=o/u*l:d=-o/u*l;var f=this.props.touch.start+d,p=this.props.touch.end+d,v=Wi(this.body.hiddenDates,f,this.previousDelta-o,!0),g=Wi(this.body.hiddenDates,p,this.previousDelta-o,!0);if(v!=f||g!=p){this.deltaDifference+=o,this.props.touch.start=v,this.props.touch.end=g,this._onDrag(n);return}this.previousDelta=o,this._applyRange(f,p);var w=new Date(this.start),_=new Date(this.end);this.body.emitter.emit("rangechange",{start:w,end:_,byUser:!0,event:n}),this.body.emitter.emit("panmove")}}},{key:"_onDragEnd",value:function(n){!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging||(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:n}))}},{key:"_onMouseWheel",value:function(n){var a=0;if(n.wheelDelta?a=n.wheelDelta/120:n.detail?a=-n.detail/3:n.deltaY&&(a=-n.deltaY/3),!(this.options.zoomKey&&!n[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&!!(this.options.zoomable&&this.options.moveable)&&!!this._isInsideRange(n)&&a){var o=this.options.zoomFriction||5,l;a<0?l=1-a/o:l=1/(1+a/o);var c;if(this.rolling){var u=this.options.rollingMode&&this.options.rollingMode.offset||.5;c=this.start+(this.end-this.start)*u}else{var d=this.getPointer({x:n.clientX,y:n.clientY},this.body.dom.center);c=this._pointerToDate(d)}this.zoom(l,c,a,n),n.preventDefault()}}},{key:"_onTouch",value:function(n){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,V.preventDefault(n)}},{key:"_onPinch",value:function(n){if(!!(this.options.zoomable&&this.options.moveable)){V.preventDefault(n),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(n.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();var a=1/(n.scale+this.scaleOffset),o=this.props.touch.centerDate,l=ro(this.body.hiddenDates,this.start,this.end),c=ic(this.options.moment,this.body.hiddenDates,this,o),u=l-c,d=o-c+(this.props.touch.start-(o-c))*a,f=o+u+(this.props.touch.end-(o+u))*a;this.startToFront=1-a<=0,this.endToFront=a-1<=0;var p=Wi(this.body.hiddenDates,d,1-a,!0),v=Wi(this.body.hiddenDates,f,a-1,!0);(p!=d||v!=f)&&(this.props.touch.start=p,this.props.touch.end=v,this.scaleOffset=1-n.scale,d=p,f=v);var g={animation:!1,byUser:!0,event:n};this.setRange(d,f,g),this.startToFront=!1,this.endToFront=!0}}},{key:"_isInsideRange",value:function(n){var a=n.center?n.center.x:n.clientX,o=this.body.dom.centerContainer.getBoundingClientRect(),l=this.options.rtl?a-o.left:o.right-a,c=this.body.util.toTime(l);return c>=this.start&&c<=this.end}},{key:"_pointerToDate",value:function(n){var a,o=this.options.direction;if(My(o),o=="horizontal")return this.body.util.toTime(n.x).valueOf();var l=this.body.domProps.center.height;return a=this.conversion(l),n.y/a.scale+a.offset}},{key:"getPointer",value:function(n,a){var o=a.getBoundingClientRect();return this.options.rtl?{x:o.right-n.x,y:n.y-o.top}:{x:n.x-o.left,y:n.y-o.top}}},{key:"zoom",value:function(n,a,o,l){a==null&&(a=(this.start+this.end)/2);var c=ro(this.body.hiddenDates,this.start,this.end),u=ic(this.options.moment,this.body.hiddenDates,this,a),d=c-u,f=a-u+(this.start-(a-u))*n,p=a+d+(this.end-(a+d))*n;this.startToFront=!(o>0),this.endToFront=!(-o>0);var v=Wi(this.body.hiddenDates,f,o,!0),g=Wi(this.body.hiddenDates,p,-o,!0);(v!=f||g!=p)&&(f=v,p=g);var w={animation:!1,byUser:!0,event:l};this.setRange(f,p,w),this.startToFront=!1,this.endToFront=!0}},{key:"move",value:function(n){var a=this.end-this.start,o=this.start+a*n,l=this.end+a*n;this.start=o,this.end=l}},{key:"moveTo",value:function(n){var a=(this.start+this.end)/2,o=a-n,l=this.start-o,c=this.end-o,u={animation:!1,byUser:!0,event:null};this.setRange(l,c,u)}}],[{key:"conversion",value:function(n,a,o,l){return l===void 0&&(l=0),o!=0&&a-n!=0?{offset:n,scale:o/(a-n-l)}:{offset:0,scale:1}}}]),t}(Ri);function My(e){if(e!="horizontal"&&e!="vertical")throw new TypeError('Unknown direction "'.concat(e,'". Choose "horizontal" or "vertical".'))}var ek={exports:{}},MJ=bt,OJ=MJ.setInterval;(function(e){e.exports=OJ})(ek);var PJ=Le(ek.exports),$l=null;function Nh(e,s){var t=s||{preventDefault:!1};if(e.Manager){var r=e,n=function(u,d){var f=Object.create(t);return d&&r.assign(f,d),Nh(new r(u,f),f)};return r.assign(n,r),n.Manager=function(u,d){var f=Object.create(t);return d&&r.assign(f,d),Nh(new r.Manager(u,f),f)},n}var a=Object.create(e),o=e.element;o.hammer||(o.hammer=[]),o.hammer.push(a),e.on("hammer.input",function(u){(t.preventDefault===!0||t.preventDefault===u.pointerType)&&u.preventDefault(),u.isFirst&&($l=u.target)}),a._handlers={},a.on=function(u,d){return l(u).forEach(function(f){var p=a._handlers[f];p||(a._handlers[f]=p=[],e.on(f,c)),p.push(d)}),a},a.off=function(u,d){return l(u).forEach(function(f){var p=a._handlers[f];p&&(p=d?p.filter(function(v){return v!==d}):[],p.length>0?a._handlers[f]=p:(e.off(f,c),delete a._handlers[f]))}),a},a.emit=function(u,d){$l=d.target,e.emit(u,d)},a.destroy=function(){var u=e.element.hammer,d=u.indexOf(a);d!==-1&&u.splice(d,1),u.length||delete e.element.hammer,a._handlers={},e.destroy()};function l(u){return u.match(/[^ ]+/g)}function c(u){if(u.type!=="hammer.input"){if(u.srcEvent._handled||(u.srcEvent._handled={}),u.srcEvent._handled[u.type])return;u.srcEvent._handled[u.type]=!0}var d=!1;u.stopPropagation=function(){d=!0};var f=u.srcEvent.stopPropagation.bind(u.srcEvent);typeof f=="function"&&(u.srcEvent.stopPropagation=function(){f(),u.stopPropagation()}),u.firstTarget=$l;for(var p=$l;p&&!d;){var v=p.hammer;if(v){for(var g,w=0;w<v.length;w++)if(g=v[w]._handlers[u.type],g)for(var _=0;_<g.length&&!d;_++)g[_](u)}p=p.parentNode}}return a}function NJ(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(t){return{set:e}}}}var Lh;if(typeof window!="undefined"){var LJ=window.Hammer||Yf;Lh=Nh(LJ,{preventDefault:"mouse"})}else Lh=function(){return NJ()};var In=Lh;function tk(e,s){s.inputHandler=function(t){t.isFirst&&s(t)},e.on("hammer.input",s.inputHandler)}function RJ(e,s){return s.inputHandler=function(t){t.isFinal&&s(t)},e.on("hammer.input",s.inputHandler)}function AJ(e){var s="pan-y";return e.getTouchAction=function(){return[s]},e}var ac=function(){function e(s,t,r,n,a){ot(this,e),this.moment=a&&a.moment||En,this.options=a||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(s,t,r),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Qe(n)?this.hiddenDates=n:n!=null?this.hiddenDates=[n]:this.hiddenDates=[],this.format=e.FORMAT}return lt(e,[{key:"setMoment",value:function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}},{key:"setFormat",value:function(t){var r=V.deepExtend({},e.FORMAT);this.format=V.deepExtend(r,t)}},{key:"setRange",value:function(t,r,n){if(!(t instanceof Date)||!(r instanceof Date))throw"No legal start or end date in method setRange";this._start=t!=null?this.moment(t.valueOf()):Kn(),this._end=r!=null?this.moment(r.valueOf()):Kn(),this.autoScale&&this.setMinimumStep(n)}},{key:"start",value:function(){this.current=this._start.clone(),this.roundToMinor()}},{key:"roundToMinor",value:function(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){var t=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break}t.isSame(this.current)||(this.current=this.moment(Wi(this.hiddenDates,this.current.valueOf(),-1,!0)))}}},{key:"hasNext",value:function(){return this.current.valueOf()<=this._end.valueOf()}},{key:"next",value:function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current.weekday(0),this.current.add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current.add(this.step,"week");else{var r=this.current.clone();r.add(1,"week"),r.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,$J(this.moment,this,t)}},{key:"getCurrent",value:function(){return this.current.clone()}},{key:"setScale",value:function(t){t&&typeof t.scale=="string"&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)}},{key:"setAutoScale",value:function(t){this.autoScale=t}},{key:"setMinimumStep",value:function(t){if(t!=null){var r=1e3*60*60*24*30*12,n=1e3*60*60*24*30,a=1e3*60*60*24,o=1e3*60*60,l=1e3*60,c=1e3,u=1;r*1e3>t&&(this.scale="year",this.step=1e3),r*500>t&&(this.scale="year",this.step=500),r*100>t&&(this.scale="year",this.step=100),r*50>t&&(this.scale="year",this.step=50),r*10>t&&(this.scale="year",this.step=10),r*5>t&&(this.scale="year",this.step=5),r>t&&(this.scale="year",this.step=1),n*3>t&&(this.scale="month",this.step=3),n>t&&(this.scale="month",this.step=1),a*7>t&&this.options.showWeekScale&&(this.scale="week",this.step=1),a*2>t&&(this.scale="day",this.step=2),a>t&&(this.scale="day",this.step=1),a/2>t&&(this.scale="weekday",this.step=1),o*4>t&&(this.scale="hour",this.step=4),o>t&&(this.scale="hour",this.step=1),l*15>t&&(this.scale="minute",this.step=15),l*10>t&&(this.scale="minute",this.step=10),l*5>t&&(this.scale="minute",this.step=5),l>t&&(this.scale="minute",this.step=1),c*15>t&&(this.scale="second",this.step=15),c*10>t&&(this.scale="second",this.step=10),c*5>t&&(this.scale="second",this.step=5),c>t&&(this.scale="second",this.step=1),u*200>t&&(this.scale="millisecond",this.step=200),u*100>t&&(this.scale="millisecond",this.step=100),u*50>t&&(this.scale="millisecond",this.step=50),u*10>t&&(this.scale="millisecond",this.step=10),u*5>t&&(this.scale="millisecond",this.step=5),u>t&&(this.scale="millisecond",this.step=1)}}},{key:"isMajor",value:function(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return t.milliseconds()==0;case"second":return t.seconds()==0;case"minute":return t.hours()==0&&t.minutes()==0;case"hour":return t.hours()==0;case"weekday":case"day":return this.options.showWeekScale?t.isoWeekday()==1:t.date()==1;case"week":return t.date()==1;case"month":return t.month()==0;case"year":return!1;default:return!1}}},{key:"getLabelMinor",value:function(t){if(t==null&&(t=this.current),t instanceof Date&&(t=this.moment(t)),typeof this.format.minorLabels=="function")return this.format.minorLabels(t,this.scale,this.step);var r=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(t.date()===1&&t.weekday()!==0)return"";default:return r&&r.length>0?this.moment(t).format(r):""}}},{key:"getLabelMajor",value:function(t){if(t==null&&(t=this.current),t instanceof Date&&(t=this.moment(t)),typeof this.format.majorLabels=="function")return this.format.majorLabels(t,this.scale,this.step);var r=this.format.majorLabels[this.scale];return r&&r.length>0?this.moment(t).format(r):""}},{key:"getClassName",value:function(){var t,r=this.moment,n=this.moment(this.current),a=n.locale?n.locale("en"):n.lang("en"),o=this.step,l=[];function c(v){return v/o%2==0?" vis-even":" vis-odd"}function u(v){return v.isSame(Kn(),"day")?" vis-today":v.isSame(r().add(1,"day"),"day")?" vis-tomorrow":v.isSame(r().add(-1,"day"),"day")?" vis-yesterday":""}function d(v){return v.isSame(Kn(),"week")?" vis-current-week":""}function f(v){return v.isSame(Kn(),"month")?" vis-current-month":""}function p(v){return v.isSame(Kn(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":l.push(u(a)),l.push(c(a.milliseconds()));break;case"second":l.push(u(a)),l.push(c(a.seconds()));break;case"minute":l.push(u(a)),l.push(c(a.minutes()));break;case"hour":l.push(Pt(t="vis-h".concat(a.hours())).call(t,this.step==4?"-h"+(a.hours()+4):"")),l.push(u(a)),l.push(c(a.hours()));break;case"weekday":l.push("vis-".concat(a.format("dddd").toLowerCase())),l.push(u(a)),l.push(d(a)),l.push(c(a.date()));break;case"day":l.push("vis-day".concat(a.date())),l.push("vis-".concat(a.format("MMMM").toLowerCase())),l.push(u(a)),l.push(f(a)),l.push(this.step<=2?u(a):""),l.push(this.step<=2?"vis-".concat(a.format("dddd").toLowerCase()):""),l.push(c(a.date()-1));break;case"week":l.push("vis-week".concat(a.format("w"))),l.push(d(a)),l.push(c(a.week()));break;case"month":l.push("vis-".concat(a.format("MMMM").toLowerCase())),l.push(f(a)),l.push(c(a.month()));break;case"year":l.push("vis-year".concat(a.year())),l.push(p(a)),l.push(c(a.year()));break}return Ge(l).call(l,String).join(" ")}}],[{key:"snap",value:function(t,r,n){var a=En(t);if(r=="year"){var o=a.year()+Math.round(a.month()/12);a.year(Math.round(o/n)*n),a.month(0),a.date(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(r=="month")a.date()>15?(a.date(1),a.add(1,"month")):a.date(1),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(r=="week")a.weekday()>2?(a.weekday(0),a.add(1,"week")):a.weekday(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(r=="day"){switch(n){case 5:case 2:a.hours(Math.round(a.hours()/24)*24);break;default:a.hours(Math.round(a.hours()/12)*12);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(r=="weekday"){switch(n){case 5:case 2:a.hours(Math.round(a.hours()/12)*12);break;default:a.hours(Math.round(a.hours()/6)*6);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(r=="hour"){switch(n){case 4:a.minutes(Math.round(a.minutes()/60)*60);break;default:a.minutes(Math.round(a.minutes()/30)*30);break}a.seconds(0),a.milliseconds(0)}else if(r=="minute"){switch(n){case 15:case 10:a.minutes(Math.round(a.minutes()/5)*5),a.seconds(0);break;case 5:a.seconds(Math.round(a.seconds()/60)*60);break;default:a.seconds(Math.round(a.seconds()/30)*30);break}a.milliseconds(0)}else if(r=="second")switch(n){case 15:case 10:a.seconds(Math.round(a.seconds()/5)*5),a.milliseconds(0);break;case 5:a.milliseconds(Math.round(a.milliseconds()/1e3)*1e3);break;default:a.milliseconds(Math.round(a.milliseconds()/500)*500);break}else if(r=="millisecond"){var l=n>5?n/2:1;a.milliseconds(Math.round(a.milliseconds()/l)*l)}return a}}]),e}();ac.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};function An(e,s){s===void 0&&(s={});var t=s.insertAt;if(!(!e||typeof document=="undefined")){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var FJ=`.vis-time-axis {
  position: relative;
  overflow: hidden;
}

.vis-time-axis.vis-foreground {
  top: 0;
  left: 0;
  width: 100%;
}

.vis-time-axis.vis-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.vis-time-axis .vis-text {
  position: absolute;
  color: #4d4d4d;
  padding: 3px;
  overflow: hidden;
  box-sizing: border-box;

  white-space: nowrap;
}

.vis-time-axis .vis-text.vis-measure {
  position: absolute;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  visibility: hidden;
}

.vis-time-axis .vis-grid.vis-vertical {
  position: absolute;
  border-left: 1px solid;
}

.vis-time-axis .vis-grid.vis-vertical-rtl {
  position: absolute;
  border-right: 1px solid;
}

.vis-time-axis .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-time-axis .vis-grid.vis-major {
  border-color: #bfbfbf;
}
`;An(FJ);function VJ(e){var s=zJ();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function zJ(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var oc=function(e){Rn(t,e);var s=VJ(t);function t(r,n){var a;return ot(this,t),a=s.call(this),a.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},a.props={range:{start:0,end:0,minimumStep:0},lineTop:0},a.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:V.extend({},ac.FORMAT),moment:En,timeAxis:null},a.options=V.extend({},a.defaultOptions),a.body=r,a._create(),a.setOptions(n),a}return lt(t,[{key:"setOptions",value:function(n){n&&(V.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,n),V.selectiveDeepExtend(["format"],this.options,n),"orientation"in n&&(typeof n.orientation=="string"?this.options.orientation.axis=n.orientation:Ke(n.orientation)==="object"&&"axis"in n.orientation&&(this.options.orientation.axis=n.orientation.axis)),"locale"in n&&(typeof En.locale=="function"?En.locale(n.locale):En.lang(n.locale)))}},{key:"_create",value:function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}},{key:"destroy",value:function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}},{key:"redraw",value:function(){var n=this.props,a=this.dom.foreground,o=this.dom.background,l=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,c=a.parentNode!==l;this._calculateCharSize();var u=this.options.showMinorLabels&&this.options.orientation.axis!=="none",d=this.options.showMajorLabels&&this.options.orientation.axis!=="none";n.minorLabelHeight=u?n.minorCharHeight:0,n.majorLabelHeight=d?n.majorCharHeight:0,n.height=n.minorLabelHeight+n.majorLabelHeight,n.width=a.offsetWidth,n.minorLineHeight=this.body.domProps.root.height-n.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),n.minorLineWidth=1,n.majorLineHeight=n.minorLineHeight+n.majorLabelHeight,n.majorLineWidth=1;var f=a.nextSibling,p=o.nextSibling;return a.parentNode&&a.parentNode.removeChild(a),o.parentNode&&o.parentNode.removeChild(o),a.style.height="".concat(this.props.height,"px"),this._repaintLabels(),f?l.insertBefore(a,f):l.appendChild(a),p?this.body.dom.backgroundVertical.insertBefore(o,p):this.body.dom.backgroundVertical.appendChild(o),this._isResized()||c}},{key:"_repaintLabels",value:function(){var n=this.options.orientation.axis,a=V.convert(this.body.range.start,"Number"),o=V.convert(this.body.range.end,"Number"),l=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),c=l-ic(this.options.moment,this.body.hiddenDates,this.body.range,l);c-=this.body.util.toTime(0).valueOf();var u=new ac(new Date(a),new Date(o),c,this.body.hiddenDates,this.options);u.setMoment(this.options.moment),this.options.format&&u.setFormat(this.options.format),this.options.timeAxis&&u.setScale(this.options.timeAxis),this.step=u;var d=this.dom;d.redundant.lines=d.lines,d.redundant.majorTexts=d.majorTexts,d.redundant.minorTexts=d.minorTexts,d.lines=[],d.majorTexts=[],d.minorTexts=[];var f,p,v,g,w,_,S=0,I,C,$=void 0,O=0,A=1e3,z;for(u.start(),p=u.getCurrent(),g=this.body.util.toScreen(p);u.hasNext()&&O<A;){switch(O++,w=u.isMajor(),z=u.getClassName(),f=p,v=g,u.next(),p=u.getCurrent(),g=this.body.util.toScreen(p),I=S,S=g-v,u.scale){case"week":_=!0;break;default:_=S>=I*.4;break}if(this.options.showMinorLabels&&_){var N=this._repaintMinorText(v,u.getLabelMinor(f),n,z);N.style.width="".concat(S,"px")}w&&this.options.showMajorLabels?(v>0&&($==null&&($=v),N=this._repaintMajorText(v,u.getLabelMajor(f),n,z)),C=this._repaintMajorLine(v,S,n,z)):_?C=this._repaintMinorLine(v,S,n,z):C&&(C.style.width="".concat(Qn(C.style.width)+S,"px"))}if(O===A&&!Oy&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(A," lines.")),Oy=!0),this.options.showMajorLabels){var Y=this.body.util.toTime(0),R=u.getLabelMajor(Y),L=R.length*(this.props.majorCharWidth||10)+10;($==null||L<$)&&this._repaintMajorText(0,R,n,z)}Se(V).call(V,this.dom.redundant,function(j){for(;j.length;){var B=j.pop();B&&B.parentNode&&B.parentNode.removeChild(B)}})}},{key:"_repaintMinorText",value:function(n,a,o,l){var c=this.dom.redundant.minorTexts.shift();if(!c){var u=document.createTextNode("");c=document.createElement("div"),c.appendChild(u),this.dom.foreground.appendChild(c)}this.dom.minorTexts.push(c),c.innerHTML=V.xss(a);var d=o=="top"?this.props.majorLabelHeight:0;return this._setXY(c,n,d),c.className="vis-text vis-minor ".concat(l),c}},{key:"_repaintMajorText",value:function(n,a,o,l){var c=this.dom.redundant.majorTexts.shift();if(!c){var u=document.createElement("div");c=document.createElement("div"),c.appendChild(u),this.dom.foreground.appendChild(c)}c.childNodes[0].innerHTML=V.xss(a),c.className="vis-text vis-major ".concat(l);var d=o=="top"?0:this.props.minorLabelHeight;return this._setXY(c,n,d),this.dom.majorTexts.push(c),c}},{key:"_setXY",value:function(n,a,o){var l,c=this.options.rtl?a*-1:a;n.style.transform=Pt(l="translate(".concat(c,"px, ")).call(l,o,"px)")}},{key:"_repaintMinorLine",value:function(n,a,o,l){var c,u=this.dom.redundant.lines.shift();u||(u=document.createElement("div"),this.dom.background.appendChild(u)),this.dom.lines.push(u);var d=this.props;u.style.width="".concat(a,"px"),u.style.height="".concat(d.minorLineHeight,"px");var f=o=="top"?d.majorLabelHeight:this.body.domProps.top.height,p=n-d.minorLineWidth/2;return this._setXY(u,p,f),u.className=Pt(c="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(c,l),u}},{key:"_repaintMajorLine",value:function(n,a,o,l){var c,u=this.dom.redundant.lines.shift();u||(u=document.createElement("div"),this.dom.background.appendChild(u)),this.dom.lines.push(u);var d=this.props;u.style.width="".concat(a,"px"),u.style.height="".concat(d.majorLineHeight,"px");var f=o=="top"?0:this.body.domProps.top.height,p=n-d.majorLineWidth/2;return this._setXY(u,p,f),u.className=Pt(c="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(c,l),u}},{key:"_calculateCharSize",value:function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}]),t}(Ri),Oy=!1;function jJ(e){var s=e&&e.preventDefault||!1,t=e&&e.container||window,r={},n={keydown:{},keyup:{}},a={},o;for(o=97;o<=122;o++)a[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)a[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)a[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)a["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)a["num"+o]={code:96+o,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var l=function(d){u(d,"keydown")},c=function(d){u(d,"keyup")},u=function(d,f){if(n[f][d.keyCode]!==void 0){for(var p=n[f][d.keyCode],v=0;v<p.length;v++)(p[v].shift===void 0||p[v].shift==!0&&d.shiftKey==!0||p[v].shift==!1&&d.shiftKey==!1)&&p[v].fn(d);s==!0&&d.preventDefault()}};return r.bind=function(d,f,p){if(p===void 0&&(p="keydown"),a[d]===void 0)throw new Error("unsupported key: "+d);n[p][a[d].code]===void 0&&(n[p][a[d].code]=[]),n[p][a[d].code].push({fn:f,shift:a[d].shift})},r.bindAll=function(d,f){f===void 0&&(f="keydown");for(var p in a)a.hasOwnProperty(p)&&r.bind(p,d,f)},r.getKey=function(d){for(var f in a)if(a.hasOwnProperty(f)){if(d.shiftKey==!0&&a[f].shift==!0&&d.keyCode==a[f].code)return f;if(d.shiftKey==!1&&a[f].shift==!1&&d.keyCode==a[f].code)return f;if(d.keyCode==a[f].code&&f=="shift")return f}return"unknown key, currently not supported"},r.unbind=function(d,f,p){if(p===void 0&&(p="keydown"),a[d]===void 0)throw new Error("unsupported key: "+d);if(f!==void 0){var v=[],g=n[p][a[d].code];if(g!==void 0)for(var w=0;w<g.length;w++)g[w].fn==f&&g[w].shift==a[d].shift||v.push(n[p][a[d].code][w]);n[p][a[d].code]=v}else n[p][a[d].code]=[]},r.reset=function(){n={keydown:{},keyup:{}}},r.destroy=function(){n={keydown:{},keyup:{}},t.removeEventListener("keydown",l,!0),t.removeEventListener("keyup",c,!0)},t.addEventListener("keydown",l,!0),t.addEventListener("keyup",c,!0),r}var YJ=`.vis .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Must be displayed above for example selected Timeline items */
  z-index: 10;
}

.vis-active {
  box-shadow: 0 0 10px #86d5f8;
}
`;An(YJ);function ar(e){var s,t;this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=In(this.dom.overlay),this.hammer.on("tap",ne(s=this._onTapOverlay).call(s,this));var r=this,n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Se(n).call(n,function(a){r.hammer.on(a,function(o){o.stopPropagation()})}),document&&document.body&&(this.onClick=function(a){GJ(a.target,e)||r.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=jJ(),this.escListener=ne(t=this.deactivate).call(t,this)}Nf(ar.prototype);ar.current=null;ar.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};ar.prototype.activate=function(){var e;ar.current&&ar.current.deactivate(),ar.current=this,this.active=!0,this.dom.overlay.style.display="none",V.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),ne(e=this.keycharm).call(e,"esc",this.escListener)};ar.prototype.deactivate=function(){ar.current===this&&(ar.current=null),this.active=!1,this.dom.overlay.style.display="",V.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};ar.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()};function GJ(e,s){for(;e;){if(e===s)return!0;e=e.parentNode}return!1}var gp={current:"current",time:"time",deleteSelected:"Delete selected"},UJ=gp,HJ=gp,yp={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},WJ=yp,BJ=yp,_p={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},qJ=_p,XJ=_p,nk={current:"Aktuelle",time:"Zeit",deleteSelected:"Lösche Auswahl"},KJ=nk,Wc={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},QJ=Wc,JJ=Wc,ZJ=Wc,rk={current:"corriente",time:"hora",deleteSelected:"Eliminar selección"},eZ=rk,ik={current:"поточний",time:"час",deleteSelected:"Видалити обране"},tZ=ik,sk={current:"текущее",time:"время",deleteSelected:"Удалить выбранное"},nZ=sk,ak={current:"aktualny",time:"czas",deleteSelected:"Usuń wybrane"},rZ=ak,bp={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},iZ=bp,sZ=bp,ok={current:"現在",time:"時刻",deleteSelected:"選択されたものを削除"},aZ=ok,lk={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},oZ=lk,Bc={current:"nåværende",time:"tid",deleteSelected:"Slett valgte"},lZ=Bc,cZ=Bc,uZ=Bc,ck={current:"einamas",time:"laikas",deleteSelected:"Pašalinti pasirinktą"},dZ=ck,ua={en:gp,en_EN:UJ,en_US:HJ,it:yp,it_IT:WJ,it_CH:BJ,nl:_p,nl_NL:qJ,nl_BE:XJ,de:nk,de_DE:KJ,fr:Wc,fr_FR:QJ,fr_CA:JJ,fr_BE:ZJ,es:rk,es_ES:eZ,uk:ik,uk_UA:tZ,ru:sk,ru_RU:nZ,pl:ak,pl_PL:rZ,pt:bp,pt_BR:iZ,pt_PT:sZ,ja:ok,ja_JP:aZ,lt:ck,lt_LT:dZ,sv:lk,sv_SE:oZ,nb:Bc,nn:cZ,nb_NO:lZ,nn_NO:uZ},hZ=`.vis-custom-time {
  background-color: #6E94FF;
  width: 2px;
  cursor: move;
  z-index: 1;
}

.vis-custom-time > .vis-custom-time-marker {
  background-color: inherit;
  color: white;
  font-size: 12px;
  white-space: nowrap;
  padding: 3px 5px;
  top: 0px;
  cursor: initial;
  z-index: inherit;
}`;An(hZ);function fZ(e){var s=pZ();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function pZ(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var wp=function(e){Rn(t,e);var s=fZ(t);function t(r,n){var a,o;ot(this,t),o=s.call(this),o.body=r,o.defaultOptions={moment:En,locales:ua,locale:"en",id:void 0,title:void 0},o.options=V.extend({},o.defaultOptions),o.setOptions(n),o.options.locales=V.extend({},ua,o.options.locales);var l=o.defaultOptions.locales[o.defaultOptions.locale];return Se(a=tn(o.options.locales)).call(a,function(c){o.options.locales[c]=V.extend({},l,o.options.locales[c])}),n&&n.time!=null?o.customTime=n.time:o.customTime=new Date,o.eventParams={},o._create(),o}return lt(t,[{key:"setOptions",value:function(n){n&&V.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,n)}},{key:"_create",value:function(){var n,a,o,l=document.createElement("div");l["custom-time"]=this,l.className="vis-custom-time ".concat(this.options.id||""),l.style.position="absolute",l.style.top="0px",l.style.height="100%",this.bar=l;var c=document.createElement("div");c.style.position="relative",c.style.top="0px",this.options.rtl?c.style.right="-10px":c.style.left="-10px",c.style.height="100%",c.style.width="20px";function u(d){this.body.range._onMouseWheel(d)}c.addEventListener?(c.addEventListener("mousewheel",ne(u).call(u,this),!1),c.addEventListener("DOMMouseScroll",ne(u).call(u,this),!1)):c.attachEvent("onmousewheel",ne(u).call(u,this)),l.appendChild(c),this.hammer=new In(c),this.hammer.on("panstart",ne(n=this._onDragStart).call(n,this)),this.hammer.on("panmove",ne(a=this._onDrag).call(a,this)),this.hammer.on("panend",ne(o=this._onDragEnd).call(o,this)),this.hammer.get("pan").set({threshold:5,direction:In.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}},{key:"destroy",value:function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}},{key:"redraw",value:function(){var n=this.body.dom.backgroundVertical;this.bar.parentNode!=n&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),n.appendChild(this.bar));var a=this.body.util.toScreen(this.customTime),o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en);var l=this.options.title;if(l===void 0){var c;l=Pt(c="".concat(o.time,": ")).call(c,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),l=l.charAt(0).toUpperCase()+l.substring(1)}else typeof l=="function"&&(l=l.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(a,"px"):this.bar.style.left="".concat(a,"px"),this.bar.title=l,!1}},{key:"hide",value:function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"setCustomTime",value:function(n){this.customTime=V.convert(n,"Date"),this.redraw()}},{key:"getCustomTime",value:function(){return new Date(this.customTime.valueOf())}},{key:"setCustomMarker",value:function(n,a){var o=document.createElement("div");if(o.className="vis-custom-time-marker",o.innerHTML=V.xss(n),o.style.position="absolute",a){var l,c;o.setAttribute("contenteditable","true"),o.addEventListener("pointerdown",function(){o.focus()}),o.addEventListener("input",ne(l=this._onMarkerChange).call(l,this)),o.title=n,o.addEventListener("blur",ne(c=function(d){this.title!=d.target.innerHTML&&(this._onMarkerChanged(d),this.title=d.target.innerHTML)}).call(c,this))}this.bar.appendChild(o)}},{key:"setCustomTitle",value:function(n){this.options.title=n}},{key:"_onDragStart",value:function(n){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,n.stopPropagation()}},{key:"_onDrag",value:function(n){if(!!this.eventParams.dragging){var a=this.options.rtl?-1*n.deltaX:n.deltaX,o=this.body.util.toScreen(this.eventParams.customTime)+a,l=this.body.util.toTime(o),c=this.body.util.getScale(),u=this.body.util.getStep(),d=this.options.snap,f=d?d(l,c,u):l;this.setCustomTime(f),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:n}),n.stopPropagation()}}},{key:"_onDragEnd",value:function(n){!this.eventParams.dragging||(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:n}),n.stopPropagation())}},{key:"_onMarkerChange",value:function(n){this.body.emitter.emit("markerchange",{id:this.options.id,title:n.target.innerHTML,event:n}),n.stopPropagation()}},{key:"_onMarkerChanged",value:function(n){this.body.emitter.emit("markerchanged",{id:this.options.id,title:n.target.innerHTML,event:n}),n.stopPropagation()}}],[{key:"customTimeFromTarget",value:function(n){for(var a=n.target;a;){if(a.hasOwnProperty("custom-time"))return a["custom-time"];a=a.parentNode}return null}}]),t}(Ri),vZ=`.vis-timeline {
  /*
  -webkit-transition: height .4s ease-in-out;
  transition:         height .4s ease-in-out;
  */
}

.vis-panel {
  /*
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
  */
}

.vis-axis {
  /*
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
  */
}

/* TODO: get animation working nicely

.vis-item {
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
}

.vis-item.line {
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
}
/**/`;An(vZ);var mZ=`.vis-current-time {
  background-color: #FF7F6E;
  width: 2px;
  z-index: 1;
  pointer-events: none;
}

.vis-rolling-mode-btn {
  height: 40px;
  width: 40px;
  position: absolute;
  top: 7px;
  right: 20px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  opacity: 0.8;
  color: white;
  font-weight: bold;
  text-align: center;
  background: #3876c2;
}
.vis-rolling-mode-btn:before {
  content: "\\26F6";
}

.vis-rolling-mode-btn:hover {
  opacity: 1;
}`;An(mZ);var gZ=`.vis-panel {
  position: absolute;

  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border: 1px #bfbfbf;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right {
  border-top-style: solid;
  border-bottom-style: solid;
  overflow: hidden;
}

.vis-left.vis-panel.vis-vertical-scroll, .vis-right.vis-panel.vis-vertical-scroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: scroll;
} 

.vis-left.vis-panel.vis-vertical-scroll {
  direction: rtl;
}

.vis-left.vis-panel.vis-vertical-scroll .vis-content {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll .vis-content {
  direction: rtl;
}

.vis-panel.vis-center,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border-left-style: solid;
  border-right-style: solid;
}

.vis-background {
  overflow: hidden;
}

.vis-panel > .vis-content {
  position: relative;
}

.vis-panel .vis-shadow {
  position: absolute;
  width: 100%;
  height: 1px;
  box-shadow: 0 0 10px rgba(0,0,0,0.8);
  /* TODO: find a nice way to ensure vis-shadows are drawn on top of items
  z-index: 1;
  */
}

.vis-panel .vis-shadow.vis-top {
  top: -1px;
  left: 0;
}

.vis-panel .vis-shadow.vis-bottom {
  bottom: -1px;
  left: 0;
}`;An(gZ);var yZ=`.vis-graph-group0 {
    fill:#4f81bd;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #4f81bd;
}

.vis-graph-group1 {
    fill:#f79646;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #f79646;
}

.vis-graph-group2 {
    fill: #8c51cf;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #8c51cf;
}

.vis-graph-group3 {
    fill: #75c841;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #75c841;
}

.vis-graph-group4 {
    fill: #ff0100;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #ff0100;
}

.vis-graph-group5 {
    fill: #37d8e6;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #37d8e6;
}

.vis-graph-group6 {
    fill: #042662;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #042662;
}

.vis-graph-group7 {
    fill:#00ff26;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #00ff26;
}

.vis-graph-group8 {
    fill:#ff00ff;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #ff00ff;
}

.vis-graph-group9 {
    fill: #8f3938;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #8f3938;
}

.vis-timeline .vis-fill {
    fill-opacity:0.1;
    stroke: none;
}


.vis-timeline .vis-bar {
    fill-opacity:0.5;
    stroke-width:1px;
}

.vis-timeline .vis-point {
    stroke-width:2px;
    fill-opacity:1.0;
}


.vis-timeline .vis-legend-background {
    stroke-width:1px;
    fill-opacity:0.9;
    fill: #ffffff;
    stroke: #c2c2c2;
}


.vis-timeline .vis-outline {
    stroke-width:1px;
    fill-opacity:1;
    fill: #ffffff;
    stroke: #e5e5e5;
}

.vis-timeline .vis-icon-fill {
    fill-opacity:0.3;
    stroke: none;
}
`;An(yZ);var _Z=`
.vis-timeline {
  position: relative;
  border: 1px solid #bfbfbf;
  overflow: hidden;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

.vis-loading-screen {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}`;An(_Z);var bZ=`/* override some bootstrap styles screwing up the timelines css */

.vis [class*="span"] {
  min-height: 0;
  width: auto;
}
`;An(bZ);var Zs=function(){function e(){ot(this,e)}return lt(e,[{key:"_create",value:function(t){var r=this,n,a,o;this.dom={},this.dom.container=t,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){r.initialDrawDone===!0&&r._redraw()}),this.on("rangechanged",function(){r.initialRangeChangeDone||(r.initialRangeChangeDone=!0)}),this.on("touch",ne(n=this._onTouch).call(n,this)),this.on("panmove",ne(a=this._onDrag).call(a,this));var l=this;this._origRedraw=ne(o=this._redraw).call(o,this),this._redraw=V.throttle(this._origRedraw),this.on("_change",function(_){l.itemSet&&l.itemSet.initialItemSetDrawn&&_&&_.queue==!0?l._redraw():l._origRedraw()}),this.hammer=new In(this.dom.root);var c=this.hammer.get("pinch").set({enable:!0});c&&AJ(c),this.hammer.get("pan").set({threshold:5,direction:In.DIRECTION_ALL}),this.timelineListeners={};var u=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Se(u).call(u,function(_){var S=function(C){l.isActive()&&l.emit(_,C)};l.hammer.on(_,S),l.timelineListeners[_]=S}),tk(this.hammer,function(_){l.emit("touch",_)}),RJ(this.hammer,function(_){l.emit("release",_)});function d(_){var S=40,I=800;this.isActive()&&this.emit("mousewheel",_);var C=0,$=0;if("detail"in _&&($=_.detail*-1),"wheelDelta"in _&&($=_.wheelDelta),"wheelDeltaY"in _&&($=_.wheelDeltaY),"wheelDeltaX"in _&&(C=_.wheelDeltaX*-1),"axis"in _&&_.axis===_.HORIZONTAL_AXIS&&(C=$*-1,$=0),"deltaY"in _&&($=_.deltaY*-1),"deltaX"in _&&(C=_.deltaX),_.deltaMode&&(_.deltaMode===1?(C*=S,$*=S):(C*=S,$*=I)),this.options.preferZoom){if(!this.options.zoomKey||_[this.options.zoomKey])return}else if(this.options.zoomKey&&_[this.options.zoomKey])return;if(!(!this.options.verticalScroll&&!this.options.horizontalScroll)){if(this.options.verticalScroll&&Math.abs($)>=Math.abs(C)){var O=this.props.scrollTop,A=O+$;if(this.isActive()){var z=this._setScrollTop(A);z!==O&&(this._redraw(),this.emit("scroll",_),_.preventDefault())}}else if(this.options.horizontalScroll){var N=Math.abs(C)>=Math.abs($)?C:$,Y=N/120*(this.range.end-this.range.start)/20,R=this.range.start+Y,L=this.range.end+Y,j={animation:!1,byUser:!0,event:_};this.range.setRange(R,L,j),_.preventDefault()}}}var f="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(f,ne(d).call(d,this),!1),this.dom.top.addEventListener(f,ne(d).call(d,this),!1),this.dom.bottom.addEventListener(f,ne(d).call(d,this),!1);function p(_){if(!!l.options.verticalScroll&&(_.preventDefault(),l.isActive())){var S=-_.target.scrollTop;l._setScrollTop(S),l._redraw(),l.emit("scrollSide",_)}}this.dom.left.parentNode.addEventListener("scroll",ne(p).call(p,this)),this.dom.right.parentNode.addEventListener("scroll",ne(p).call(p,this));var v=!1;function g(_){var S;if(_.preventDefault&&(l.emit("dragover",l.getEventProperties(_)),_.preventDefault()),$t(S=_.target.className).call(S,"timeline")>-1&&!v)return _.dataTransfer.dropEffect="move",v=!0,!1}function w(_){_.preventDefault&&_.preventDefault(),_.stopPropagation&&_.stopPropagation();try{var S=JSON.parse(_.dataTransfer.getData("text"));if(!S||!S.content)return}catch(I){return!1}return v=!1,_.center={x:_.clientX,y:_.clientY},S.target!=="item"?l.itemSet._onAddItem(_):l.itemSet._onDropObjectOnItem(_),l.emit("drop",l.getEventProperties(_)),!1}if(this.dom.center.addEventListener("dragover",ne(g).call(g,this),!1),this.dom.center.addEventListener("drop",ne(w).call(w,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root),t.appendChild(this.dom.loadingScreen)}},{key:"setOptions",value:function(t){var r;if(t){var n=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(V.selectiveExtend(n,this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),Ke(this.options.orientation)!=="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&(typeof t.orientation=="string"?this.options.orientation={item:t.orientation,axis:t.orientation}:Ke(t.orientation)==="object"&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){var a=this.timeAxis2=new oc(this.body);a.setOptions=function(f){var p=f?V.extend({},f):{};p.orientation="top",oc.prototype.setOptions.call(a,p)},this.components.push(a)}}else if(this.timeAxis2){var o,l=$t(o=this.components).call(o,this.timeAxis2);if(l!==-1){var c;Dn(c=this.components).call(c,l,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof t.drawPoints=="function"&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&mp(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new ar(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(Se(r=this.components).call(r,function(f){return f.setOptions(t)}),"configure"in t){var u;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var d=V.deepExtend({},this.options);Se(u=this.components).call(u,function(f){V.deepExtend(d,f.options)}),this.configurator.setModuleOptions({global:d})}this._redraw()}},{key:"isActive",value:function(){return!this.activator||this.activator.active}},{key:"destroy",value:function(){var t;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var r in this.timelineListeners)this.timelineListeners.hasOwnProperty(r)&&delete this.timelineListeners[r];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,Se(t=this.components).call(t,function(n){return n.destroy()}),this.body=null}},{key:"setCustomTime",value:function(t,r){var n,a=Ge(n=this.customTimes).call(n,function(o){return r===o.options.id});if(a.length===0)throw new Error("No custom time bar found with id ".concat(jn(r)));a.length>0&&a[0].setCustomTime(t)}},{key:"getCustomTime",value:function(t){var r,n=Ge(r=this.customTimes).call(r,function(a){return a.options.id===t});if(n.length===0)throw new Error("No custom time bar found with id ".concat(jn(t)));return n[0].getCustomTime()}},{key:"setCustomTimeMarker",value:function(t,r,n){var a,o=Ge(a=this.customTimes).call(a,function(l){return l.options.id===r});if(o.length===0)throw new Error("No custom time bar found with id ".concat(jn(r)));o.length>0&&o[0].setCustomMarker(t,n)}},{key:"setCustomTimeTitle",value:function(t,r){var n,a=Ge(n=this.customTimes).call(n,function(o){return o.options.id===r});if(a.length===0)throw new Error("No custom time bar found with id ".concat(jn(r)));if(a.length>0)return a[0].setCustomTitle(t)}},{key:"getEventProperties",value:function(t){return{event:t}}},{key:"addCustomTime",value:function(t,r){var n,a=t!==void 0?V.convert(t,"Date"):new Date,o=fp(n=this.customTimes).call(n,function(c){return c.options.id===r});if(o)throw new Error("A custom time with id ".concat(jn(r)," already exists"));var l=new wp(this.body,V.extend({},this.options,{time:a,id:r,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(l),this.components.push(l),this._redraw(),r}},{key:"removeCustomTime",value:function(t){var r,n=this,a=Ge(r=this.customTimes).call(r,function(o){return o.options.id===t});if(a.length===0)throw new Error("No custom time bar found with id ".concat(jn(t)));Se(a).call(a,function(o){var l,c,u,d;Dn(l=n.customTimes).call(l,$t(c=n.customTimes).call(c,o),1),Dn(u=n.components).call(u,$t(d=n.components).call(d,o),1),o.destroy()})}},{key:"getVisibleItems",value:function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}},{key:"getItemsAtCurrentTime",value:function(t){return this.time=t,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}},{key:"getVisibleGroups",value:function(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}},{key:"fit",value:function(t,r){var n=this.getDataRange();if(!(n.min===null&&n.max===null)){var a=n.max-n.min,o=new Date(n.min.valueOf()-a*.01),l=new Date(n.max.valueOf()+a*.01),c=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(o,l,{animation:c},r)}}},{key:"getDataRange",value:function(){throw new Error("Cannot invoke abstract method getDataRange")}},{key:"setWindow",value:function(t,r,n,a){typeof arguments[2]=="function"&&(a=arguments[2],n={});var o,l;arguments.length==1?(l=arguments[0],o=l.animation!==void 0?l.animation:!0,this.range.setRange(l.start,l.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(l=arguments[0],a=arguments[1],o=l.animation!==void 0?l.animation:!0,this.range.setRange(l.start,l.end,{animation:o},a)):(o=n&&n.animation!==void 0?n.animation:!0,this.range.setRange(t,r,{animation:o},a))}},{key:"moveTo",value:function(t,r,n){typeof arguments[1]=="function"&&(n=arguments[1],r={});var a=this.range.end-this.range.start,o=V.convert(t,"Date").valueOf(),l=o-a/2,c=o+a/2,u=r&&r.animation!==void 0?r.animation:!0;this.range.setRange(l,c,{animation:u},n)}},{key:"getWindow",value:function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}}},{key:"zoomIn",value:function(t,r,n){if(!(!t||t<0||t>1)){typeof arguments[1]=="function"&&(n=arguments[1],r={});var a=this.getWindow(),o=a.start.valueOf(),l=a.end.valueOf(),c=l-o,u=c/(1+t),d=(c-u)/2,f=o+d,p=l-d;this.setWindow(f,p,r,n)}}},{key:"zoomOut",value:function(t,r,n){if(!(!t||t<0||t>1)){typeof arguments[1]=="function"&&(n=arguments[1],r={});var a=this.getWindow(),o=a.start.valueOf(),l=a.end.valueOf(),c=l-o,u=o-c*t/2,d=l+c*t/2;this.setWindow(u,d,r,n)}}},{key:"redraw",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t;this.redrawCount++;var r=this.dom;if(!(!r||!r.container||r.root.offsetWidth==0)){var n=!1,a=this.options,o=this.props;rc(this.options.moment,this.body,this.options.hiddenDates),a.orientation=="top"?(V.addClassName(r.root,"vis-top"),V.removeClassName(r.root,"vis-bottom")):(V.removeClassName(r.root,"vis-top"),V.addClassName(r.root,"vis-bottom")),a.rtl?(V.addClassName(r.root,"vis-rtl"),V.removeClassName(r.root,"vis-ltr")):(V.addClassName(r.root,"vis-ltr"),V.removeClassName(r.root,"vis-rtl")),r.root.style.maxHeight=V.option.asSize(a.maxHeight,""),r.root.style.minHeight=V.option.asSize(a.minHeight,""),r.root.style.width=V.option.asSize(a.width,"");var l=r.root.offsetWidth;o.border.left=1,o.border.right=1,o.border.top=1,o.border.bottom=1,o.center.height=r.center.offsetHeight,o.left.height=r.left.offsetHeight,o.right.height=r.right.offsetHeight,o.top.height=r.top.clientHeight||-o.border.top,o.bottom.height=Math.round(r.bottom.getBoundingClientRect().height)||r.bottom.clientHeight||-o.border.bottom;var c=Math.max(o.left.height,o.center.height,o.right.height),u=o.top.height+c+o.bottom.height+o.border.top+o.border.bottom;r.root.style.height=V.option.asSize(a.height,"".concat(u,"px")),o.root.height=r.root.offsetHeight,o.background.height=o.root.height;var d=o.root.height-o.top.height-o.bottom.height;o.centerContainer.height=d,o.leftContainer.height=d,o.rightContainer.height=o.leftContainer.height,o.root.width=l,o.background.width=o.root.width,this.initialDrawDone||(o.scrollbarWidth=V.getScrollBarWidth());var f=r.leftContainer.clientWidth,p=r.rightContainer.clientWidth;a.verticalScroll?a.rtl?(o.left.width=f||-o.border.left,o.right.width=p+o.scrollbarWidth||-o.border.right):(o.left.width=f+o.scrollbarWidth||-o.border.left,o.right.width=p||-o.border.right):(o.left.width=f||-o.border.left,o.right.width=p||-o.border.right),this._setDOM();var v=this._updateScrollTop();a.orientation.item!="top"&&(v+=Math.max(o.centerContainer.height-o.center.height-o.border.top-o.border.bottom,0)),r.center.style.transform="translateY(".concat(v,"px)");var g=o.scrollTop==0?"hidden":"",w=o.scrollTop==o.scrollTopMin?"hidden":"";r.shadowTop.style.visibility=g,r.shadowBottom.style.visibility=w,r.shadowTopLeft.style.visibility=g,r.shadowBottomLeft.style.visibility=w,r.shadowTopRight.style.visibility=g,r.shadowBottomRight.style.visibility=w,a.verticalScroll&&(r.rightContainer.className="vis-panel vis-right vis-vertical-scroll",r.leftContainer.className="vis-panel vis-left vis-vertical-scroll",r.shadowTopRight.style.visibility="hidden",r.shadowBottomRight.style.visibility="hidden",r.shadowTopLeft.style.visibility="hidden",r.shadowBottomLeft.style.visibility="hidden",r.left.style.top="0px",r.right.style.top="0px"),(!a.verticalScroll||o.center.height<o.centerContainer.height)&&(r.left.style.top="".concat(v,"px"),r.right.style.top="".concat(v,"px"),r.rightContainer.className=r.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.leftContainer.className=r.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),o.left.width=f||-o.border.left,o.right.width=p||-o.border.right,this._setDOM());var _=o.center.height>o.centerContainer.height;this.hammer.get("pan").set({direction:_?In.DIRECTION_ALL:In.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),Se(t=this.components).call(t,function(I){n=I.redraw()||n});var S=5;if(n)if(this.redrawCount<S){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}}},{key:"_setDOM",value:function(){var t=this.props,r=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var n=t.root.width-t.left.width-t.right.width;t.center.width=n,t.centerContainer.width=n,t.top.width=n,t.bottom.width=n,r.background.style.height="".concat(t.background.height,"px"),r.backgroundVertical.style.height="".concat(t.background.height,"px"),r.backgroundHorizontal.style.height="".concat(t.centerContainer.height,"px"),r.centerContainer.style.height="".concat(t.centerContainer.height,"px"),r.leftContainer.style.height="".concat(t.leftContainer.height,"px"),r.rightContainer.style.height="".concat(t.rightContainer.height,"px"),r.background.style.width="".concat(t.background.width,"px"),r.backgroundVertical.style.width="".concat(t.centerContainer.width,"px"),r.backgroundHorizontal.style.width="".concat(t.background.width,"px"),r.centerContainer.style.width="".concat(t.center.width,"px"),r.top.style.width="".concat(t.top.width,"px"),r.bottom.style.width="".concat(t.bottom.width,"px"),r.background.style.left="0",r.background.style.top="0",r.backgroundVertical.style.left="".concat(t.left.width+t.border.left,"px"),r.backgroundVertical.style.top="0",r.backgroundHorizontal.style.left="0",r.backgroundHorizontal.style.top="".concat(t.top.height,"px"),r.centerContainer.style.left="".concat(t.left.width,"px"),r.centerContainer.style.top="".concat(t.top.height,"px"),r.leftContainer.style.left="0",r.leftContainer.style.top="".concat(t.top.height,"px"),r.rightContainer.style.left="".concat(t.left.width+t.center.width,"px"),r.rightContainer.style.top="".concat(t.top.height,"px"),r.top.style.left="".concat(t.left.width,"px"),r.top.style.top="0",r.bottom.style.left="".concat(t.left.width,"px"),r.bottom.style.top="".concat(t.top.height+t.centerContainer.height,"px"),r.center.style.left="0",r.left.style.left="0",r.right.style.left="0"}},{key:"setCurrentTime",value:function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)}},{key:"getCurrentTime",value:function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}},{key:"_toTime",value:function(t){return Dy(this,t,this.props.center.width)}},{key:"_toGlobalTime",value:function(t){return Dy(this,t,this.props.root.width)}},{key:"_toScreen",value:function(t){return Iy(this,t,this.props.center.width)}},{key:"_toGlobalScreen",value:function(t){return Iy(this,t,this.props.root.width)}},{key:"_initAutoResize",value:function(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}},{key:"_startAutoResize",value:function(){var t=this;this._stopAutoResize(),this._onResize=function(){if(t.options.autoResize!=!0){t._stopAutoResize();return}if(t.dom.root){var r=t.dom.root.offsetHeight,n=t.dom.root.offsetWidth;(n!=t.props.lastWidth||r!=t.props.lastHeight)&&(t.props.lastWidth=n,t.props.lastHeight=r,t.props.scrollbarWidth=V.getScrollBarWidth(),t.body.emitter.emit("_change"))}},V.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=PJ(this._onResize,1e3)}},{key:"_stopAutoResize",value:function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(V.removeEventListener(window,"resize",this._onResize),this._onResize=null)}},{key:"_onTouch",value:function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}},{key:"_onPinch",value:function(t){this.touch.allowDragging=!1}},{key:"_onDrag",value:function(t){if(!!t&&!!this.touch.allowDragging){var r=t.deltaY,n=this._getScrollTop(),a=this._setScrollTop(this.touch.initialScrollTop+r);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),a!=n&&this.emit("verticalDrag")}}},{key:"_setScrollTop",value:function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop}},{key:"_updateScrollTop",value:function(){var t=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return t!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}},{key:"_getScrollTop",value:function(){return this.props.scrollTop}},{key:"_createConfigurator",value:function(){throw new Error("Cannot invoke abstract method _createConfigurator")}}]),e}();Nf(Zs.prototype);function wZ(e){var s=kZ();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function kZ(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var uk=function(e){Rn(t,e);var s=wZ(t);function t(r,n){var a,o;ot(this,t),o=s.call(this),o.body=r,o.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:En,locales:ua,locale:"en"},o.options=V.extend({},o.defaultOptions),o.setOptions(n),o.options.locales=V.extend({},ua,o.options.locales);var l=o.defaultOptions.locales[o.defaultOptions.locale];return Se(a=tn(o.options.locales)).call(a,function(c){o.options.locales[c]=V.extend({},l,o.options.locales[c])}),o.offset=0,o._create(),o}return lt(t,[{key:"_create",value:function(){var n=document.createElement("div");n.className="vis-current-time",n.style.position="absolute",n.style.top="0px",n.style.height="100%",this.bar=n}},{key:"destroy",value:function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}},{key:"setOptions",value:function(n){n&&V.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,n)}},{key:"redraw",value:function(){if(this.options.showCurrentTime){var n,a,o=this.body.dom.backgroundVertical;this.bar.parentNode!=o&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),o.appendChild(this.bar),this.start());var l=this.options.moment(Kn()+this.offset);this.options.alignCurrentTime&&(l=l.startOf(this.options.alignCurrentTime));var c=this.body.util.toScreen(l),u=this.options.locales[this.options.locale];u||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),u=this.options.locales.en);var d=Pt(n=Pt(a="".concat(u.current," ")).call(a,u.time,": ")).call(n,l.format("dddd, MMMM Do YYYY, H:mm:ss"));d=d.charAt(0).toUpperCase()+d.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(c*-1,"px)"):this.bar.style.transform="translateX(".concat(c,"px)"),this.bar.title=d}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}},{key:"start",value:function(){var n=this;function a(){n.stop();var o=n.body.range.conversion(n.body.domProps.center.width).scale,l=1/o/10;l<30&&(l=30),l>1e3&&(l=1e3),n.redraw(),n.body.emitter.emit("currentTimeTick"),n.currentTimeTimer=wn(a,l)}a()}},{key:"stop",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}},{key:"setCurrentTime",value:function(n){var a=V.convert(n,"Date").valueOf(),o=Kn();this.offset=a-o,this.redraw()}},{key:"getCurrentTime",value:function(){return new Date(Kn()+this.offset)}}]),t}(Ri),dk={exports:{}},SZ=qe,xZ=si.find,Py="find",hk=!0;Py in[]&&Array(1)[Py](function(){hk=!1});SZ({target:"Array",proto:!0,forced:hk},{find:function(s){return xZ(this,s,arguments.length>1?arguments[1]:void 0)}});var TZ=Gt,$Z=TZ("Array").find,CZ=Dt,IZ=$Z,Rd=Array.prototype,DZ=function(e){var s=e.find;return e===Rd||CZ(Rd,e)&&s===Rd.find?IZ:s},EZ=DZ,MZ=EZ;(function(e){e.exports=MZ})(dk);var OZ=Le(dk.exports),fk={exports:{}},PZ=qe,NZ=si.findIndex,Ny="findIndex",pk=!0;Ny in[]&&Array(1)[Ny](function(){pk=!1});PZ({target:"Array",proto:!0,forced:pk},{findIndex:function(s){return NZ(this,s,arguments.length>1?arguments[1]:void 0)}});var LZ=Gt,RZ=LZ("Array").findIndex,AZ=Dt,FZ=RZ,Ad=Array.prototype,VZ=function(e){var s=e.findIndex;return e===Ad||AZ(Ad,e)&&s===Ad.findIndex?FZ:s},zZ=VZ,jZ=zZ;(function(e){e.exports=jZ})(fk);var YZ=Le(fk.exports);function GZ(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=UZ(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function UZ(e,s){var t;if(!!e){if(typeof e=="string")return Ly(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ly(e,s)}}function Ly(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}var Xn=.001;function HZ(e){Kt(e).call(e,function(s,t){return s.data.start-t.data.start})}function WZ(e){Kt(e).call(e,function(s,t){var r="end"in s.data?s.data.end:s.data.start,n="end"in t.data?t.data.end:t.data.start;return r-n})}function Ry(e,s,t,r){var n=kp(e,s.item,!1,function(a){return a.stack&&(t||a.top===null)},function(a){return a.stack},function(a){return s.axis},r);return n===null}function BZ(e,s,t){var r=kp(e,s.item,!1,function(n){return n.stack},function(n){return!0},function(n){return n.baseTop});t.height=r-t.top+.5*s.item.vertical}function qZ(e,s,t,r){for(var n=0;n<e.length;n++)if(e[n].data.subgroup==null)e[n].top=s.item.vertical;else if(e[n].data.subgroup!==void 0&&r){var a=0;for(var o in t)t.hasOwnProperty(o)&&t[o].visible==!0&&t[o].index<t[e[n].data.subgroup].index&&(a+=t[o].height,t[e[n].data.subgroup].top=a);e[n].top=a+.5*s.item.vertical}r||XZ(e,s,t)}function XZ(e,s,t){var r;kp(Kt(r=Of(t)).call(r,function(a,o){return a.index>o.index?1:a.index<o.index?-1:0}),{vertical:0},!0,function(a){return!0},function(a){return!0},function(a){return 0});for(var n=0;n<e.length;n++)e[n].data.subgroup!==void 0&&(e[n].top=t[e[n].data.subgroup].top+.5*s.item.vertical)}function Ay(e,s,t){var r=!1,n=[];for(var a in t)t[a].hasOwnProperty("index")?n[t[a].index]=a:n.push(a);for(var o=0;o<n.length;o++)if(a=n[o],t.hasOwnProperty(a)){r=r||t[a].stack,t[a].top=0;for(var l in t)t[l].visible&&t[a].index>t[l].index&&(t[a].top+=t[l].height);for(var c=e[a],u=0;u<c.length;u++)c[u].data.subgroup!==void 0&&(c[u].top=t[c[u].data.subgroup].top+.5*s.item.vertical,t[a].stack&&(c[u].baseTop=c[u].top));r&&t[a].stack&&BZ(e[a],s,t[a])}}function kp(e,s,t,r,n,a,o){var l=function(N){return N.start},c=function(N){return N.end};if(!t){var u=!!(e[0]&&e[0].options.rtl);u?l=function(N){return N.right}:l=function(N){return N.left},c=function(N){return l(N)+N.width+s.horizontal}}var d=[],f=[],p=null,v=0,g=GZ(e),w;try{for(g.s();!(w=g.n()).done;){var _=w.value;r(_)?d.push(_):n(_)&&function(){var z=l(_);p!==null&&z<p-Xn&&(v=0),p=z,v=Cl(f,function(N){return l(N)-Xn>z},v),Dn(f).call(f,v,0,_),v++}()}}catch(z){g.e(z)}finally{g.f()}p=null;var S=null;v=0;for(var I=0,C=0,$=0,O=function(){var N,Y,R=d.shift();R.top=a(R);var L=l(R),j=c(R);p!==null&&L<p-Xn&&(I=0,C=0,v=0,S=null),p=L,I=Cl(f,function(fe){return L<c(fe)-Xn},I),(S===null||S<j-Xn)&&(C=Cl(f,function(fe){return j<l(fe)-Xn},Math.max(I,C))),S!==null&&S-Xn>j&&(C=QZ(f,function(fe){return j+Xn>=l(fe)},I,horizontalOVerlapEndIndex)+1);for(var B=Kt(N=Ge(Y=kn(f).call(f,I,C)).call(Y,function(fe){return L<c(fe)-Xn&&j-Xn>l(fe)})).call(N,function(fe,oe){return fe.top-oe.top}),G=0;G<B.length;G++){var H=B[G];KZ(R,H,s)&&(R.top=H.top+H.height+s.vertical)}n(R)&&(v=Cl(f,function(fe){return l(fe)-Xn>L},v),Dn(f).call(f,v,0,R),v++);var re=R.top+R.height;if(re>$&&($=re),o&&o())return{v:null}};d.length>0;){var A=O();if(Ke(A)==="object")return A.v}return $}function KZ(e,s,t){return e.top-t.vertical+Xn<s.top+s.height&&e.top+e.height+t.vertical-Xn>s.top}function Cl(e,s,t){var r;t||(t=0);var n=YZ(r=kn(e).call(e,t)).call(r,s);return n===-1?e.length:n+t}function QZ(e,s,t,r){for(t||(t=0),r||(r=e.length),i=r-1;i>=t;i--)if(s(e[i]))return i;return t-1}var JZ="__ungrouped__",ZZ="__background__",Fy={UNGROUPED:JZ,BACKGROUND:ZZ},Rh=function(){function e(s,t,r){var n=this;if(ot(this,e),this.groupId=s,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=r,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(var a in t.subgroupStack)this.subgroupStack[a]=t.subgroupStack[a],this.doInnerStack=this.doInnerStack||t.subgroupStack[a];t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=r.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=function(){n.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",o),this._disposeCallbacks.push(function(){n.itemSet.body.emitter.off("checkRangedItems",o)}),this._create(),this.setData(t)}return lt(e,[{key:"_create",value:function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var r=document.createElement("div");r.className="vis-inner",t.appendChild(r),this.dom.inner=r;var n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}},{key:"setData",value:function(t){if(!this.itemSet.groupTouchParams.isDragging){var r,n;if(t&&t.subgroupVisibility)for(var a in t.subgroupVisibility)this.subgroupVisibility[a]=t.subgroupVisibility[a];if(this.itemSet.options&&this.itemSet.options.groupTemplate){var o;n=ne(o=this.itemSet.options.groupTemplate).call(o,this),r=n(t,this.dom.inner)}else r=t&&t.content;if(r instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(r)}else r instanceof Object&&r.isReactComponent||(r instanceof Object?n(t,this.dom.inner):r!=null?this.dom.inner.innerHTML=V.xss(r):this.dom.inner.innerHTML=V.xss(this.groupId||""));this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?V.removeClassName(this.dom.inner,"vis-hidden"):V.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups?((!this.nestedGroups||this.nestedGroups!=t.nestedGroups)&&(this.nestedGroups=t.nestedGroups),(t.showNested!==void 0||this.showNested===void 0)&&(t.showNested==!1?this.showNested=!1:this.showNested=!0),V.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(V.removeClassName(this.dom.label,"collapsed"),V.addClassName(this.dom.label,"expanded")):(V.removeClassName(this.dom.label,"expanded"),V.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,V.removeClassName(this.dom.label,"collapsed"),V.removeClassName(this.dom.label,"expanded"),V.removeClassName(this.dom.label,"vis-nesting-group")),t&&(t.treeLevel||t.nestedInGroup)?(V.addClassName(this.dom.label,"vis-nested-group"),t.treeLevel?V.addClassName(this.dom.label,"vis-group-level-"+t.treeLevel):V.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):V.addClassName(this.dom.label,"vis-group-level-0");var l=t&&t.className||null;l!=this.className&&(this.className&&(V.removeClassName(this.dom.label,this.className),V.removeClassName(this.dom.foreground,this.className),V.removeClassName(this.dom.background,this.className),V.removeClassName(this.dom.axis,this.className)),V.addClassName(this.dom.label,l),V.addClassName(this.dom.foreground,l),V.addClassName(this.dom.background,l),V.addClassName(this.dom.axis,l),this.className=l),this.style&&(V.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(V.addCssText(this.dom.label,t.style),this.style=t.style)}}},{key:"getLabelWidth",value:function(){return this.props.label.width}},{key:"_didMarkerHeightChange",value:function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var r={},n=0;Se(V).call(V,this.items,function(c,u){if(c.dirty=!0,c.displayed){var d=!0;r[u]=c.redraw(d),n=r[u].length}});var a=n>0;if(a)for(var o=function(u){Se(V).call(V,r,function(d){d[u]()})},l=0;l<n;l++)o(l);return!0}else return!1}},{key:"_calculateGroupSizeAndPosition",value:function(){var t=this.dom.foreground,r=t.offsetTop,n=t.offsetLeft,a=t.offsetWidth;this.top=r,this.right=n,this.width=a}},{key:"_shouldBailItemsRedraw",value:function(){var t=this,r=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:r&&r.timeoutMs,userBailFunction:r&&r.callback,shouldBailStackItems:this.shouldBailStackItems},a=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(Kn()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&this.itemSet.userContinueNotBail==null?n.userBailFunction(function(o){t.itemSet.userContinueNotBail=o,a=!o}):t.itemSet.userContinueNotBail==!1?a=!0:a=!1)}return a}},{key:"_redrawItems",value:function(t,r,n,a){var o=this,l=t||this.stackDirty||this.isVisible&&!r;if(l){var c,u,d,f,p,v,g={byEnd:Ge(c=this.orderedItems.byEnd).call(c,function(j){return!j.isCluster}),byStart:Ge(u=this.orderedItems.byStart).call(u,function(j){return!j.isCluster})},w={byEnd:zt(new Ti(Ge(d=yt(f=this.orderedItems.byEnd).call(f,function(j){return j.cluster})).call(d,function(j){return!!j}))),byStart:zt(new Ti(Ge(p=yt(v=this.orderedItems.byStart).call(v,function(j){return j.cluster})).call(p,function(j){return!!j})))},_=function(){var B,G,H,re=o._updateItemsInRange(g,Ge(B=o.visibleItems).call(B,function(oe){return!oe.isCluster}),a),fe=o._updateClustersInRange(w,Ge(G=o.visibleItems).call(G,function(oe){return oe.isCluster}),a);return Pt(H=[]).call(H,zt(re),zt(fe))},S=function(B){var G={},H=function(oe){var Oe,xe=Ge(Oe=o.visibleItems).call(Oe,function(Ee){return Ee.data.subgroup===oe});G[oe]=B?Kt(xe).call(xe,function(Ee,Z){return B(Ee.data,Z.data)}):xe};for(var re in o.subgroups)H(re);return G};if(typeof this.itemSet.options.order=="function"){var I=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var C=S(this.itemSet.options.order);Ay(C,n,this.subgroups),this.visibleItems=_(),this._updateSubGroupHeights(n)}else{var $,O,A,z;this.visibleItems=_(),this._updateSubGroupHeights(n);var N=Kt($=Ge(O=kn(A=this.visibleItems).call(A)).call(O,function(j){return j.isCluster||!j.isCluster&&!j.cluster})).call($,function(j,B){return I.itemSet.options.order(j.data,B.data)});this.shouldBailStackItems=Ry(N,n,!0,ne(z=this._shouldBailItemsRedraw).call(z,this))}}else if(this.visibleItems=_(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var Y=S();Ay(Y,n,this.subgroups)}else{var R;this.shouldBailStackItems=Ry(this.visibleItems,n,!0,ne(R=this._shouldBailItemsRedraw).call(R,this))}else qZ(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(var L=0;L<this.visibleItems.length;L++)this.visibleItems[L].repositionX(),this.subgroupVisibility[this.visibleItems[L].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[L].data.subgroup]||this.visibleItems[L].hide());this.itemSet.options.cluster&&Se(V).call(V,this.items,function(j){j.cluster&&j.displayed&&j.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}},{key:"_didResize",value:function(t,r){t=V.updateProperty(this,"height",r)||t;var n=this.dom.inner.clientWidth,a=this.dom.inner.clientHeight;return t=V.updateProperty(this.props.label,"width",n)||t,t=V.updateProperty(this.props.label,"height",a)||t,t}},{key:"_applyGroupHeight",value:function(t){this.dom.background.style.height="".concat(t,"px"),this.dom.foreground.style.height="".concat(t,"px"),this.dom.label.style.height="".concat(t,"px")}},{key:"_updateItemsVerticalPosition",value:function(t){for(var r=0,n=this.visibleItems.length;r<n;r++){var a=this.visibleItems[r];a.repositionY(t),!this.isVisible&&this.groupId!=Fy.BACKGROUND&&a.displayed&&a.hide()}}},{key:"redraw",value:function(t,r,n,a){var o=this,l,c,u,d,f,p=!1,v=this.isVisible,g,w=[function(){n=o._didMarkerHeightChange.call(o)||n},ne(l=this._updateSubGroupHeights).call(l,this,r),ne(c=this._calculateGroupSizeAndPosition).call(c,this),function(){var S;o.isVisible=ne(S=o._isGroupVisible).call(S,o)(t,r)},function(){var S;ne(S=o._redrawItems).call(S,o)(n,v,r,t)},ne(u=this._updateSubgroupsSizes).call(u,this),function(){var S;g=ne(S=o._calculateHeight).call(S,o)(r)},ne(d=this._calculateGroupSizeAndPosition).call(d,this),function(){var S;p=ne(S=o._didResize).call(S,o)(p,g)},function(){var S;ne(S=o._applyGroupHeight).call(S,o)(g)},function(){var S;ne(S=o._updateItemsVerticalPosition).call(S,o)(r)},ne(f=function(){return!o.isVisible&&o.height&&(p=!1),p}).call(f,this)];if(a)return w;var _;return Se(w).call(w,function(S){_=S()}),_}},{key:"_updateSubGroupHeights",value:function(t){var r=this;if(tn(this.subgroups).length>0){var n=this;this._resetSubgroups(),Se(V).call(V,this.visibleItems,function(a){a.data.subgroup!==void 0&&(n.subgroups[a.data.subgroup].height=Math.max(n.subgroups[a.data.subgroup].height,a.height+t.item.vertical),n.subgroups[a.data.subgroup].visible=typeof r.subgroupVisibility[a.data.subgroup]=="undefined"?!0:Boolean(r.subgroupVisibility[a.data.subgroup]))})}}},{key:"_isGroupVisible",value:function(t,r){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+r.axis&&this.top+this.height+r.axis>=-t.body.domProps.scrollTop}},{key:"_calculateHeight",value:function(t){var r,n;if(this.heightMode==="fixed"?n=V.toArray(this.items):n=this.visibleItems,n.length>0){var a=n[0].top,o=n[0].top+n[0].height;if(Se(V).call(V,n,function(c){a=Math.min(a,c.top),o=Math.max(o,c.top+c.height)}),a>t.axis){var l=a-t.axis;o-=l,Se(V).call(V,n,function(c){c.top-=l})}r=Math.ceil(o+t.item.vertical/2),this.heightMode!=="fitItems"&&(r=Math.max(r,this.props.label.height))}else r=this.props.label.height;return r}},{key:"show",value:function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}},{key:"hide",value:function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var r=this.dom.foreground;r.parentNode&&r.parentNode.removeChild(r);var n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);var a=this.dom.axis;a.parentNode&&a.parentNode.removeChild(a)}},{key:"add",value:function(t){var r;if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,t.data.subgroup!==void 0&&(this._addToSubgroup(t),this.orderSubgroups()),!Ci(r=this.visibleItems).call(r,t)){var n=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,n)}}},{key:"_addToSubgroup",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.data.subgroup;r!=null&&this.subgroups[r]===void 0&&(this.subgroups[r]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[r]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[r].start)&&(this.subgroups[r].start=t.data.start);var n=t.data.end||t.data.start;new Date(n)>new Date(this.subgroups[r].end)&&(this.subgroups[r].end=n),this.subgroups[r].items.push(t)}},{key:"_updateSubgroupsSizes",value:function(){var t=this;if(t.subgroups){var r=function(o){var l,c=t.subgroups[o].items[0].data.end||t.subgroups[o].items[0].data.start,u=t.subgroups[o].items[0].data.start,d=c-1;Se(l=t.subgroups[o].items).call(l,function(f){new Date(f.data.start)<new Date(u)&&(u=f.data.start);var p=f.data.end||f.data.start;new Date(p)>new Date(d)&&(d=p)}),t.subgroups[o].start=u,t.subgroups[o].end=new Date(d-1)};for(var n in t.subgroups)r(n)}}},{key:"orderSubgroups",value:function(){if(this.subgroupOrderer!==void 0){var t=[];if(typeof this.subgroupOrderer=="string"){for(var r in this.subgroups)t.push({subgroup:r,sortField:this.subgroups[r].items[0].data[this.subgroupOrderer]});Kt(t).call(t,function(o,l){return o.sortField-l.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var n in this.subgroups)t.push(this.subgroups[n].items[0].data);Kt(t).call(t,this.subgroupOrderer)}if(t.length>0)for(var a=0;a<t.length;a++)this.subgroups[t[a].subgroup].index=a}}},{key:"_resetSubgroups",value:function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)}},{key:"remove",value:function(t){var r,n;delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var a=$t(r=this.visibleItems).call(r,t);a!=-1&&Dn(n=this.visibleItems).call(n,a,1),t.data.subgroup!==void 0&&(this._removeFromSubgroup(t),this.orderSubgroups())}},{key:"_removeFromSubgroup",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.data.subgroup;if(r!=null){var n=this.subgroups[r];if(n){var a,o=$t(a=n.items).call(a,t);if(o>=0){var l;Dn(l=n.items).call(l,o,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[r]}}}}},{key:"removeFromDataSet",value:function(t){this.itemSet.removeItem(t.id)}},{key:"order",value:function(){for(var t=V.toArray(this.items),r=[],n=[],a=0;a<t.length;a++)t[a].data.end!==void 0&&n.push(t[a]),r.push(t[a]);this.orderedItems={byStart:r,byEnd:n},HZ(this.orderedItems.byStart),WZ(this.orderedItems.byEnd)}},{key:"_updateItemsInRange",value:function(t,r,n){var a=[],o={};if(!this.isVisible&&this.groupId!=Fy.BACKGROUND){for(var l=0;l<r.length;l++){var c=r[l];c.displayed&&c.hide()}return a}var u=(n.end-n.start)/4,d=n.start-u,f=n.end+u,p=function(j){return j<d?-1:j<=f?0:1},v=function(j){var B=j.start,G=j.end;return G<d?-1:B<=f?0:1};if(r.length>0)for(var g=0;g<r.length;g++)this._checkIfVisibleWithReference(r[g],a,o,n);var w=V.binarySearchCustom(t.byStart,p,"data","start");if(this._traceVisible(w,t.byStart,a,o,function(L){return L.data.start<d||L.data.start>f}),this.checkRangedItems==!0){this.checkRangedItems=!1;for(var _=0;_<t.byEnd.length;_++)this._checkIfVisibleWithReference(t.byEnd[_],a,o,n)}else{var S=V.binarySearchCustom(t.byEnd,v,"data");this._traceVisible(S,t.byEnd,a,o,function(L){return L.data.end<d||L.data.start>f})}for(var I={},C=0,$=0;$<a.length;$++){var O=a[$];if(!O.displayed){var A=!0;I[$]=O.redraw(A),C=I[$].length}}var z=C>0;if(z)for(var N=function(j){Se(V).call(V,I,function(B){B[j]()})},Y=0;Y<C;Y++)N(Y);for(var R=0;R<a.length;R++)a[R].repositionX();return a}},{key:"_traceVisible",value:function(t,r,n,a,o){if(t!=-1){for(var l=t;l>=0;l--){var c=r[l];if(o(c))break;!(c.isCluster&&!c.hasItems())&&!c.cluster&&a[c.id]===void 0&&(a[c.id]=!0,n.push(c))}for(var u=t+1;u<r.length;u++){var d=r[u];if(o(d))break;!(d.isCluster&&!d.hasItems())&&!d.cluster&&a[d.id]===void 0&&(a[d.id]=!0,n.push(d))}}}},{key:"_checkIfVisible",value:function(t,r,n){t.isVisible(n)?(t.displayed||t.show(),t.repositionX(),r.push(t)):t.displayed&&t.hide()}},{key:"_checkIfVisibleWithReference",value:function(t,r,n,a){t.isVisible(a)?n[t.id]===void 0&&(n[t.id]=!0,r.push(t)):t.displayed&&t.hide()}},{key:"_updateClustersInRange",value:function(t,r,n){var a=[],o={};if(r.length>0)for(var l=0;l<r.length;l++)this._checkIfVisibleWithReference(r[l],a,o,n);for(var c=0;c<t.byStart.length;c++)this._checkIfVisibleWithReference(t.byStart[c],a,o,n);for(var u=0;u<t.byEnd.length;u++)this._checkIfVisibleWithReference(t.byEnd[u],a,o,n);for(var d={},f=0,p=0;p<a.length;p++){var v=a[p];if(!v.displayed){var g=!0;d[p]=v.redraw(g),f=d[p].length}}var w=f>0;if(w)for(var _=0;_<f;_++)Se(V).call(V,d,function(I){I[_]()});for(var S=0;S<a.length;S++)a[S].repositionX();return a}},{key:"changeSubgroup",value:function(t,r,n){this._removeFromSubgroup(t,r),this._addToSubgroup(t,n),this.orderSubgroups()}},{key:"dispose",value:function(){this.hide();for(var t;t=this._disposeCallbacks.pop();)t()}}]),e}();function eee(e){var s=tee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function tee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var vk=function(e){Rn(t,e);var s=eee(t);function t(r,n,a){var o;return ot(this,t),o=s.call(this,r,n,a),o.width=0,o.height=0,o.top=0,o.left=0,o}return lt(t,[{key:"redraw",value:function(n,a,o){var l=!1;this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var c=0,u=this.visibleItems.length;c<u;c++){var d=this.visibleItems[c];d.repositionY(a)}return l}},{key:"show",value:function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}]),t}(Rh),nee=`
.vis-item {
  position: absolute;
  color: #1A1A1A;
  border-color: #97B0F8;
  border-width: 1px;
  background-color: #D5DDF6;
  display: inline-block;
  z-index: 1;
  /*overflow: hidden;*/
}

.vis-item.vis-selected {
  border-color: #FFC200;
  background-color: #FFF785;

  /* z-index must be higher than the z-index of custom time bar and current time bar */
  z-index: 2;
}

.vis-editable.vis-selected {
  cursor: move;
}

.vis-item.vis-point.vis-selected {
  background-color: #FFF785;
}

.vis-item.vis-box {
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-point {
  background: none;
}

.vis-item.vis-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}

.vis-item.vis-range {
  border-style: solid;
  border-radius: 2px;
  box-sizing: border-box;
}

.vis-item.vis-background {
  border: none;
  background-color: rgba(213, 221, 246, 0.4);
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

.vis-item .vis-item-overflow {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

.vis-item-visible-frame {
  white-space: nowrap;
}

.vis-item.vis-range .vis-item-content {
  position: relative;
  display: inline-block;
}

.vis-item.vis-background .vis-item-content {
  position: absolute;
  display: inline-block;
}

.vis-item.vis-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item .vis-item-content {
  white-space: nowrap;
  box-sizing: border-box;
  padding: 5px;
}

.vis-item .vis-onUpdateTime-tooltip {
  position: absolute;
  background: #4f81bd;
  color: white;
  width: 200px;
  text-align: center;
  white-space: nowrap;
  padding: 5px;
  border-radius: 1px;
  transition: 0.4s;
  -o-transition: 0.4s;
  -moz-transition: 0.4s;
  -webkit-transition: 0.4s;
}

.vis-item .vis-delete, .vis-item .vis-delete-rtl {
  position: absolute;
  top: 0px;
  width: 24px;
  height: 24px;
  box-sizing: border-box;
  padding: 0px 5px;
  cursor: pointer;

  -webkit-transition: background 0.2s linear;
  -moz-transition: background 0.2s linear;
  -ms-transition: background 0.2s linear;
  -o-transition: background 0.2s linear;
  transition: background 0.2s linear;
}

.vis-item .vis-delete {
  right: -24px;
}

.vis-item .vis-delete-rtl {
  left: -24px;
}

.vis-item .vis-delete:after, .vis-item .vis-delete-rtl:after {
  content: "\\00D7"; /* MULTIPLICATION SIGN */
  color: red;
  font-family: arial, sans-serif;
  font-size: 22px;
  font-weight: bold;

  -webkit-transition: color 0.2s linear;
  -moz-transition: color 0.2s linear;
  -ms-transition: color 0.2s linear;
  -o-transition: color 0.2s linear;
  transition: color 0.2s linear;
}

.vis-item .vis-delete:hover, .vis-item .vis-delete-rtl:hover {
  background: red;
}

.vis-item .vis-delete:hover:after, .vis-item .vis-delete-rtl:hover:after {
  color: white;
}

.vis-item .vis-drag-center {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0px;
  cursor: move;
}

.vis-item.vis-range .vis-drag-left {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  left: -4px;

  cursor: w-resize;
}

.vis-item.vis-range .vis-drag-right {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  right: -4px;

  cursor: e-resize;
}

.vis-range.vis-item.vis-readonly .vis-drag-left,
.vis-range.vis-item.vis-readonly .vis-drag-right {
  cursor: auto;
}

.vis-item.vis-cluster {
  vertical-align: center;
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-cluster-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item.vis-cluster-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}`;An(nee);function ree(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=iee(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function iee(e,s){var t;if(!!e){if(typeof e=="string")return Vy(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vy(e,s)}}function Vy(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}var Ca=function(){function e(s,t,r){var n,a=this;ot(this,e),this.id=null,this.parent=null,this.data=s,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:ua,locale:"en"},this.options=V.extend({},this.defaultOptions,r),this.options.locales=V.extend({},ua,this.options.locales);var o=this.defaultOptions.locales[this.defaultOptions.locale];Se(n=tn(this.options.locales)).call(n,function(l){a.options.locales[l]=V.extend({},o,a.options.locales[l])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=r&&r.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(s),this.editable=null,this._updateEditStatus()}return lt(e,[{key:"select",value:function(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}},{key:"unselect",value:function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}},{key:"setData",value:function(t){var r=t.group!=null&&this.data.group!=t.group;r&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,t.group),this.setSelectability(t),this.parent&&(this.parent.stackDirty=!0);var n=t.subgroup!=null&&this.data.subgroup!=t.subgroup;n&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}},{key:"setSelectability",value:function(t){t&&(this.selectable=typeof t.selectable=="undefined"?!0:Boolean(t.selectable))}},{key:"setParent",value:function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t}},{key:"isVisible",value:function(t){return!1}},{key:"show",value:function(){return!1}},{key:"hide",value:function(){return!1}},{key:"redraw",value:function(){}},{key:"repositionX",value:function(){}},{key:"repositionY",value:function(){}},{key:"_repaintDragCenter",value:function(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var t,r,n=this,a=document.createElement("div");a.className="vis-drag-center",a.dragCenterItem=this,this.hammerDragCenter=new In(a),this.hammerDragCenter.on("tap",function(o){n.parent.itemSet.body.emitter.emit("click",{event:o,item:n.id})}),this.hammerDragCenter.on("doubletap",function(o){o.stopPropagation(),n.parent.itemSet._onUpdateItem(n),n.parent.itemSet.body.emitter.emit("doubleClick",{event:o,item:n.id})}),this.hammerDragCenter.on("panstart",function(o){o.stopPropagation(),n.parent.itemSet._onDragStart(o)}),this.hammerDragCenter.on("panmove",ne(t=n.parent.itemSet._onDrag).call(t,n.parent.itemSet)),this.hammerDragCenter.on("panend",ne(r=n.parent.itemSet._onDragEnd).call(r,n.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(a,this.dom.dragLeft):this.dom.box.appendChild(a):this.dom.point&&this.dom.point.appendChild(a),this.dom.dragCenter=a}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}},{key:"_repaintDeleteButton",value:function(t){var r=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&r&&!this.dom.deleteButton){var n=this,a=document.createElement("div");this.options.rtl?a.className="vis-delete-rtl":a.className="vis-delete";var o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en),a.title=o.deleteSelected,this.hammerDeleteButton=new In(a).on("tap",function(l){l.stopPropagation(),n.parent.removeFromDataSet(n)}),t.appendChild(a),this.dom.deleteButton=a}else(!this.selected||!r)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}},{key:"_repaintOnItemUpdateTimeTooltip",value:function(t){if(!!this.options.tooltipOnItemUpdateTime){var r=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&r&&!this.dom.onItemUpdateTimeTooltip){var n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",t.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";var a=50,o=this.parent.itemSet.body.domProps.scrollTop,l;this.options.orientation.item=="top"?l=this.top:l=this.parent.height-this.top-this.height;var c=l+this.parent.top-a<-o;c?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));var u,d;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var f;d=ne(f=this.options.tooltipOnItemUpdateTime.template).call(f,this),u=d(this.data)}else u="start: ".concat(En(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(u+="<br> end: ".concat(En(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=V.xss(u)}}}},{key:"_getItemData",value:function(){return this.parent.itemSet.itemsData.get(this.id)}},{key:"_updateContents",value:function(t){var r,n,a,o,l,c=this._getItemData(),u=this.dom.box||this.dom.point,d=u.getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var f;l=ne(f=this.options.visibleFrameTemplate).call(f,this),o=V.xss(l(c,d))}else o="";if(d){if(o instanceof Object&&!(o instanceof Element))l(c,d);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),n){if(o instanceof Element)d.innerHTML="",d.appendChild(o);else if(o!=null)d.innerHTML=V.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=o}}if(this.options.template){var p;a=ne(p=this.options.template).call(p,this),r=a(c,t,this.data)}else r=this.data.content;if(r instanceof Object&&!(r instanceof Element))a(c,t);else if(n=this._contentToString(this.content)!==this._contentToString(r),n){if(r instanceof Element)t.innerHTML="",t.appendChild(r);else if(r!=null)t.innerHTML=V.xss(r);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=r}}},{key:"_updateDataAttributes",value:function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var r=[];if(Qe(this.options.dataAttributes))r=this.options.dataAttributes;else if(this.options.dataAttributes=="all")r=tn(this.data);else return;var n=ree(r),a;try{for(n.s();!(a=n.n()).done;){var o=a.value,l=this.data[o];l!=null?t.setAttribute("data-".concat(o),l):t.removeAttribute("data-".concat(o))}}catch(c){n.e(c)}finally{n.f()}}}},{key:"_updateStyle",value:function(t){this.style&&(V.removeCssText(t,this.style),this.style=null),this.data.style&&(V.addCssText(t,this.data.style),this.style=this.data.style)}},{key:"_contentToString",value:function(t){return typeof t=="string"?t:t&&"outerHTML"in t?t.outerHTML:t}},{key:"_updateEditStatus",value:function(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:Ke(this.options.editable)==="object"&&(this.editable={},V.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:Ke(this.data.editable)==="object"&&(this.editable={},V.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}},{key:"getWidthLeft",value:function(){return 0}},{key:"getWidthRight",value:function(){return 0}},{key:"getTitle",value:function(){if(this.options.tooltip&&this.options.tooltip.template){var t,r=ne(t=this.options.tooltip.template).call(t,this);return r(this._getItemData(),this.data)}return this.data.title}}]),e}();Ca.prototype.stack=!0;function see(e){var s=aee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function aee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var oee=function(e){Rn(t,e);var s=see(t);function t(r,n,a){var o;if(ot(this,t),o=s.call(this,r,n,a),o.props={dot:{width:0,height:0},line:{width:0,height:0}},r&&r.start==null)throw new Error('Property "start" missing in item '.concat(r));return o}return lt(t,[{key:"isVisible",value:function(n){if(this.cluster)return!1;var a,o=this.data.align||this.options.align,l=this.width*n.getMillisecondsPerPixel();return o=="right"?a=this.data.start.getTime()>n.start&&this.data.start.getTime()-l<n.end:o=="left"?a=this.data.start.getTime()+l>n.start&&this.data.start.getTime()<n.end:a=this.data.start.getTime()+l/2>n.start&&this.data.start.getTime()-l/2<n.end,a}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var a=this.parent.dom.background;if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(a),this.dom.line.className="vis-item vis-line".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=n.dot.height,this.props.dot.width=n.dot.width,this.props.line.width=n.line.width,this.width=n.box.width,this.height=n.box.height,this.options.rtl?this.dom.box.style.right=n.previous.right:this.dom.box.style.left=n.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}},{key:"redraw",value:function(n){var a,o,l,c=this,u,d,f=[ne(a=this._createDomElement).call(a,this),ne(o=this._appendDomElement).call(o,this),ne(l=this._updateDirtyDomComponents).call(l,this),function(){c.dirty&&(d=c._getDomComponentsSizes())},function(){if(c.dirty){var v;ne(v=c._updateDomComponentsSizes).call(v,c)(d)}},ne(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var p;return Se(f).call(f,function(v){p=v()}),p}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){if(this.displayed){var n=this.dom;n.box.remove?n.box.remove():n.box.parentNode&&n.box.parentNode.removeChild(n.box),n.line.remove?n.line.remove():n.line.parentNode&&n.line.parentNode.removeChild(n.line),n.dot.remove?n.dot.remove():n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot),this.displayed=!1}}},{key:"repositionXY",value:function(){var n=this.options.rtl,a=function(l,c,u){var d,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(c===void 0&&u===void 0)){var p=f?c*-1:c;if(u===void 0){l.style.transform="translateX(".concat(p,"px)");return}if(c===void 0){l.style.transform="translateY(".concat(u,"px)");return}l.style.transform=Pt(d="translate(".concat(p,"px, ")).call(d,u,"px)")}};a(this.dom.box,this.boxX,this.boxY,n),a(this.dom.dot,this.dotX,this.dotY,n),a(this.dom.line,this.lineX,this.lineY,n)}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start),a=this.data.align===void 0?this.options.align:this.data.align,o=this.props.line.width,l=this.props.dot.width;a=="right"?(this.boxX=n-this.width,this.lineX=n-o,this.dotX=n-o/2-l/2):a=="left"?(this.boxX=n,this.lineX=n,this.dotX=n+o/2-l/2):(this.boxX=n-this.width/2,this.lineX=this.options.rtl?n-o:n-o/2,this.dotX=n-l/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.line.style;if(n=="top"){var o=this.parent.top+this.top+1;this.boxY=this.top||0,a.height="".concat(o,"px"),a.bottom="",a.top="0"}else{var l=this.parent.itemSet.props.height,c=l-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),a.height="".concat(c,"px"),a.top="",a.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}}]),t}(Ca);function lee(e){var s=cee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function cee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var uee=function(e){Rn(t,e);var s=lee(t);function t(r,n,a){var o;if(ot(this,t),o=s.call(this,r,n,a),o.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},r&&r.start==null)throw new Error('Property "start" missing in item '.concat(r));return o}return lt(t,[{key:"isVisible",value:function(n){if(this.cluster)return!1;var a=this.width*n.getMillisecondsPerPixel();return this.data.start.getTime()+a>n.start&&this.data.start<n.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.point)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.dot.width=n.dot.width,this.props.dot.height=n.dot.height,this.props.content.height=n.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=n.point.width,this.height=n.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");var a=this.props.dot.width,o=this.options.rtl?a/2:a/2*-1;this.dom.dot.style.transform="translateX(".concat(o,"px"),this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}},{key:"redraw",value:function(n){var a,o,l,c=this,u,d,f=[ne(a=this._createDomElement).call(a,this),ne(o=this._appendDomElement).call(o,this),ne(l=this._updateDirtyDomComponents).call(l,this),function(){c.dirty&&(d=c._getDomComponentsSizes())},function(){if(c.dirty){var v;ne(v=c._updateDomComponentsSizes).call(v,c)(d)}},ne(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var p;return Se(f).call(f,function(v){p=v()}),p}},{key:"repositionXY",value:function(){var n=this.options.rtl,a=function(l,c,u){var d,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(c===void 0&&u===void 0)){var p=f?c*-1:c;if(u===void 0){l.style.transform="translateX(".concat(p,"px)");return}if(c===void 0){l.style.transform="translateY(".concat(u,"px)");return}l.style.transform=Pt(d="translate(".concat(p,"px, ")).call(d,u,"px)")}};a(this.dom.point,this.pointX,this.pointY,n)}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start);this.pointX=n,this.options.rtl?this.right=n-this.props.dot.width:this.left=n-this.props.dot.width,this.repositionXY()}},{key:"repositionY",value:function(){var n=this.options.orientation.item;n=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.props.dot.width}},{key:"getWidthRight",value:function(){return this.props.dot.width}}]),t}(Ca);function dee(e){var s=hee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function hee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var us=function(e){Rn(t,e);var s=dee(t);function t(r,n,a){var o;if(ot(this,t),o=s.call(this,r,n,a),o.props={content:{width:0}},o.overflow=!1,r){if(r.start==null)throw new Error('Property "start" missing in item '.concat(r.id));if(r.end==null)throw new Error('Property "end" missing in item '.concat(r.id))}return o}return lt(t,[{key:"isVisible",value:function(n){return this.cluster?!1:this.data.start<n.end&&this.data.end>n.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+a,this.dom.content.style.maxWidth="none"}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.content.width=n.content.width,this.height=n.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}},{key:"redraw",value:function(n){var a,o,l,c=this,u,d,f=[ne(a=this._createDomElement).call(a,this),ne(o=this._appendDomElement).call(o,this),ne(l=this._updateDirtyDomComponents).call(l,this),function(){if(c.dirty){var v;d=ne(v=c._getDomComponentsSizes).call(v,c)()}},function(){if(c.dirty){var v;ne(v=c._updateDomComponentsSizes).call(v,c)(d)}},ne(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var p;return Se(f).call(f,function(v){p=v()}),p}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){if(this.displayed){var n=this.dom.box;n.parentNode&&n.parentNode.removeChild(n),this.displayed=!1}}},{key:"repositionX",value:function(n){var a=this.parent.width,o=this.conversion.toScreen(this.data.start),l=this.conversion.toScreen(this.data.end),c=this.data.align===void 0?this.options.align:this.data.align,u,d;this.data.limitSize!==!1&&(n===void 0||n===!0)&&(o<-a&&(o=-a),l>2*a&&(l=2*a));var f=Math.max(Math.round((l-o)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=o:this.left=o,this.width=f+this.props.content.width,d=this.props.content.width):(this.options.rtl?this.right=o:this.left=o,this.width=f,d=Math.min(l-o,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(f,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),c){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){var p=Math.max(f-d,0)*-1;this.dom.content.style.transform="translateX(".concat(p,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(f-d,0),"px)");break;case"center":if(this.options.rtl){var v=Math.max((f-d)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(v,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((f-d)/2,0),"px)");break;default:if(this.overflow?l>0?u=Math.max(-o,0):u=-d:o<0?u=-o:u=0,this.options.rtl){var g=u*-1;this.dom.content.style.transform="translateX(".concat(g,"px)")}else this.dom.content.style.transform="translateX(".concat(u,"px)")}}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.box;n=="top"?a.style.top="".concat(this.top,"px"):a.style.top="".concat(this.parent.height-this.top-this.height,"px")}},{key:"_repaintDragLeft",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){var n=document.createElement("div");n.className="vis-drag-left",n.dragLeftItem=this,this.dom.box.appendChild(n),this.dom.dragLeft=n}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}},{key:"_repaintDragRight",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){var n=document.createElement("div");n.className="vis-drag-right",n.dragRightItem=this,this.dom.box.appendChild(n),this.dom.dragRight=n}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}]),t}(Ca);us.prototype.baseClassName="vis-item vis-range";function fee(e){var s=pee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function pee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var xs=function(e){Rn(t,e);var s=fee(t);function t(r,n,a){var o;if(ot(this,t),o=s.call(this,r,n,a),o.props={content:{width:0}},o.overflow=!1,r){if(r.start==null)throw new Error('Property "start" missing in item '.concat(r.id));if(r.end==null)throw new Error('Property "end" missing in item '.concat(r.id))}return o}return lt(t,[{key:"isVisible",value:function(n){return this.data.start<n.end&&this.data.end>n.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.background;if(!n)throw new Error("Cannot redraw item: parent has no background container element");n.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+n}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.content.width=n.content.width,this.height=0,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){}},{key:"redraw",value:function(n){var a,o,l,c=this,u,d,f=[ne(a=this._createDomElement).call(a,this),ne(o=this._appendDomElement).call(o,this),ne(l=this._updateDirtyDomComponents).call(l,this),function(){if(c.dirty){var v;d=ne(v=c._getDomComponentsSizes).call(v,c)()}},function(){if(c.dirty){var v;ne(v=c._updateDomComponentsSizes).call(v,c)(d)}},ne(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var p;return Se(f).call(f,function(v){p=v()}),p}},{key:"repositionY",value:function(n){var a,o=this.options.orientation.item;if(this.data.subgroup!==void 0){var l=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[l].height,"px"),o=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[l].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[l].top-this.parent.subgroups[l].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof vk?(a=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=o=="bottom"?"0":"",this.dom.box.style.top=o=="top"?"0":""):(a=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(a,"px")}}]),t}(Ca);xs.prototype.baseClassName="vis-item vis-background";xs.prototype.stack=!1;xs.prototype.show=us.prototype.show;xs.prototype.hide=us.prototype.hide;xs.prototype.repositionX=us.prototype.repositionX;var vee=`div.vis-tooltip {
  position: absolute;
  visibility: hidden;
  padding: 5px;
  white-space: nowrap;

  font-family: verdana;
  font-size:14px;
  color:#000000;
  background-color: #f5f4ed;

  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #808074;

  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
  pointer-events: none;

  z-index: 5;
}
`;An(vee);var mee=function(){function e(s,t){ot(this,e),this.container=s,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return lt(e,[{key:"setPosition",value:function(t,r){this.x=Qn(t),this.y=Qn(r)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=V.xss(t)}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var r=this.frame.clientHeight,n=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,l=0,c=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){var u=!1,d=!0;this.overflowMethod=="flip"&&(this.y-r<this.padding&&(d=!1),this.x+n>o-this.padding&&(u=!0)),u?l=this.x-n:l=this.x,d?c=this.y-r:c=this.y}else c=this.y-r,c+r+this.padding>a&&(c=a-r-this.padding),c<this.padding&&(c=this.padding),l=this.x,l+n+this.padding>o&&(l=o-n-this.padding),l<this.padding&&(l=this.padding);this.frame.style.left=l+"px",this.frame.style.top=c+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),mk={exports:{}},gee=qe,yee=si.every,_ee=Sa,bee=_ee("every");gee({target:"Array",proto:!0,forced:!bee},{every:function(s){return yee(this,s,arguments.length>1?arguments[1]:void 0)}});var wee=Gt,kee=wee("Array").every,See=Dt,xee=kee,Fd=Array.prototype,Tee=function(e){var s=e.every;return e===Fd||See(Fd,e)&&s===Fd.every?xee:s},$ee=Tee,Cee=$ee;(function(e){e.exports=Cee})(mk);var Iee=Le(mk.exports);function zy(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=Dee(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function Dee(e,s){var t;if(!!e){if(typeof e=="string")return jy(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jy(e,s)}}function jy(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}function Eee(e){var s=Mee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function Mee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var gk=function(e){Rn(t,e);var s=Eee(t);function t(r,n,a){var o;ot(this,t);var l=Qr({},{fitOnDoubleClick:!0},a,{editable:!1});if(o=s.call(this,r,n,l),o.props={content:{width:0,height:0}},!r||r.uiItems==null)throw new Error('Property "uiItems" missing in item '+r.id);return o.id=ns(),o.group=r.group,o._setupRange(),o.emitter=o.data.eventEmitter,o.range=o.data.range,o.attached=!1,o.isCluster=!0,o.data.isCluster=!0,o}return lt(t,[{key:"hasItems",value:function(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}},{key:"setUiItems",value:function(n){this.detach(),this.data.uiItems=n,this._setupRange(),this.attach()}},{key:"isVisible",value:function(n){var a=this.data.end?this.data.end-this.data.start:0,o=this.width*n.getMillisecondsPerPixel(),l=Math.max(this.data.start.getTime()+a,this.data.start.getTime()+o);return this.data.start<n.end&&l>n.start&&this.hasItems()}},{key:"getData",value:function(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}},{key:"redraw",value:function(n){var a,o,l,c,u,d,f,p=[ne(a=this._createDomElement).call(a,this),ne(o=this._appendDomElement).call(o,this),ne(l=this._updateDirtyDomComponents).call(l,this),ne(c=function(){this.dirty&&(f=this._getDomComponentsSizes())}).call(c,this),ne(u=function(){if(this.dirty){var w;ne(w=this._updateDomComponentsSizes).call(w,this)(f)}}).call(u,this),ne(d=this._repaintDomAdditionals).call(d,this)];if(n)return p;var v;return Se(p).call(p,function(g){v=g()}),v}},{key:"show",value:function(){this.displayed||this.redraw()}},{key:"hide",value:function(){if(this.displayed){var n=this.dom;n.box.parentNode&&n.box.parentNode.removeChild(n.box),this.options.showStipes&&(n.line.parentNode&&n.line.parentNode.removeChild(n.line),n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot)),this.displayed=!1}}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start),a=this.data.end?this.conversion.toScreen(this.data.end):0;if(a)this.repositionXWithRanges(n,a);else{var o=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(n,o)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(n,a))}},{key:"repositionStype",value:function(n,a){this.dom.line.style.display="block",this.dom.dot.style.display="block";var o=this.dom.line.offsetWidth,l=this.dom.dot.offsetWidth;if(a){var c=o+n+(a-n)/2,u=c-l/2,d=this.options.rtl?c*-1:c,f=this.options.rtl?u*-1:u;this.dom.line.style.transform="translateX(".concat(d,"px)"),this.dom.dot.style.transform="translateX(".concat(f,"px)")}else{var p=this.options.rtl?n*-1:n,v=this.options.rtl?(n-l/2)*-1:n-l/2;this.dom.line.style.transform="translateX(".concat(p,"px)"),this.dom.dot.style.transform="translateX(".concat(v,"px)")}}},{key:"repositionXWithoutRanges",value:function(n,a){a=="right"?this.options.rtl?(this.right=n-this.width,this.dom.box.style.right=this.right+"px"):(this.left=n-this.width,this.dom.box.style.left=this.left+"px"):a=="left"?this.options.rtl?(this.right=n,this.dom.box.style.right=this.right+"px"):(this.left=n,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=n-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=n-this.width/2,this.dom.box.style.left=this.left+"px")}},{key:"repositionXWithRanges",value:function(n,a){var o=Math.round(Math.max(a-n+.5,1));this.options.rtl?this.right=n:this.left=n,this.width=Math.max(o,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=o+"px"}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.box;if(n=="top"?a.style.top=(this.top||0)+"px":a.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(n=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var o=this.parent.itemSet.props.height,l=o-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=o-l+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}},{key:"move",value:function(){this.repositionX(),this.repositionY()}},{key:"attach",value:function(){var n,a=zy(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var l=o.value;l.cluster=this}}catch(c){a.e(c)}finally{a.f()}this.data.items=yt(n=this.data.uiItems).call(n,function(c){return c.data}),this.attached=!0,this.dirty=!0}},{key:"detach",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!!this.hasItems()){var a=zy(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var l=o.value;delete l.cluster}}catch(c){a.e(c)}finally{a.f()}this.attached=!1,n&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}},{key:"_onDoubleClick",value:function(){this._fit()}},{key:"_setupRange",value:function(){var n,a,o,l=yt(n=this.data.uiItems).call(n,function(d){return{start:d.data.start.valueOf(),end:d.data.end?d.data.end.valueOf():d.data.start.valueOf()}});this.data.min=Math.min.apply(Math,zt(yt(l).call(l,function(d){return Math.min(d.start,d.end||d.start)}))),this.data.max=Math.max.apply(Math,zt(yt(l).call(l,function(d){return Math.max(d.start,d.end||d.start)})));var c=yt(a=this.data.uiItems).call(a,function(d){return d.center}),u=Gc(c).call(c,function(d,f){return d+f},0)/this.data.uiItems.length;fp(o=this.data.uiItems).call(o,function(d){return d.data.end})?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(u),this.data.end=null)}},{key:"_getUiItems",value:function(){var n=this;if(this.data.uiItems&&this.data.uiItems.length){var a;return Ge(a=this.data.uiItems).call(a,function(o){return o.cluster===n})}return[]}},{key:"_createDomElement",value:function(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var n;this.dom.box.ondblclick=ne(n=t.prototype._onDoubleClick).call(n,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}var a=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+n,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}},{key:"_getDomComponentsSizes",value:function(){var n={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(n.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},n.line={width:this.dom.line.offsetWidth}),n}},{key:"_updateDomComponentsSizes",value:function(n){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=n.box.width:this.width=n.box.width,this.height=n.box.height,this.options.rtl?this.dom.box.style.right=n.previous.right:this.dom.box.style.left=n.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}},{key:"_isStipeVisible",value:function(){return this.minWidth>=this.width||!this.data.end}},{key:"_getFitRange",value:function(){var n=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-n,fitEnd:this.data.max+n}}},{key:"_fit",value:function(){if(this.emitter){var n=this._getFitRange(),a=n.fitStart,o=n.fitEnd,l={start:new Date(a),end:new Date(o),animation:!0};this.emitter.emit("fit",l)}}},{key:"_getItemData",value:function(){return this.data}}]),t}(Ca);gk.prototype.baseClassName="vis-item vis-range vis-cluster";function Oee(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=Pee(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function Pee(e,s){var t;if(!!e){if(typeof e=="string")return Yy(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yy(e,s)}}function Yy(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}var Nee="__ungrouped__",Lee="__background__",Ree={UNGROUPED:Nee,BACKGROUND:Lee},Aee=function(){function e(s){ot(this,e),this.itemSet=s,this.groups={},this.cache={},this.cache[-1]=[]}return lt(e,[{key:"createClusterItem",value:function(t,r,n){var a=new gk(t,r,n);return a}},{key:"setItems",value:function(t,r){this.items=t||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,r&&r.applyOnChangedLevel&&(this.applyOnChangedLevel=r.applyOnChangedLevel)}},{key:"updateData",value:function(){this.dataChanged=!0,this.applyOnChangedLevel=!1}},{key:"getClusters",value:function(t,r,n){var a=typeof n=="boolean"?{}:n,o=a.maxItems,l=a.clusterCriteria;l||(l=function(){return!0}),o=o||1;var c=-1,u=2,d=0;if(r>0){if(r>=1)return[];c=Math.abs(Math.round(Math.log(100/r)/Math.log(u))),d=Math.abs(Math.pow(u,c))}if(this.dataChanged){var f=c!=this.cacheLevel,p=this.applyOnChangedLevel?f:!0;p&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=c;var v=this.cache[c];if(!v){v=[];for(var g in this.groups)if(this.groups.hasOwnProperty(g))for(var w=this.groups[g],_=w.length,S=0;S<_;){for(var I=w[S],C=1,$=S-1;$>=0&&I.center-w[$].center<d/2;)!w[$].cluster&&l(I.data,w[$].data)&&C++,$--;for(var O=S+1;O<w.length&&w[O].center-I.center<d/2;)l(I.data,w[O].data)&&C++,O++;for(var A=v.length-1;A>=0&&I.center-v[A].center<d;)I.group==v[A].group&&l(I.data,v[A].data)&&C++,A--;if(C>o){for(var z=C-o+1,N=[],Y=S;N.length<z&&Y<w.length;)l(w[S].data,w[Y].data)&&N.push(w[Y]),Y++;var R=this.itemSet.getGroupId(I.data),L=this.itemSet.groups[R]||this.itemSet.groups[Ree.UNGROUPED],j=this._getClusterForItems(N,L,t,n);v.push(j),S+=z}else delete I.cluster,S+=1}this.cache[c]=v}return v}},{key:"_filterData",value:function(){var t={};this.groups=t;for(var r=0,n=Of(this.items);r<n.length;r++){var a=n[r],o=a.parent?a.parent.groupId:"",l=t[o];l||(l=[],t[o]=l),l.push(a),a.data.start&&(a.data.end?a.center=(a.data.start.valueOf()+a.data.end.valueOf())/2:a.center=a.data.start.valueOf())}for(var c in t)if(t.hasOwnProperty(c)){var u;Kt(u=t[c]).call(u,function(d,f){return d.center-f.center})}this.dataChanged=!1}},{key:"_getClusterForItems",value:function(t,r,n,a){var o,l=yt(o=n||[]).call(o,function(C){var $;return{cluster:C,itemsIds:new Ti(yt($=C.data.uiItems).call($,function(O){return O.id}))}}),c;if(l.length){var u=Oee(l),d;try{var f=function(){var $=d.value;if($.itemsIds.size===t.length&&Iee(t).call(t,function(O){return $.itemsIds.has(O.id)}))return c=$.cluster,"break"};for(u.s();!(d=u.n()).done;){var p=f();if(p==="break")break}}catch(C){u.e(C)}finally{u.f()}}if(c)return c.setUiItems(t),c.group!==r&&(c.group&&c.group.remove(c),r&&(r.add(c),c.group=r)),c;var v=a.titleTemplate||"",g={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},w=v.replace(/{count}/,t.length),_='<div title="'+w+'">'+t.length+"</div>",S=Qr({},a,this.itemSet.options),I={content:_,title:w,group:r,uiItems:t,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return c=this.createClusterItem(I,g,S),r&&(r.add(c),c.group=r),c.attach(),c}},{key:"_dropLevelsCache",value:function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}]),e}(),Fee=`
.vis-itemset {
  position: relative;
  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-itemset .vis-background,
.vis-itemset .vis-foreground {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.vis-axis {
  position: absolute;
  width: 100%;
  height: 0;
  left: 0;
  z-index: 1;
}

.vis-foreground .vis-group {
  position: relative;
  box-sizing: border-box;
  border-bottom: 1px solid #bfbfbf;
}

.vis-foreground .vis-group:last-child {
  border-bottom: none;
}

.vis-nesting-group {
  cursor: pointer;
}

.vis-label.vis-nested-group.vis-group-level-unknown-but-gte1 {
  background: #f5f5f5;
}
.vis-label.vis-nested-group.vis-group-level-0 {
  background-color: #ffffff;
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-left: 0;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-right: 0;
}
.vis-label.vis-nested-group.vis-group-level-1 {
  background-color: rgba(0, 0, 0, 0.05);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-left: 15px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-right: 15px;
}
.vis-label.vis-nested-group.vis-group-level-2 {
  background-color: rgba(0, 0, 0, 0.1);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-left: 30px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-right: 30px;
}
.vis-label.vis-nested-group.vis-group-level-3 {
  background-color: rgba(0, 0, 0, 0.15);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-left: 45px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-right: 45px;
}
.vis-label.vis-nested-group.vis-group-level-4 {
  background-color: rgba(0, 0, 0, 0.2);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-left: 60px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-right: 60px;
}
.vis-label.vis-nested-group.vis-group-level-5 {
  background-color: rgba(0, 0, 0, 0.25);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-left: 75px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-right: 75px;
}
.vis-label.vis-nested-group.vis-group-level-6 {
  background-color: rgba(0, 0, 0, 0.3);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-left: 90px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-right: 90px;
}
.vis-label.vis-nested-group.vis-group-level-7 {
  background-color: rgba(0, 0, 0, 0.35);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-left: 105px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-right: 105px;
}
.vis-label.vis-nested-group.vis-group-level-8 {
  background-color: rgba(0, 0, 0, 0.4);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-left: 120px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-right: 120px;
}
.vis-label.vis-nested-group.vis-group-level-9 {
  background-color: rgba(0, 0, 0, 0.45);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-left: 135px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-right: 135px;
}
/* default takes over beginning with level-10 (thats why we add .vis-nested-group
  to the selectors above, to have higher specifity than these rules for the defaults) */
.vis-label.vis-nested-group {
  background-color: rgba(0, 0, 0, 0.5);
}
.vis-ltr .vis-label.vis-nested-group .vis-inner {
  padding-left: 150px;
}
.vis-rtl .vis-label.vis-nested-group .vis-inner {
  padding-right: 150px;
}

.vis-group-level-unknown-but-gte1 {
  border: 1px solid red;
}

/* expanded/collapsed indicators */
.vis-label.vis-nesting-group:before,
.vis-label.vis-nesting-group:before {
  display: inline-block;
  width: 15px;
}
.vis-label.vis-nesting-group.expanded:before {
  content: "\\25BC";
}
.vis-label.vis-nesting-group.collapsed:before {
  content: "\\25B6";
}
.vis-rtl .vis-label.vis-nesting-group.collapsed:before {
  content: "\\25C0";
}
/* compensate missing expanded/collapsed indicator, but only at levels > 0 */
.vis-ltr .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-left: 15px;
}
.vis-rtl .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-right: 15px;
}

.vis-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
}`;An(Fee);var Vee=`
.vis-labelset {
  position: relative;

  overflow: hidden;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  position: relative;
  left: 0;
  top: 0;
  width: 100%;
  color: #4d4d4d;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  border-bottom: 1px solid #bfbfbf;
}

.vis-labelset .vis-label.draggable {
  cursor: pointer;
}

.vis-group-is-dragging {
  background: rgba(0, 0, 0, .1);
}

.vis-labelset .vis-label:last-child {
  border-bottom: none;
}

.vis-labelset .vis-label .vis-inner {
  display: inline-block;
  padding: 5px;
}

.vis-labelset .vis-label .vis-inner.vis-hidden {
  padding: 0;
}
`;An(Vee);function Ui(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=zee(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function zee(e,s){var t;if(!!e){if(typeof e=="string")return Gy(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gy(e,s)}}function Gy(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}function jee(e){var s=Yee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function Yee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var As="__ungrouped__",fi="__background__",lc=function(e){Rn(t,e);var s=jee(t);function t(r,n){var a;ot(this,t),a=s.call(this),a.body=r,a.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(c,u,d){var f=u.order;u.order=c.order,c.order=f},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:ac.snap,onDropObjectOnItem:function(c,u,d){d(u)},onAdd:function(c,u){u(c)},onUpdate:function(c,u){u(c)},onMove:function(c,u){u(c)},onRemove:function(c,u){u(c)},onMoving:function(c,u){u(c)},onAddGroup:function(c,u){u(c)},onMoveGroup:function(c,u){u(c)},onRemoveGroup:function(c,u){u(c)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},a.options=V.extend({},a.defaultOptions),a.options.rtl=n.rtl,a.options.onTimeout=n.onTimeout,a.conversion={toScreen:r.util.toScreen,toTime:r.util.toTime},a.dom={},a.props={},a.hammer=null;var o=Tt(a);return a.itemsData=null,a.groupsData=null,a.itemsSettingTime=null,a.initialItemSetDrawn=!1,a.userContinueNotBail=null,a.sequentialSelection=!1,a.itemListeners={add:function(c,u,d){o._onAdd(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},update:function(c,u,d){o._onUpdate(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},remove:function(c,u,d){o._onRemove(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()}},a.groupListeners={add:function(c,u,d){if(o._onAddGroups(u.items),o.groupsData&&o.groupsData.length>0){var f,p=o.groupsData.getDataSet();Se(f=p.get()).call(f,function(v){if(v.nestedGroups){var g;v.showNested!=!1&&(v.showNested=!0);var w=[];Se(g=v.nestedGroups).call(g,function(_){var S=p.get(_);!S||(S.nestedInGroup=v.id,v.showNested==!1&&(S.visible=!1),w=Pt(w).call(w,S))}),p.update(w,d)}})}},update:function(c,u,d){o._onUpdateGroups(u.items)},remove:function(c,u,d){o._onRemoveGroups(u.items)}},a.items={},a.groups={},a.groupIds=[],a.selection=[],a.popup=null,a.popupTimer=null,a.touchParams={},a.groupTouchParams={group:null,isDragging:!1},a._create(),a.setOptions(n),a.clusters=[],a}return lt(t,[{key:"_create",value:function(){var n=this,a,o,l,c,u,d,f,p,v,g,w,_,S,I,C,$=document.createElement("div");$.className="vis-itemset",$["vis-itemset"]=this,this.dom.frame=$;var O=document.createElement("div");O.className="vis-background",$.appendChild(O),this.dom.background=O;var A=document.createElement("div");A.className="vis-foreground",$.appendChild(A),this.dom.foreground=A;var z=document.createElement("div");z.className="vis-axis",this.dom.axis=z;var N=document.createElement("div");N.className="vis-labelset",this.dom.labelSet=N,this._updateUngrouped();var Y=new vk(fi,null,this);Y.show(),this.groups[fi]=Y,this.hammer=new In(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(R){R.isFirst&&n._onTouch(R)}),this.hammer.on("panstart",ne(a=this._onDragStart).call(a,this)),this.hammer.on("panmove",ne(o=this._onDrag).call(o,this)),this.hammer.on("panend",ne(l=this._onDragEnd).call(l,this)),this.hammer.get("pan").set({threshold:5,direction:In.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",ne(c=this._onSelectItem).call(c,this)),this.hammer.on("press",ne(u=this._onMultiSelectItem).call(u,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",ne(d=this._onAddItem).call(d,this)),this.options.rtl?this.groupHammer=new In(this.body.dom.rightContainer):this.groupHammer=new In(this.body.dom.leftContainer),this.groupHammer.on("tap",ne(f=this._onGroupClick).call(f,this)),this.groupHammer.on("panstart",ne(p=this._onGroupDragStart).call(p,this)),this.groupHammer.on("panmove",ne(v=this._onGroupDrag).call(v,this)),this.groupHammer.on("panend",ne(g=this._onGroupDragEnd).call(g,this)),this.groupHammer.get("pan").set({threshold:5,direction:In.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",ne(w=this._onMouseOver).call(w,this)),this.body.dom.centerContainer.addEventListener("mouseout",ne(_=this._onMouseOut).call(_,this)),this.body.dom.centerContainer.addEventListener("mousemove",ne(S=this._onMouseMove).call(S,this)),this.body.dom.centerContainer.addEventListener("contextmenu",ne(I=this._onDragEnd).call(I,this)),this.body.dom.centerContainer.addEventListener("mousewheel",ne(C=this._onMouseWheel).call(C,this)),this.show()}},{key:"setOptions",value:function(n){var a=this;if(n){var o,l,c=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];V.selectiveExtend(c,this.options,n),"itemsAlwaysDraggable"in n&&(typeof n.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=n.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):Ke(n.itemsAlwaysDraggable)==="object"&&(V.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,n.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in n&&typeof n.sequentialSelection=="boolean"&&(this.options.sequentialSelection=n.sequentialSelection),"orientation"in n&&(typeof n.orientation=="string"?this.options.orientation.item=n.orientation==="top"?"top":"bottom":Ke(n.orientation)==="object"&&"item"in n.orientation&&(this.options.orientation.item=n.orientation.item)),"margin"in n&&(typeof n.margin=="number"?(this.options.margin.axis=n.margin,this.options.margin.item.horizontal=n.margin,this.options.margin.item.vertical=n.margin):Ke(n.margin)==="object"&&(V.selectiveExtend(["axis"],this.options.margin,n.margin),"item"in n.margin&&(typeof n.margin.item=="number"?(this.options.margin.item.horizontal=n.margin.item,this.options.margin.item.vertical=n.margin.item):Ke(n.margin.item)==="object"&&V.selectiveExtend(["horizontal","vertical"],this.options.margin.item,n.margin.item)))),Se(o=["locale","locales"]).call(o,function(d){d in n&&(a.options[d]=n[d])}),"editable"in n&&(typeof n.editable=="boolean"?(this.options.editable.updateTime=n.editable,this.options.editable.updateGroup=n.editable,this.options.editable.add=n.editable,this.options.editable.remove=n.editable,this.options.editable.overrideItems=!1):Ke(n.editable)==="object"&&V.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,n.editable)),"groupEditable"in n&&(typeof n.groupEditable=="boolean"?(this.options.groupEditable.order=n.groupEditable,this.options.groupEditable.add=n.groupEditable,this.options.groupEditable.remove=n.groupEditable):Ke(n.groupEditable)==="object"&&V.selectiveExtend(["order","add","remove"],this.options.groupEditable,n.groupEditable));var u=function(f){var p=n[f];if(p){if(typeof p!="function"){var v;throw new Error(Pt(v="option ".concat(f," must be a function ")).call(v,f,"(item, callback)"))}a.options[f]=p}};Se(l=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(l,u),n.cluster?(Qr(this.options,{cluster:n.cluster}),this.clusterGenerator||(this.clusterGenerator=new Aee(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}},{key:"markDirty",value:function(n){this.groupIds=[],n&&(n.refreshItems&&Se(V).call(V,this.items,function(a){a.dirty=!0,a.displayed&&a.redraw()}),n.restackGroups&&Se(V).call(V,this.groups,function(a,o){o!==fi&&(a.stackDirty=!0)}))}},{key:"destroy",value:function(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}},{key:"hide",value:function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}},{key:"show",value:function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}},{key:"setPopupTimer",value:function(n){if(this.clearPopupTimer(),n){var a=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=wn(function(){n.show()},a)}}},{key:"clearPopupTimer",value:function(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}},{key:"setSelection",value:function(n){var a;n==null&&(n=[]),Qe(n)||(n=[n]);var o=Ge(a=this.selection).call(a,function(w){return $t(n).call(n,w)===-1}),l=Ui(o),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,d=this.getItemById(u);d&&d.unselect()}}catch(w){l.e(w)}finally{l.f()}this.selection=zt(n);var f=Ui(n),p;try{for(f.s();!(p=f.n()).done;){var v=p.value,g=this.getItemById(v);g&&g.select()}}catch(w){f.e(w)}finally{f.f()}}},{key:"getSelection",value:function(){var n;return Pt(n=this.selection).call(n,[])}},{key:"getVisibleItems",value:function(){var n=this.body.range.getRange(),a,o;this.options.rtl?(a=this.body.util.toScreen(n.start),o=this.body.util.toScreen(n.end)):(o=this.body.util.toScreen(n.start),a=this.body.util.toScreen(n.end));var l=[];for(var c in this.groups)if(this.groups.hasOwnProperty(c)){var u=this.groups[c],d=u.isVisible?u.visibleItems:[],f=Ui(d),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;this.options.rtl?v.right<o&&v.right+v.width>a&&l.push(v.id):v.left<a&&v.left+v.width>o&&l.push(v.id)}}catch(g){f.e(g)}finally{f.f()}}return l}},{key:"getItemsAtCurrentTime",value:function(n){var a,o;this.options.rtl?(a=this.body.util.toScreen(n),o=this.body.util.toScreen(n)):(o=this.body.util.toScreen(n),a=this.body.util.toScreen(n));var l=[];for(var c in this.groups)if(this.groups.hasOwnProperty(c)){var u=this.groups[c],d=u.isVisible?u.visibleItems:[],f=Ui(d),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;this.options.rtl?v.right<o&&v.right+v.width>a&&l.push(v.id):v.left<a&&v.left+v.width>o&&l.push(v.id)}}catch(g){f.e(g)}finally{f.f()}}return l}},{key:"getVisibleGroups",value:function(){var n=[];for(var a in this.groups)if(this.groups.hasOwnProperty(a)){var o=this.groups[a];o.isVisible&&n.push(a)}return n}},{key:"getItemById",value:function(n){var a;return this.items[n]||OZ(a=this.clusters).call(a,function(o){return o.id===n})}},{key:"_deselect",value:function(n){for(var a=this.selection,o=0,l=a.length;o<l;o++)if(a[o]==n){Dn(a).call(a,o,1);break}}},{key:"redraw",value:function(){var n=this,a=this.options.margin,o=this.body.range,l=V.option.asSize,c=this.options,u=c.orientation.item,d=!1,f=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,f.className="vis-itemset",this.options.cluster&&this._clusterItems(),d=this._orderGroups()||d;var p=o.end-o.start,v=p!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,g=o.start!=this.lastRangeStart,w=c.stack!=this.lastStack,_=c.stackSubgroups!=this.lastStackSubgroups,S=v||g||w||_;this.lastVisibleInterval=p,this.lastRangeStart=o.start,this.lastStack=c.stack,this.lastStackSubgroups=c.stackSubgroups,this.props.lastWidth=this.props.width;var I=this._firstGroup(),C={item:a.item,axis:a.axis},$={item:a.item,axis:a.item.vertical/2},O=0,A=a.axis+a.item.vertical;this.groups[fi].redraw(o,$,S);var z={},N=0;Se(V).call(V,this.groups,function(R,L){if(L!==fi){var j=R==I?C:$,B=!0;z[L]=R.redraw(o,j,S,B),N=z[L].length}});var Y=N>0;return Y&&function(){for(var R={},L=function(G){Se(V).call(V,z,function(H,re){R[re]=H[G]()})},j=0;j<N;j++)L(j);Se(V).call(V,n.groups,function(B,G){if(G!==fi){var H=R[G];d=H||d,O+=B.height}}),O=Math.max(O,A)}(),O=Math.max(O,A),f.style.height=l(O),this.props.width=f.offsetWidth,this.props.height=O,this.dom.axis.style.top=l(u=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,d=this._isResized()||d,d}},{key:"_firstGroup",value:function(){var n=this.options.orientation.item=="top"?0:this.groupIds.length-1,a=this.groupIds[n],o=this.groups[a]||this.groups[As];return o||null}},{key:"_updateUngrouped",value:function(){var n=this.groups[As],a,o;if(this.groupsData){if(n){n.dispose(),delete this.groups[As];for(o in this.items)if(this.items.hasOwnProperty(o)){a=this.items[o],a.parent&&a.parent.remove(a);var l=this.getGroupId(a.data),c=this.groups[l];c&&c.add(a)||a.hide()}}}else if(!n){var u=null,d=null;n=new Rh(u,d,this),this.groups[As]=n;for(o in this.items)this.items.hasOwnProperty(o)&&(a=this.items[o],n.add(a));n.show()}}},{key:"getLabelSet",value:function(){return this.dom.labelSet}},{key:"setItems",value:function(n){this.itemsSettingTime=new Date;var a=this,o,l=this.itemsData;if(!n)this.itemsData=null;else if(ti(n))this.itemsData=ca(n);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(l&&(Se(V).call(V,this.itemListeners,function(u,d){l.off(d,u)}),l.dispose(),o=l.getIds(),this._onRemove(o)),this.itemsData){var c=this.id;Se(V).call(V,this.itemListeners,function(u,d){a.itemsData.on(d,u,c)}),o=this.itemsData.getIds(),this._onAdd(o),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}},{key:"getItems",value:function(){return this.itemsData!=null?this.itemsData.rawDS:null}},{key:"setGroups",value:function(n){var a=this,o;if(this.groupsData&&(Se(V).call(V,this.groupListeners,function(d,f){a.groupsData.off(f,d)}),o=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(o)),!n)this.groupsData=null;else if(ti(n))this.groupsData=n;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var l,c=this.groupsData.getDataSet();Se(l=c.get()).call(l,function(d){if(d.nestedGroups){var f;Se(f=d.nestedGroups).call(f,function(p){var v=c.get(p);v.nestedInGroup=d.id,d.showNested==!1&&(v.visible=!1),c.update(v)})}});var u=this.id;Se(V).call(V,this.groupListeners,function(d,f){a.groupsData.on(f,d,u)}),o=this.groupsData.getIds(),this._onAddGroups(o)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}},{key:"getGroups",value:function(){return this.groupsData}},{key:"removeItem",value:function(n){var a=this,o=this.itemsData.get(n);o&&this.options.onRemove(o,function(l){l&&a.itemsData.remove(n)})}},{key:"_getType",value:function(n){return n.type||this.options.type||(n.end?"range":"box")}},{key:"getGroupId",value:function(n){var a=this._getType(n);return a=="background"&&n.group==null?fi:this.groupsData?n.group:As}},{key:"_onUpdate",value:function(n){var a=this,o=this;Se(n).call(n,function(l){var c=o.itemsData.get(l),u=o.items[l],d=c?o._getType(c):null,f=t.types[d],p;if(u&&(!f||!(u instanceof f)?(p=u.selected,o._removeItem(u),u=null):o._updateItem(u,c)),!u&&c)if(f)u=new f(c,o.conversion,o.options),u.id=l,o._addItem(u),p&&(a.selection.push(l),u.select());else throw new TypeError('Unknown item type "'.concat(d,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemove",value:function(n){var a=0,o=this;Se(n).call(n,function(l){var c=o.items[l];c&&(a++,o._removeItem(c))}),a&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}},{key:"_order",value:function(){Se(V).call(V,this.groups,function(n){n.order()})}},{key:"_onUpdateGroups",value:function(n){this._onAddGroups(n)}},{key:"_onAddGroups",value:function(n){var a=this;Se(n).call(n,function(o){var l=a.groupsData.get(o),c=a.groups[o];if(c)c.setData(l);else{if(o==As||o==fi)throw new Error("Illegal group id. ".concat(o," is a reserved id."));var u=Lo(a.options);V.extend(u,{height:null}),c=new Rh(o,l,a),a.groups[o]=c;for(var d in a.items)if(a.items.hasOwnProperty(d)){var f=a.items[d];f.data.group==o&&c.add(f)}c.order(),c.show()}}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemoveGroups",value:function(n){var a=this;Se(n).call(n,function(o){var l=a.groups[o];l&&(l.dispose(),delete a.groups[o])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_orderGroups",value:function(){if(this.groupsData){var n=this.groupsData.getIds({order:this.options.groupOrder});n=this._orderNestedGroups(n);var a=!V.equalArray(n,this.groupIds);if(a){var o=this.groups;Se(n).call(n,function(l){o[l].hide()}),Se(n).call(n,function(l){o[l].show()}),this.groupIds=n}return a}else return!1}},{key:"_orderNestedGroups",value:function(n){var a=this;function o(c,u){var d=[];return Se(u).call(u,function(f){d.push(f);var p=c.groupsData.get(f);if(p.nestedGroups){var v,g=yt(v=c.groupsData.get({filter:function(_){return _.nestedInGroup==f},order:c.options.groupOrder})).call(v,function(w){return w.id});d=Pt(d).call(d,o(c,g))}}),d}var l=Ge(n).call(n,function(c){return!a.groupsData.get(c).nestedInGroup});return o(this,l)}},{key:"_addItem",value:function(n){this.items[n.id]=n;var a=this.getGroupId(n.data),o=this.groups[a];o?o&&o.data&&o.data.showNested&&(n.groupShowing=!0):n.groupShowing=!1,o&&o.add(n)}},{key:"_updateItem",value:function(n,a){n.setData(a);var o=this.getGroupId(n.data),l=this.groups[o];l?l&&l.data&&l.data.showNested&&(n.groupShowing=!0):n.groupShowing=!1}},{key:"_removeItem",value:function(n){var a,o;n.hide(),delete this.items[n.id];var l=$t(a=this.selection).call(a,n.id);l!=-1&&Dn(o=this.selection).call(o,l,1),n.parent&&n.parent.remove(n),this.popup!=null&&this.popup.hide()}},{key:"_constructByEndArray",value:function(n){for(var a=[],o=0;o<n.length;o++)n[o]instanceof us&&a.push(n[o]);return a}},{key:"_onTouch",value:function(n){this.touchParams.item=this.itemFromTarget(n),this.touchParams.dragLeftItem=n.target.dragLeftItem||!1,this.touchParams.dragRightItem=n.target.dragRightItem||!1,this.touchParams.itemProps=null}},{key:"_getGroupIndex",value:function(n){for(var a=0;a<this.groupIds.length;a++)if(n==this.groupIds[a])return a}},{key:"_onDragStart",value:function(n){var a=this;if(!this.touchParams.itemIsDragging){var o=this.touchParams.item||null,l=this,c;if(o&&(o.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||o.editable!=null&&!o.editable.updateTime&&!o.editable.updateGroup&&!this.options.editable.overrideItems)return;var u=this.touchParams.dragLeftItem,d=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=o,u)c={item:u,initialX:n.center.x,dragLeft:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[c];else if(d)c={item:d,initialX:n.center.x,dragRight:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[c];else if(this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey))this._onDragStartAddItem(n);else{this.groupIds.length<1&&this.redraw();var f=this._getGroupIndex(o.data.group),p=this.options.itemsAlwaysDraggable.item&&!o.selected?[o.id]:this.getSelection();this.touchParams.itemProps=yt(p).call(p,function(v){var g=l.items[v],w=l._getGroupIndex(g.data.group);return{item:g,initialX:n.center.x,groupOffset:f-w,data:a._cloneItemData(g.data)}})}n.stopPropagation()}else this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey)&&this._onDragStartAddItem(n)}}},{key:"_onDragStartAddItem",value:function(n){var a=this.options.snap||null,o=this.dom.frame.getBoundingClientRect(),l=this.options.rtl?o.right-n.center.x+10:n.center.x-o.left-10,c=this.body.util.toTime(l),u=this.body.util.getScale(),d=this.body.util.getStep(),f=a?a(c,u,d):c,p=f,v={type:"range",start:f,end:p,content:"new item"},g=ns();v[this.itemsData.idProp]=g;var w=this.groupFromTarget(n);w&&(v.group=w.groupId);var _=new us(v,this.conversion,this.options);_.id=g,_.data=this._cloneItemData(v),this._addItem(_),this.touchParams.selectedItem=_;var S={item:_,initialX:n.center.x,data:_.data};this.options.rtl?S.dragLeft=!0:S.dragRight=!0,this.touchParams.itemProps=[S],n.stopPropagation()}},{key:"_onDrag",value:function(n){var a=this;if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){var o=this.body.dom.centerContainer,l=o.getBoundingClientRect();this.popup.setPosition(n.center.x-l.left+o.offsetLeft,n.center.y-l.top+o.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var c;n.stopPropagation();var u=this,d=this.options.snap||null,f=this.body.dom.root.offsetLeft,p=this.options.rtl?f+this.body.domProps.right.width:f+this.body.domProps.left.width,v=this.body.util.getScale(),g=this.body.util.getStep(),w=this.touchParams.selectedItem,_=(this.options.editable.overrideItems||w.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&w.editable!=null&&w.editable.updateGroup,S=null;if(_&&w&&w.data.group!=null){var I=u.groupFromTarget(n);I&&(S=this._getGroupIndex(I.groupId))}Se(c=this.touchParams.itemProps).call(c,function(C){var $=u.body.util.toTime(n.center.x-p),O=u.body.util.toTime(C.initialX-p),A,z,N,Y,R;a.options.rtl?A=-($-O):A=$-O;var L=a._cloneItemData(C.item.data);if(!(C.item.editable!=null&&!C.item.editable.updateTime&&!C.item.editable.updateGroup&&!u.options.editable.overrideItems)){var j=(a.options.editable.overrideItems||w.editable==null)&&a.options.editable.updateTime||!a.options.editable.overrideItems&&w.editable!=null&&w.editable.updateTime;if(j){if(C.dragLeft)a.options.rtl?L.end!=null&&(N=V.convert(C.data.end,"Date"),R=new Date(N.valueOf()+A),L.end=d?d(R,v,g):R):L.start!=null&&(z=V.convert(C.data.start,"Date"),Y=new Date(z.valueOf()+A),L.start=d?d(Y,v,g):Y);else if(C.dragRight)a.options.rtl?L.start!=null&&(z=V.convert(C.data.start,"Date"),Y=new Date(z.valueOf()+A),L.start=d?d(Y,v,g):Y):L.end!=null&&(N=V.convert(C.data.end,"Date"),R=new Date(N.valueOf()+A),L.end=d?d(R,v,g):R);else if(L.start!=null)if(z=V.convert(C.data.start,"Date").valueOf(),Y=new Date(z+A),L.end!=null){N=V.convert(C.data.end,"Date");var B=N.valueOf()-z.valueOf();L.start=d?d(Y,v,g):Y,L.end=new Date(L.start.valueOf()+B)}else L.start=d?d(Y,v,g):Y}if(_&&!C.dragLeft&&!C.dragRight&&S!=null&&L.group!=null){var G=S-C.groupOffset;G=Math.max(0,G),G=Math.min(u.groupIds.length-1,G),L.group=u.groupIds[G]}L=a._cloneItemData(L),u.options.onMoving(L,function(H){H&&C.item.setData(a._cloneItemData(H,"Date"))})}}),this.body.emitter.emit("_change")}}},{key:"_moveToGroup",value:function(n,a){var o=this.groups[a];if(o&&o.groupId!=n.data.group){var l=n.parent;l.remove(n),l.order(),n.data.group=o.groupId,o.add(n),o.order()}}},{key:"_onDragEnd",value:function(n){var a=this;if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){n.stopPropagation();var o=this,l=this.touchParams.itemProps;this.touchParams.itemProps=null,Se(l).call(l,function(c){var u=c.item.id,d=o.itemsData.get(u)!=null;if(!d)o.options.onAdd(c.item.data,function(p){o._removeItem(c.item),p&&o.itemsData.add(p),o.body.emitter.emit("_change")});else{var f=a._cloneItemData(c.item.data);o.options.onMove(f,function(p){p?(p[a.itemsData.idProp]=u,a.itemsData.update(p)):(c.item.setData(c.data),o.body.emitter.emit("_change"))})}})}}},{key:"_onGroupClick",value:function(n){var a=this,o=this.groupFromTarget(n);wn(function(){a.toggleGroupShowNested(o)},1)}},{key:"toggleGroupShowNested",value:function(n){var a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!(!n||!n.nestedGroups)){var l=this.groupsData.getDataSet();o!=null?n.showNested=!!o:n.showNested=!n.showNested;var c=l.get(n.groupId);c.showNested=n.showNested;for(var u=n.nestedGroups,d=u;d.length>0;){var f=d;d=[];for(var p=0;p<f.length;p++){var v=l.get(f[p]);v.nestedGroups&&(d=Pt(d).call(d,v.nestedGroups))}d.length>0&&(u=Pt(u).call(u,d))}var g=yt(a=l.get(u)).call(a,function(w){return w.visible==null&&(w.visible=!0),w.visible=!!c.showNested,w});l.update(Pt(g).call(g,c)),c.showNested?(V.removeClassName(n.dom.label,"collapsed"),V.addClassName(n.dom.label,"expanded")):(V.removeClassName(n.dom.label,"expanded"),V.addClassName(n.dom.label,"collapsed"))}}},{key:"toggleGroupDragClassName",value:function(n){n.dom.label.classList.toggle("vis-group-is-dragging"),n.dom.foreground.classList.toggle("vis-group-is-dragging")}},{key:"_onGroupDragStart",value:function(n){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(n),this.groupTouchParams.group&&(n.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}},{key:"_onGroupDrag",value:function(n){if(this.options.groupEditable.order&&this.groupTouchParams.group){n.stopPropagation();var a=this.groupsData.getDataSet(),o=this.groupFromTarget(n);if(o&&o.height!=this.groupTouchParams.group.height){var l=o.top<this.groupTouchParams.group.top,c=n.center?n.center.y:n.clientY,u=o.dom.foreground.getBoundingClientRect(),d=this.groupTouchParams.group.height;if(l){if(u.top+d<c)return}else{var f=o.height;if(u.top+f-d>c)return}}if(o&&o!=this.groupTouchParams.group){var p=a.get(o.groupId),v=a.get(this.groupTouchParams.group.groupId);v&&p&&(this.options.groupOrderSwap(v,p,a),a.update(v),a.update(p));var g=a.getIds({order:this.options.groupOrder});if(!V.equalArray(g,this.groupTouchParams.originalOrder))for(var w=this.groupTouchParams.originalOrder,_=this.groupTouchParams.group.groupId,S=Math.min(w.length,g.length),I=0,C=0,$=0;I<S;){for(;I+C<S&&I+$<S&&g[I+C]==w[I+$];)I++;if(I+C>=S)break;if(g[I+C]==_)C=1;else if(w[I+$]==_)$=1;else{var O=$t(g).call(g,w[I+$]),A=a.get(g[I+C]),z=a.get(w[I+$]);this.options.groupOrderSwap(A,z,a),a.update(A),a.update(z);var N=g[I+C];g[I+C]=w[I+$],g[O]=N,I++}}}}}},{key:"_onGroupDragEnd",value:function(n){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){n.stopPropagation();var a=this,o=a.groupTouchParams.group.groupId,l=a.groupsData.getDataSet(),c=V.extend({},l.get(o));a.options.onMoveGroup(c,function(u){if(u)u[l._idProp]=o,l.update(u);else{var d=l.getIds({order:a.options.groupOrder});if(!V.equalArray(d,a.groupTouchParams.originalOrder))for(var f=a.groupTouchParams.originalOrder,p=Math.min(f.length,d.length),v=0;v<p;){for(;v<p&&d[v]==f[v];)v++;if(v>=p)break;var g=$t(d).call(d,f[v]),w=l.get(d[v]),_=l.get(f[v]);a.options.groupOrderSwap(w,_,l),l.update(w),l.update(_);var S=d[v];d[v]=f[v],d[g]=S,v++}}}),a.body.emitter.emit("groupDragged",{groupId:o}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}},{key:"_onSelectItem",value:function(n){if(!!this.options.selectable){var a=n.srcEvent&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey),o=n.srcEvent&&n.srcEvent.shiftKey;if(a||o){this._onMultiSelectItem(n);return}var l=this.getSelection(),c=this.itemFromTarget(n),u=c&&c.selectable?[c.id]:[];this.setSelection(u);var d=this.getSelection();(d.length>0||l.length>0)&&this.body.emitter.emit("select",{items:d,event:n})}}},{key:"_onMouseOver",value:function(n){var a=this.itemFromTarget(n);if(!!a){var o=this.itemFromRelatedTarget(n);if(a!==o){var l=a.getTitle();if(this.options.showTooltips&&l){this.popup==null&&(this.popup=new mee(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(l);var c=this.body.dom.centerContainer,u=c.getBoundingClientRect();this.popup.setPosition(n.clientX-u.left+c.offsetLeft,n.clientY-u.top+c.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:a.id,event:n})}}}},{key:"_onMouseOut",value:function(n){var a=this.itemFromTarget(n);if(!!a){var o=this.itemFromRelatedTarget(n);a!==o&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:a.id,event:n}))}}},{key:"_onMouseMove",value:function(n){var a=this.itemFromTarget(n);if(!!a&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){var o=this.body.dom.centerContainer,l=o.getBoundingClientRect();this.popup.setPosition(n.clientX-l.left+o.offsetLeft,n.clientY-l.top+o.offsetTop),this.popup.show()}}},{key:"_onMouseWheel",value:function(n){this.touchParams.itemIsDragging&&this._onDragEnd(n)}},{key:"_onUpdateItem",value:function(n){if(!!this.options.selectable&&!(!this.options.editable.updateTime&&!this.options.editable.updateGroup)){var a=this;if(n){var o=a.itemsData.get(n.id);this.options.onUpdate(o,function(l){l&&a.itemsData.update(l)})}}}},{key:"_onDropObjectOnItem",value:function(n){var a=this.itemFromTarget(n),o=JSON.parse(n.dataTransfer.getData("text"));this.options.onDropObjectOnItem(o,a)}},{key:"_onAddItem",value:function(n){if(!!this.options.selectable&&!!this.options.editable.add){var a=this,o=this.options.snap||null,l=this.dom.frame.getBoundingClientRect(),c=this.options.rtl?l.right-n.center.x:n.center.x-l.left,u=this.body.util.toTime(c),d=this.body.util.getScale(),f=this.body.util.getStep(),p,v;n.type=="drop"?(v=JSON.parse(n.dataTransfer.getData("text")),v.content=v.content?v.content:"new item",v.start=v.start?v.start:o?o(u,d,f):u,v.type=v.type||"box",v[this.itemsData.idProp]=v.id||ns(),v.type=="range"&&!v.end&&(p=this.body.util.toTime(c+this.props.width/5),v.end=o?o(p,d,f):p)):(v={start:o?o(u,d,f):u,content:"new item"},v[this.itemsData.idProp]=ns(),this.options.type==="range"&&(p=this.body.util.toTime(c+this.props.width/5),v.end=o?o(p,d,f):p));var g=this.groupFromTarget(n);g&&(v.group=g.groupId),v=this._cloneItemData(v),this.options.onAdd(v,function(w){w&&(a.itemsData.add(w),n.type=="drop"&&a.setSelection([w.id]))})}}},{key:"_onMultiSelectItem",value:function(n){var a=this;if(!!this.options.selectable){var o=this.itemFromTarget(n);if(o){var l=this.options.multiselect?this.getSelection():[],c=n.srcEvent&&n.srcEvent.shiftKey||!1;if((c||this.options.sequentialSelection)&&this.options.multiselect){var u=this.itemsData.get(o.id).group,d=void 0;this.options.multiselectPerGroup&&l.length>0&&(d=this.itemsData.get(l[0]).group),(!this.options.multiselectPerGroup||d==null||d==u)&&l.push(o.id);var f=t._getItemRange(this.itemsData.get(l));if(!this.options.multiselectPerGroup||d==u){l=[];for(var p in this.items)if(this.items.hasOwnProperty(p)){var v=this.items[p],g=v.data.start,w=v.data.end!==void 0?v.data.end:g;g>=f.min&&w<=f.max&&(!this.options.multiselectPerGroup||d==this.itemsData.get(v.id).group)&&!(v instanceof xs)&&l.push(v.id)}}}else{var _=$t(l).call(l,o.id);_==-1?l.push(o.id):Dn(l).call(l,_,1)}var S=Ge(l).call(l,function(I){return a.getItemById(I).selectable});this.setSelection(S),this.body.emitter.emit("select",{items:this.getSelection(),event:n})}}}},{key:"itemFromElement",value:function(n){for(var a=n;a;){if(a.hasOwnProperty("vis-item"))return a["vis-item"];a=a.parentNode}return null}},{key:"itemFromTarget",value:function(n){return this.itemFromElement(n.target)}},{key:"itemFromRelatedTarget",value:function(n){return this.itemFromElement(n.relatedTarget)}},{key:"groupFromTarget",value:function(n){var a=n.center?n.center.y:n.clientY,o=this.groupIds;o.length<=0&&this.groupsData&&(o=this.groupsData.getIds({order:this.options.groupOrder}));for(var l=0;l<o.length;l++){var c=o[l],u=this.groups[c],d=u.dom.foreground,f=d.getBoundingClientRect();if(a>=f.top&&a<f.top+d.offsetHeight)return u;if(this.options.orientation.item==="top"){if(l===this.groupIds.length-1&&a>f.top)return u}else if(l===0&&a<f.top+d.offset)return u}return null}},{key:"_cloneItemData",value:function(n,a){var o=V.extend({},n);return a||(a=this.itemsData.type),o.start!=null&&(o.start=V.convert(o.start,a&&a.start||"Date")),o.end!=null&&(o.end=V.convert(o.end,a&&a.end||"Date")),o}},{key:"_clusterItems",value:function(){if(!!this.options.cluster){var n=this.body.range.conversion(this.body.domProps.center.width),a=n.scale,o=this.clusterGenerator.getClusters(this.clusters,a,this.options.cluster);if(this.clusters!=o){if(this._detachAllClusters(),o){var l=Ui(o),c;try{for(l.s();!(c=l.n()).done;){var u=c.value;u.attach()}}catch(d){l.e(d)}finally{l.f()}this.clusters=o}this._updateClusters(o)}}}},{key:"_detachAllClusters",value:function(){if(this.options.cluster&&this.clusters&&this.clusters.length){var n=Ui(this.clusters),a;try{for(n.s();!(a=n.n()).done;){var o=a.value;o.detach()}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_updateClusters",value:function(n){if(this.clusters&&this.clusters.length){var a,o=new Ti(yt(n).call(n,function(_){return _.id})),l=Ge(a=this.clusters).call(a,function(_){return!o.has(_.id)}),c=!1,u=Ui(l),d;try{for(u.s();!(d=u.n()).done;){var f,p=d.value,v=$t(f=this.selection).call(f,p.id);if(v!==-1){var g;p.unselect(),Dn(g=this.selection).call(g,v,1),c=!0}}}catch(_){u.e(_)}finally{u.f()}if(c){var w=this.getSelection();this.body.emitter.emit("select",{items:w,event})}}this.clusters=n||[]}}],[{key:"_getItemRange",value:function(n){var a=null,o=null;return Se(n).call(n,function(l){(o==null||l.start<o)&&(o=l.start),l.end!=null?(a==null||l.end>a)&&(a=l.end):(a==null||l.start>a)&&(a=l.start)}),{min:o,max:a}}},{key:"itemSetFromTarget",value:function(n){for(var a=n.target;a;){if(a.hasOwnProperty("vis-itemset"))return a["vis-itemset"];a=a.parentNode}return null}}]),t}(Ri);lc.types={background:xs,box:oee,range:us,point:uee};lc.prototype._onAdd=lc.prototype._onUpdate;var Ua=!1,Uy,cc="background: #FFeeee; color: #dd0000",yk=function(){function e(){ot(this,e)}return lt(e,null,[{key:"validate",value:function(t,r,n){Ua=!1,Uy=r;var a=r;return n!==void 0&&(a=r[n]),e.parse(t,a,[]),Ua}},{key:"parse",value:function(t,r,n){for(var a in t)t.hasOwnProperty(a)&&e.check(a,t,r,n)}},{key:"check",value:function(t,r,n,a){if(n[t]===void 0&&n.__any__===void 0){e.getSuggestion(t,n,a);return}var o=t,l=!0;n[t]===void 0&&n.__any__!==void 0&&(o="__any__",l=e.getType(r[t])==="object");var c=n[o];l&&c.__type__!==void 0&&(c=c.__type__),e.checkFields(t,r,n,o,c,a)}},{key:"checkFields",value:function(t,r,n,a,o,l){var c=function(p){console.log("%c"+p+e.printLocation(l,t),cc)},u=e.getType(r[t]),d=o[u];d!==void 0?e.getType(d)==="array"&&$t(d).call(d,r[t])===-1?(c('Invalid option detected in "'+t+'". Allowed values are:'+e.print(d)+' not "'+r[t]+'". '),Ua=!0):u==="object"&&a!=="__any__"&&(l=V.copyAndExtendArray(l,t),e.parse(r[t],n[a],l)):o.any===void 0&&(c('Invalid type received for "'+t+'". Expected: '+e.print(tn(o))+". Received ["+u+'] "'+r[t]+'"'),Ua=!0)}},{key:"getType",value:function(t){var r=Ke(t);return r==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Qe(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}},{key:"getSuggestion",value:function(t,r,n){var a=e.findInOptions(t,r,n,!1),o=e.findInOptions(t,Uy,[],!0),l=8,c=4,u;a.indexMatch!==void 0?u=" in "+e.printLocation(a.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=c&&a.distance>o.distance?u=" in "+e.printLocation(a.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):a.distance<=l?u='. Did you mean "'+a.closestMatch+'"?'+e.printLocation(a.path,t):u=". Did you mean one of these: "+e.print(tn(r))+e.printLocation(n,t),console.log('%cUnknown option detected: "'+t+'"'+u,cc),Ua=!0}},{key:"findInOptions",value:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,l="",c=[],u=t.toLowerCase(),d=void 0;for(var f in r){var p=void 0;if(r[f].__type__!==void 0&&a===!0){var v=e.findInOptions(t,r[f],V.copyAndExtendArray(n,f));o>v.distance&&(l=v.closestMatch,c=v.path,o=v.distance,d=v.indexMatch)}else{var g;$t(g=f.toLowerCase()).call(g,u)!==-1&&(d=f),p=e.levenshteinDistance(t,f),o>p&&(l=f,c=V.copyArray(n),o=p)}}return{closestMatch:l,path:c,distance:o,indexMatch:d}}},{key:"printLocation",value:function(t,r){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+n+`options = {
`,o=0;o<t.length;o++){for(var l=0;l<o+1;l++)a+="  ";a+=t[o]+`: {
`}for(var c=0;c<t.length+1;c++)a+="  ";a+=r+`
`;for(var u=0;u<t.length+1;u++){for(var d=0;d<t.length-u;d++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(t){return jn(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,r){if(t.length===0)return r.length;if(r.length===0)return t.length;var n=[],a;for(a=0;a<=r.length;a++)n[a]=[a];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(a=1;a<=r.length;a++)for(o=1;o<=t.length;o++)r.charAt(a-1)==t.charAt(o-1)?n[a][o]=n[a-1][o-1]:n[a][o]=Math.min(n[a-1][o-1]+1,Math.min(n[a][o-1]+1,n[a-1][o]+1));return n[r.length][t.length]}}]),e}(),tt="string",Ze="boolean",Ot="number",Hy="array",Fs="date",Xt="object",Gee="dom",Vs="moment",Wy="any",Uee={configure:{enabled:{boolean:Ze},filter:{boolean:Ze,function:"function"},container:{dom:Gee},__type__:{object:Xt,boolean:Ze,function:"function"}},align:{string:tt},alignCurrentTime:{string:tt,undefined:"undefined"},rtl:{boolean:Ze,undefined:"undefined"},rollingMode:{follow:{boolean:Ze},offset:{number:Ot,undefined:"undefined"},__type__:{object:Xt}},onTimeout:{timeoutMs:{number:Ot},callback:{function:"function"},__type__:{object:Xt}},verticalScroll:{boolean:Ze,undefined:"undefined"},horizontalScroll:{boolean:Ze,undefined:"undefined"},autoResize:{boolean:Ze},throttleRedraw:{number:Ot},clickToUse:{boolean:Ze},dataAttributes:{string:tt,array:Hy},editable:{add:{boolean:Ze,undefined:"undefined"},remove:{boolean:Ze,undefined:"undefined"},updateGroup:{boolean:Ze,undefined:"undefined"},updateTime:{boolean:Ze,undefined:"undefined"},overrideItems:{boolean:Ze,undefined:"undefined"},__type__:{boolean:Ze,object:Xt}},end:{number:Ot,date:Fs,string:tt,moment:Vs},format:{minorLabels:{millisecond:{string:tt,undefined:"undefined"},second:{string:tt,undefined:"undefined"},minute:{string:tt,undefined:"undefined"},hour:{string:tt,undefined:"undefined"},weekday:{string:tt,undefined:"undefined"},day:{string:tt,undefined:"undefined"},week:{string:tt,undefined:"undefined"},month:{string:tt,undefined:"undefined"},year:{string:tt,undefined:"undefined"},__type__:{object:Xt,function:"function"}},majorLabels:{millisecond:{string:tt,undefined:"undefined"},second:{string:tt,undefined:"undefined"},minute:{string:tt,undefined:"undefined"},hour:{string:tt,undefined:"undefined"},weekday:{string:tt,undefined:"undefined"},day:{string:tt,undefined:"undefined"},week:{string:tt,undefined:"undefined"},month:{string:tt,undefined:"undefined"},year:{string:tt,undefined:"undefined"},__type__:{object:Xt,function:"function"}},__type__:{object:Xt}},moment:{function:"function"},groupHeightMode:{string:tt},groupOrder:{string:tt,function:"function"},groupEditable:{add:{boolean:Ze,undefined:"undefined"},remove:{boolean:Ze,undefined:"undefined"},order:{boolean:Ze,undefined:"undefined"},__type__:{boolean:Ze,object:Xt}},groupOrderSwap:{function:"function"},height:{string:tt,number:Ot},hiddenDates:{start:{date:Fs,number:Ot,string:tt,moment:Vs},end:{date:Fs,number:Ot,string:tt,moment:Vs},repeat:{string:tt},__type__:{object:Xt,array:Hy}},itemsAlwaysDraggable:{item:{boolean:Ze,undefined:"undefined"},range:{boolean:Ze,undefined:"undefined"},__type__:{boolean:Ze,object:Xt}},limitSize:{boolean:Ze},locale:{string:tt},locales:{__any__:{any:Wy},__type__:{object:Xt}},longSelectPressTime:{number:Ot},margin:{axis:{number:Ot},item:{horizontal:{number:Ot,undefined:"undefined"},vertical:{number:Ot,undefined:"undefined"},__type__:{object:Xt,number:Ot}},__type__:{object:Xt,number:Ot}},max:{date:Fs,number:Ot,string:tt,moment:Vs},maxHeight:{number:Ot,string:tt},maxMinorChars:{number:Ot},min:{date:Fs,number:Ot,string:tt,moment:Vs},minHeight:{number:Ot,string:tt},moveable:{boolean:Ze},multiselect:{boolean:Ze},multiselectPerGroup:{boolean:Ze},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:tt,undefined:"undefined"},item:{string:tt,undefined:"undefined"},__type__:{string:tt,object:Xt}},selectable:{boolean:Ze},sequentialSelection:{boolean:Ze},showCurrentTime:{boolean:Ze},showMajorLabels:{boolean:Ze},showMinorLabels:{boolean:Ze},showWeekScale:{boolean:Ze},stack:{boolean:Ze},stackSubgroups:{boolean:Ze},cluster:{maxItems:{number:Ot,undefined:"undefined"},titleTemplate:{string:tt,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:Ze,undefined:"undefined"},fitOnDoubleClick:{boolean:Ze,undefined:"undefined"},__type__:{boolean:Ze,object:Xt}},snap:{function:"function",null:"null"},start:{date:Fs,number:Ot,string:tt,moment:Vs},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:tt,function:"function"},showTooltips:{boolean:Ze},tooltip:{followMouse:{boolean:Ze},overflowMethod:{string:["cap","flip","none"]},delay:{number:Ot},template:{function:"function"},__type__:{object:Xt}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:Ze,object:Xt}},timeAxis:{scale:{string:tt,undefined:"undefined"},step:{number:Ot,undefined:"undefined"},__type__:{object:Xt}},type:{string:tt},width:{string:tt,number:Ot},preferZoom:{boolean:Ze},zoomable:{boolean:Ze},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:Ot},zoomMax:{number:Ot},zoomMin:{number:Ot},xss:{disabled:{boolean:Ze},filterOptions:{__any__:{any:Wy},__type__:{object:Xt}},__type__:{object:Xt}},__type__:{object:Xt}},Hee={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}},Wee={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Bee=function(){function e(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ot(this,e),this.pixelRatio=s,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return lt(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return Wee[t]}},{key:"setColor",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var n,a=this._isColorString(t);if(a!==void 0&&(t=a),V.isString(t)===!0){if(V.isValidRGB(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(V.isValidRGBA(t)===!0){var l=t.substr(5).substr(0,t.length-6).split(",");n={r:l[0],g:l[1],b:l[2],a:l[3]}}else if(V.isValidHex(t)===!0){var c=V.hexToRGB(t);n={r:c.r,g:c.g,b:c.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:u}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+jn(t));this._setColor(n,r)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r===!0&&(this.previousColor=V.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",wn(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r===!0&&(this.initialColor=V.extend({},t)),this.color=t;var n=V.RGBToHSV(t.r,t.g,t.b),a=2*Math.PI,o=this.r*n.s,l=this.centerCoordinates.x+o*Math.sin(a*n.h),c=this.centerCoordinates.y+o*Math.cos(a*n.h);this.colorPickerSelector.style.left=l-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var r=V.RGBToHSV(this.color.r,this.color.g,this.color.b);r.v=t/100;var n=V.HSVToRGB(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,r=V.RGBToHSV(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,a,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),X0(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,r,n,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var l=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(u){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(u){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var c=this;this.opacityRange.onchange=function(){c._setOpacity(this.value)},this.opacityRange.oninput=function(){c._setOpacity(this.value)},this.brightnessRange.onchange=function(){c._setBrightness(this.value)},this.brightnessRange.oninput=function(){c._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=ne(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=ne(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=ne(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=ne(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new In(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),tk(this.hammer,function(r){t._moveSelector(r)}),this.hammer.on("tap",function(r){t._moveSelector(r)}),this.hammer.on("panstart",function(r){t._moveSelector(r)}),this.hammer.on("panmove",function(r){t._moveSelector(r)}),this.hammer.on("panend",function(r){t._moveSelector(r)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,r,n);var a,o,l,c;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;var u=2*Math.PI/360,d=1/360,f=1/this.r,p;for(l=0;l<360;l++)for(c=0;c<this.r;c++)a=this.centerCoordinates.x+c*Math.sin(u*l),o=this.centerCoordinates.y+c*Math.cos(u*l),p=V.HSVToRGB(l*d,c*f,1),t.fillStyle="rgb("+p.r+","+p.g+","+p.b+")",t.fillRect(a-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,r,n)}this.generated=!0}},{key:"_moveSelector",value:function(t){var r=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-r.left,a=t.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,l=.5*this.colorPickerDiv.clientWidth,c=n-l,u=a-o,d=Math.atan2(c,u),f=.98*Math.min(Math.sqrt(c*c+u*u),l),p=Math.cos(d)*f+o,v=Math.sin(d)*f+l;this.colorPickerSelector.style.top=p-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=v-.5*this.colorPickerSelector.clientWidth+"px";var g=d/(2*Math.PI);g=g<0?g+1:g;var w=f/this.r,_=V.RGBToHSV(this.color.r,this.color.g,this.color.b);_.h=g,_.s=w;var S=V.HSVToRGB(_.h,_.s,_.v);S.a=this.color.a,this.color=S,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}(),qee=`div.vis-configuration {
    position:relative;
    display:block;
    float:left;
    font-size:12px;
}

div.vis-configuration-wrapper {
    display:block;
    width:700px;
}

div.vis-configuration-wrapper::after {
  clear: both;
  content: "";
  display: block;
}

div.vis-configuration.vis-config-option-container{
    display:block;
    width:495px;
    background-color: #ffffff;
    border:2px solid #f7f8fa;
    border-radius:4px;
    margin-top:20px;
    left:10px;
    padding-left:5px;
}

div.vis-configuration.vis-config-button{
    display:block;
    width:495px;
    height:25px;
    vertical-align: middle;
    line-height:25px;
    background-color: #f7f8fa;
    border:2px solid #ceced0;
    border-radius:4px;
    margin-top:20px;
    left:10px;
    padding-left:5px;
    cursor: pointer;
    margin-bottom:30px;
}

div.vis-configuration.vis-config-button.hover{
    background-color: #4588e6;
    border:2px solid #214373;
    color:#ffffff;
}

div.vis-configuration.vis-config-item{
    display:block;
    float:left;
    width:495px;
    height:25px;
    vertical-align: middle;
    line-height:25px;
}


div.vis-configuration.vis-config-item.vis-config-s2{
    left:10px;
    background-color: #f7f8fa;
    padding-left:5px;
    border-radius:3px;
}
div.vis-configuration.vis-config-item.vis-config-s3{
    left:20px;
    background-color: #e4e9f0;
    padding-left:5px;
    border-radius:3px;
}
div.vis-configuration.vis-config-item.vis-config-s4{
    left:30px;
    background-color: #cfd8e6;
    padding-left:5px;
    border-radius:3px;
}

div.vis-configuration.vis-config-header{
    font-size:18px;
    font-weight: bold;
}

div.vis-configuration.vis-config-label{
    width:120px;
    height:25px;
    line-height: 25px;
}

div.vis-configuration.vis-config-label.vis-config-s3{
    width:110px;
}
div.vis-configuration.vis-config-label.vis-config-s4{
    width:100px;
}

div.vis-configuration.vis-config-colorBlock{
    top:1px;
    width:30px;
    height:19px;
    border:1px solid #444444;
    border-radius:2px;
    padding:0px;
    margin:0px;
    cursor:pointer;
}

input.vis-configuration.vis-config-checkbox {
    left:-5px;
}


input.vis-configuration.vis-config-rangeinput{
    position:relative;
    top:-5px;
    width:60px;
    /*height:13px;*/
    padding:1px;
    margin:0;
    pointer-events:none;
}

input.vis-configuration.vis-config-range{
    /*removes default webkit styles*/
    -webkit-appearance: none;

    /*fix for FF unable to apply focus style bug */
    border: 0px solid white;
    background-color:rgba(0,0,0,0);

    /*required for proper track sizing in FF*/
    width: 300px;
    height:20px;
}
input.vis-configuration.vis-config-range::-webkit-slider-runnable-track {
    width: 300px;
    height: 5px;
    background: #dedede; /* Old browsers */
    background: -moz-linear-gradient(top,  #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dedede), color-stop(99%,#c8c8c8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* IE10+ */
    background: linear-gradient(to bottom,  #dedede 0%,#c8c8c8 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

    border: 1px solid #999999;
    box-shadow: #aaaaaa 0px 0px 3px 0px;
    border-radius: 3px;
}
input.vis-configuration.vis-config-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    border: 1px solid #14334b;
    height: 17px;
    width: 17px;
    border-radius: 50%;
    background: #3876c2; /* Old browsers */
    background: -moz-linear-gradient(top,  #3876c2 0%, #385380 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3876c2), color-stop(100%,#385380)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #3876c2 0%,#385380 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #3876c2 0%,#385380 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #3876c2 0%,#385380 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #3876c2 0%,#385380 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3876c2', endColorstr='#385380',GradientType=0 ); /* IE6-9 */
    box-shadow: #111927 0px 0px 1px 0px;
    margin-top: -7px;
}
input.vis-configuration.vis-config-range:focus {
    outline: none;
}
input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track {
    background: #9d9d9d; /* Old browsers */
    background: -moz-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#9d9d9d), color-stop(99%,#c8c8c8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #9d9d9d 0%,#c8c8c8 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #9d9d9d 0%,#c8c8c8 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #9d9d9d 0%,#c8c8c8 99%); /* IE10+ */
    background: linear-gradient(to bottom,  #9d9d9d 0%,#c8c8c8 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9d9d9d', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */
}

input.vis-configuration.vis-config-range::-moz-range-track {
    width: 300px;
    height: 10px;
    background: #dedede; /* Old browsers */
    background: -moz-linear-gradient(top,  #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dedede), color-stop(99%,#c8c8c8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* IE10+ */
    background: linear-gradient(to bottom,  #dedede 0%,#c8c8c8 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

    border: 1px solid #999999;
    box-shadow: #aaaaaa 0px 0px 3px 0px;
    border-radius: 3px;
}
input.vis-configuration.vis-config-range::-moz-range-thumb {
    border: none;
    height: 16px;
    width: 16px;

    border-radius: 50%;
    background:  #385380;
}

/*hide the outline behind the border*/
input.vis-configuration.vis-config-range:-moz-focusring{
    outline: 1px solid white;
    outline-offset: -1px;
}

input.vis-configuration.vis-config-range::-ms-track {
    width: 300px;
    height: 5px;

    /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */
    background: transparent;

    /*leave room for the larger thumb to overflow with a transparent border */
    border-color: transparent;
    border-width: 6px 0;

    /*remove default tick marks*/
    color: transparent;
}
input.vis-configuration.vis-config-range::-ms-fill-lower {
    background: #777;
    border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-fill-upper {
    background: #ddd;
    border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-thumb {
    border: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background:  #385380;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-lower {
    background: #888;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-upper {
    background: #ccc;
}

.vis-configuration-popup {
    position: absolute;
    background: rgba(57, 76, 89, 0.85);
    border: 2px solid #f2faff;
    line-height:30px;
    height:30px;
    width:150px;
    text-align:center;
    color: #ffffff;
    font-size:14px;
    border-radius:4px;
    -webkit-transition: opacity 0.3s ease-in-out;
    -moz-transition: opacity 0.3s ease-in-out;
    transition: opacity 0.3s ease-in-out;
}
.vis-configuration-popup:after, .vis-configuration-popup:before {
    left: 100%;
    top: 50%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.vis-configuration-popup:after {
    border-color: rgba(136, 183, 213, 0);
    border-left-color: rgba(57, 76, 89, 0.85);
    border-width: 8px;
    margin-top: -8px;
}
.vis-configuration-popup:before {
    border-color: rgba(194, 225, 245, 0);
    border-left-color: #f2faff;
    border-width: 12px;
    margin-top: -12px;
}`;An(qee);var _k=function(){function e(s,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;ot(this,e),this.parent=s,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},V.extend(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Bee(n),this.wrapper=void 0}return lt(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var r=!0;if(typeof t=="string")this.options.filter=t;else if(Qe(t))this.options.filter=t.join();else if(Ke(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),Ge(t)!==void 0&&(this.options.filter=Ge(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(r=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,r=t):typeof t=="function"&&(this.options.filter=t,r=!0);Ge(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=Ge(this.options),r=0,n=!1;for(var a in this.configureOptions)this.configureOptions.hasOwnProperty(a)&&(this.allowCreation=!1,n=!1,typeof t=="function"?(n=t(a,[]),n=n||this._handleObject(this.configureOptions[a],[a],!0)):(t===!0||$t(t).call(t,a)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),r++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var r=this.moduleOptions,n=0;n<t.length;n++)if(r[t[n]]!==void 0)r=r[t[n]];else{r=void 0;break}return r}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return Se(a).call(a,function(l){r.appendChild(l)}),this.domElements.push(r),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerHTML=V.xss(t),this._makeItem([],r)}},{key:"_makeLabel",value:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");return a.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0?a.innerHTML=V.xss("<i><b>"+t+":</b></i>"):a.innerHTML=V.xss(t+":"),a}},{key:"_makeDropdown",value:function(t,r,n){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;r!==void 0&&$t(t).call(t,r)!==-1&&(o=$t(t).call(t,r));for(var l=0;l<t.length;l++){var c=document.createElement("option");c.value=t[l],l===o&&(c.selected="selected"),c.innerHTML=t[l],a.appendChild(c)}var u=this;a.onchange=function(){u._update(this.value,n)};var d=this._makeLabel(n[n.length-1],n);this._makeItem(n,d,a)}},{key:"_makeRange",value:function(t,r,n){var a=t[0],o=t[1],l=t[2],c=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=l}catch(S){}u.step=c;var d="",f=0;if(r!==void 0){var p=1.2;r<0&&r*p<o?(u.min=Math.ceil(r*p),f=u.min,d="range increased"):r/p<o&&(u.min=Math.ceil(r/p),f=u.min,d="range increased"),r*p>l&&l!==1&&(u.max=Math.ceil(r*p),f=u.max,d="range increased"),u.value=r}else u.value=a;var v=document.createElement("input");v.className="vis-configuration vis-config-rangeinput",v.value=Number(u.value);var g=this;u.onchange=function(){v.value=this.value,g._update(Number(this.value),n)},u.oninput=function(){v.value=this.value};var w=this._makeLabel(n[n.length-1],n),_=this._makeItem(n,w,u,v);d!==""&&this.popupHistory[_]!==f&&(this.popupHistory[_]=f,this._setupPopup(d,_))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-button",r.innerHTML="generate options",r.onclick=function(){t._printOptions()},r.onmouseover=function(){r.className="vis-configuration vis-config-button hover"},r.onmouseout=function(){r.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(r)}}},{key:"_setupPopup",value:function(t,r){var n=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerHTML=V.xss(t),a.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:r}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var r=this.domElements[this.popupDiv.index],n=r.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=wn(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=wn(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,r,n){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=t,r!==void 0&&(a.checked=r,r!==t&&(Ke(t)==="object"?r!==t.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));var o=this;a.onchange=function(){o._update(this.checked,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,a)}},{key:"_makeTextInput",value:function(t,r,n){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=r,r!==t&&this.changedOptions.push({path:n,value:r});var o=this;a.onchange=function(){o._update(this.value,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,a)}},{key:"_makeColorField",value:function(t,r,n){var a=this,o=t[1],l=document.createElement("div");r=r===void 0?o:r,r!=="none"?(l.className="vis-configuration vis-config-colorBlock",l.style.backgroundColor=r):l.className="vis-configuration vis-config-colorBlock none",r=r===void 0?o:r,l.onclick=function(){a._showColorPicker(r,l,n)};var c=this._makeLabel(n[n.length-1],n);this._makeItem(n,c,l)}},{key:"_showColorPicker",value:function(t,r,n){var a=this;r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var l="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";r.style.backgroundColor=l,a._update(l,n)}),this.colorPicker.setCloseCallback(function(){r.onclick=function(){a._showColorPicker(t,r,n)}})}},{key:"_handleObject",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=Ge(this.options),l=!1;for(var c in t)if(t.hasOwnProperty(c)){a=!0;var u=t[c],d=V.copyAndExtendArray(r,c);if(typeof o=="function"&&(a=o(c,r),a===!1&&!Qe(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,a=this._handleObject(u,d,!0),this.allowCreation=n===!1)),a!==!1){l=!0;var f=this._getValue(d);if(Qe(u))this._handleArray(u,f,d);else if(typeof u=="string")this._makeTextInput(u,f,d);else if(typeof u=="boolean")this._makeCheckbox(u,f,d);else if(u instanceof Object){var p=!0;if($t(r).call(r,"physics")!==-1&&this.moduleOptions.physics.solver!==c&&(p=!1),p===!0)if(u.enabled!==void 0){var v=V.copyAndExtendArray(d,"enabled"),g=this._getValue(v);if(g===!0){var w=this._makeLabel(c,d,!0);this._makeItem(d,w),l=this._handleObject(u,d)||l}else this._makeCheckbox(u,g,d)}else{var _=this._makeLabel(c,d,!0);this._makeItem(d,_),l=this._handleObject(u,d)||l}}else console.error("dont know how to handle",u,c,d)}}return l}},{key:"_handleArray",value:function(t,r,n){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,r,n),t[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof t[0]=="string"?(this._makeDropdown(t,r,n),t[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof t[0]=="number"&&(this._makeRange(t,r,n),t[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}},{key:"_update",value:function(t,r){var n=this._constructOptions(t,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<r.length;o++)r[o]!=="global"&&(a[r[o]]===void 0&&(a[r[o]]={}),o!==r.length-1?a=a[r[o]]:a[r[o]]=t);return n}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+jn(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,t);return t}}]),e}();function Xee(e){var s=Kee();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function Kee(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var Sp=function(e){Rn(t,e);var s=Xee(t);function t(r,n,a,o){var l,c,u,d,f,p,v,g;if(ot(this,t),g=s.call(this),g.initTime=new Date,g.itemsDone=!1,!(Tt(g)instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!(Qe(a)||ti(a))&&a instanceof Object){var w=o;o=a,a=w}o&&o.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var _=Tt(g);if(g.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:En},g.options=V.deepExtend({},g.defaultOptions),o&&V.setupXSSProtection(o.xss),g._create(r),!o||o&&typeof o.rtl=="undefined"){g.dom.root.style.visibility="hidden";for(var S,I=g.dom.root;!S&&I;)S=window.getComputedStyle(I,null).direction,I=I.parentElement;g.options.rtl=S&&S.toLowerCase()=="rtl"}else g.options.rtl=o.rtl;o&&(o.rollingMode&&(g.options.rollingMode=o.rollingMode),o.onInitialDrawComplete&&(g.options.onInitialDrawComplete=o.onInitialDrawComplete),o.onTimeout&&(g.options.onTimeout=o.onTimeout),o.loadingScreenTemplate&&(g.options.loadingScreenTemplate=o.loadingScreenTemplate));var C=document.createElement("div");if(g.options.loadingScreenTemplate){var $,O=ne($=g.options.loadingScreenTemplate).call($,Tt(g)),A=O(g.dom.loadingScreen);A instanceof Object&&!(A instanceof Element)?O(C):A instanceof Element?(C.innerHTML="",C.appendChild(A)):A!=null&&(C.innerHTML=V.xss(A))}g.dom.loadingScreen.appendChild(C),g.components=[],g.body={dom:g.dom,domProps:g.props,emitter:{on:ne(l=g.on).call(l,Tt(g)),off:ne(c=g.off).call(c,Tt(g)),emit:ne(u=g.emit).call(u,Tt(g))},hiddenDates:[],util:{getScale:function(){return _.timeAxis.step.scale},getStep:function(){return _.timeAxis.step.step},toScreen:ne(d=_._toScreen).call(d,_),toGlobalScreen:ne(f=_._toGlobalScreen).call(f,_),toTime:ne(p=_._toTime).call(p,_),toGlobalTime:ne(v=_._toGlobalTime).call(v,_)}},g.range=new Zw(g.body,g.options),g.components.push(g.range),g.body.range=g.range,g.timeAxis=new oc(g.body,g.options),g.timeAxis2=null,g.components.push(g.timeAxis),g.currentTime=new uk(g.body,g.options),g.components.push(g.currentTime),g.itemSet=new lc(g.body,g.options),g.components.push(g.itemSet),g.itemsData=null,g.groupsData=null;function z(N,Y){!_.hasListeners(N)||_.emit(N,_.getEventProperties(Y))}return g.dom.root.onclick=function(N){z("click",N)},g.dom.root.ondblclick=function(N){z("doubleClick",N)},g.dom.root.oncontextmenu=function(N){z("contextmenu",N)},g.dom.root.onmouseover=function(N){z("mouseOver",N)},window.PointerEvent?(g.dom.root.onpointerdown=function(N){z("mouseDown",N)},g.dom.root.onpointermove=function(N){z("mouseMove",N)},g.dom.root.onpointerup=function(N){z("mouseUp",N)}):(g.dom.root.onmousemove=function(N){z("mouseMove",N)},g.dom.root.onmousedown=function(N){z("mouseDown",N)},g.dom.root.onmouseup=function(N){z("mouseUp",N)}),g.initialFitDone=!1,g.on("changed",function(){if(_.itemsData!=null){if(!_.initialFitDone&&!_.options.rollingMode)if(_.initialFitDone=!0,_.options.start!=null||_.options.end!=null){if(_.options.start==null||_.options.end==null)var N=_.getItemRange();var Y=_.options.start!=null?_.options.start:N.min,R=_.options.end!=null?_.options.end:N.max;_.setWindow(Y,R,{animation:!1})}else _.fit({animation:!1});!_.initialDrawDone&&(_.initialRangeChangeDone||!_.options.start&&!_.options.end||_.options.rollingMode)&&(_.initialDrawDone=!0,_.itemSet.initialDrawDone=!0,_.dom.root.style.visibility="visible",_.dom.loadingScreen.parentNode.removeChild(_.dom.loadingScreen),_.options.onInitialDrawComplete&&wn(function(){return _.options.onInitialDrawComplete()},0))}}),g.on("destroyTimeline",function(){_.destroy()}),o&&g.setOptions(o),g.body.emitter.on("fit",function(N){g._onFit(N),g.redraw()}),a&&g.setGroups(a),n&&g.setItems(n),g._redraw(),g}return lt(t,[{key:"_createConfigurator",value:function(){return new _k(this,this.dom.container,Hee)}},{key:"redraw",value:function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}},{key:"setOptions",value:function(n){var a=yk.validate(n,Uee);if(a===!0&&console.log("%cErrors have been found in the supplied options object.",cc),Zs.prototype.setOptions.call(this,n),"type"in n&&n.type!==this.options.type){this.options.type=n.type;var o=this.itemsData;if(o){var l=this.getSelection();this.setItems(null),this.setItems(o.rawDS),this.setSelection(l)}}}},{key:"setItems",value:function(n){this.itemsDone=!1;var a;n?ti(n)?a=ca(n):a=ca(new ei(n)):a=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=a,this.itemSet&&this.itemSet.setItems(a!=null?a.rawDS:null)}},{key:"setGroups",value:function(n){var a,o=function(c){return c.visible!==!1};n?(Qe(n)&&(n=new ei(n)),a=new eQ(n,{filter:o})):a=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=a,this.itemSet.setGroups(a)}},{key:"setData",value:function(n){n&&n.groups&&this.setGroups(n.groups),n&&n.items&&this.setItems(n.items)}},{key:"setSelection",value:function(n,a){this.itemSet&&this.itemSet.setSelection(n),a&&a.focus&&this.focus(n,a)}},{key:"getSelection",value:function(){return this.itemSet&&this.itemSet.getSelection()||[]}},{key:"focus",value:function(n,a){if(!(!this.itemsData||n==null)){var o=Qe(n)?n:[n],l=this.itemsData.get(o),c=null,u=null;if(Se(l).call(l,function(O){var A=O.start.valueOf(),z="end"in O?O.end.valueOf():O.start.valueOf();(c===null||A<c)&&(c=A),(u===null||z>u)&&(u=z)}),c!==null&&u!==null){var d=this,f=this.itemSet.items[o[0]],p=this._getScrollTop()*-1,v=null,g=function(A,z,N){var Y=By(d,f);if(Y!==!1&&(v||(v=Y),!(v.itemTop==Y.itemTop&&!v.shouldScroll))){v.itemTop!=Y.itemTop&&Y.shouldScroll&&(v=Y,p=d._getScrollTop()*-1);var R=p,L=v.scrollOffset,j=N?L:R+(L-R)*A;d._setScrollTop(-j),z||d._redraw()}},w=function(){var A=By(d,f);A.shouldScroll&&A.itemTop!=v.itemTop&&(d._setScrollTop(-A.scrollOffset),d._redraw())},_=function(){w(),wn(w,100)},S=a&&a.zoom!==void 0?a.zoom:!0,I=(c+u)/2,C=S?(u-c)*1.1:Math.max(this.range.end-this.range.start,(u-c)*1.1),$=a&&a.animation!==void 0?a.animation:!0;$||(v={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(I-C/2,I+C/2,{animation:$},_,g)}}}},{key:"fit",value:function(n,a){var o=n&&n.animation!==void 0?n.animation:!0,l;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(l=this.getDataRange(),this.moveTo(l.min.valueOf(),{animation:o},a)):(l=this.getItemRange(),this.range.setRange(l.min,l.max,{animation:o},a))}},{key:"getItemRange",value:function(){var n=this,a=this.getDataRange(),o=a.min!==null?a.min.valueOf():null,l=a.max!==null?a.max.valueOf():null,c=null,u=null;if(o!=null&&l!=null){var d=l-o;d<=0&&(d=10);var f=d/this.props.center.width,p={},v=0;Se(V).call(V,this.itemSet.items,function($,O){if($.groupShowing){var A=!0;p[O]=$.redraw(A),v=p[O].length}});var g=v>0;if(g)for(var w=function(O){Se(V).call(V,p,function(A){A[O]()})},_=0;_<v;_++)w(_);if(Se(V).call(V,this.itemSet.items,function($){var O=Vd($),A=zd($),z,N;n.options.rtl?(z=O-($.getWidthRight()+10)*f,N=A+($.getWidthLeft()+10)*f):(z=O-($.getWidthLeft()+10)*f,N=A+($.getWidthRight()+10)*f),z<o&&(o=z,c=$),N>l&&(l=N,u=$)}),c&&u){var S=c.getWidthLeft()+10,I=u.getWidthRight()+10,C=this.props.center.width-S-I;C>0&&(this.options.rtl?(o=Vd(c)-I*d/C,l=zd(u)+S*d/C):(o=Vd(c)-S*d/C,l=zd(u)+I*d/C))}}return{min:o!=null?new Date(o):null,max:l!=null?new Date(l):null}}},{key:"getDataRange",value:function(){var n=null,a=null;if(this.itemsData){var o;Se(o=this.itemsData).call(o,function(l){var c=V.convert(l.start,"Date").valueOf(),u=V.convert(l.end!=null?l.end:l.start,"Date").valueOf();(n===null||c<n)&&(n=c),(a===null||u>a)&&(a=u)})}return{min:n!=null?new Date(n):null,max:a!=null?new Date(a):null}}},{key:"getEventProperties",value:function(n){var a=n.center?n.center.x:n.clientX,o=n.center?n.center.y:n.clientY,l=this.dom.centerContainer.getBoundingClientRect(),c=this.options.rtl?l.right-a:a-l.left,u=o-l.top,d=this.itemSet.itemFromTarget(n),f=this.itemSet.groupFromTarget(n),p=wp.customTimeFromTarget(n),v=this.itemSet.options.snap||null,g=this.body.util.getScale(),w=this.body.util.getStep(),_=this._toTime(c),S=v?v(_,g,w):_,I=V.getTarget(n),C=null;return d!=null?C="item":p!=null?C="custom-time":V.hasParent(I,this.timeAxis.dom.foreground)||this.timeAxis2&&V.hasParent(I,this.timeAxis2.dom.foreground)?C="axis":V.hasParent(I,this.itemSet.dom.labelSet)?C="group-label":V.hasParent(I,this.currentTime.bar)?C="current-time":V.hasParent(I,this.dom.center)&&(C="background"),{event:n,item:d?d.id:null,isCluster:d?!!d.isCluster:!1,items:d?d.items||[]:null,group:f?f.groupId:null,customTime:p?p.options.id:null,what:C,pageX:n.srcEvent?n.srcEvent.pageX:n.pageX,pageY:n.srcEvent?n.srcEvent.pageY:n.pageY,x:c,y:u,time:_,snappedTime:S}}},{key:"toggleRollingMode",value:function(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}},{key:"_redraw",value:function(){Zs.prototype._redraw.call(this)}},{key:"_onFit",value:function(n){var a=n.start,o=n.end,l=n.animation;o?this.range.setRange(a,o,{animation:l}):this.moveTo(a.valueOf(),{animation:l})}}]),t}(Zs);function Vd(e){return V.convert(e.data.start,"Date").valueOf()}function zd(e){var s=e.data.end!=null?e.data.end:e.data.start;return V.convert(s,"Date").valueOf()}function By(e,s){if(!s.parent)return!1;var t=e.options.rtl?e.props.rightContainer.height:e.props.leftContainer.height,r=e.props.center.height,n=s.parent,a=n.top,o=!0,l=e.timeAxis.options.orientation.axis,c=function(){return l=="bottom"?n.height-s.top-s.height:s.top},u=e._getScrollTop()*-1,d=a+c(),f=s.height;return d<u?a+t<=a+c()+f&&(a+=c()-e.itemSet.options.margin.item.vertical):d+f>u+t?a+=c()+f-t+e.itemSet.options.margin.item.vertical:o=!1,a=Math.min(a,r-t),{shouldScroll:o,scrollOffset:a,itemTop:d}}var Qee=function(){function e(s,t,r,n,a,o){var l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(ot(this,e),this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=a,this.majorCharHeight=o,this._start=s,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=l,this.autoScaleStart=r,this.autoScaleEnd=n,this.formattingFunction=c,r||n){var u=this,d=function(p){var v=p-p%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return p%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>.5*(u.magnitudefactor*u.minorSteps[u.minorStepIdx])?v+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:v};r&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=d(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=d(this._end)),this.determineScale()}}return lt(e,[{key:"setCharHeight",value:function(t){this.majorCharHeight=t}},{key:"setHeight",value:function(t){this.containerHeight=t}},{key:"determineScale",value:function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var r=this.majorCharHeight/this.scale,n=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);var a=0;n<0&&(a=n);for(var o=!1,l=a;Math.abs(l)<=Math.abs(n);l++){this.magnitudefactor=Math.pow(10,l);for(var c=0;c<this.minorSteps.length;c++){var u=this.magnitudefactor*this.minorSteps[c];if(u>=r){o=!0,this.minorStepIdx=c;break}}if(o===!0)break}}},{key:"is_major",value:function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}},{key:"getStep",value:function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}},{key:"getFirstMajor",value:function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)}},{key:"formatValue",value:function(t){var r=t.toPrecision(5);return typeof this.formattingFunction=="function"&&(r=this.formattingFunction(t)),typeof r=="number"?"".concat(r):typeof r=="string"?r:t.toPrecision(5)}},{key:"getLines",value:function(){for(var t=[],r=this.getStep(),n=(r-this._start%r)%r,a=this._start+n;this._end-a>1e-5;a+=r)a!=this._start&&t.push({major:this.is_major(a),y:this.convertValue(a),val:this.formatValue(a)});return t}},{key:"followScale",value:function(t){var r=this.minorStepIdx,n=this._start,a=this._end,o=this,l=function(){o.magnitudefactor*=2},c=function(){o.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,r==2||l(),l()):(this.minorStepIdx=2,r==1||c(),c()));for(var u=t.convertValue(0),d=t.getStep()*t.scale,f=!1,p=0;!f&&p++<5;){this.scale=d/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var v=this.containerHeight/this.scale;this._start=n,this._end=this._start+v;var g=this._end*this.scale,w=this.magnitudefactor*this.majorSteps[this.minorStepIdx],_=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var S=u-g;this._end+=S/this.scale,this._start=this._end-v}else this.autoScaleStart?(this._start-=_/this.scale,this._end=this._start+v):(this._start+=w-_/this.scale,this._end=this._start+v);if(!this.autoScaleEnd&&this._end>a+1e-5){c(),f=!1;continue}if(!this.autoScaleStart&&this._start<n-1e-5)if(this.zeroAlign&&n>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{c(),f=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&v<a-n){l(),f=!1;continue}f=!0}}},{key:"convertValue",value:function(t){return this.containerHeight-(t-this._start)*this.scale}},{key:"screenToValue",value:function(t){return(this.containerHeight-t)/this.scale+this._start}}]),e}(),Jee=`
.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal {
  position: absolute;
  width: 100%;
  height: 0;
  border-bottom: 1px solid;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major {
  border-color: #bfbfbf;
}


.vis-data-axis .vis-y-axis.vis-major {
  width: 100%;
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-major.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}


.vis-data-axis .vis-y-axis.vis-minor {
  position: absolute;
  width: 100%;
  color: #bebebe;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-minor.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title {
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
  bottom: 20px;
  text-align: center;
}

.vis-data-axis .vis-y-axis.vis-title.vis-measure {
  padding: 0;
  margin: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title.vis-left {
  bottom: 0;
  -webkit-transform-origin: left top;
  -moz-transform-origin: left top;
  -ms-transform-origin: left top;
  -o-transform-origin: left top;
  transform-origin: left bottom;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.vis-data-axis .vis-y-axis.vis-title.vis-right {
  bottom: 0;
  -webkit-transform-origin: right bottom;
  -moz-transform-origin: right bottom;
  -ms-transform-origin: right bottom;
  -o-transform-origin: right bottom;
  transform-origin: right bottom;
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  transform: rotate(90deg);
}

.vis-legend {
  background-color: rgba(247, 252, 255, 0.65);
  padding: 5px;
  border: 1px solid #b3b3b3;
  box-shadow: 2px 2px 10px rgba(154, 154, 154, 0.55);
}

.vis-legend-text {
  /*font-size: 10px;*/
  white-space: nowrap;
  display: inline-block
}`;An(Jee);function Zee(e,s){var t=typeof ai!="undefined"&&Lr(e)||e["@@iterator"];if(!t){if(Qe(e)||(t=ete(e))||s&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw l}}}}function ete(e,s){var t;if(!!e){if(typeof e=="string")return qy(e,s);var r=kn(t=Object.prototype.toString.call(e)).call(t,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Li(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qy(e,s)}}function qy(e,s){(s==null||s>e.length)&&(s=e.length);for(var t=0,r=new Array(s);t<s;t++)r[t]=e[t];return r}function tte(e){var s=nte();return function(){var r=_t(e),n;if(s){var a=_t(this).constructor;n=Ve(r,arguments,a)}else n=r.apply(this,arguments);return Wn(this,n)}}function nte(){if(typeof Reflect=="undefined"||!Ve||Ve.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ve(Boolean,[],function(){})),!0}catch(e){return!1}}var Xy=function(e){Rn(t,e);var s=tte(t);function t(r,n,a,o){var l;ot(this,t),l=s.call(this),l.id=ns(),l.body=r,l.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(d){return"".concat(nc(d.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(d){return"".concat(nc(d.toPrecision(3)))},title:{text:void 0,style:void 0}}},l.linegraphOptions=o,l.linegraphSVG=a,l.props={},l.DOMelements={lines:{},labels:{},title:{}},l.dom={},l.scale=void 0,l.range={start:0,end:0},l.options=V.extend({},l.defaultOptions),l.conversionFactor=1,l.setOptions(n),l.width=Number("".concat(l.options.width).replace("px","")),l.minWidth=l.width,l.height=l.linegraphSVG.getBoundingClientRect().height,l.hidden=!1,l.stepPixels=25,l.zeroCrossing=-1,l.amountOfSteps=-1,l.lineOffset=0,l.master=!0,l.masterAxis=null,l.svgElements={},l.iconsRemoved=!1,l.groups={},l.amountOfGroups=0,l._create(),l.scale==null&&l._redrawLabels(),l.framework={svg:l.svg,svgElements:l.svgElements,options:l.options,groups:l.groups};var c=Tt(l);return l.body.emitter.on("verticalDrag",function(){c.dom.lineContainer.style.top="".concat(c.body.domProps.scrollTop,"px")}),l}return lt(t,[{key:"addGroup",value:function(n,a){this.groups.hasOwnProperty(n)||(this.groups[n]=a),this.amountOfGroups+=1}},{key:"updateGroup",value:function(n,a){this.groups.hasOwnProperty(n)||(this.amountOfGroups+=1),this.groups[n]=a}},{key:"removeGroup",value:function(n){this.groups.hasOwnProperty(n)&&(delete this.groups[n],this.amountOfGroups-=1)}},{key:"setOptions",value:function(n){if(n){var a=!1;this.options.orientation!=n.orientation&&n.orientation!==void 0&&(a=!0);var o=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];V.selectiveDeepExtend(o,this.options,n),this.minWidth=Number("".concat(this.options.width).replace("px","")),a===!0&&this.dom.frame&&(this.hide(),this.show())}}},{key:"_create",value:function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}},{key:"_redrawGroupIcons",value:function(){_i(this.svgElements);var n,a=this.options.iconWidth,o=15,l=4,c=l+.5*o;this.options.orientation==="left"?n=l:n=this.width-a-l;var u=tn(this.groups);Kt(u).call(u,function(v,g){return v<g?-1:1});var d=Zee(u),f;try{for(d.s();!(f=d.n()).done;){var p=f.value;this.groups[p].visible===!0&&(this.linegraphOptions.visibility[p]===void 0||this.linegraphOptions.visibility[p]===!0)&&(this.groups[p].getLegend(a,o,this.framework,n,c),c+=o+l)}}catch(v){d.e(v)}finally{d.f()}sr(this.svgElements),this.iconsRemoved=!1}},{key:"_cleanupIcons",value:function(){this.iconsRemoved===!1&&(_i(this.svgElements),sr(this.svgElements),this.iconsRemoved=!0)}},{key:"show",value:function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}},{key:"hide",value:function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}},{key:"setRange",value:function(n,a){this.range.start=n,this.range.end=a}},{key:"redraw",value:function(){var n=!1,a=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(var o in this.groups)this.groups.hasOwnProperty(o)&&this.groups[o].visible===!0&&(this.linegraphOptions.visibility[o]===void 0||this.linegraphOptions.visibility[o]===!0)&&a++;if(this.amountOfGroups===0||a===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;var l=this.props,c=this.dom.frame;c.className="vis-data-axis",this._calculateCharSize();var u=this.options.orientation,d=this.options.showMinorLabels,f=this.options.showMajorLabels,p=this.body.dom.backgroundHorizontal.offsetWidth;l.minorLabelHeight=d?l.minorCharHeight:0,l.majorLabelHeight=f?l.majorCharHeight:0,l.minorLineWidth=p-this.lineOffset-this.width+2*this.options.minorLinesOffset,l.minorLineHeight=1,l.majorLineWidth=p-this.lineOffset-this.width+2*this.options.majorLinesOffset,l.majorLineHeight=1,u==="left"?(c.style.top="0",c.style.left="0",c.style.bottom="",c.style.width="".concat(this.width,"px"),c.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(c.style.top="",c.style.bottom="0",c.style.left="0",c.style.width="".concat(this.width,"px"),c.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),n=this._redrawLabels(),n=this._isResized()||n,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(u)}return n}},{key:"_redrawLabels",value:function(){var n=this,a=!1;_i(this.DOMelements.lines),_i(this.DOMelements.labels);var o=this.options.orientation,l=this.options[o].range!=null?this.options[o].range:{},c=!0;l.max!=null&&(this.range.end=l.max,c=!1);var u=!0;l.min!=null&&(this.range.start=l.min,u=!1),this.scale=new Qee(this.range.start,this.range.end,u,c,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[o].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;var d=this.scale.getLines();Se(d).call(d,function(v){var g=v.y,w=v.major;n.options.showMinorLabels&&w===!1&&n._redrawLabel(g-2,v.val,o,"vis-y-axis vis-minor",n.props.minorCharHeight),w&&g>=0&&n._redrawLabel(g-2,v.val,o,"vis-y-axis vis-major",n.props.majorCharHeight),n.master===!0&&(w?n._redrawLine(g,o,"vis-grid vis-horizontal vis-major",n.options.majorLinesOffset,n.props.majorLineWidth):n._redrawLine(g,o,"vis-grid vis-horizontal vis-minor",n.options.minorLinesOffset,n.props.minorLineWidth))});var f=0;this.options[o].title!==void 0&&this.options[o].title.text!==void 0&&(f=this.props.titleCharHeight);var p=this.options.icons===!0?Math.max(this.options.iconWidth,f)+this.options.labelOffsetX+15:f+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-p&&this.options.visible===!0?(this.width=this.maxLabelSize+p,this.options.width="".concat(this.width,"px"),sr(this.DOMelements.lines),sr(this.DOMelements.labels),this.redraw(),a=!0):this.maxLabelSize<this.width-p&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+p),this.options.width="".concat(this.width,"px"),sr(this.DOMelements.lines),sr(this.DOMelements.labels),this.redraw(),a=!0):(sr(this.DOMelements.lines),sr(this.DOMelements.labels),a=!1),a}},{key:"convertValue",value:function(n){return this.scale.convertValue(n)}},{key:"screenToValue",value:function(n){return this.scale.screenToValue(n)}},{key:"_redrawLabel",value:function(n,a,o,l,c){var u=dd("div",this.DOMelements.labels,this.dom.frame);u.className=l,u.innerHTML=V.xss(a),o==="left"?(u.style.left="-".concat(this.options.labelOffsetX,"px"),u.style.textAlign="right"):(u.style.right="-".concat(this.options.labelOffsetX,"px"),u.style.textAlign="left"),u.style.top="".concat(n-.5*c+this.options.labelOffsetY,"px"),a+="";var d=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<a.length*d&&(this.maxLabelSize=a.length*d)}},{key:"_redrawLine",value:function(n,a,o,l,c){if(this.master===!0){var u=dd("div",this.DOMelements.lines,this.dom.lineContainer);u.className=o,u.innerHTML="",a==="left"?u.style.left="".concat(this.width-l,"px"):u.style.right="".concat(this.width-l,"px"),u.style.width="".concat(c,"px"),u.style.top="".concat(n,"px")}}},{key:"_redrawTitle",value:function(n){if(_i(this.DOMelements.title),this.options[n].title!==void 0&&this.options[n].title.text!==void 0){var a=dd("div",this.DOMelements.title,this.dom.frame);a.className="vis-y-axis vis-title vis-".concat(n),a.innerHTML=V.xss(this.options[n].title.text),this.options[n].title.style!==void 0&&V.addCssText(a,this.options[n].title.style),n==="left"?a.style.left="".concat(this.props.titleCharHeight,"px"):a.style.right="".concat(this.props.titleCharHeight,"px"),a.style.width="".concat(this.height,"px")}sr(this.DOMelements.title)}},{key:"_calculateCharSize",value:function(){if(!("minorCharHeight"in this.props)){var n=document.createTextNode("0"),a=document.createElement("div");a.className="vis-y-axis vis-minor vis-measure",a.appendChild(n),this.dom.frame.appendChild(a),this.props.minorCharHeight=a.clientHeight,this.props.minorCharWidth=a.clientWidth,this.dom.frame.removeChild(a)}if(!("majorCharHeight"in this.props)){var o=document.createTextNode("0"),l=document.createElement("div");l.className="vis-y-axis vis-major vis-measure",l.appendChild(o),this.dom.frame.appendChild(l),this.props.majorCharHeight=l.clientHeight,this.props.majorCharWidth=l.clientWidth,this.dom.frame.removeChild(l)}if(!("titleCharHeight"in this.props)){var c=document.createTextNode("0"),u=document.createElement("div");u.className="vis-y-axis vis-title vis-measure",u.appendChild(c),this.dom.frame.appendChild(u),this.props.titleCharHeight=u.clientHeight,this.props.titleCharWidth=u.clientWidth,this.dom.frame.removeChild(u)}}}]),t}(Ri);function Yo(e,s){}Yo.draw=function(e,s,t,r){r=r||0;for(var n=rte(t,s),a=0;a<e.length;a++)if(!n)oa(e[a].screen_x+r,e[a].screen_y,Ah(s),t.svgElements,t.svg,e[a].label);else{var o=n(e[a],s);(o===!0||Ke(o)==="object")&&oa(e[a].screen_x+r,e[a].screen_y,Ah(s,o),t.svgElements,t.svg,e[a].label)}};Yo.drawIcon=function(e,s,t,r,n,a){var o=n*.5,l=wr("rect",a.svgElements,a.svg);l.setAttributeNS(null,"x",s),l.setAttributeNS(null,"y",t-o),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*o),l.setAttributeNS(null,"class","vis-outline"),oa(s+.5*r,t,Ah(e),a.svgElements,a.svg)};function Ah(e,s){return s=typeof s=="undefined"?{}:s,{style:s.style||e.options.drawPoints.style,styles:s.styles||e.options.drawPoints.styles,size:s.size||e.options.drawPoints.size,className:s.className||e.className}}function rte(e,s){var t=void 0;return e.options&&e.options.drawPoints&&e.options.drawPoints.onRender&&typeof e.options.drawPoints.onRender=="function"&&(t=e.options.drawPoints.onRender),s.group.options&&s.group.options.drawPoints&&s.group.options.drawPoints.onRender&&typeof s.group.options.drawPoints.onRender=="function"&&(t=s.group.options.drawPoints.onRender),t}function Mn(e,s){}Mn.drawIcon=function(e,s,t,r,n,a){var o=n*.5,l=wr("rect",a.svgElements,a.svg);l.setAttributeNS(null,"x",s),l.setAttributeNS(null,"y",t-o),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*o),l.setAttributeNS(null,"class","vis-outline");var c=Math.round(.3*r),u=e.options.barChart.width,d=u/c,f=Math.round(.4*n),p=Math.round(.75*n),v=Math.round((r-2*c)/3);if(bh(s+.5*c+v,t+o-f-1,c,f,e.className+" vis-bar",a.svgElements,a.svg,e.style),bh(s+1.5*c+v+2,t+o-p-1,c,p,e.className+" vis-bar",a.svgElements,a.svg,e.style),e.options.drawPoints.enabled==!0){var g={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/d,className:e.className};oa(s+.5*c+v,t+o-f-1,g,a.svgElements,a.svg),oa(s+1.5*c+v+2,t+o-p-1,g,a.svgElements,a.svg)}};Mn.draw=function(e,s,t){var r=[],n={},a,o,l,c,u,d,f=0;for(u=0;u<e.length;u++)if(c=t.groups[e[u]],c.options.style==="bar"&&c.visible===!0&&(t.options.groups.visibility[e[u]]===void 0||t.options.groups.visibility[e[u]]===!0))for(d=0;d<s[e[u]].length;d++)r.push({screen_x:s[e[u]][d].screen_x,screen_end:s[e[u]][d].screen_end,screen_y:s[e[u]][d].screen_y,x:s[e[u]][d].x,end:s[e[u]][d].end,y:s[e[u]][d].y,groupId:e[u],label:s[e[u]][d].label}),f+=1;if(f!==0)for(Kt(r).call(r,function(I,C){return I.screen_x===C.screen_x?I.groupId<C.groupId?-1:1:I.screen_x-C.screen_x}),Mn._getDataIntersections(n,r),u=0;u<r.length;u++){c=t.groups[r[u].groupId];var p=c.options.barChart.minWidth!=null?c.options.barChart.minWidth:.1*c.options.barChart.width;o=r[u].screen_x;var v=0;if(n[o]===void 0)u+1<r.length&&(a=Math.abs(r[u+1].screen_x-o)),l=Mn._getSafeDrawData(a,c,p);else{var g=u+(n[o].amount-n[o].resolved);g<r.length&&(a=Math.abs(r[g].screen_x-o)),l=Mn._getSafeDrawData(a,c,p),n[o].resolved+=1,c.options.stack===!0&&c.options.excludeFromStacking!==!0?r[u].screen_y<c.zeroPosition?(v=n[o].accumulatedNegative,n[o].accumulatedNegative+=c.zeroPosition-r[u].screen_y):(v=n[o].accumulatedPositive,n[o].accumulatedPositive+=c.zeroPosition-r[u].screen_y):c.options.barChart.sideBySide===!0&&(l.width=l.width/n[o].amount,l.offset+=n[o].resolved*l.width-.5*l.width*(n[o].amount+1))}var w=l.width,_=r[u].screen_x;if(r[u].screen_end!=null?(w=r[u].screen_end-r[u].screen_x,_+=w*.5):_+=l.offset,bh(_,r[u].screen_y-v,w,c.zeroPosition-r[u].screen_y,c.className+" vis-bar",t.svgElements,t.svg,c.style),c.options.drawPoints.enabled===!0){var S={screen_x:r[u].screen_x,screen_y:r[u].screen_y-v,x:r[u].x,y:r[u].y,groupId:r[u].groupId,label:r[u].label};Yo.draw([S],c,t,l.offset)}}};Mn._getDataIntersections=function(e,s){for(var t,r=0;r<s.length;r++)r+1<s.length&&(t=Math.abs(s[r+1].screen_x-s[r].screen_x)),r>0&&(t=Math.min(t,Math.abs(s[r-1].screen_x-s[r].screen_x))),t===0&&(e[s[r].screen_x]===void 0&&(e[s[r].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),e[s[r].screen_x].amount+=1)};Mn._getSafeDrawData=function(e,s,t){var r,n;return e<s.options.barChart.width&&e>0?(r=e<t?t:e,n=0,s.options.barChart.align==="left"?n-=.5*e:s.options.barChart.align==="right"&&(n+=.5*e)):(r=s.options.barChart.width,n=0,s.options.barChart.align==="left"?n-=.5*s.options.barChart.width:s.options.barChart.align==="right"&&(n+=.5*s.options.barChart.width)),{width:r,offset:n}};Mn.getStackedYRange=function(e,s,t,r,n){if(e.length>0){Kt(e).call(e,function(o,l){return o.screen_x===l.screen_x?o.groupId<l.groupId?-1:1:o.screen_x-l.screen_x});var a={};Mn._getDataIntersections(a,e),s[r]=Mn._getStackedYRange(a,e),s[r].yAxisOrientation=n,t.push(r)}};Mn._getStackedYRange=function(e,s){for(var t,r=s[0].screen_y,n=s[0].screen_y,a=0;a<s.length;a++)t=s[a].screen_x,e[t]===void 0?(r=r>s[a].screen_y?s[a].screen_y:r,n=n<s[a].screen_y?s[a].screen_y:n):s[a].screen_y<0?e[t].accumulatedNegative+=s[a].screen_y:e[t].accumulatedPositive+=s[a].screen_y;for(var o in e)e.hasOwnProperty(o)&&(r=r>e[o].accumulatedNegative?e[o].accumulatedNegative:r,r=r>e[o].accumulatedPositive?e[o].accumulatedPositive:r,n=n<e[o].accumulatedNegative?e[o].accumulatedNegative:n,n=n<e[o].accumulatedPositive?e[o].accumulatedPositive:n);return{min:r,max:n}};function fn(e,s){}fn.calcPath=function(e,s){if(e!=null&&e.length>0){var t=[];return s.options.interpolation.enabled==!0?t=fn._catmullRom(e,s):t=fn._linear(e),t}};fn.drawIcon=function(e,s,t,r,n,a){var o=n*.5,l,c,u=wr("rect",a.svgElements,a.svg);if(u.setAttributeNS(null,"x",s),u.setAttributeNS(null,"y",t-o),u.setAttributeNS(null,"width",r),u.setAttributeNS(null,"height",2*o),u.setAttributeNS(null,"class","vis-outline"),l=wr("path",a.svgElements,a.svg),l.setAttributeNS(null,"class",e.className),e.style!==void 0&&l.setAttributeNS(null,"style",e.style),l.setAttributeNS(null,"d","M"+s+","+t+" L"+(s+r)+","+t),e.options.shaded.enabled==!0&&(c=wr("path",a.svgElements,a.svg),e.options.shaded.orientation=="top"?c.setAttributeNS(null,"d","M"+s+", "+(t-o)+"L"+s+","+t+" L"+(s+r)+","+t+" L"+(s+r)+","+(t-o)):c.setAttributeNS(null,"d","M"+s+","+t+" L"+s+","+(t+o)+" L"+(s+r)+","+(t+o)+"L"+(s+r)+","+t),c.setAttributeNS(null,"class",e.className+" vis-icon-fill"),e.options.shaded.style!==void 0&&e.options.shaded.style!==""&&c.setAttributeNS(null,"style",e.options.shaded.style)),e.options.drawPoints.enabled==!0){var d={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};oa(s+.5*r,t,d,a.svgElements,a.svg)}};fn.drawShading=function(e,s,t,r){if(s.options.shaded.enabled==!0){var n=Number(r.svg.style.height.replace("px","")),a=wr("path",r.svgElements,r.svg),o="L";s.options.interpolation.enabled==!0&&(o="C");var l,c=0;s.options.shaded.orientation=="top"?c=0:s.options.shaded.orientation=="bottom"?c=n:c=Math.min(Math.max(0,s.zeroPosition),n),s.options.shaded.orientation=="group"&&t!=null&&t!=null?l="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,o,!0)+t[0][0]+","+t[0][1]+" Z":l="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1)+" V"+c+" H"+e[0][0]+" Z",a.setAttributeNS(null,"class",s.className+" vis-fill"),s.options.shaded.style!==void 0&&a.setAttributeNS(null,"style",s.options.shaded.style),a.setAttributeNS(null,"d",l)}};fn.draw=function(e,s,t){if(e!=null&&e!=null){var r=wr("path",t.svgElements,t.svg);r.setAttributeNS(null,"class",s.className),s.style!==void 0&&r.setAttributeNS(null,"style",s.style);var n="L";s.options.interpolation.enabled==!0&&(n="C"),r.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,n,!1))}};fn.serializePath=function(e,s,t){if(e.length<2)return"";var r=s,n;if(t)for(n=e.length-2;n>0;n--)r+=e[n][0]+","+e[n][1]+" ";else for(n=1;n<e.length;n++)r+=e[n][0]+","+e[n][1]+" ";return r};fn._catmullRomUniform=function(e){var s,t,r,n,a,o,l=[];l.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var c=1/6,u=e.length,d=0;d<u-1;d++)s=d==0?e[0]:e[d-1],t=e[d],r=e[d+1],n=d+2<u?e[d+2]:r,a={screen_x:(-s.screen_x+6*t.screen_x+r.screen_x)*c,screen_y:(-s.screen_y+6*t.screen_y+r.screen_y)*c},o={screen_x:(t.screen_x+6*r.screen_x-n.screen_x)*c,screen_y:(t.screen_y+6*r.screen_y-n.screen_y)*c},l.push([a.screen_x,a.screen_y]),l.push([o.screen_x,o.screen_y]),l.push([r.screen_x,r.screen_y]);return l};fn._catmullRom=function(e,s){var t=s.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(e);var r,n,a,o,l,c,u,d,f,p,v,g,w,_,S,I,C,$,O,A=[];A.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var z=e.length,N=0;N<z-1;N++)r=N==0?e[0]:e[N-1],n=e[N],a=e[N+1],o=N+2<z?e[N+2]:a,u=Math.sqrt(Math.pow(r.screen_x-n.screen_x,2)+Math.pow(r.screen_y-n.screen_y,2)),d=Math.sqrt(Math.pow(n.screen_x-a.screen_x,2)+Math.pow(n.screen_y-a.screen_y,2)),f=Math.sqrt(Math.pow(a.screen_x-o.screen_x,2)+Math.pow(a.screen_y-o.screen_y,2)),_=Math.pow(f,t),I=Math.pow(f,2*t),S=Math.pow(d,t),C=Math.pow(d,2*t),O=Math.pow(u,t),$=Math.pow(u,2*t),p=2*$+3*O*S+C,v=2*I+3*_*S+C,g=3*O*(O+S),g>0&&(g=1/g),w=3*_*(_+S),w>0&&(w=1/w),l={screen_x:(-C*r.screen_x+p*n.screen_x+$*a.screen_x)*g,screen_y:(-C*r.screen_y+p*n.screen_y+$*a.screen_y)*g},c={screen_x:(I*n.screen_x+v*a.screen_x-C*o.screen_x)*w,screen_y:(I*n.screen_y+v*a.screen_y-C*o.screen_y)*w},l.screen_x==0&&l.screen_y==0&&(l=n),c.screen_x==0&&c.screen_y==0&&(c=a),A.push([l.screen_x,l.screen_y]),A.push([c.screen_x,c.screen_y]),A.push([a.screen_x,a.screen_y]);return A};fn._linear=function(e){for(var s=[],t=0;t<e.length;t++)s.push([e[t].screen_x,e[t].screen_y]);return s};function Ai(e,s,t,r){this.id=s;var n=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=V.selectiveBridgeObject(n,t),this.usingDefaultStyle=e.className===void 0,this.groupsUsingDefaultStyles=r,this.zeroPosition=0,this.update(e),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=e.visible===void 0?!0:e.visible}Ai.prototype.setItems=function(e){e!=null?(this.itemsData=e,Kt(this.options)==!0&&V.insertSort(this.itemsData,function(s,t){return s.x>t.x?1:-1})):this.itemsData=[]};Ai.prototype.getItems=function(){return this.itemsData};Ai.prototype.setZeroPosition=function(e){this.zeroPosition=e};Ai.prototype.setOptions=function(e){if(e!==void 0){var s=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];V.selectiveDeepExtend(s,this.options,e),typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),V.mergeOptions(this.options,e,"interpolation"),V.mergeOptions(this.options,e,"drawPoints"),V.mergeOptions(this.options,e,"shaded"),e.interpolation&&Ke(e.interpolation)=="object"&&e.interpolation.parametrization&&(e.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:e.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};Ai.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=e.visible===void 0?!0:e.visible,this.style=e.style,this.setOptions(e.options)};Ai.prototype.getLegend=function(e,s,t,r,n){if(t==null||t==null){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:a,svgElements:{},options:this.options,groups:[this]}}switch((r==null||r==null)&&(r=0),(n==null||n==null)&&(n=.5*s),this.options.style){case"line":fn.drawIcon(this,r,n,e,s,t);break;case"points":case"point":Yo.drawIcon(this,r,n,e,s,t);break;case"bar":Mn.drawIcon(this,r,n,e,s,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};Ai.prototype.getYRange=function(e){for(var s=e[0].y,t=e[0].y,r=0;r<e.length;r++)s=s>e[r].y?e[r].y:s,t=t<e[r].y?e[r].y:t;return{min:s,max:t,yAxisOrientation:this.options.yAxisOrientation}};function tr(e,s,t,r){this.body=e,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=V.extend({},this.defaultOptions),this.linegraphOptions=r,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(s)}tr.prototype=new Ri;tr.prototype.clear=function(){this.groups={},this.amountOfGroups=0};tr.prototype.addGroup=function(e,s){s.options.excludeFromLegend!=!0&&(this.groups.hasOwnProperty(e)||(this.groups[e]=s),this.amountOfGroups+=1)};tr.prototype.updateGroup=function(e,s){this.groups[e]=s};tr.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)};tr.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top=0+"px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};tr.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};tr.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};tr.prototype.setOptions=function(e){var s=["enabled","orientation","icons","left","right"];V.selectiveDeepExtend(s,this.options,e)};tr.prototype.redraw=function(){var e=0,s=tn(this.groups);Kt(s).call(s,function(o,l){return o<l?-1:1});for(var t=0;t<s.length;t++){var r=s[t];this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&e++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||e==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left=0+"px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right=0+"px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var a="";for(t=0;t<s.length;t++)r=s[t],this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&(a+=this.groups[r].content+"<br />");this.dom.textArea.innerHTML=V.xss(a),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};tr.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=tn(this.groups);Kt(e).call(e,function(u,d){return u<d?-1:1}),WH(this.svgElements);var s=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(s.replace("px","")),r=t,n=this.options.iconSize,a=.75*this.options.iconSize,o=t+.5*a+3;this.svg.style.width=n+5+t+"px";for(var l=0;l<e.length;l++){var c=e[l];this.groups[c].visible==!0&&(this.linegraphOptions.visibility[c]===void 0||this.linegraphOptions.visibility[c]==!0)&&(this.groups[c].getLegend(n,a,this.framework,r,o),o+=a+this.options.iconSpacing)}}};var uc="__ungrouped__";function Et(e,s){this.id=ns(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=V.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(n,a,o){t._onAdd(a.items)},update:function(n,a,o){t._onUpdate(a.items)},remove:function(n,a,o){t._onRemove(a.items)}},this.groupListeners={add:function(n,a,o){t._onAddGroups(a.items)},update:function(n,a,o){t._onUpdateGroups(a.items)},remove:function(n,a,o){t._onRemoveGroups(a.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(s),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=V.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}Et.prototype=new Ri;Et.prototype._create=function(){var e=document.createElement("div");e.className="vis-line-graph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new Xy(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new Xy(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new tr(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new tr(this.body,this.options.legend,"right",this.options.groups),this.show()};Et.prototype.setOptions=function(e){if(e){var s=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];e.graphHeight===void 0&&e.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&e.graphHeight!==void 0&&Qn((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),V.selectiveDeepExtend(s,this.options,e),V.mergeOptions(this.options,e,"interpolation"),V.mergeOptions(this.options,e,"drawPoints"),V.mergeOptions(this.options,e,"shaded"),V.mergeOptions(this.options,e,"legend"),e.interpolation&&Ke(e.interpolation)=="object"&&e.interpolation.parametrization&&(e.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:e.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&e.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&e.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(uc)&&this.groups[uc].setOptions(e)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};Et.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};Et.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};Et.prototype.setItems=function(e){var s=this,t,r=this.itemsData;if(!e)this.itemsData=null;else if(ti(e))this.itemsData=ca(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(Se(V).call(V,this.itemListeners,function(a,o){r.off(o,a)}),r.dispose(),t=r.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;Se(V).call(V,this.itemListeners,function(a,o){s.itemsData.on(o,a,n)}),t=this.itemsData.getIds(),this._onAdd(t)}};Et.prototype.setGroups=function(e){var s=this,t;if(this.groupsData){Se(V).call(V,this.groupListeners,function(a,o){s.groupsData.off(o,a)}),t=this.groupsData.getIds(),this.groupsData=null;for(var r=0;r<t.length;r++)this._removeGroup(t[r])}if(!e)this.groupsData=null;else if(ti(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var n=this.id;Se(V).call(V,this.groupListeners,function(a,o){s.groupsData.on(o,a,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};Et.prototype._onUpdate=function(e){this._updateAllGroupData(e)};Et.prototype._onAdd=function(e){this._onUpdate(e)};Et.prototype._onRemove=function(e){this._onUpdate(e)};Et.prototype._onUpdateGroups=function(e){this._updateAllGroupData(null,e)};Et.prototype._onAddGroups=function(e){this._onUpdateGroups(e)};Et.prototype._onRemoveGroups=function(e){for(var s=0;s<e.length;s++)this._removeGroup(e[s]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};Et.prototype._removeGroup=function(e){this.groups.hasOwnProperty(e)&&(this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e),this.legendLeft.redraw()),delete this.groups[e])};Et.prototype._updateGroup=function(e,s){this.groups.hasOwnProperty(s)?(this.groups[s].update(e),this.groups[s].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(s,this.groups[s]),this.legendRight.updateGroup(s,this.groups[s]),this.yAxisLeft.removeGroup(s),this.legendLeft.removeGroup(s)):(this.yAxisLeft.updateGroup(s,this.groups[s]),this.legendLeft.updateGroup(s,this.groups[s]),this.yAxisRight.removeGroup(s),this.legendRight.removeGroup(s))):(this.groups[s]=new Ai(e,s,this.options,this.groupsUsingDefaultStyles),this.groups[s].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(s,this.groups[s]),this.legendRight.addGroup(s,this.groups[s])):(this.yAxisLeft.addGroup(s,this.groups[s]),this.legendLeft.addGroup(s,this.groups[s]))),this.legendLeft.redraw(),this.legendRight.redraw()};Et.prototype._updateAllGroupData=function(e,s){if(this.itemsData!=null){var t={},r=this.itemsData.get(),n=this.itemsData.idProp,a={};e&&yt(e).call(e,function(_){a[_]=_});for(var o={},l=0;l<r.length;l++){var c=r[l],u=c.group;u==null&&(u=uc),o.hasOwnProperty(u)?o[u]++:o[u]=1}var d={};if(!s&&e){for(u in this.groups)if(this.groups.hasOwnProperty(u)){w=this.groups[u];var f=w.getItems();t[u]=Ge(f).call(f,function(_){return d[_[n]]=_[n],_[n]!==a[_[n]]});var p=o[u];o[u]-=t[u].length,t[u].length<p&&(t[u][p-1]={})}}for(l=0;l<r.length;l++)if(c=r[l],u=c.group,u==null&&(u=uc),!(!s&&e&&c[n]!==a[c[n]]&&d.hasOwnProperty(c[n]))){t.hasOwnProperty(u)||(t[u]=new Array(o[u]));var v=V.bridgeObject(c);v.x=V.convert(c.x,"Date"),v.end=V.convert(c.end,"Date"),v.orginalY=c.y,v.y=Number(c.y),v[n]=c[n];var g=t[u].length-o[u]--;t[u][g]=v}for(u in this.groups)this.groups.hasOwnProperty(u)&&(t.hasOwnProperty(u)||(t[u]=new Array(0)));for(u in t)if(t.hasOwnProperty(u))if(t[u].length==0)this.groups.hasOwnProperty(u)&&this._removeGroup(u);else{var w=void 0;this.groupsData!=null&&(w=this.groupsData.get(u)),w==null&&(w={id:u,content:this.options.defaultGroup+u}),this._updateGroup(w,u),this.groups[u].setItems(t[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};Et.prototype.redraw=function(){var e=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,e=this._isResized()||e;var s=this.body.range.end-this.body.range.start,t=s!=this.lastVisibleInterval;if(this.lastVisibleInterval=s,e==!0){var r;this.svg.style.width=V.option.asSize(3*this.props.width),this.svg.style.left=V.option.asSize(-this.props.width),($t(r=this.options.height+"").call(r,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",e==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)e=this._updateGraph()||e,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,a=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/a,l=n*o;this.svg.style.left=-this.props.width-l+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e};Et.prototype._getSortedGroupIds=function(){var e=[];for(var s in this.groups)if(this.groups.hasOwnProperty(s)){var t=this.groups[s];t.visible==!0&&(this.options.groups.visibility[s]===void 0||this.options.groups.visibility[s]==!0)&&e.push({id:s,zIndex:t.options.zIndex})}V.insertSort(e,function(a,o){var l=a.zIndex,c=o.zIndex;return l===void 0&&(l=0),c===void 0&&(c=0),l==c?0:l<c?-1:1});for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=e[n].id;return r};Et.prototype._updateGraph=function(){if(_i(this.svgElements),this.props.width!=0&&this.itemsData!=null){var e,s,t={},r=!1,n=this.body.util.toGlobalTime(-this.body.domProps.root.width),a=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var l={};for(this._getRelevantData(o,l,n,a),this._applySampling(o,l),s=0;s<o.length;s++)this._convertXcoordinates(l[o[s]]);if(this._getYRanges(o,l,t),r=this._updateYAxis(o,t),r==!0)return sr(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var c=void 0;for(s=0;s<o.length;s++)e=this.groups[o[s]],this.options.stack===!0&&this.options.style==="line"&&(e.options.excludeFromStacking==null||!e.options.excludeFromStacking)&&(c!=null&&(this._stack(l[e.id],l[c.id]),e.options.shaded.enabled==!0&&e.options.shaded.orientation!=="group"&&(e.options.shaded.orientation=="top"&&c.options.shaded.orientation!=="group"?(c.options.shaded.orientation="group",c.options.shaded.groupId=e.id):(e.options.shaded.orientation="group",e.options.shaded.groupId=c.id))),c=e),this._convertYcoordinates(l[o[s]],e);var u={};for(s=0;s<o.length;s++)if(e=this.groups[o[s]],e.options.style==="line"&&e.options.shaded.enabled==!0){var d=l[o[s]];if(d==null||d.length==0)continue;if(u.hasOwnProperty(o[s])||(u[o[s]]=fn.calcPath(d,e)),e.options.shaded.orientation==="group"){var f=e.options.shaded.groupId;if($t(o).call(o,f)===-1){console.log(e.id+": Unknown shading group target given:"+f);continue}u.hasOwnProperty(f)||(u[f]=fn.calcPath(l[f],this.groups[f])),fn.drawShading(u[o[s]],e,u[f],this.framework)}else fn.drawShading(u[o[s]],e,void 0,this.framework)}for(Mn.draw(o,l,this.framework),s=0;s<o.length;s++)if(e=this.groups[o[s]],l[o[s]].length>0)switch(e.options.style){case"line":u.hasOwnProperty(o[s])||(u[o[s]]=fn.calcPath(l[o[s]],e)),fn.draw(u[o[s]],e,this.framework);case"point":case"points":(e.options.style=="point"||e.options.style=="points"||e.options.drawPoints.enabled==!0)&&Yo.draw(l[o[s]],e,this.framework);break}}}return sr(this.svgElements),!1};Et.prototype._stack=function(e,s){var t,r,n,a,o;t=0;for(var l=0;l<e.length;l++){a=void 0,o=void 0;for(var c=t;c<s.length;c++)if(s[c].x===e[l].x){a=s[c],o=s[c],t=c;break}else if(s[c].x>e[l].x){o=s[c],c==0?a=o:a=s[c-1],t=c;break}o===void 0&&(a=s[s.length-1],o=s[s.length-1]),r=o.x-a.x,n=o.y-a.y,r==0?e[l].y=e[l].orginalY+o.y:e[l].y=e[l].orginalY+n/r*(e[l].x-a.x)+a.y}};Et.prototype._getRelevantData=function(e,s,t,r){var n,a,o,l;if(e.length>0)for(a=0;a<e.length;a++){n=this.groups[e[a]];var c=n.getItems();if(Kt(n.options)==!0){var u=function(g,w){return g.getTime()==w.getTime()?0:g<w?-1:1},d=Math.max(0,V.binarySearchValue(c,t,"x","before",u)),f=Math.min(c.length,V.binarySearchValue(c,r,"x","after",u)+1);f<=0&&(f=c.length);var p=new Array(f-d);for(o=d;o<f;o++)l=n.itemsData[o],p[o-d]=l;s[e[a]]=p}else s[e[a]]=n.itemsData}};Et.prototype._applySampling=function(e,s){var t;if(e.length>0){for(var r=0;r<e.length;r++)if(t=this.groups[e[r]],t.options.sampling==!0){var n=s[e[r]];if(n.length>0){var a=1,o=n.length,l=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),c=o/l;a=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(c)));for(var u=new Array(o),d=0;d<o;d+=a){var f=Math.round(d/a);u[f]=n[d]}s[e[r]]=Dn(u).call(u,0,Math.round(o/a))}}}};Et.prototype._getYRanges=function(e,s,t){var r,n,a,o=[],l=[],c;if(e.length>0){for(a=0;a<e.length;a++)r=s[e[a]],c=this.groups[e[a]].options,r.length>0&&(n=this.groups[e[a]],c.stack===!0&&c.style==="bar"?c.yAxisOrientation==="left"?o=Pt(o).call(o,r):l=Pt(l).call(l,r):t[e[a]]=n.getYRange(r,e[a]));Mn.getStackedYRange(o,t,e,"__barStackLeft","left"),Mn.getStackedYRange(l,t,e,"__barStackRight","right")}};Et.prototype._updateYAxis=function(e,s){var t=!1,r=!1,n=!1,a=1e9,o=1e9,l=-1e9,c=-1e9,u,d;if(e.length>0){for(var f=0;f<e.length;f++){var p=this.groups[e[f]];p&&p.options.yAxisOrientation!="right"?(r=!0,a=1e9,l=-1e9):p&&p.options.yAxisOrientation&&(n=!0,o=1e9,c=-1e9)}for(f=0;f<e.length;f++)s.hasOwnProperty(e[f])&&s[e[f]].ignore!==!0&&(u=s[e[f]].min,d=s[e[f]].max,s[e[f]].yAxisOrientation!="right"?(r=!0,a=a>u?u:a,l=l<d?d:l):(n=!0,o=o>u?u:o,c=c<d?d:c));r==!0&&this.yAxisLeft.setRange(a,l),n==!0&&this.yAxisRight.setRange(o,c)}t=this._toggleAxisVisiblity(r,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(n,this.yAxisRight)||t,n==!0&&r==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(n==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var v=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(f=0;f<v.length;f++)$t(e).call(e,v[f])!=-1&&Dn(e).call(e,$t(e).call(e,v[f]),1);return t};Et.prototype._toggleAxisVisiblity=function(e,s){var t=!1;return e==!1?s.dom.frame.parentNode&&s.hidden==!1&&(s.hide(),t=!0):!s.dom.frame.parentNode&&s.hidden==!0&&(s.show(),t=!0),t};Et.prototype._convertXcoordinates=function(e){for(var s=this.body.util.toScreen,t=0;t<e.length;t++)e[t].screen_x=s(e[t].x)+this.props.width,e[t].screen_y=e[t].y,e[t].end!=null?e[t].screen_end=s(e[t].end)+this.props.width:e[t].screen_end=void 0};Et.prototype._convertYcoordinates=function(e,s){var t=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",""));s.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var n=0;n<e.length;n++)e[n].screen_y=Math.round(t.convertValue(e[n].y));s.setZeroPosition(Math.min(r,t.convertValue(0)))};var nt="string",ut="boolean",St="number",ite="array",zs="date",Ft="object",ste="dom",js="moment",Ky="any",ate={configure:{enabled:{boolean:ut},filter:{boolean:ut,function:"function"},container:{dom:ste},__type__:{object:Ft,boolean:ut,function:"function"}},alignCurrentTime:{string:nt,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:nt},sort:{boolean:ut},sampling:{boolean:ut},stack:{boolean:ut},graphHeight:{string:nt,number:St},shaded:{enabled:{boolean:ut},orientation:{string:["bottom","top","zero","group"]},groupId:{object:Ft},__type__:{boolean:ut,object:Ft}},style:{string:["line","bar","points"]},barChart:{width:{number:St},minWidth:{number:St},sideBySide:{boolean:ut},align:{string:["left","center","right"]},__type__:{object:Ft}},interpolation:{enabled:{boolean:ut},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:St},__type__:{object:Ft,boolean:ut}},drawPoints:{enabled:{boolean:ut},onRender:{function:"function"},size:{number:St},style:{string:["square","circle"]},__type__:{object:Ft,boolean:ut,function:"function"}},dataAxis:{showMinorLabels:{boolean:ut},showMajorLabels:{boolean:ut},showWeekScale:{boolean:ut},icons:{boolean:ut},width:{string:nt,number:St},visible:{boolean:ut},alignZeros:{boolean:ut},left:{range:{min:{number:St,undefined:"undefined"},max:{number:St,undefined:"undefined"},__type__:{object:Ft}},format:{function:"function"},title:{text:{string:nt,number:St,undefined:"undefined"},style:{string:nt,undefined:"undefined"},__type__:{object:Ft}},__type__:{object:Ft}},right:{range:{min:{number:St,undefined:"undefined"},max:{number:St,undefined:"undefined"},__type__:{object:Ft}},format:{function:"function"},title:{text:{string:nt,number:St,undefined:"undefined"},style:{string:nt,undefined:"undefined"},__type__:{object:Ft}},__type__:{object:Ft}},__type__:{object:Ft}},legend:{enabled:{boolean:ut},icons:{boolean:ut},left:{visible:{boolean:ut},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:Ft}},right:{visible:{boolean:ut},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:Ft}},__type__:{object:Ft,boolean:ut}},groups:{visibility:{any:Ky},__type__:{object:Ft}},autoResize:{boolean:ut},throttleRedraw:{number:St},clickToUse:{boolean:ut},end:{number:St,date:zs,string:nt,moment:js},format:{minorLabels:{millisecond:{string:nt,undefined:"undefined"},second:{string:nt,undefined:"undefined"},minute:{string:nt,undefined:"undefined"},hour:{string:nt,undefined:"undefined"},weekday:{string:nt,undefined:"undefined"},day:{string:nt,undefined:"undefined"},week:{string:nt,undefined:"undefined"},month:{string:nt,undefined:"undefined"},quarter:{string:nt,undefined:"undefined"},year:{string:nt,undefined:"undefined"},__type__:{object:Ft}},majorLabels:{millisecond:{string:nt,undefined:"undefined"},second:{string:nt,undefined:"undefined"},minute:{string:nt,undefined:"undefined"},hour:{string:nt,undefined:"undefined"},weekday:{string:nt,undefined:"undefined"},day:{string:nt,undefined:"undefined"},week:{string:nt,undefined:"undefined"},month:{string:nt,undefined:"undefined"},quarter:{string:nt,undefined:"undefined"},year:{string:nt,undefined:"undefined"},__type__:{object:Ft}},__type__:{object:Ft}},moment:{function:"function"},height:{string:nt,number:St},hiddenDates:{start:{date:zs,number:St,string:nt,moment:js},end:{date:zs,number:St,string:nt,moment:js},repeat:{string:nt},__type__:{object:Ft,array:ite}},locale:{string:nt},locales:{__any__:{any:Ky},__type__:{object:Ft}},max:{date:zs,number:St,string:nt,moment:js},maxHeight:{number:St,string:nt},maxMinorChars:{number:St},min:{date:zs,number:St,string:nt,moment:js},minHeight:{number:St,string:nt},moveable:{boolean:ut},multiselect:{boolean:ut},orientation:{string:nt},showCurrentTime:{boolean:ut},showMajorLabels:{boolean:ut},showMinorLabels:{boolean:ut},showWeekScale:{boolean:ut},snap:{function:"function",null:"null"},start:{date:zs,number:St,string:nt,moment:js},timeAxis:{scale:{string:nt,undefined:"undefined"},step:{number:St,undefined:"undefined"},__type__:{object:Ft}},width:{string:nt,number:St},zoomable:{boolean:ut},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:St},zoomMin:{number:St},zIndex:{number:St},__type__:{object:Ft}},ote={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function oi(e,s,t,r){var n,a,o,l,c,u,d;if(!(Qe(t)||ti(t))&&t instanceof Object){var f=r;r=t,t=f}r&&r.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var p=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:En,width:null,height:null,maxHeight:null,minHeight:null},this.options=V.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:ne(n=this.on).call(n,this),off:ne(a=this.off).call(a,this),emit:ne(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale:function(){return p.timeAxis.step.scale},getStep:function(){return p.timeAxis.step.step},toScreen:ne(l=p._toScreen).call(l,p),toGlobalScreen:ne(c=p._toGlobalScreen).call(c,p),toTime:ne(u=p._toTime).call(u,p),toGlobalTime:ne(d=p._toGlobalTime).call(d,p)}},this.range=new Zw(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new oc(this.body),this.components.push(this.timeAxis),this.currentTime=new uk(this.body),this.components.push(this.currentTime),this.linegraph=new Et(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(v){p.emit("click",p.getEventProperties(v))}),this.on("doubletap",function(v){p.emit("doubleClick",p.getEventProperties(v))}),this.dom.root.oncontextmenu=function(v){p.emit("contextmenu",p.getEventProperties(v))},this.initialFitDone=!1,this.on("changed",function(){if(p.itemsData!=null){if(!p.initialFitDone&&!p.options.rollingMode)if(p.initialFitDone=!0,p.options.start!=null||p.options.end!=null){if(p.options.start==null||p.options.end==null)var v=p.getItemRange();var g=p.options.start!=null?p.options.start:v.min,w=p.options.end!=null?p.options.end:v.max;p.setWindow(g,w,{animation:!1})}else p.fit({animation:!1});!p.initialDrawDone&&(p.initialRangeChangeDone||!p.options.start&&!p.options.end||p.options.rollingMode)&&(p.initialDrawDone=!0,p.dom.root.style.visibility="visible",p.dom.loadingScreen.parentNode.removeChild(p.dom.loadingScreen),p.options.onInitialDrawComplete&&wn(function(){return p.options.onInitialDrawComplete()},0))}}),r&&this.setOptions(r),t&&this.setGroups(t),s&&this.setItems(s),this._redraw()}oi.prototype=new Zs;oi.prototype.setOptions=function(e){var s=yk.validate(e,ate);s===!0&&console.log("%cErrors have been found in the supplied options object.",cc),Zs.prototype.setOptions.call(this,e)};oi.prototype.setItems=function(e){var s=this.itemsData==null,t;if(e?ti(e)?t=ca(e):t=ca(new ei(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),s)if(this.options.start!=null||this.options.end!=null){var r=this.options.start!=null?this.options.start:null,n=this.options.end!=null?this.options.end:null;this.setWindow(r,n,{animation:!1})}else this.fit({animation:!1})};oi.prototype.setGroups=function(e){var s;e?ti(e)?s=e:s=new ei(e):s=null,this.groupsData=s,this.linegraph.setGroups(s)};oi.prototype.getLegend=function(e,s,t){return s===void 0&&(s=15),t===void 0&&(t=15),this.linegraph.groups[e]!==void 0?this.linegraph.groups[e].getLegend(s,t):"cannot find group:'"+e+"'"};oi.prototype.isGroupVisible=function(e){return this.linegraph.groups[e]!==void 0?this.linegraph.groups[e].visible&&(this.linegraph.options.groups.visibility[e]===void 0||this.linegraph.options.groups.visibility[e]==!0):!1};oi.prototype.getDataRange=function(){var e=null,s=null;for(var t in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(t)&&this.linegraph.groups[t].visible==!0)for(var r=0;r<this.linegraph.groups[t].itemsData.length;r++){var n=this.linegraph.groups[t].itemsData[r],a=V.convert(n.x,"Date").valueOf();e=e==null||e>a?a:e,s=s==null||s<a?a:s}return{min:e!=null?new Date(e):null,max:s!=null?new Date(s):null}};oi.prototype.getEventProperties=function(e){var s=e.center?e.center.x:e.clientX,t=e.center?e.center.y:e.clientY,r=s-V.getAbsoluteLeft(this.dom.centerContainer),n=t-V.getAbsoluteTop(this.dom.centerContainer),a=this._toTime(r),o=wp.customTimeFromTarget(e),l=V.getTarget(e),c=null;V.hasParent(l,this.timeAxis.dom.foreground)||this.timeAxis2&&V.hasParent(l,this.timeAxis2.dom.foreground)?c="axis":V.hasParent(l,this.linegraph.yAxisLeft.dom.frame)||V.hasParent(l,this.linegraph.yAxisRight.dom.frame)?c="data-axis":V.hasParent(l,this.linegraph.legendLeft.dom.frame)||V.hasParent(l,this.linegraph.legendRight.dom.frame)?c="legend":o!=null?c="custom-time":V.hasParent(l,this.currentTime.bar)?c="current-time":V.hasParent(l,this.dom.center)&&(c="background");var u=[],d=this.linegraph.yAxisLeft,f=this.linegraph.yAxisRight;return!d.hidden&&this.itemsData.length>0&&u.push(d.screenToValue(n)),!f.hidden&&this.itemsData.length>0&&u.push(f.screenToValue(n)),{event:e,customTime:o?o.options.id:null,what:c,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:r,y:n,time:a,value:u}};oi.prototype._createConfigurator=function(){return new _k(this,this.dom.container,ote)};var lte=BH();En.locale(lte);const cte=ae({__name:"Content",props:{data:{type:Object,default:()=>({})}},setup(e){const s=e,t=M_(),r=F(null),n=F(null),a=F({width:0,height:0}),o=Ce(),l=Be(),c=(g,w="YYYY-MM-DD HH:mm:ss")=>so(g).format(w);Or(()=>{a.value=r.value&&r.value.getBoundingClientRect()||{width:0,height:0},Uh(v,500)()});function u(){if(!r.value)return;n.value&&n.value.destroy();const g=r.value.getBoundingClientRect().height,w=t.events.map((I,C)=>({id:C+1,content:I.name,start:new Date(Number(I.startTime)),end:new Date(Number(I.endTime)),data:I,className:I.type})),_=new ei(w),S={height:g,width:"100%",locale:"en",groupHeightMode:"fitItems",autoResize:!1,tooltip:{overflowMethod:"cap",template(I){const C=I.data||{};let $=`<div>ID: ${C.uuid||""}</div>
        <div>Name: ${C.name||""}</div>
        <div>Event Type: ${C.type||""}</div>
        <div>Start Time: ${C.startTime?c(C.startTime):""}</div>
        <div>End Time: ${C.endTime?c(C.endTime):""}</div>
        <div>Message: ${C.message||""}</div>
        <div>Service: ${C.source.service||""}</div>`;return C.source.endpoint&&($+=`<div>Endpoint: ${C.source.endpoint}</div>`),C.source.instance&&($+=`<div>Service Instance: ${C.source.instance}</div>`),$}}};n.value=new Sp(r.value,_,S),n.value.on("select",I=>{if(!s.data.eventAssociate)return;o.selectWidget(s.data);const C=lr(o.currentDashboard).widgets;f(I.items,w,C),d(I.items,w,C)})}function d(g,w,_){const S=_.filter($=>["Trace","Log"].includes($.type)),I=g[0],C=w[I-1||0];for(const $ of S)if(isNaN(I)){const O=pe(Q({},$),{filters:{sourceId:s.data.id||"",duration:null}});o.setWidget(O)}else{let O=l.duration.step,A=C.start,z=C.end;if(l.duration.step==="MINUTE"&&C.end.getTime()-C.start.getTime()<6e4)O="SECOND";else{const Y=p(C.start,C.end);A=Y.start,z=Y.end}const N=pe(Q({},$),{filters:{sourceId:s.data.id||"",duration:{start:Mr(cr(l.utc,A),O,!0),end:Mr(cr(l.utc,z),O,!0),step:O}}});o.setWidget(N)}}function f(g,w,_){const S=_.filter($=>{if(["Bar","Line","Area"].includes($.graph&&$.graph.type||""))return $}),I=g[0],C=w[I-1||0];for(const $ of S)if(isNaN(I)){const O=pe(Q({},$),{filters:{sourceId:o.selectedGrid.id||"",isRange:!0,duration:{startTime:null,endTime:null}}});o.setWidget(O)}else{const{start:O,end:A}=p(C.start,C.end),z=vv(O,l.duration.step),N=vv(A,l.duration.step),Y=pe(Q({},$),{filters:{sourceId:o.selectedGrid.id||"",isRange:!0,duration:{startTime:z,endTime:N}}});o.setWidget(Y)}}function p(g,w){let _=w,S=6e4;switch(l.duration.step){case"MINUTE":S=6e4;break;case"HOUR":S=36e5;break;case"DAY":S=36e5*24;break}return(!w||w.getTime()-g.getTime()<S)&&(_=g.getTime()+S),{start:g,end:new Date(_)}}function v(){const g=new ResizeObserver(w=>{const S=w[0].contentRect;Math.abs(S.width-a.value.width)<3&&Math.abs(S.height-a.value.height)<3||(u(),a.value={width:S.width,height:S.height})});r.value&&g.observe(r.value)}return He(()=>t.events,()=>{u()}),(g,w)=>(E(),P("div",{ref_key:"timeline",ref:r,class:"events"},null,512))}});const ute=ce(cte,[["__scopeId","data-v-8e735399"]]),dte={class:"event-wrapper flex-v"},hte={class:"delete cp"},fte={class:"header"},pte={class:"event"},vte=ae({__name:"Event",props:{data:{type:Object,default:()=>({})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}function a(){r.setConfigPanel(!0),r.selectWidget(s.data)}return(o,l)=>{const c=Ue,u=jt;return E(),P("div",dte,[b(r).editMode?(E(),ke(u,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",hte,[T(c,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:a},[y("span",null,D(b(t)("edit")),1)]),y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),y("div",fte,[T(VN,{needQuery:e.needQuery},null,8,["needQuery"])]),y("div",pte,[T(ute,{data:e.data},null,8,["data"])])])}}});const bk=ce(vte,[["__scopeId","data-v-e756688a"]]),mte=ni({id:"networkProfiling",state:()=>({networkTasks:[],networkTip:"",selectedNetworkTask:{},nodes:[],calls:[],node:null,call:null,metricsLayout:[],selectedMetric:null,activeMetricIndex:"",aliveNetwork:!1,loadNodes:!1}),actions:{setSelectedNetworkTask(e){this.selectedNetworkTask=e||{}},setNode(e){this.node=e},setLink(e){this.call=e},seNodes(e){this.nodes=e},setLinks(e){this.calls=e},setMetricsLayout(e){this.metricsLayout=e},setSelectedMetric(e){this.selectedMetric=e},setActiveItem(e){this.activeMetricIndex=e},setTopology(e){const s={};let t=(e.calls||[]).reduce((n,a)=>{if(!s[a.id]){s[a.id]=!0,a.value=a.value||1;for(const o of e.nodes)a.source===o.id&&(a.sourceObj=o),a.target===o.id&&(a.targetObj=o);a.value=a.value||1,n.push(a)}return n},[]);const r={};t=e.calls.reduce((n,a)=>(r[a.targetId+a.sourceId]&&(a.lowerArc=!0),r[a.sourceId+a.targetId]=!0,a.sourceId=a.source,a.targetId=a.target,a.source=a.sourceObj,a.target=a.targetObj,delete a.sourceObj,delete a.targetObj,n.push(a),n),[]),this.calls=t,this.nodes=e.nodes},createNetworkTask(e,s){return J(this,null,function*(){const t=yield mt.query("newNetworkProfiling").params({request:{instanceId:e,samplings:s}});return t.data.errors,t.data})},getTaskList(e){return J(this,null,function*(){if(!e.serviceId)return new Promise(t=>t({}));const s=yield mt.query("getEBPFTasks").params(e);return this.networkTip="",s.data.errors||(this.networkTasks=s.data.data.queryEBPFTasks||[],this.selectedNetworkTask=this.networkTasks[0]||{},this.setSelectedNetworkTask(this.selectedNetworkTask),this.networkTasks.length||(this.nodes=[],this.calls=[])),s.data})},keepNetworkProfiling(e){return J(this,null,function*(){if(!e)return new Promise(t=>t({}));const s=yield mt.query("aliveNetworkProfiling").params({taskId:e});return s.data.errors||(this.aliveNetwork=s.data.data.keepEBPFNetworkProfiling.status,this.aliveNetwork||ie.warning(s.data.data.keepEBPFNetworkProfiling.errorReason)),s.data})},getProcessTopology(e){return J(this,null,function*(){this.loadNodes=!0;const s=yield mt.query("getProcessTopology").params(e);if(this.loadNodes=!1,s.data.errors)return this.nodes=[],this.calls=[],s.data;const{topology:t}=s.data.data;return this.setTopology(t),s.data})}}});function ds(){return mte(ri)}const gi={Whenxx:[{value:"1",label:"True"},{value:"0",label:"False"}]},gte=e=>(Nn("data-v-986bb142"),e=e(),Ln(),e),yte={class:"profile-task"},_te=gte(()=>y("div",{class:"label"},"URI Regex",-1)),bte={class:"label"},wte={class:"label"},kte={class:"label"},Ste=ae({__name:"NewConditions",props:{condition:{type:Object,default:()=>({children:[]})},index:{type:Number,default:()=>0}},emits:["change"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=ln(t.condition);function a(l){n.when5xx=l,s("change",n,t.index)}function o(l){n.when4xx=l,s("change",n,t.index)}return(l,c)=>{const u=Yt,d=Gh;return E(),P("div",yte,[y("div",null,[_te,T(u,{size:"small",class:"profile-input",modelValue:n.uriRegex,"onUpdate:modelValue":c[0]||(c[0]=f=>n.uriRegex=f)},null,8,["modelValue"])]),y("div",null,[y("div",bte,D(b(r)("minDuration"))+" (ms)",1),T(u,{size:"small",class:"profile-input",min:0,modelValue:n.minDuration,"onUpdate:modelValue":c[1]||(c[1]=f=>n.minDuration=f),type:"number"},null,8,["modelValue"])]),y("div",null,[y("div",wte,D(b(r)("when4xx")),1),T(d,{class:"mb-5",value:n.when4xx,options:b(gi).Whenxx,onChange:o},null,8,["value","options"])]),y("div",null,[y("div",kte,D(b(r)("when5xx")),1),T(d,{class:"mb-5",value:n.when5xx,options:b(gi).Whenxx,onChange:a},null,8,["value","options"])])])}}});const xte=ce(Ste,[["__scopeId","data-v-986bb142"]]),Tte={class:"profile-task"},$te={class:"title"},Cte=ae({__name:"NewTask",emits:["create"],setup(e,{emit:s}){const{t}=ge(),r=F([0]),n=F([{uriRegex:"",when4xx:gi.Whenxx[1].value,when5xx:gi.Whenxx[0].value,minDuration:NaN}]);function a(u,d){const f=Object.keys(u)[0];n.value[d][f]=u[f]}function o(){const u=n.value.map(d=>({uriRegex:d.uriRegex||void 0,when4xx:d.when4xx===gi.Whenxx[0].value,when5xx:d.when5xx===gi.Whenxx[0].value,minDuration:isNaN(Number(d.minDuration))?void 0:Number(d.minDuration),settings:{requireCompleteRequest:!0,requireCompleteResponse:!0}}));s("create",u)}function l(u){u.stopPropagation(),n.value.push({uriRegex:"",when4xx:gi.Whenxx[0].value,when5xx:gi.Whenxx[1].value,minDuration:NaN}),r.value=[n.value.length-1]}function c(u,d){u.stopPropagation(),n.value.length!==1&&(n.value=n.value.filter((f,p)=>p!==d))}return(u,d)=>{const f=Ue,p=Xh,v=Kh,g=It;return E(),P("div",Tte,[T(v,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=w=>r.value=w)},{default:q(()=>[(E(!0),P(de,null,Pe(n.value,(w,_)=>(E(),ke(p,{key:_,name:_},{title:q(()=>[y("div",null,[y("span",$te,D(`Rule - ${_+1}`),1),Te(T(f,{class:"mr-5 cp",iconName:"remove_circle_outline",size:"middle",onClick:S=>c(S,_)},null,8,["onClick"]),[[Ye,n.value.length!==1]]),Te(T(f,{class:"cp",iconName:"add_circle_outlinecontrol_point",size:"middle",onClick:l},null,512),[[Ye,_===n.value.length-1]])])]),default:q(()=>[T(xte,{name:_,condition:w,index:_,onChange:a},null,8,["name","condition","index"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),y("div",null,[T(g,{onClick:o,type:"primary",class:"create-task-btn"},{default:q(()=>[We(D(b(t)("createTask")),1)]),_:1})])])}}});const Ite=ce(Cte,[["__scopeId","data-v-f5cca7eb"]]),Dte={class:"profile-task-list flex-v"},Ete={class:"profile-task-wrapper flex-v"},Mte={class:"profile-t-tool"},Ote={class:"profile-t-wrapper"},Pte={class:"profile-t"},Nte=["onClick"],Lte={class:"ell"},Rte={class:"mr-10 sm"},Ate={class:"mr-10 sm"},Fte={key:0,class:"reload"},Vte=ae({__name:"Tasks",setup(e){const{t:s}=ge(),t=it(),r=ds(),n=Be(),a=F(!1),o=F(!1),l=F(null),c=F(null),u=F(!1);S();function d(I){return J(this,null,function*(){r.setSelectedNetworkTask(I),l.value&&clearInterval(l.value),f()})}function f(){return J(this,null,function*(){const{taskStartTime:I,fixedTriggerDuration:C,taskId:$}=r.selectedNetworkTask,O=t.currentPod&&t.currentPod.id||"",A=C>1800?I+C*1e3-30*60*1e3:I;let z=I+C*1e3;I+C*1e3>new Date().getTime()&&(z=new Date().getTime());const N=yield r.getProcessTopology({serviceInstanceId:O,duration:{start:Mr(cr(n.utc,new Date(A)),n.duration.step,!0),end:Mr(cr(n.utc,new Date(z)),n.duration.step,!0),step:n.duration.step}});N.errors&&ie.error(N.errors);const Y=r.networkTasks[0]||{};return Y.taskId===$&&(u.value=Y.taskStartTime+Y.fixedTriggerDuration*1e3>new Date().getTime()),u.value||(l.value&&clearInterval(l.value),c.value&&clearInterval(c.value)),N})}function p(){u.value||(o.value=!0)}function v(I){return J(this,null,function*(){const C=t.currentPod&&t.currentPod.id||"";if(!C)return ie.error("No Instance ID");const $=yield r.createNetworkTask(C,I);if($.errors){ie.error($.errors);return}if(!$.data.createEBPFNetworkProfiling.status){ie.error($.data.createEBPFNetworkProfiling.errorReason);return}o.value=!1,yield S()})}function g(){l.value=setInterval(f,3e4)}function w(){c.value=setInterval(_,6e4)}function _(){return J(this,null,function*(){const I=yield r.keepNetworkProfiling(r.selectedNetworkTask.taskId);if(I.errors)return c.value&&clearInterval(c.value),ie.error(I.errors);r.aliveNetwork||(l.value&&clearInterval(l.value),c.value&&clearInterval(c.value))})}function S(){return J(this,null,function*(){l.value&&clearInterval(l.value),c.value&&clearInterval(c.value);const I=t.currentService&&t.currentService.id||"",C=t.currentPod&&t.currentPod.id||"",$=yield r.getTaskList({serviceId:I,serviceInstanceId:C,targets:["NETWORK"],triggerType:fc.FIXED_TIME});if($.errors)return ie.error($.errors);!r.networkTasks.length||(yield f(),u.value&&(g(),w(),_()))})}return He(()=>t.currentPod,()=>{u.value=!1,S()}),(I,C)=>{const $=Ue,O=Mi;return E(),P(de,null,[y("div",Dte,[y("div",Ete,[y("div",Mte,[y("span",null,D(b(s)("taskList")),1),y("span",{class:"new-task cp",onClick:p},[T($,{style:ht({color:u.value?"#ccc":b(n).theme===b(xt).Dark?"#fff":"#000"}),iconName:"library_add",size:"middle"},null,8,["style"])])]),y("div",Ote,[Te(y("div",{class:"no-data"},D(b(s)("noData")),513),[[Ye,!b(r).networkTasks.length]]),y("table",Pte,[(E(!0),P(de,null,Pe(b(r).networkTasks,(A,z)=>(E(),P("tr",{class:"profile-tr cp",onClick:N=>d(A),key:z},[y("td",{class:Ct(["profile-td",{selected:b(r).selectedNetworkTask.taskId===A.taskId}])},[y("div",Lte,[y("span",Rte,D(b(on)(A.taskStartTime)),1),y("span",Ate,D(b(on)(A.taskStartTime+A.fixedTriggerDuration*1e3)),1),y("span",{class:"new-task",onClick:C[0]||(C[0]=N=>a.value=!0)},[T($,{iconName:"view",size:"middle"})]),z===0&&u.value?(E(),P("span",Fte,[T($,{iconName:"retry",loading:!0,size:"middle"})])):me("",!0)])],2)],8,Nte))),128))])])])]),T(O,{modelValue:a.value,"onUpdate:modelValue":C[1]||(C[1]=A=>a.value=A),"destroy-on-close":!0,fullscreen:"",onClosed:C[2]||(C[2]=A=>a.value=!1)},{default:q(()=>[T(x_,{details:b(r).selectedNetworkTask},null,8,["details"])]),_:1},8,["modelValue"]),T(O,{modelValue:o.value,"onUpdate:modelValue":C[3]||(C[3]=A=>o.value=A),title:b(s)("taskTitle"),"destroy-on-close":!0,fullscreen:"",onClosed:C[4]||(C[4]=A=>o.value=!1)},{default:q(()=>[T(Ite,{onCreate:v})]),_:1},8,["modelValue","title"])],64)}}});const zte=ce(Vte,[["__scopeId","data-v-34682825"]]);function wk(e,s,t=.5){const r=s[0]-e[0],n=s[1]-e[1],a=Math.atan(n/r),o=Math.sqrt(r*r+n*n)/2*t,l=a-Math.PI/2;return[(e[0]+s[0])/2+o*Math.cos(l),(e[1]+s[1])/2+o*Math.sin(l)]}function jte(e,s,t,r){const n=(1-e)*(1-e)*s.x+2*e*(1-e)*t.x+e*e*r.x,a=(1-e)*(1-e)*s.y+2*e*(1-e)*t.y+e*e*r.y;return[n,a]}function Qy(e){if(isNaN(e.source.x)||isNaN(e.source.y))return[0,0];if(isNaN(e.target.x)||isNaN(e.target.y))return[0,0];const s=wk([e.source.x,e.source.y],[e.target.x,e.target.y],.5);return e.lowerArc&&(s[1]=-s[1]),jte(.5,{x:e.source.x,y:e.source.y},{x:s[0],y:s[1]},{x:e.target.x,y:e.target.y})}function Yte(e){if(isNaN(e.source.x)||isNaN(e.source.y)||isNaN(e.target.x)||isNaN(e.target.y))return;const s=wk([e.source.x,e.source.y-5],[e.target.x,e.target.y-5],.5);return e.lowerArc&&(s[1]=-s[1]-10),"M"+e.source.x+" "+(e.source.y-5)+" Q"+s[0]+" "+s[1]+" "+e.target.x+" "+(e.target.y-5)}function Gte(e){const s=[...e.sourceComponents,...e.targetComponents];if(s.includes("tcp")||s.includes("http"))return _n.HTTPDARK;if(s.includes("https")||s.includes("tls"))return _n.HTTPS}const Ute={class:"label"},Hte=ae({__name:"Settings",emits:["update"],setup(e,{emit:s}){const{t}=ge(),r=Ce(),n=F([]);Or(()=>{a()});function a(){const l=JSON.parse(sessionStorage.getItem("dashboards")||"[]");n.value=l.reduce((c,u)=>(u.layer===r.layerId&&u.entity===X[7].value&&c.push(pe(Q({},u),{label:u.name,value:u.name})),c),[])}function o(l){const c=l.length?l[0].value:"",u=pe(Q({},r.selectedGrid),{linkDashboard:c});r.selectWidget(u),r.setConfigs(u),s("update",u)}return(l,c)=>{const u=Mt;return E(),P(de,null,[y("div",Ute,D(b(t)("linkDashboard")),1),T(u,{value:b(r).selectedGrid&&b(r).selectedGrid.linkDashboard||"",options:n.value,size:"small",placeholder:"Please input a dashboard name for calls",onChange:o,class:"inputs",clearable:!0},null,8,["value","options"])],64)}}});const Wte=ce(Hte,[["__scopeId","data-v-dfd8fe2c"]]);class Jy{constructor(s,t,r,n,a,o,l,c,u){$n(this,"f0",0);$n(this,"f1",0);$n(this,"f2",0);$n(this,"f3",0);$n(this,"b0",0);$n(this,"b1",0);$n(this,"b2",0);$n(this,"b3",0);$n(this,"start_angle",0);this.f0=s,this.f1=t,this.f2=r,this.f3=n,this.b0=a,this.b1=o,this.b2=l,this.b3=c,this.start_angle=u}}const pi=Math.sqrt(3),Tp=class{constructor(s,t=[0,0],r){$n(this,"radius",1);$n(this,"orientation",{f0:0,f1:0,f2:0,f3:0});$n(this,"origin",[0,0]);this.radius=s,this.orientation=r||Tp.Flat,this.origin=t}static spacing(s,t=!1){return t?[pi*s,2*s*(3/4)]:[2*s*(3/4),pi*s]}axialToPixel(s,t){const r=this.orientation,n=(r.f0*s+r.f1*t)*this.radius,a=(r.f2*s+r.f3*t)*this.radius;return[n+this.origin[0],a+this.origin[1]]}hexToPixel(s){const t=this.orientation,r=(t.f0*s.x+t.f1*s.y)*this.radius,n=(t.f2*s.x+t.f3*s.y)*this.radius;return[r+this.origin[0],n+this.origin[1]]}};let Wa=Tp;$n(Wa,"Pointy",new Jy(pi,pi/2,0,3/2,pi/3,-1/3,0,2/3,.5)),$n(Wa,"Flat",new Jy(3/2,0,pi/2,pi,2/3,0,-1/3,pi/3,0));const Bte={class:"switch-icon-edit"},qte=ae({__name:"TimeLine",emits:["get"],setup(e,{emit:s}){const{t}=ge(),r=it(),n=Be(),a=ds(),o=F(null),l=F(null),c=F([]),u=F(!1);function d(){f()}function f(){if(!o.value||!a.selectedNetworkTask.taskId)return;const{taskStartTime:v,fixedTriggerDuration:g,targetType:w,taskId:_}=a.selectedNetworkTask;if(c.value[0]&&c.value[0].data.taskId===_&&u.value)return;l.value&&l.value.destroy(),u.value=!1;let S=v;g>1800&&(S=v+g*1e3-30*60*1e3);const I=a.networkTasks[0]||{};let C=v+g*1e3;v+g*1e3>new Date().getTime()&&_===I.taskId&&(C=new Date().getTime()),c.value=[{id:1,content:"",start:new Date(S),end:new Date(C),data:a.selectedNetworkTask,className:w}];const $=new ei(c.value);$.on("update",(Y,R)=>{c.value=R.data});const O=g>1800?{item:!0,range:!0}:void 0,z={height:150,width:"100%",locale:"en",editable:g>1800?{updateTime:!0}:!1,zoomMin:1e3*60,zoomMax:1e3*60*60*24},N=O?pe(Q({},z),{itemsAlwaysDraggable:O}):z;l.value=new Sp(o.value,$,N)}function p(){return J(this,null,function*(){u.value=!0,s("get",{start:c.value[0].start.getTime(),end:c.value[0].end.getTime()});const v=r.currentPod&&r.currentPod.id||"",g=yield a.getProcessTopology({serviceInstanceId:v,duration:{start:Mr(cr(n.utc,new Date(c.value[0].start)),n.duration.step,!0),end:Mr(cr(n.utc,new Date(c.value[0].end)),n.duration.step,!0),step:n.duration.step}});return g.errors&&ie.error(g.errors),g})}return(v,g)=>{const w=Ue,_=It,S=jt;return E(),ke(S,{placement:"bottom",width:600,trigger:"click",onAfterEnter:d},{reference:q(()=>[y("div",Bte,[T(w,{size:"middle",iconName:"time_range"})])]),default:q(()=>[y("div",{ref_key:"timeRange",ref:o,class:"time-ranges"},null,512),T(_,{class:"query",size:"small",type:"primary",onClick:p},{default:q(()=>[We(D(b(t)("query")),1)]),_:1})]),_:1})}}});const Xte=ce(qte,[["__scopeId","data-v-9ad46802"]]),Kte=["width","height"],Qte=["transform"],Jte={class:"hex-polygon"},Zte=["d"],ene=["y","fill"],tne={class:"nodes"},nne=["onMouseover","onMousedown"],rne=["href","x","y"],ine=["x","y","fill"],sne={class:"calls"},ane=["d"],one={class:"anchors"},lne=["href","x","y","onClick","onMouseover"],cne={class:"arrows"},une=y("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"8",markerHeight:"8",viewBox:"0 0 12 12",refX:"10",refY:"6",orient:"auto"},[y("path",{d:"M2,2 L10,6 L2,10 L6,6 L2,2",fill:"#97B0F8"})],-1),dne=[une],hne=y("div",{id:"tooltip"},null,-1),kk=ae({__name:"ProcessTopology",props:{config:{type:Object,default:()=>({graph:{}})}},setup(e){const s=e,{t}=ge(),r=Be(),n=Ce(),a=it(),o=ds(),l=F(100),c=F(100),u=F(null),d=F(null),f=F(null),p=F(null),v=F({width:0,height:0}),g=F(s.config||{}),w=F([220,200]),_=210,S=F(null),I=F([]),C=F(null),$=[0,0];Or(()=>{O(),v.value=u.value&&u.value.getBoundingClientRect()||{width:0,height:0}});function O(){return J(this,null,function*(){!o.nodes.length||(f.value=Qi(".process-svg"),p.value=Qi(".svg-graph"),d.value=Qi("#tooltip"),Oe(),Uh(oe,500)())})}function A(){var $e;const le=(($e=u.value)==null?void 0:$e.getBoundingClientRect())||{height:20,width:0};l.value=(le.height||40)-20,c.value=le.width,w.value[0]=(le.width-_*2)/2+_,f.value.call(v_(c_,p.value,w.value))}function z(le){le.stopPropagation(),le.preventDefault(),o.setNode(null),o.setLink(null),n.selectWidget(s.config)}function N(le=1,$e=1,Re=[0,0]){let be,he,Ie,et;const st=new Wa($e,Re),hn=[];for(be=-le;be<=le;be++)for(he=Math.max(-le,-be-le),Ie=Math.min(le,-be+le),he;he<=Ie;he++)et=st.axialToPixel(be,he),hn.push(et);return hn}function Y(le,$e=6,Re=0){const be=[];let he,Ie;for(he=0;he<$e;he++)Ie=Math.PI*2*(he/$e),be.push([Math.cos(Ie+Re)*le,Math.sin(Ie+Re)*le]);return be}function R(le,$e=1){const Re=[];for(let be=0;be<360;be=be+$e)if(be<230||be>310){let he=le*Math.cos(Math.PI*2*be/360),Ie=le*Math.sin(Math.PI*2*be/360);Re.push([he+$[0],Ie+$[1]])}return Re}function L(){const $e=Y({count:1,radius:_}.radius,6,0),Re=[];for(let he=0;he<$e.length;he++)Re.push([$[0]+$e[he][0],$[1]+$e[he][1]]);const be=vC();return be.curve(mC),be(Re)||""}function j(){const le=u.value&&u.value.getBoundingClientRect()||{width:0,height:0};if(isNaN(le.width)||le.width<1)return;const $e={count:1,radius:_},Re=o.nodes.filter(we=>we.isReal||we.name==="UNKNOWN_LOCAL"),be=Re.length,he=N($e.count,68,$),Ie=[];if(be>7){for(let we=0;we<he.length;we++){let Ae=N(1,20,he[we]);be<15?Ae=[Ae[0],Ae[5]]:be<22&&(Ae=[Ae[0],Ae[2],Ae[5]]),Ie.push(...Ae)}B(Ie)}let et=be>7?Ie:he;for(let we=0;we<be;we++){const Ae=et[we][0],Xe=et[we][1];Re[we].x=Ae,Re[we].y=Xe}const st=o.nodes.filter(we=>!(we.isReal||we.name==="UNKNOWN_LOCAL")),hn=30;let Sn=250,_e=R(Sn,hn);for(let we=0;we<st.length;we++)_e[we]||(Sn=Sn+80,_e=[..._e,...R(Sn,hn)]),st[we].x=_e[we][0],st[we].y=_e[we][1];I.value=[...Re,...st];const ue=u_().on("drag",we=>{Z(we)});setTimeout(()=>{d_(".node").call(ue)},1e3)}function B(le){for(let $e=le.length-1;$e>0;$e--){const Re=Math.floor(Math.random()*($e+1));[le[$e],le[Re]]=[le[Re],le[$e]]}}function G(le,$e){if(le.stopPropagation(),o.setNode(null),o.setLink($e),!g.value.linkDashboard)return;const{dashboard:Re}=lr({name:g.value.linkDashboard,layer:n.layerId,entity:X[7].value});if(!Re){ie.error(`The dashboard named ${g.value.linkDashboard} doesn't exist`);return}let be={};if(S.value)be=S.value;else{const{taskStartTime:st,fixedTriggerDuration:hn}=o.selectedNetworkTask;be={start:hn>1800?st+hn*1e3-30*60*1e3:st,end:st+hn*1e3}}const he=JSON.stringify(pe(Q({},be),{step:r.duration.step,utc:r.utc})),Ie=`/dashboard/${Re.layer}/${X[7].value}/${$e.source.serviceId}/${$e.source.serviceInstanceId}/${$e.source.id}/${$e.target.serviceId}/${$e.target.serviceInstanceId}/${$e.target.id}/${Re.name}/duration/${he}`,et=Zt.resolve({path:Ie});window.open(et.href,"_blank")}function H(le){g.value=le}function re(){n.selectWidget(s.config)}function fe(le){S.value=le}function oe(){const le=new ResizeObserver($e=>{const be=$e[0].contentRect;Math.abs(be.width-v.value.width)<5&&Math.abs(be.height-v.value.height)<5||(Oe(),v.value={width:be.width,height:be.height})});u.value&&le.observe(u.value)}function Oe(){return J(this,null,function*(){!o.nodes.length||(A(),j())})}function xe(le,$e){le.stopPropagation(),C.value=$e}function Ee(le){le.stopPropagation(),C.value=null}function Z(le){if(!C.value)return;const $e=C.value.isReal||C.value.name==="UNKNOWN_LOCAL",Re=$e?-20:20,be=U(le.x||0,le.y||0,Re);if($e){if(!be)return}else if(be)return;I.value=I.value.map(he=>(C.value&&he.id===C.value.id&&(he.x=le.x,he.y=le.y),he))}function U(le,$e,Re){const be=(_+Re)/2,he=Math.sqrt(3),Ie=Math.abs($[0]-le),et=Math.abs($[1]-$e);if(Ie<be)return et<=be*he;{const st=-he*(Ie-be)+be*he;return et<st}}function ee(le,$e){const Re=` <div class="mb-5"><span class="grey">name: </span>${le.name}</div>`;d.value.style("top",$e.offsetY+"px").style("left",$e.offsetX+"px").style("visibility","visible").html(Re)}function K(){d.value.style("visibility","hidden")}function se(le,$e){const Re=[...le.sourceComponents,...le.targetComponents];let be="TCP";Re.includes("https")&&(be="HTTPS"),Re.includes("http")&&(be="HTTP"),Re.includes("tls")&&(be="TLS");const he=`<div><span class="grey">${t("detectPoint")}: </span>${le.detectPoints.join(" | ")}</div>
        <div><span class="grey">Type: </span>${be}</div>`;d.value.style("top",$e.offsetY+"px").style("left",$e.offsetX+"px").style("visibility","visible").html(he)}function ye(){d.value.style("visibility","hidden")}return He(()=>o.nodes,()=>{Oe()}),(le,$e)=>{const Re=Ue,be=jt;return E(),P(de,null,[y("div",{ref_key:"chart",ref:u,class:"process-topo"},[(E(),P("svg",{class:"process-svg",width:c.value,height:l.value,onClick:z},[y("g",{class:"svg-graph",transform:`translate(${w.value[0]}, ${w.value[1]})`},[y("g",Jte,[y("path",{d:L(),stroke:"#D5DDF6","stroke-width":"2",fill:"none"},null,8,Zte),y("text",{x:0,y:_-15,fill:b(r).theme===b(xt).Dark?"#eee":"#000","text-anchor":"middle"},D(b(a).currentPod&&b(a).currentPod.label),9,ene)]),y("g",tne,[(E(!0),P(de,null,Pe(I.value,(he,Ie)=>(E(),P("g",{key:Ie,class:"node",onMouseover:et=>ee(he,et),onMouseout:K,onMousedown:et=>xe(et,he),onMouseup:$e[0]||($e[0]=et=>Ee(et))},[y("image",{href:b(_n).CUBE,style:{cursor:"'move'"},width:"35",height:"35",x:(he.x||0)-15,y:(he.y||0)-15},null,8,rne),y("text",{x:he.x,y:(he.y||0)+28,fill:b(r).theme===b(xt).Dark?"#eee":"#000","text-anchor":"middle"},D(he.name.length>10?`${he.name.substring(0,10)}...`:he.name),9,ine)],40,nne))),128))]),y("g",sne,[(E(!0),P(de,null,Pe(b(o).calls,(he,Ie)=>(E(),P("path",{key:Ie,class:"topo-call","marker-end":"url(#arrow)",stroke:"#97B0F8",d:b(Yte)(he)},null,8,ane))),128))]),y("g",one,[(E(!0),P(de,null,Pe(b(o).calls,(he,Ie)=>(E(),P("image",{key:Ie,class:"topo-line-anchor",href:b(Gte)(he),width:"15",height:"15",x:b(Qy)(he)[0]-8,y:b(Qy)(he)[1]-13,onClick:et=>G(et,he),onMouseover:et=>se(he,et),onMouseout:ye},null,40,lne))),128))]),y("g",cne,[(E(!0),P(de,null,Pe(b(o).calls,(he,Ie)=>(E(),P("defs",{key:Ie},dne))),128))])],8,Qte)],8,Kte)),hne],512),T(be,{placement:"bottom",width:295,trigger:"click"},{reference:q(()=>[y("div",{class:"switch-icon-edit ml-5",title:"Settings",onClick:re},[T(Re,{size:"middle",iconName:"setting_empty"})])]),default:q(()=>[T(Wte,{onUpdate:H})]),_:1}),T(Xte,{onGet:fe})],64)}}});const fne={class:"flex-h content"},pne={class:"vis-graph ml-5"},vne={key:1,class:"text"},mne=ae({__name:"Content",props:{config:{type:Object,default:()=>({})}},setup(e){const s=ds(),{t}=ge();return(r,n)=>{const a=Gn;return E(),P("div",fne,[T(zte),Te((E(),P("div",pne,[b(s).nodes.length?(E(),ke(kk,{key:0,config:e.config},null,8,["config"])):(E(),P("div",vne,D(b(t)("noData")),1))])),[[a,b(s).loadNodes]])])}}});const gne=ce(mne,[["__scopeId","data-v-0369b6b5"]]),yne=e=>(Nn("data-v-fba4be1c"),e=e(),Ln(),e),_ne={class:"profile-wrapper flex-v"},bne=yne(()=>y("div",{class:"title"},"Network Profiling",-1)),wne={class:"operation cp"},kne=ae({__name:"NetworkProfiling",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",_ne,[bne,b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",wne,[T(l,{iconName:"ellipsis_v",size:"middle"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),T(gne,{config:s.data},null,8,["config"])])}}});const Sk=ce(kne,[["__scopeId","data-v-fba4be1c"]]),xk=e=>(Nn("data-v-5e4a06eb"),e=e(),Ln(),e),Sne={class:"label"},xne={class:"item-title"},Tne={class:"title"},$ne={class:"label"},Cne={class:"label"},Ine={class:"mr-5"},Dne={class:"label"},Ene={class:"flex-h"},Mne=xk(()=>y("span",{class:"ml-5"},"s",-1)),One={class:"label"},Pne={class:"flex-h"},Nne=xk(()=>y("span",{class:"ml-5"},"s",-1)),Lne={class:"label"},Rne={class:"label"},Ane=["onInput"],Fne=ae({__name:"Policy",props:{policyList:{type:Object,default:()=>({})},order:{type:Number,default:0}},emits:["edit"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=ln(t.policyList[t.order]),a=["HTTP_ERROR_RATE","HTTP_AVG_RESPONSE_TIME"];function o(g){if(t.policyList.map(_=>_.type).includes(g[0].value))return ie.warning("Target type cannot be configured repeatedly.");n.type=g[0].value,s("edit",n,t.order)}function l(g,w){if(n.checkItems.map(S=>S.type).includes(g[0].value))return ie.warning("Monitor type cannot be configured repeatedly.");n.checkItems[w].type=g[0].value,s("edit",n,t.order)}function c(g,w){if(n.checkItems[w].uriRegex)return ie.warning("UriList or UriRegex only be configured with one option.");const S=(g.target.textContent||"").replace(/\s+/g,"").splice(";");n.checkItems[w].uriList=S.length?S:null,s("edit",n,t.order)}function u(g){let w=/^(100(\.0{1,2})?|[1-9]?\d(\.\d{1,2})?)$/;if(Hs[1].value===n.checkItems[g].type&&(w=/^\d+$/),Hs[2].value===n.checkItems[g].type&&(w=/^(\d+)(\.\d+)?$/),Hs[4].value===n.checkItems[g].type&&(w=/^[+]{0,1}(\d+)$|^[+]{0,1}(\d+\.\d+)$/),!w.test(n.checkItems[g].threshold))return ie.error(v(n.checkItems[g].type));s("edit",n,t.order)}function d(g){if(g!==void 0&&(n.checkItems[g]||{}).uriList)return ie.warning("UriList or UriRegex only be configured with one option");const w=n.checkItems.map(_=>(_.count=Number(_.count),_.period=Number(_.period),_));s("edit",pe(Q({},n),{checkItems:w}),t.order)}function f(g){g.stopPropagation(),n.checkItems.push({type:"",threshold:"",period:NaN,count:NaN}),s("edit",n,t.order)}function p(g,w){g.stopPropagation(),n.checkItems.length!==1&&(n.checkItems=n.checkItems.filter((_,S)=>S!==w),s("edit",n,t.order))}function v(g){const w={PROCESS_CPU:"It is a percentage data",PROCESS_THREAD_COUNT:"It is a positive integer",SYSTEM_LOAD:"It is a floating point number",HTTP_ERROR_RATE:"It is percentage data",HTTP_AVG_RESPONSE_TIME:"It is a response time in milliseconds"};return w[g]?`(${w[g]})`:""}return(g,w)=>{const _=Mt,S=Ue,I=Yt,C=l_;return E(),P(de,null,[y("div",null,[y("div",Sne,D(b(r)("targetTypes")),1),T(_,{class:"profile-input",size:"small",value:n.type,options:b(Xa),placeholder:"Select a type",onChange:o},null,8,["value","options"])]),(E(!0),P(de,null,Pe(n.checkItems,($,O)=>(E(),P("div",{key:O},[y("div",xne,[y("span",Tne,D(`Item - ${O+1}`),1),Te(T(S,{class:"ml-5 cp",iconName:"remove_circle_outline",size:"middle",onClick:A=>p(A,O)},null,8,["onClick"]),[[Ye,n.checkItems.length!==1]]),Te(T(S,{class:"ml-5 cp",iconName:"add_circle_outlinecontrol_point",size:"middle",onClick:f},null,512),[[Ye,O===n.checkItems.length-1]])]),y("div",null,[y("div",$ne,D(b(r)("monitorType")),1),T(_,{class:"profile-input",size:"small",value:$.type,options:b(Hs),placeholder:"Select a type",onChange:A=>l(A,O)},null,8,["value","options","onChange"])]),y("div",null,[y("div",Cne,[y("span",Ine,D(b(r)("threshold")),1),y("span",null,D(v($.type)),1)]),T(I,{type:"number",size:"small",class:"profile-input",modelValue:$.threshold,"onUpdate:modelValue":A=>$.threshold=A,onChange:A=>u(O)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),y("div",null,[y("div",Dne,D(b(r)("count")),1),y("div",Ene,[T(C,{size:"small",class:"profile-input",min:0,modelValue:$.count,"onUpdate:modelValue":A=>$.count=A,onChange:d},null,8,["modelValue","onUpdate:modelValue"]),Mne])]),y("div",null,[y("div",One,D(b(r)("period")),1),y("div",Pne,[T(C,{size:"small",class:"profile-input",min:0,modelValue:$.period,"onUpdate:modelValue":A=>$.period=A,onChange:d},null,8,["modelValue","onUpdate:modelValue"]),Nne])]),Te(y("div",null,[y("div",Lne,D(b(r)("uriRegex")),1),T(I,{size:"small",class:"profile-input",modelValue:$.uriRegex,"onUpdate:modelValue":A=>$.uriRegex=A,onChange:A=>d(O)},null,8,["modelValue","onUpdate:modelValue","onChange"])],512),[[Ye,a.includes($.type)]]),Te(y("div",null,[y("div",Rne,D(b(r)("uriList")),1),y("div",{id:"uri-param",contenteditable:"true",onInput:A=>c(A,O),class:"profile-input"},D(($.uriList||[]).join("; ")),41,Ane)],512),[[Ye,a.includes($.type)]])]))),128))],64)}}});const Vne=ce(Fne,[["__scopeId","data-v-5e4a06eb"]]),zne={class:"policy-list"},jne={class:"title"},Yne=ae({__name:"EditPolicy",props:{policyList:{type:Array,default:()=>[]}},emits:["save"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=F(["0"]),a=F([...t.policyList]);function o(d,f){a.value=a.value.map((p,v)=>f===v?d:p)}function l(d,f){d.stopPropagation(),a.value.length!==1&&(a.value=a.value.filter((p,v)=>v!==f))}function c(d){d.stopPropagation(),a.value.push({type:"",checkItems:[{type:"",threshold:"",period:NaN,count:NaN}]}),n.value=[String(a.value.length-1)]}function u(){const d=[];for(const f of a.value){const p=f.checkItems.filter(v=>v.type&&v.threshold&&v.period&&v.count);if(f.type&&p.length){const v={targetType:f.type,checkItems:p};d.push(v)}}s("save",d)}return(d,f)=>{const p=Ue,v=Xh,g=Kh,w=It;return E(),P("div",zne,[T(g,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=_=>n.value=_)},{default:q(()=>[(E(!0),P(de,null,Pe(a.value,(_,S)=>(E(),ke(v,{key:S,name:String(S)},{title:q(()=>[y("div",null,[y("span",jne,D(`Policy - ${S+1}`),1),Te(T(p,{class:"mr-5 cp",iconName:"remove_circle_outline",size:"middle",onClick:I=>l(I,S)},null,8,["onClick"]),[[Ye,a.value.length!==1]]),Te(T(p,{class:"cp",iconName:"add_circle_outlinecontrol_point",size:"middle",onClick:c},null,512),[[Ye,S===a.value.length-1]])])]),default:q(()=>[T(Vne,{policyList:a.value,onEdit:o,order:S},null,8,["policyList","order"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),y("div",null,[T(w,{onClick:u,type:"primary",class:"save-btn"},{default:q(()=>[We(D(b(r)("save")),1)]),_:1})])])}}});const Gne=ce(Yne,[["__scopeId","data-v-2808425b"]]),Une={class:"profile-task-list flex-v"},Hne={class:"profile-task-wrapper flex-v"},Wne={class:"profile-t-tool"},Bne={class:"profile-t-wrapper"},qne={class:"profile-t"},Xne=["onClick"],Kne={class:"ell"},Qne={class:"sm"},Jne={class:"sm"},Zne=ae({__name:"PolicyList",setup(e){const{t:s}=ge(),t=it(),r=pa(),n=F(!1),a=F(!1);u();function o(d){return J(this,null,function*(){r.setSelectedStrategy(d);const f=t.currentService&&t.currentService.id||"";yield r.getMonitoringInstances(f)})}function l(){n.value=!0}function c(d){return J(this,null,function*(){const f=t.currentService&&t.currentService.id||"";if(!f)return ie.error("No Service ID");const p=yield r.setContinuousProfilingPolicy(f,d);if(p.errors){ie.error(p.errors);return}if(!p.data.strategy.status){ie.error(p.data.strategy.errorReason);return}n.value=!1,yield u()})}function u(){return J(this,null,function*(){const d=t.currentService&&t.currentService.id||"",f=yield r.getStrategyList({serviceId:d});if(f.errors)return ie.error(f.errors);r.strategyList.length})}return He(()=>t.currentService,()=>{a.value=!1,u()}),(d,f)=>{const p=Ue,v=Mi,g=Gn;return E(),P(de,null,[Te((E(),P("div",Une,[y("div",Hne,[y("div",Wne,[y("span",null,D(b(s)("policyList")),1),y("span",{class:"new-task cp",onClick:l},[T(p,{iconName:"edit",size:"middle"})])]),y("div",Bne,[Te(y("div",{class:"no-data"},D(b(s)("noData")),513),[[Ye,!b(r).strategyList.length]]),y("table",qne,[(E(!0),P(de,null,Pe(b(r).strategyList,(w,_)=>(E(),P("tr",{class:"profile-tr cp",onClick:S=>o(w),key:_},[w.type?(E(),P("td",{key:0,class:Ct(["profile-td",{selected:b(r).selectedStrategy.id===w.id}])},[y("div",Kne,[y("span",Qne,D(w.type),1)]),(E(!0),P(de,null,Pe(w.checkItems,(S,I)=>(E(),P("div",{class:"grey ell sm",key:I},[y("span",Jne,D(`${S.type} >= ${S.threshold}${[b(Hs)[0].value,b(Hs)[3].value].includes(S.type)?"%":""}; `),1)]))),128))],2)):me("",!0)],8,Xne))),128))])])])])),[[g,b(r).policyLoading]]),T(v,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=w=>n.value=w),title:b(s)("editStrategy"),"destroy-on-close":!0,fullscreen:"",onClosed:f[1]||(f[1]=w=>n.value=!1)},{default:q(()=>[T(Gne,{policyList:b(r).strategyList,onSave:c},null,8,["policyList"])]),_:1},8,["modelValue","title"])],64)}}});const ere=ce(Zne,[["__scopeId","data-v-ee904d99"]]),tre={class:"header"},nre={class:"child"},rre={class:"title"},ire={class:"title mt-10"},sre=["onClick"],are=["onClick"],ore=ae({__name:"InstanceList",props:{config:{type:Object,default:()=>({})}},setup(e){const s=e,{t}=ge(),r=Ce(),n=it(),a=pa(),o=10,l=F([]);function c(f,p){!s.config.processDashboardName||Zt.push(`/dashboard/${r.layerId}/${X[8].value}/${n.currentService.id}/${p.id}/${f.id}/${s.config.processDashboardName}`)}function u(f){!s.config.instanceDashboardName||Zt.push(`/dashboard/${r.layerId}/${X[3].value}/${n.currentService.id}/${f.id}/${s.config.instanceDashboardName}`)}function d(f){return J(this,null,function*(){l.value=a.instances.filter((p,v)=>{if(v>=(f-1)*o&&v<f*o)return p})})}return He(()=>a.instances,()=>{l.value=a.instances.filter((f,p)=>p<o)}),(f,p)=>{const v=fs,g=da,w=Di;return E(),P(de,null,[y("div",tre,D(b(t)("monitorInstances")),1),T(g,{data:l.value,style:{width:"99%"},height:"440"},{default:q(()=>[T(v,{type:"expand"},{default:q(_=>[y("div",nre,[y("div",rre,D(b(t)("attributes")),1),(E(!0),P(de,null,Pe(_.row.attributes,(S,I)=>(E(),P("div",{key:I},D(`${S.name}: ${S.value}`),1))),128)),y("div",ire,D(b(t)("processes")),1),T(g,{data:_.row.processes,size:"small","max-height":"300"},{default:q(()=>[T(v,{prop:"name",label:"Name"},{default:q(S=>[y("span",{class:Ct(e.config.processDashboardName?"link":""),onClick:I=>c(S.row,_.row)},D(S.row.name),11,sre)]),_:2},1024),(E(!0),P(de,null,Pe(b(L2),S=>(E(),ke(v,{key:S.value,label:S.label,prop:S.value,width:S.width},null,8,["label","prop","width"]))),128))]),_:2},1032,["data"])])]),_:1}),T(v,{prop:"name",label:"Name"},{default:q(_=>[y("span",{class:Ct(e.config.instanceDashboardName?"link":""),onClick:S=>u(_.row)},D(_.row.name),11,are)]),_:1}),(E(!0),P(de,null,Pe(b(N2),_=>(E(),ke(v,{key:_.value,label:_.label,prop:_.value,width:_.width},null,8,["label","prop","width"]))),128))]),_:1},8,["data"]),T(w,{class:"mt-10",small:"",layout:"prev, pager, next","page-size":o,total:b(a).instances.length,onCurrentChange:d,onPrevClick:d,onNextClick:d},null,8,["total"])],64)}}});const lre=ce(ore,[["__scopeId","data-v-7431eb49"]]),cre={class:"flex-h content"},ure={class:"flex-v list"},dre=ae({__name:"Content",props:{config:{type:Object,default:()=>({})}},setup(e){const s=pa();return(t,r)=>{const n=Gn;return E(),P("div",cre,[T(ere),Te((E(),P("div",ure,[T(lre,{config:e.config},null,8,["config"])])),[[n,b(s).instancesLoading]])])}}});const hre=ce(dre,[["__scopeId","data-v-95247db2"]]),fre=e=>(Nn("data-v-e431ce1b"),e=e(),Ln(),e),pre={class:"profile-wrapper flex-v"},vre=fre(()=>y("div",{class:"title"},"Continuous Profiling",-1)),mre={class:"operation cp"},gre=ae({__name:"ContinuousProfiling",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}function a(){r.setConfigPanel(!0),r.selectWidget(s.data)}return(o,l)=>{const c=Ue,u=jt;return E(),P("div",pre,[vre,b(r).editMode?(E(),ke(u,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",mre,[T(c,{iconName:"ellipsis_v",size:"middle"})])]),default:q(()=>[y("div",{class:"tools",onClick:a},[y("span",null,D(b(t)("edit")),1)]),y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),T(hre,{config:s.data},null,8,["config"])])}}});const Tk=ce(gre,[["__scopeId","data-v-e431ce1b"]]),yre={class:"time-range"},_re={class:"header"},bre=ae({__name:"TimeRange",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""}},setup(e){const s=e,{t}=ge(),r=Me(()=>s.data.graph||{}),n=Ce(),a=Be(),o=Me(()=>[a.durationRow.start,a.durationRow.end].map(f=>u(f,"YYYY-MM-DD HH:mm")).join(" ~ "));function l(){n.removeControls(s.data)}function c(){n.setConfigPanel(!0),n.selectWidget(s.data)}function u(d,f){const p={dow:1,hourTip:t("hourTip"),minuteTip:t("minuteTip"),secondTip:t("secondTip"),yearSuffix:t("yearSuffix"),monthsHead:t("monthsHead").split("_"),months:t("months").split("_"),weeks:t("weeks").split("_"),cancelTip:t("cancel"),submitTip:t("confirm"),quarterHourCutTip:t("quarterHourCutTip"),halfHourCutTip:t("halfHourCutTip"),hourCutTip:t("hourCutTip"),dayCutTip:t("dayCutTip"),weekCutTip:t("weekCutTip"),monthCutTip:t("monthCutTip")},v=d.getFullYear(),g=d.getMonth(),w=d.getDate(),_=d.getHours(),S=_%12===0?12:_%12,I=d.getMinutes(),C=d.getSeconds(),$=d.getMilliseconds(),O=z=>`0${z}`.slice(-2),A={YYYY:v,MM:O(g+1),MMM:p.months[g],MMMM:p.monthsHead[g],M:g+1,DD:O(w),D:w,HH:O(_),H:_,hh:O(S),h:S,mm:O(I),m:I,ss:O(C),s:C,S:$};return f.replace(/Y+|M+|D+|H+|h+|m+|s+|S+/g,z=>A[z])}return(d,f)=>{const p=Ue,v=jt;return E(),P("div",yre,[y("div",_re,[b(n).editMode?(E(),ke(v,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",null,[T(p,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:c},[y("span",null,D(b(t)("edit")),1)]),y("div",{class:"tools",onClick:l},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0)]),y("div",{class:"body",style:ht({backgroundColor:b(io)[b(r).backgroundColor],justifyContent:b(r).textAlign,color:b(io)[b(r).fontColor]})},[y("span",{class:"mr-5",style:ht({fontSize:b(r).fontSize+"px"})},D(b(r).text),5),T(p,{iconName:"time_range",size:"middle"}),y("span",{class:"ml-5",style:ht({fontSize:b(r).fontSize+"px"})},D(b(o)),5)],4)])}}});const $k=ce(bre,[["__scopeId","data-v-0af0339f"]]),wre={class:"text"},kre={class:"header"},Sre={class:"body"},xre=["src"],Tre={key:1,class:"tips"},$re=ae({__name:"ThirdPartyApp",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""}},setup(e){const s=e,{t}=ge(),r=Ce(),n=Me(()=>s.data.widget||{});function a(){r.removeControls(s.data)}function o(){r.setConfigPanel(!0),r.selectWidget(s.data)}return(l,c)=>{const u=Ue,d=jt;return E(),P("div",wre,[y("div",kre,[b(r).editMode?(E(),ke(d,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",null,[T(u,{iconName:"ellipsis_v",size:"middle",class:"operation"})])]),default:q(()=>[y("div",{class:"tools",onClick:o},[y("span",null,D(b(t)("edit")),1)]),y("div",{class:"tools",onClick:a},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0)]),y("div",Sre,[b(n).url?(E(),P("iframe",{key:0,src:b(n).url,width:"100%",height:"100%",scrolling:"no",style:{border:"none"}},null,8,xre)):(E(),P("div",Tre,D(b(t)("iframeWidgetTip")),1))])])}}});const Ck=ce($re,[["__scopeId","data-v-ea84541e"]]),Cre=ni({id:"taskTimeline",state:()=>({loading:!1,taskList:[],selectedTask:{}}),actions:{setSelectedTask(e){this.selectedTask=e||{}},setTaskList(e){this.taskList=e},getContinousTaskList(e){return J(this,null,function*(){if(!e.serviceId)return new Promise(r=>r({}));this.loading=!0;const s=yield mt.query("getEBPFTasks").params(e);if(this.loading=!1,this.errorTip="",s.data.errors)return s.data;const t=it();return this.taskList=(s.data.data.queryEBPFTasks||[]).filter(r=>t.currentProcess&&r.processId===t.currentProcess.id),s.data})},getGraphData(){return J(this,null,function*(){let e={};this.selectedTask.targetType===Xa[2].value?e=yield this.getTopology():e=yield fa().getEBPFSchedules({taskId:this.selectedTask.taskId}),e.errors&&ie.error(e.errors)})},getTopology(){return J(this,null,function*(){const e=ds(),s=Be(),t=it();e.setSelectedNetworkTask(this.selectedTask);const{taskStartTime:r,fixedTriggerDuration:n}=this.selectedTask,a=n>1800?r+n*1e3-30*60*1e3:r;let o=r+n*1e3;r+n*1e3>new Date().getTime()&&(o=new Date().getTime());const l=yield e.getProcessTopology({serviceInstanceId:(t.currentPod||{}).id||"",duration:{start:Mr(cr(s.utc,new Date(a)),s.duration.step,!0),end:Mr(cr(s.utc,new Date(o)),s.duration.step,!0),step:s.duration.step}});return l.errors&&ie.error(l.errors),l})},preAnalyzeTask(){return J(this,null,function*(){if(this.selectedStrategy.type==="NETWORK"){yield ds().setSelectedNetworkTask(this.selectedTask);return}const e=yield this.getEBPFSchedules({taskId:this.selectedTask.taskId});e.errors&&ie.error(e.errors)})}}});function Ik(){return Cre(ri)}const Ire=ae({__name:"Timeline",props:{data:{type:Object,default:()=>({})}},setup(e){const s=e,t=Ik(),r=it(),n=pa(),a=Ce(),o=F(null),l=F(null),c=F({width:0,height:0}),u=(v,g="YYYY-MM-DD HH:mm:ss")=>so(v).format(g);d(),Or(()=>{c.value=o.value&&o.value.getBoundingClientRect()||{width:0,height:0},Uh(p,500)()});function d(){return J(this,null,function*(){const v=r.currentService&&r.currentService.id||"",g=r.currentPod&&r.currentPod.id||"",w=n.selectedStrategy.type,_=yield t.getContinousTaskList({serviceId:v,serviceInstanceId:g,targets:w?[w]:null,triggerType:fc.CONTINUOUS_PROFILING});if(_.errors){ie.error(_.errors);return}f()})}function f(){if(!o.value)return;l.value&&l.value.destroy();const v=o.value.getBoundingClientRect().height,g=t.taskList.map((S,I)=>({id:I,start:new Date(Number(S.taskStartTime)),end:new Date(Number(S.taskStartTime+S.fixedTriggerDuration*1e3)),data:S,className:S.targetType})),w=new ei(g),_={height:v,width:"100%",locale:"en",groupHeightMode:"fitItems",autoResize:!1,tooltip:{overflowMethod:"cap",template(S){const I=S.data||{},C=I.taskStartTime?u(I.taskStartTime+I.fixedTriggerDuration*1e3):"";let $="";for(const A of I.continuousProfilingCauses||[])$+=`${A.message};`;return`
          <div>Task ID: ${I.taskId||""}</div>
          <div>Target Type: ${I.targetType||""}</div>
          <div>Trigger Type: ${I.triggerType||""}</div>
          <div>Start Time: ${I.taskStartTime?u(I.taskStartTime):""}</div>
          <div>End Time: ${C}</div>
          <div>Causes: ${$}</div>
          <div>Process Labels: ${I.processLabels.join("; ")||""}</div>`}}};l.value=new Sp(o.value,w,_),l.value.on("select",S=>J(this,null,function*(){a.selectWidget(s.data);const I=S.items[0],C=t.taskList[I];yield t.setSelectedTask(C),yield t.getGraphData()}))}function p(){const v=new ResizeObserver(g=>{const _=g[0].contentRect;Math.abs(_.width-c.value.width)<3&&Math.abs(_.height-c.value.height)<3||(f(),c.value={width:_.width,height:_.height})});o.value&&v.observe(o.value)}return ha(()=>{l.value&&l.value.destroy(),t.setTaskList([])}),He(()=>r.currentProcess,()=>{d()}),(v,g)=>(E(),P("div",{ref_key:"timeline",ref:o,class:"task-timeline"},null,512))}});const Dre=ce(Ire,[["__scopeId","data-v-d1d64b24"]]),Ere={key:0,class:"content"},Mre={key:1,class:"content"},Ore={class:"schedules"},Pre={class:"item"},Nre={key:2,class:"text"},Lre=ae({__name:"ProfilingPanel",props:{config:{type:Object,default:()=>({})}},setup(e){const{t:s}=ge(),t=Ik(),r=ds();return(n,a)=>(E(),P(de,null,[b(t).selectedTask.targetType===b(Xa)[2].value?(E(),P("div",Ere,[b(r).nodes.length?(E(),ke(kk,{key:0,config:e.config},null,8,["config"])):me("",!0)])):me("",!0),[b(Xa)[1].value,b(Xa)[0].value].includes(b(t).selectedTask.targetType)?(E(),P("div",Mre,[y("div",Ore,[T($_)]),y("div",Pre,[T(C_)])])):me("",!0),b(t).selectedTask.targetType?me("",!0):(E(),P("div",Nre,D(b(s)("noData")),1))],64))}});const Rre=ce(Lre,[["__scopeId","data-v-61015522"]]),Are={class:"content"},Fre=ae({__name:"Content",props:{config:{type:Object,default:()=>({})}},setup(e){return(s,t)=>(E(),P("div",Are,[T(Dre),T(Rre,{config:e.config},null,8,["config"])]))}});const Vre=ce(Fre,[["__scopeId","data-v-4297cbed"]]),zre=e=>(Nn("data-v-adf8ddbe"),e=e(),Ln(),e),jre={class:"content-wrapper flex-v"},Yre=zre(()=>y("div",{class:"title"},"Task Timeline",-1)),Gre={class:"operation cp"},Ure=ae({__name:"TaskTimeline",props:{data:{type:Object,default:()=>({graph:{}})},activeIndex:{type:String,default:""},needQuery:{type:Boolean,default:!0}},setup(e){const s=e,{t}=ge(),r=Ce();function n(){r.removeControls(s.data)}return(a,o)=>{const l=Ue,c=jt;return E(),P("div",jre,[Yre,b(r).editMode?(E(),ke(c,{key:0,placement:"bottom",trigger:"click",width:100},{reference:q(()=>[y("span",Gre,[T(l,{iconName:"ellipsis_v",size:"middle"})])]),default:q(()=>[y("div",{class:"tools",onClick:n},[y("span",null,D(b(t)("delete")),1)])]),_:1})):me("",!0),T(Vre,{config:s.data},null,8,["config"])])}}});const Dk=ce(Ure,[["__scopeId","data-v-adf8ddbe"]]),Hre={Widget:y_,Trace:__,Topology:m_,Profile:w_,Log:k_,Text:S_,Ebpf:I_,DemandLog:E_,Event:bk,NetworkProfiling:Sk,TimeRange:$k,ThirdPartyApp:Ck,ContinuousProfiling:Tk,TaskTimeline:Dk},Wre={data:{type:Object,default:()=>({children:[]})},active:{type:Boolean,default:!1}},Bre=ae({name:"Tab",components:Q({},Hre),props:Wre,setup(e){const{t:s}=ge(),t=Ce(),r=hs(),n=F(Number(r.params.activeTabIndex)||0),a=F(""),o=F(NaN),l=F(!1),c=F(!1);t.setActiveTabIndex(n);const u=t.layout.findIndex($=>$.i===e.data.i);t.layout[u].children.length&&(t.setCurrentTabItems(t.layout[u].children[n.value].children),t.setActiveTabIndex(n.value,e.data.i));function d($,O){$.stopPropagation(),n.value=O,t.activeGridItem(e.data.i),t.selectWidget(e.data),t.setActiveTabIndex(O);const A=t.layout.findIndex(z=>z.i===e.data.i);if(t.setCurrentTabItems(t.layout[A].children[n.value].children),c.value=!0,r.params.activeTabIndex){let z=location.href.split("/tab/")[0];z=z+"/tab/"+n.value,history.replaceState({},"",z)}}function f($){$.stopPropagation(),t.removeTab(e.data)}function p($,O){$.stopPropagation(),t.removeTabItem(e.data,O);const A=t.layout[u].children[0],z=A&&A.children||[];t.setCurrentTabItems(z),t.activeGridItem(0),n.value=0,c.value=!0}function v(){t.addTabItem(e.data)}function g($,O){if(!l.value){o.value=NaN;return}o.value=O}function w($){$.stopPropagation(),c.value=!0,!["tab-name","edit-tab"].includes($.target.className)&&(l.value=!1,o.value=NaN)}function _($,O){$.stopPropagation(),a.value=O.i,t.activeGridItem(`${e.data.i}-${n.value}-${O.i}`),w($)}function S(){const $=t.layout.findIndex(O=>O.i===e.data.i);t.setCurrentTabItems(t.layout[$].children[n.value].children)}function I($){const O=document.createElement("span");O.style.display="inline-block",O.textContent=$,document.body.appendChild(O);const A=O.clientWidth;return document.body.removeChild(O),A+10}function C(){let $="";r.params.activeTabIndex===void 0?$=location.href+"/tab/"+n.value:$=location.href.split("/tab/")[0]+"/tab/"+n.value,jh($)}return document.body.addEventListener("click",w,!1),He(()=>t.activedGridItem,$=>{if(!$){a.value="";return}const O=$.split("-");O[0]===e.data.i&&n.value===Number(O[1])?a.value=O[2]:a.value=""}),He(()=>t.currentTabIndex,()=>{n.value=t.currentTabIndex,t.activeGridItem(e.data.i),t.selectWidget(e.data);const $=t.layout.findIndex(O=>O.i===e.data.i);if(t.setCurrentTabItems(t.layout[$].children[n.value].children),c.value=!0,r.params.activeTabIndex){let O=location.href.split("/tab/")[0];O=O+"/tab/"+n.value,history.replaceState({},"",O)}}),pe(Q({handleClick:w,layoutUpdatedEvent:S,clickTabGrid:_,editTabName:g,addTabItem:v,deleteTabItem:p,removeTab:f,clickTabs:d,copyLink:C,getStringWidth:I},qh(e)),{activeTabWidget:a,dashboardStore:t,activeTabIndex:n,editTabIndex:o,needQuery:c,canEditTabName:l,t:s,dragIgnoreFrom:s_})}});const qre={class:"flex-h tab-header"},Xre=["onClick"],Kre=["onClick","onUpdate:modelValue","readonly"],Qre={class:"tab-icons"},Jre={key:0,class:"tab-icons"},Zre={key:0,class:"operations"},eie={class:"icon-operation"},tie={class:"edit-tab"},nie={key:1,class:"no-data-tips"};function rie(e,s,t,r,n,a){const o=Ue,l=Ei,c=Hh,u=Wh,d=Bh,f=bn("grid-item"),p=bn("grid-layout");return E(),P(de,null,[y("div",qre,[y("div",{class:"tabs scroll_bar_style",onClick:s[2]||(s[2]=(...v)=>e.handleClick&&e.handleClick(...v))},[(E(!0),P(de,null,Pe(e.data.children||[],(v,g)=>(E(),P("span",{key:g,class:Ct({active:e.activeTabIndex===g}),onClick:w=>e.clickTabs(w,g)},[Te(y("input",{onClick:w=>e.editTabName(w,g),"onUpdate:modelValue":w=>v.name=w,placeholder:"Please input",class:Ct(["tab-name",{view:!e.canEditTabName}]),readonly:isNaN(e.editTabIndex)&&!e.canEditTabName,style:ht({width:e.getStringWidth(v.name)+"px"})},null,14,Kre),[[Dl,v.name]]),e.dashboardStore.editMode&&e.canEditTabName?Te((E(),ke(o,{key:0,size:"sm",iconName:"cancel",onClick:w=>e.deleteTabItem(w,g)},null,8,["onClick"])),[[Ye,e.activeTabIndex===g]]):me("",!0)],10,Xre))),128)),y("span",Qre,[T(l,{content:"Copy Link",placement:"bottom"},{default:q(()=>[y("i",{onClick:s[0]||(s[0]=(...v)=>e.copyLink&&e.copyLink(...v))},[T(o,{size:"middle",iconName:"copy",class:"tab-icon"})])]),_:1})]),e.dashboardStore.editMode?(E(),P("span",Jre,[T(l,{content:"Add tab items",placement:"bottom"},{default:q(()=>[y("i",{onClick:s[1]||(s[1]=(...v)=>e.addTabItem&&e.addTabItem(...v))},[T(o,{size:"middle",iconName:"add_fill",class:"tab-icon"})])]),_:1})])):me("",!0)]),e.dashboardStore.editMode?(E(),P("div",Zre,[T(d,{placement:"bottom",trigger:"click",width:200},{dropdown:q(()=>[T(u,null,{default:q(()=>[T(c,{onClick:s[3]||(s[3]=v=>e.canEditTabName=!0)},{default:q(()=>[y("span",tie,D(e.t("editTab")),1)]),_:1}),T(c,{onClick:e.removeTab},{default:q(()=>[y("span",null,D(e.t("delete")),1)]),_:1},8,["onClick"])]),_:1})]),default:q(()=>[y("span",eie,[T(o,{iconName:"ellipsis_v",size:"middle"})])]),_:1})])):me("",!0)]),y("div",{class:"tab-layout",onClick:s[5]||(s[5]=(...v)=>e.handleClick&&e.handleClick(...v))},[e.dashboardStore.currentTabItems.length?(E(),ke(p,{key:0,layout:e.dashboardStore.currentTabItems,"onUpdate:layout":s[4]||(s[4]=v=>e.dashboardStore.currentTabItems=v),"col-num":24,"row-height":10,"is-draggable":e.dashboardStore.editMode,"is-resizable":e.dashboardStore.editMode,onLayoutUpdated:e.layoutUpdatedEvent},{default:q(()=>[(E(!0),P(de,null,Pe(e.dashboardStore.currentTabItems,v=>(E(),ke(f,{x:v.x,y:v.y,w:v.w,h:v.h,i:v.i,key:v.id,onClick:g=>e.clickTabGrid(g,v),class:Ct({active:e.activeTabWidget===v.i}),"drag-ignore-from":e.dragIgnoreFrom},{default:q(()=>[(E(),ke($i(v.type),{data:v,activeIndex:`${e.data.i}-${e.activeTabIndex}-${v.i}`,needQuery:e.needQuery},null,8,["data","activeIndex","needQuery"]))]),_:2},1032,["x","y","w","h","i","onClick","class","drag-ignore-from"]))),128))]),_:1},8,["layout","is-draggable","is-resizable","onLayoutUpdated"])):(E(),P("div",nie,D(e.t("noWidget")),1))])],64)}const iie=ce(Bre,[["render",rie],["__scopeId","data-v-4b8ab53d"]]),sie={Tab:iie,Widget:y_,Trace:__,Topology:m_,Profile:w_,Log:k_,Text:S_,Ebpf:I_,DemandLog:E_,Event:bk,NetworkProfiling:Sk,ContinuousProfiling:Tk,TimeRange:$k,ThirdPartyApp:Ck,TaskTimeline:Dk},aie=ae({name:"Layout",components:Q({},sie),setup(){const{t:e}=ge(),s=Ce(),t=it();function r(n,a){var o;s.activeGridItem(n.i),s.selectWidget(n),n.type==="Tab"&&((o=a.target)==null?void 0:o.className)!=="tab-layout"&&s.setActiveTabIndex(0)}return a_(()=>{s.setLayout([]),t.setCurrentService(null),t.setCurrentPod(null),s.setEntity(""),s.setConfigPanel(!1)}),{dashboardStore:s,clickGrid:r,t:e,dragIgnoreFrom:s_}}});const oie={key:1,class:"no-data-tips"};function lie(e,s,t,r,n,a){const o=bn("grid-item"),l=bn("grid-layout");return e.dashboardStore.layout.length?(E(),ke(l,{key:0,layout:e.dashboardStore.layout,"onUpdate:layout":s[0]||(s[0]=c=>e.dashboardStore.layout=c),"col-num":24,"row-height":10,"is-draggable":e.dashboardStore.editMode,"is-resizable":e.dashboardStore.editMode},{default:q(()=>[(E(!0),P(de,null,Pe(e.dashboardStore.layout,c=>(E(),ke(o,{x:c.x,y:c.y,w:c.w,h:c.h,i:c.i,key:c.id,onClick:u=>e.clickGrid(c,u),class:Ct({active:e.dashboardStore.activedGridItem===c.i}),"drag-ignore-from":e.dragIgnoreFrom},{default:q(()=>[(E(),ke($i(c.type),{data:c},null,8,["data"]))]),_:2},1032,["x","y","w","h","i","onClick","class","drag-ignore-from"]))),128))]),_:1},8,["layout","is-draggable","is-resizable"])):(E(),P("div",oie,D(e.t("noWidget")),1))}const cie=ce(aie,[["render",lie],["__scopeId","data-v-b850109c"]]),qc=e=>(Nn("data-v-06c519a1"),e=e(),Ln(),e),uie={class:"dashboard-tool flex-h"},die={class:"flex-h"},hie={key:0,class:"selectors-item"},fie=qc(()=>y("span",{class:"label"},"$Service",-1)),pie={key:1,class:"selectors-item"},vie={class:"label"},mie={key:2,class:"selectors-item"},gie=qc(()=>y("span",{class:"label"}," $Process ",-1)),yie={key:0,class:"selectors-item"},_ie=qc(()=>y("span",{class:"label"},"$DestinationService",-1)),bie={key:1,class:"selectors-item"},wie={class:"label"},kie={key:2,class:"selectors-item"},Sie=qc(()=>y("span",{class:"label"}," $DestinationProcess ",-1)),xie={key:0,class:"flex-h tools"},Tie={key:0,class:"tool-icons"},$ie={class:"ml-5"},Cie=ae({__name:"Tool",setup(e){const{t:s}=ge(),t=Ce(),r=it(),n=Be(),a=hs().params,o=F(yu),l=F(!1),c=ln({destService:"",destPod:"",key:0,currentService:"",currentPod:"",currentProcess:"",currentDestService:"",currentDestPod:"",currentDestProcess:""}),u=Me(()=>{const Z=X.find(U=>U.value===t.entity);return Z&&Z.key||0}),d=Me(()=>[X[7].value,X[6].value,X[5].value].includes(t.entity));p(),n.setEventStack([f]),f();function f(){Oe(),a.serviceId?v():_()}function p(){a.layerId&&(t.setLayer(a.layerId),t.setEntity(a.entity))}function v(){return J(this,null,function*(){if([X[2].value,X[3].value,X[5].value,X[6].value,X[7].value,X[8].value].includes(String(a.entity))){if(g(),[X[2].value,X[3].value,X[8].value].includes(String(a.entity)))return;w();return}const Z=yield r.fetchServices(t.layerId);if(Z.errors){ie.error(Z.errors);return}let U,ee;if(c.currentService)for(const K of r.services)K.value===c.currentService&&(U=K),K.value===c.currentDestService&&(ee=K);else for(const K of r.services)K.id===String(a.serviceId)&&(U=K),K.id===String(a.destServiceId)&&(ee=K);r.setCurrentService(U),r.setCurrentDestService(ee),c.currentService=r.currentService&&r.currentService.value,c.currentDestService=r.currentDestService&&r.currentDestService.value})}function g(){return J(this,null,function*(){yield r.getService(String(a.serviceId)),c.currentService=r.currentService.value;const Z=String(a.entity).split("Relation")[0];yield j(Z,r.currentService.id,!0)})}function w(){return J(this,null,function*(){yield r.getService(String(a.destServiceId),!0),c.currentDestService=r.currentDestService.value,yield j(String(a.entity),r.currentDestService.id,!0)})}function _(){return J(this,null,function*(){if(!t.entity||!t.layerId||t.entity===X[1].value)return;const Z=yield r.fetchServices(t.layerId);if(Z.errors){ie.error(Z.errors);return}let U;c.currentService?U=(r.services||[]).find(ye=>ye.label===c.currentService):U=(r.services||[]).find((ye,le)=>le===0),r.setCurrentService(U||null);let ee,K=1;if(u.value===5&&(K=0),c.currentService?ee=(r.services||[]).find(ye=>ye.label===c.currentDestService):ee=(r.services||[]).find((ye,le)=>le===K),r.setCurrentDestService(ee||null),!r.currentService)return;c.currentService=r.currentService.value;const se=t.entity.split("Relation")[0];[X[2].value,X[3].value,X[5].value,X[6].value,X[7].value,X[8].value].includes(t.entity)&&(yield j(se,r.currentService.id,!0)),r.currentDestService&&(c.currentDestService=r.currentDestService.value,[X[5].value,X[6].value,X[7].value].includes(t.entity)&&(yield j(t.entity,r.currentDestService.id,!0)))})}function S(Z){return J(this,null,function*(){if(Z[0]){c.currentService=Z[0].value,r.setCurrentService(Z[0]),r.setCurrentPod(null),c.currentPod="",c.currentProcess="";const U=t.entity.split("Relation")[0];j(U,r.currentService.id,!0)}else r.setCurrentService(null)})}function I(Z){Z[0]?(c.currentDestService=Z[0].value,r.setCurrentDestService(Z[0]),r.setCurrentDestPod(null),c.currentDestPod="",c.currentDestProcess="",j(t.entity,r.currentDestService.id,!0)):r.setCurrentDestService(null)}function C(Z){return J(this,null,function*(){r.setCurrentPod(Z[0]||null),[X[7].value,X[8].value].includes(t.entity)&&B(!0)})}function $(Z){r.setCurrentDestPod(Z[0]||null),t.entity===X[7].value&&(r.setCurrentDestProcess(null),c.currentDestProcess="",G(!0))}function O(Z){r.setCurrentDestProcess(Z[0]||null),c.currentDestProcess=Z[0].label||""}function A(Z){r.setCurrentProcess(Z[0]||null),c.currentProcess=Z[0].label||""}function z(){if(t.editMode){ie.warning(s("editWarning"));return}ie.warning(s("viewWarning"))}function N(){return J(this,null,function*(){l.value=!0,yield t.saveDashboard(),l.value=!1})}function Y(Z){return J(this,null,function*(){if(t.selectedGrid&&t.selectedGrid.type==="Tab"){R(Z.id);return}if(t.activedGridItem.split("-").length===3){R(Z.id);return}L(Z.id)})}function R(Z){switch(Z){case"addWidget":t.addTabControls("Widget");break;case"addTrace":t.addTabControls("Trace");break;case"addLog":t.addTabControls("Log");break;case"addProfile":t.addTabControls("Profile");break;case"addEbpf":t.addTabControls("Ebpf");break;case"addTopology":t.addTabControls("Topology");break;case"addText":t.addTabControls("Text");break;case"addDemandLog":t.addTabControls("DemandLog");break;case"addEvent":t.addTabControls("Event");break;case"addNetworkProfiling":t.addTabControls("NetworkProfiling");break;case"addContinuousProfiling":t.addTabControls("ContinuousProfiling");break;case"addTimeRange":t.addTabControls("TimeRange");break;case"addIframe":t.addTabControls("ThirdPartyApp");break;case"addTaskTimeline":t.addTabControls("TaskTimeline");break;default:ie.info("Don't support this control");break}}function L(Z){switch(Z){case"addWidget":t.addControl("Widget");break;case"addTab":t.addControl("Tab");break;case"addTrace":t.addControl("Trace");break;case"addProfile":t.addControl("Profile");break;case"addEbpf":t.addControl("Ebpf");break;case"addLog":t.addControl("Log");break;case"addTopology":t.addControl("Topology");break;case"addText":t.addControl("Text");break;case"addDemandLog":t.addControl("DemandLog");break;case"addEvent":t.addControl("Event");break;case"addNetworkProfiling":t.addControl("NetworkProfiling");break;case"addContinuousProfiling":t.addControl("ContinuousProfiling");break;case"addTimeRange":t.addControl("TimeRange");break;case"addIframe":t.addControl("ThirdPartyApp");break;case"addTaskTimeline":t.addControl("TaskTimeline");break;default:t.addControl("Widget")}}function j(Z,U,ee,K){return J(this,null,function*(){let se;switch(Z){case X[2].value:a.podId?(ee&&(yield fe()),se=yield r.getEndpoints(Q({serviceId:U},K))):(se=yield r.getEndpoints(Q({serviceId:U},K)),ee&&oe());break;case X[3].value:se=yield r.getServiceInstances({serviceId:U}),ee&&oe();break;case X[6].value:a.destPodId?(ee&&(yield H()),se=yield r.getEndpoints(Q({serviceId:U,isRelation:!0},K))):(se=yield r.getEndpoints(Q({serviceId:U,isRelation:!0},K)),ee&&re());break;case X[5].value:se=yield r.getServiceInstances({serviceId:U,isRelation:!0}),ee&&re();break;case X[7].value:yield j(X[5].value,U,ee,K),se=yield G(ee);break;case X[8].value:yield j(X[3].value,U,ee,K),se=yield B(ee);break;default:se={}}se.errors&&ie.error(se.errors)})}function B(Z){return J(this,null,function*(){const U=yield r.getProcesses({instanceId:r.currentPod.id});if(Z){const ee=a.processId||r.processes[0].id,K=r.processes.find(se=>se.id===ee);K?(r.setCurrentProcess(K),c.currentProcess=K.label):(r.setCurrentProcess(null),c.currentProcess="")}return U})}function G(Z){return J(this,null,function*(){const U=yield r.getProcesses({instanceId:r.currentDestPod.id,isRelation:!0});if(Z){const ee=a.destProcessId||r.destProcesses[0].id,K=r.destProcesses.find(se=>se.id===ee);if(!K){c.currentDestProcess="",r.setCurrentDestProcess(null);return}r.setCurrentDestProcess(K),c.currentDestProcess=K.label}return U})}function H(){return J(this,null,function*(){const Z=yield r.getEndpoint(a.destPodId,!0);if(Z.errors)return ie.error(Z.errors);const U=Z.data.endpoint||{};U.id||ie.info("The Destination endpoint ID doesn't exist."),r.setCurrentDestPod(U),c.currentDestPod=U.label})}function re(){if(!(r.destPods.length&&r.destPods[0])){r.setCurrentDestPod(null),c.currentDestPod="";return}const Z=a.destPodId||r.destPods[0].id,U=r.destPods.find(ee=>ee.id===Z);if(!U){c.currentDestPod="",r.setCurrentDestPod(null),ie.info(`The Destination ${a.entity===X[6].value?"endpoint":"instance"} ID doesn't exist.`);return}r.setCurrentDestPod(U),c.currentDestPod=U.label}function fe(){return J(this,null,function*(){const Z=yield r.getEndpoint(a.podId);if(Z.errors)return ie.error(Z.errors);const U=Z.data.endpoint||{};U.id||ie.info("The endpoint ID doesn't exist."),r.setCurrentPod(U),c.currentPod=U.label||""})}function oe(){if(!(r.pods.length&&r.pods[0])){r.setCurrentPod(null),c.currentPod="";return}const Z=a.podId||r.pods[0].id,U=r.pods.find(ee=>ee.id===Z);if(!U){r.setCurrentPod(null),c.currentPod="",ie.info(`The ${a.entity===X[2].value?"endpoint":"instance"} ID doesn't exist.`);return}r.setCurrentPod(U),c.currentPod=U.label}function Oe(){switch(a.entity){case X[1].value:o.value=yu;break;case X[0].value:o.value=F$;break;case X[2].value:o.value=A$;break;case X[3].value:o.value=R$;break;case X[4].value:o.value=L$;break;case X[5].value:o.value=N$;break;case X[6].value:o.value=P$;break;case X[7].value:o.value=O$;break;case X[8].value:o.value=M$;break;default:o.value=yu}}function xe(Z){const U={keyword:Z};j(X[2].value,r.currentService.id,!1,U)}function Ee(Z){const U={keyword:Z};j(X[6].value,r.currentDestService.id,!1,U)}return He(()=>t.entity,(Z,U)=>{Z!==U&&_()}),(Z,U)=>{const ee=Mt,K=Ue,se=Hh,ye=Wh,le=Bh,$e=Ei,Re=Pn,be=Gn;return E(),P("div",uie,[y("div",{class:Ct([b(d)?"flex-v":"flex-h","tool-selectors"])},[y("div",die,[b(u)!==10?(E(),P("div",hie,[fie,T(ee,{modelValue:c.currentService,"onUpdate:modelValue":U[0]||(U[0]=he=>c.currentService=he),options:b(r).services,size:"small",placeholder:"Select a service",onChange:S,class:"selectors"},null,8,["modelValue","options"])])):me("",!0),b(u)===3||b(u)===4||b(u)===5||b(u)===6?(E(),P("div",pie,[y("span",vie,D(["EndpointRelation","Endpoint"].includes(b(t).entity)?"$Endpoint":"$ServiceInstance"),1),T(ee,{modelValue:c.currentPod,"onUpdate:modelValue":U[1]||(U[1]=he=>c.currentPod=he),options:b(r).pods,size:"small",placeholder:"Select a data",onChange:C,onQuery:xe,class:"selectorPod",isRemote:["EndpointRelation","Endpoint"].includes(b(t).entity)},null,8,["modelValue","options","isRemote"])])):me("",!0),b(u)===5||b(u)===6?(E(),P("div",mie,[gie,T(ee,{modelValue:c.currentProcess,"onUpdate:modelValue":U[2]||(U[2]=he=>c.currentProcess=he),options:b(r).processes,size:"small",placeholder:"Select a data",onChange:A,class:"selectors"},null,8,["modelValue","options"])])):me("",!0)]),y("div",{class:Ct(["flex-h",b(d)?"relation":""])},[b(u)===2||b(u)===4||b(u)===5?(E(),P("div",yie,[_ie,T(ee,{modelValue:c.currentDestService,"onUpdate:modelValue":U[3]||(U[3]=he=>c.currentDestService=he),options:b(r).destServices,size:"small",placeholder:"Select a service",onChange:I,class:"selectors"},null,8,["modelValue","options"])])):me("",!0),b(u)===4||b(u)===5?(E(),P("div",bie,[y("span",wie,D(b(t).entity==="EndpointRelation"?"$DestinationEndpoint":"$DestinationServiceInstance"),1),T(ee,{modelValue:c.currentDestPod,"onUpdate:modelValue":U[4]||(U[4]=he=>c.currentDestPod=he),options:b(r).destPods,size:"small",placeholder:"Select a data",onChange:$,class:"selectorPod",onQuery:Ee,isRemote:b(t).entity==="EndpointRelation"},null,8,["modelValue","options","isRemote"])])):me("",!0),b(u)===5?(E(),P("div",kie,[Sie,T(ee,{modelValue:c.currentDestProcess,"onUpdate:modelValue":U[5]||(U[5]=he=>c.currentDestProcess=he),options:b(r).destProcesses,size:"small",placeholder:"Select a data",onChange:O,class:"selectors"},null,8,["modelValue","options"])])):me("",!0)],2)],2),b(n).isMobile?me("",!0):Te((E(),P("div",xie,[b(t).editMode?(E(),P("div",Tie,[T(le,{content:"Controls",placement:"bottom",persistent:!1},{dropdown:q(()=>[T(ye,null,{default:q(()=>[(E(!0),P(de,null,Pe(o.value,(he,Ie)=>(E(),ke(se,{onClick:et=>Y(he),key:Ie,title:he.content},{default:q(()=>[T(K,{class:"mr-5",size:"sm",iconName:he.name},null,8,["iconName"]),y("span",null,D(he.content),1)]),_:2},1032,["onClick","title"]))),128))]),_:1})]),default:q(()=>[y("i",null,[T(K,{class:"icon-btn",size:"sm",iconName:"control"})])]),_:1}),T($e,{content:"Apply",placement:"bottom"},{default:q(()=>[y("i",{onClick:N},[T(K,{class:"icon-btn",size:"sm",iconName:"save"})])]),_:1})])):me("",!0),y("div",$ie,[T(Re,{modelValue:b(t).editMode,"onUpdate:modelValue":U[6]||(U[6]=he=>b(t).editMode=he),"active-text":"E","inactive-text":"V","inline-prompt":"",onChange:z},null,8,["modelValue"])])])),[[be,l.value]])])}}});const Iie=ce(Cie,[["__scopeId","data-v-06c519a1"]]),Die={class:"item"},Eie={class:"label"},Mie={class:"item"},Oie={class:"label"},Pie={class:"item"},Nie={class:"label"},Lie={class:"item"},Rie={class:"label"},Aie={class:"item"},Fie={class:"label"},Vie={class:"item"},zie={class:"label"},jie={class:"footer"},Yie=ae({__name:"Text",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid,n=r.graph||{},a=F(n.url||""),o=F(n.backgroundColor||"green"),l=F(n.fontColor||"white"),c=F(n.content||""),u=F(n.fontSize||12),d=F(n.textAlign||"left"),f=[{label:"Theme",value:"theme"},{label:"Green",value:"green"},{label:"Blue",value:"blue"},{label:"Red",value:"red"},{label:"Grey",value:"grey"},{label:"White",value:"white"},{label:"Black",value:"black"},{label:"Orange",value:"orange"}],p=[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}];function v(_){const{selectedGrid:S}=t,I=Q(Q({},S.graph),_);t.selectWidget(pe(Q({},S),{graph:I}))}function g(){t.setConfigPanel(!1),t.setConfigs(t.selectedGrid)}function w(){t.selectWidget(r),t.setConfigPanel(!1)}return(_,S)=>{const I=Yt,C=Mt,$=ps,O=It;return E(),P(de,null,[y("div",Die,[y("span",Eie,D(b(s)("textUrl")),1),T(I,{class:"input",modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=A=>a.value=A),size:"small",onChange:S[1]||(S[1]=A=>v({url:a.value}))},null,8,["modelValue"])]),y("div",Mie,[y("span",Oie,D(b(s)("content")),1),T(I,{class:"input",modelValue:c.value,"onUpdate:modelValue":S[2]||(S[2]=A=>c.value=A),size:"small",onChange:S[3]||(S[3]=A=>v({content:c.value}))},null,8,["modelValue"])]),y("div",Pie,[y("span",Nie,D(b(s)("textAlign")),1),T(C,{value:d.value,options:p,size:"small",placeholder:"Select a color",class:"input",onChange:S[4]||(S[4]=A=>v({textAlign:A[0].value}))},null,8,["value"])]),y("div",Lie,[y("span",Rie,D(b(s)("backgroundColors")),1),T(C,{value:o.value,options:f,size:"small",placeholder:"Select a color",class:"input",onChange:S[5]||(S[5]=A=>v({backgroundColor:A[0].value}))},null,8,["value"])]),y("div",Aie,[y("span",Fie,D(b(s)("fontSize")),1),T($,{class:"slider",modelValue:u.value,"onUpdate:modelValue":S[6]||(S[6]=A=>u.value=A),"show-input":"","input-size":"small",min:12,max:30,step:1,onChange:S[7]||(S[7]=A=>v({fontSize:u.value}))},null,8,["modelValue"])]),y("div",Vie,[y("span",zie,D(b(s)("fontColors")),1),T(C,{value:l.value,options:f,size:"small",placeholder:"Select a color",class:"input",onChange:S[8]||(S[8]=A=>v({fontColor:A[0].value}))},null,8,["value"])]),y("div",jie,[T(O,{size:"small",onClick:w},{default:q(()=>[We(D(b(s)("cancel")),1)]),_:1}),T(O,{size:"small",type:"primary",onClick:g},{default:q(()=>[We(D(b(s)("apply")),1)]),_:1})])],64)}}});const Gie=ce(Yie,[["__scopeId","data-v-7d2de3c4"]]),Uie={class:"label mr-5"},Hie={class:"label"},Wie={class:"label"},Bie={class:"title mr-5"},qie={class:"title ml-20 mr-5"},Xie={class:"label"},Kie={class:"title mr-5"},Qie={class:"title ml-20 mr-5"},Jie={class:"title ml-20 mr-5"},Zie={class:"title ml-20 mr-5"},ese=ae({__name:"Legend",setup(e){const{t:s}=ge(),t=Ce(),r=Me(()=>t.selectedGrid.graph||{}),n=ln(Q({show:!0,total:!1,min:!1,max:!1,mean:!1,asTable:!1,toTheRight:!1,width:130},r.value.legend));function a(o){const l=pe(Q({},t.selectedGrid.graph),{legend:Q(Q({},t.selectedGrid.graph.legend),o)});t.selectWidget(pe(Q({},t.selectedGrid),{graph:l}))}return(o,l)=>{const c=Pn,u=Yt;return E(),P(de,null,[y("div",null,[y("span",Uie,D(b(s)("showLegend")),1),T(c,{modelValue:n.show,"onUpdate:modelValue":l[0]||(l[0]=d=>n.show=d),"active-text":"Yes","inactive-text":"No",onChange:l[1]||(l[1]=d=>a({show:n.show}))},null,8,["modelValue"])]),y("div",null,[y("span",Hie,D(b(s)("asTable")),1),T(c,{modelValue:n.asTable,"onUpdate:modelValue":l[2]||(l[2]=d=>n.asTable=d),"active-text":"Yes","inactive-text":"No",onChange:l[3]||(l[3]=d=>a({asTable:n.asTable}))},null,8,["modelValue"])]),Te(y("div",null,[y("span",Wie,D(b(s)("legendOptions")),1),y("span",Bie,D(b(s)("toTheRight")),1),T(c,{modelValue:n.toTheRight,"onUpdate:modelValue":l[4]||(l[4]=d=>n.toTheRight=d),"active-text":"Yes","inactive-text":"No",onChange:l[5]||(l[5]=d=>a({toTheRight:n.toTheRight}))},null,8,["modelValue"]),y("span",qie,D(b(s)("width")),1),T(u,{modelValue:n.width,"onUpdate:modelValue":l[6]||(l[6]=d=>n.width=d),class:"inputs",size:"small",placeholder:"Please input the width",onChange:l[7]||(l[7]=d=>a({width:n.width}))},null,8,["modelValue"])],512),[[Ye,n.asTable]]),Te(y("div",null,[y("span",Xie,D(b(s)("legendValues")),1),y("span",Kie,D(b(s)("min")),1),T(c,{modelValue:n.min,"onUpdate:modelValue":l[8]||(l[8]=d=>n.min=d),"active-text":"Yes","inactive-text":"No",onChange:l[9]||(l[9]=d=>a({min:n.min}))},null,8,["modelValue"]),y("span",Qie,D(b(s)("max")),1),T(c,{modelValue:n.max,"onUpdate:modelValue":l[10]||(l[10]=d=>n.max=d),"active-text":"Yes","inactive-text":"No",onChange:l[11]||(l[11]=d=>a({max:n.max}))},null,8,["modelValue"]),y("span",Jie,D(b(s)("mean")),1),T(c,{modelValue:n.mean,"onUpdate:modelValue":l[12]||(l[12]=d=>n.mean=d),"active-text":"Yes","inactive-text":"No",onChange:l[13]||(l[13]=d=>a({mean:n.mean}))},null,8,["modelValue"]),y("span",Zie,D(b(s)("total")),1),T(c,{modelValue:n.total,"onUpdate:modelValue":l[14]||(l[14]=d=>n.total=d),"active-text":"Yes","inactive-text":"No",onChange:l[15]||(l[15]=d=>a({total:n.total}))},null,8,["modelValue"])],512),[[Ye,n.asTable]])],64)}}});const xp=ce(ese,[["__scopeId","data-v-58c7fafa"]]),tse={class:"label"},nse=ae({__name:"Area",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph||{},n=F(r.opacity);function a(o){const l=Q(Q({},t.selectedGrid.graph),o);t.selectWidget(pe(Q({},t.selectedGrid),{graph:l}))}return(o,l)=>{const c=ps;return E(),P(de,null,[T(xp),y("div",null,[y("span",tse,D(b(s)("areaOpacity")),1),T(c,{class:"bar-width",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),"show-input":"","input-size":"small",min:.1,max:1,step:.1,onChange:l[1]||(l[1]=u=>a({opacity:n.value}))},null,8,["modelValue","min","step"])])],64)}}});const rse=ce(nse,[["__scopeId","data-v-7eb5ebfe"]]),ise={class:"label"},sse={class:"label"},ase={class:"label"},ose={class:"label"},lse={class:"label"},cse=ae({__name:"Line",setup(e){const{t:s}=ge(),t=Ce(),r=Me(()=>t.selectedGrid.graph||{}),n=F(r.value.smooth),a=F(zh(r.value.showSymbol)?r.value.showSymbol:!0),o=F(r.value.step);function l(c){const u=Q(Q({},t.selectedGrid.graph),c);t.selectWidget(pe(Q({},t.selectedGrid),{graph:u}))}return(c,u)=>{const d=Pn;return E(),P(de,null,[T(xp),y("div",null,[y("span",ise,D(b(s)("showXAxis")),1),T(d,{modelValue:b(r).showXAxis,"onUpdate:modelValue":u[0]||(u[0]=f=>b(r).showXAxis=f),"active-text":"Yes","inactive-text":"No",onChange:u[1]||(u[1]=f=>l({showXAxis:b(r).showXAxis}))},null,8,["modelValue"])]),y("div",null,[y("span",sse,D(b(s)("showYAxis")),1),T(d,{modelValue:b(r).showYAxis,"onUpdate:modelValue":u[2]||(u[2]=f=>b(r).showYAxis=f),"active-text":"Yes","inactive-text":"No",onChange:u[3]||(u[3]=f=>l({showYAxis:b(r).showYAxis}))},null,8,["modelValue"])]),y("div",null,[y("span",ase,D(b(s)("smooth")),1),T(d,{modelValue:n.value,"onUpdate:modelValue":u[4]||(u[4]=f=>n.value=f),"active-text":"Yes","inactive-text":"No",onChange:u[5]||(u[5]=f=>l({smooth:n.value}))},null,8,["modelValue"])]),y("div",null,[y("span",ose,D(b(s)("showSymbol")),1),T(d,{modelValue:a.value,"onUpdate:modelValue":u[6]||(u[6]=f=>a.value=f),"active-text":"Yes","inactive-text":"No",onChange:u[7]||(u[7]=f=>l({showSymbol:a.value}))},null,8,["modelValue"])]),y("div",null,[y("span",lse,D(b(s)("step")),1),T(d,{modelValue:o.value,"onUpdate:modelValue":u[8]||(u[8]=f=>o.value=f),"active-text":"Yes","inactive-text":"No",onChange:u[9]||(u[9]=f=>l({step:o.value}))},null,8,["modelValue"])])],64)}}});const use=ce(cse,[["__scopeId","data-v-10f3552a"]]),dse={class:"label"},hse=ae({__name:"Bar",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph,n=F(r.showBackground||!1);function a(o){const l=Q(Q({},t.selectedGrid.graph),o);t.selectWidget(pe(Q({},t.selectedGrid),{graph:l}))}return(o,l)=>{const c=Pn;return E(),P(de,null,[T(xp),y("div",null,[y("span",dse,D(b(s)("showBackground")),1),T(c,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),"active-text":"Yes","inactive-text":"No",onChange:l[1]||(l[1]=u=>a({showBackground:n.value}))},null,8,["modelValue"])])],64)}}});const fse=ce(hse,[["__scopeId","data-v-8926535d"]]),pse={class:"label"},vse={class:"item"},mse={class:"label"},gse={class:"item"},yse={class:"label"},_se=ae({__name:"Table",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph||{},n=F(r.showTableValues),a=F(r.tableHeaderCol1),o=F(r.tableHeaderCol2);function l(c){const u=Q(Q({},t.selectedGrid.graph),c);t.selectWidget(pe(Q({},t.selectedGrid),{graph:u}))}return(c,u)=>{const d=Pn,f=Yt;return E(),P(de,null,[y("div",null,[y("span",pse,D(b(s)("showValues")),1),T(d,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=p=>n.value=p),"active-text":"Yes","inactive-text":"No",onChange:u[1]||(u[1]=p=>l({showTableValues:n.value}))},null,8,["modelValue"])]),y("div",vse,[y("span",mse,D(b(s)("tableHeaderCol1")),1),T(f,{class:"input",modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=p=>a.value=p),size:"small",placeholder:"none",onChange:u[3]||(u[3]=p=>l({tableHeaderCol1:a.value}))},null,8,["modelValue"])]),y("div",gse,[y("span",yse,D(b(s)("tableHeaderCol2")),1),T(f,{class:"input",modelValue:o.value,"onUpdate:modelValue":u[4]||(u[4]=p=>o.value=p),size:"small",placeholder:"none",onChange:u[5]||(u[5]=p=>l({tableHeaderCol2:o.value}))},null,8,["modelValue"])])],64)}}});const bse=ce(_se,[["__scopeId","data-v-382f8a49"]]),wse={class:"label"},kse={class:"item"},Sse={class:"label"},xse=ae({__name:"Card",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph||{},n=F(r.fontSize),a=F(r.showUnit);function o(l){const c=Q(Q({},t.selectedGrid.graph),l);t.selectWidget(pe(Q({},t.selectedGrid),{graph:c}))}return(l,c)=>{const u=ps,d=Pn;return E(),P(de,null,[y("div",null,[y("span",wse,D(b(s)("fontSize")),1),T(u,{class:"slider",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f),"show-input":"","input-size":"small",min:12,max:50,step:1,onChange:c[1]||(c[1]=f=>o({fontSize:n.value}))},null,8,["modelValue"])]),y("div",kse,[y("span",Sse,D(b(s)("showUnit")),1),T(d,{modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=f=>a.value=f),"active-text":"Yes","inactive-text":"No",onChange:c[3]||(c[3]=f=>o({showUnit:a.value}))},null,8,["modelValue"])])],64)}}});const Tse=ce(xse,[["__scopeId","data-v-95742501"]]),$se={class:"label"},Cse=ae({__name:"InstanceList",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph,n=F(r.fontSize);function a(o){const l=Q(Q({},t.selectedGrid.graph),o);t.selectWidget(pe(Q({},t.selectedGrid),{graph:l}))}return(o,l)=>{const c=ps;return E(),P("div",null,[y("span",$se,D(b(s)("fontSize")),1),T(c,{class:"slider",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),"show-input":"","input-size":"small",min:10,max:20,step:1,onChange:l[1]||(l[1]=u=>a({fontSize:n.value}))},null,8,["modelValue"])])}}});const Ise=ce(Cse,[["__scopeId","data-v-500099c6"]]),Dse={class:"label"},Ese=ae({__name:"EndpointList",setup(e){const s=Ce(),t=s.selectedGrid.graph,{t:r}=ge(),n=F(t.fontSize);function a(o){const l=Q(Q({},s.selectedGrid.graph),o);s.selectWidget(pe(Q({},s.selectedGrid),{graph:l}))}return(o,l)=>{const c=ps;return E(),P("div",null,[y("span",Dse,D(b(r)("fontSize")),1),T(c,{class:"slider",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u),"show-input":"","input-size":"small",min:10,max:20,step:1,onChange:l[1]||(l[1]=u=>a({fontSize:n.value}))},null,8,["modelValue"])])}}});const Mse=ce(Ese,[["__scopeId","data-v-005aeb32"]]),Ose={class:"item"},Pse={class:"label"},Nse={class:"item"},Lse={class:"label"},Rse=ae({__name:"ServiceList",setup(e){const{t:s}=ge(),t=Ce(),r=Me(()=>t.selectedGrid.graph||{}),n=F(r.value.fontSize);function a(o){const{selectedGrid:l}=t,c=Q(Q({},l.graph),o);t.selectWidget(pe(Q({},l),{graph:c}))}return(o,l)=>{const c=Pn,u=ps;return E(),P(de,null,[y("div",Ose,[y("span",Pse,D(b(s)("showGroup")),1),T(c,{modelValue:b(r).showGroup,"onUpdate:modelValue":l[0]||(l[0]=d=>b(r).showGroup=d),"active-text":"Yes","inactive-text":"No",onChange:l[1]||(l[1]=d=>a({showGroup:b(r).showGroup}))},null,8,["modelValue"])]),y("div",Nse,[y("span",Lse,D(b(s)("fontSize")),1),T(u,{class:"slider",modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=d=>n.value=d),"show-input":"","input-size":"small",min:10,max:20,step:1,onChange:l[3]||(l[3]=d=>a({fontSize:n.value}))},null,8,["modelValue"])])],64)}}});const Ase=ce(Rse,[["__scopeId","data-v-0a9cd783"]]),Fse={class:"item"},Vse={class:"label"},zse=ae({__name:"TopList",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph||{},n=F(r.color||"purple"),a=[{label:"Purple",value:"purple"},{label:"Green",value:"green"},{label:"Blue",value:"blue"},{label:"Red",value:"red"},{label:"Orange",value:"orange"}];function o(l){const c=Q(Q({},t.selectedGrid.graph),l);t.selectWidget(pe(Q({},t.selectedGrid),{graph:c}))}return(l,c)=>{const u=Mt;return E(),P("div",Fse,[y("span",Vse,D(b(s)("backgroundColors")),1),T(u,{value:n.value,options:a,size:"small",placeholder:"Select a color",class:"input",onChange:c[0]||(c[0]=d=>o({color:d[0].value}))},null,8,["value"])])}}});const jse=ce(zse,[["__scopeId","data-v-ec8d1ecd"]]),Yse={AreaConfig:rse,LineConfig:use,BarConfig:fse,InstanceListConfig:Ise,EndpointListConfig:Mse,ServiceListConfig:Ase,TableConfig:bse,CardConfig:Tse,TopListConfig:jse},Gse={class:"item"},Use={class:"label"},Hse={class:"item"},Wse={class:"label"},Bse={class:"item"},qse={class:"label"},Xse=ae({__name:"WidgetOptions",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.widget||{},n=F(r.title||""),a=F(r.tips||""),o=F(r.name||"");function l(u){const d=Object.keys(u)[0];if(!d)return;const{selectedGrid:f}=t,p=pe(Q({},t.selectedGrid.widget),{[d]:decodeURIComponent(u[d])});t.selectWidget(pe(Q({},f),{widget:p}))}function c(u){const d=Object.keys(u)[0],f=decodeURIComponent(u[d]);if(!/^[A-Za-z0-9-_\u4e00-\u9fa5]{1,300}$/.test(f)){ie.error(s("nameTip"));return}const{widgets:v}=lr(t.currentDashboard);if(v.find(w=>w.widget&&w.widget.name===f)){ie.error(s("duplicateName"));return}l(u)}return(u,d)=>{const f=Yt;return E(),P(de,null,[y("div",Gse,[y("span",Use,D(b(s)("name")),1),T(f,{class:"input",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=p=>o.value=p),size:"small",placeholder:"Please input name",onChange:d[1]||(d[1]=p=>c({name:encodeURIComponent(o.value)}))},null,8,["modelValue"])]),y("div",Hse,[y("span",Wse,D(b(s)("title")),1),T(f,{class:"input",modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=p=>n.value=p),size:"small",placeholder:"Please input title",onChange:d[3]||(d[3]=p=>l({title:encodeURIComponent(n.value)}))},null,8,["modelValue"])]),y("div",Bse,[y("span",qse,D(b(s)("tooltipsContent")),1),T(f,{class:"input",modelValue:a.value,"onUpdate:modelValue":d[4]||(d[4]=p=>a.value=p),size:"small",placeholder:"Please input tips",onChange:d[5]||(d[5]=p=>l({tips:encodeURIComponent(a.value)}))},null,8,["modelValue"])])],64)}}});const Kse=ce(Xse,[["__scopeId","data-v-777e062f"]]),Qse={class:"config-panel"},Jse={class:"item mb-10"},Zse={class:"label"},eae={key:0,class:"item mb-10"},tae={class:"label"},nae={key:1,class:"item mb-10"},rae={class:"label"},iae={key:2,class:"item mb-10"},sae={class:"label"},aae={class:"item mb-10"},oae={class:"label"},lae={class:"item mb-10"},cae={class:"label"},uae={class:"item"},dae={class:"label"},hae=ae({__name:"Standard",props:{currentMetricConfig:{type:Object,default:()=>({unit:""})},index:{type:Number,default:0}},emits:["update"],setup(e,{emit:s}){const t=e,{t:r}=ge(),n=Ce(),a=F(n.selectedGrid.metricMode===gt.Expression),o=F(pe(Q({},t.currentMetricConfig),{topN:t.currentMetricConfig.topN||10})),l=Me(()=>(a.value?n.selectedGrid.typesOfMQE:n.selectedGrid.metricTypes)||[]),c=Me(()=>l.value[t.index]),u=Me(()=>{const g=n.selectedGrid.graph||{};return Ki.includes(g.type)||[vi.ReadLabeledMetricsValues,vi.ReadMetricsValues].includes(c.value)}),d=Me(()=>{const g=n.selectedGrid.graph||{};return Ki.includes(g.type)}),f=Me(()=>[vi.SortMetrics,vi.ReadSampledRecords,vi.ReadRecords].includes(l.value[t.index]));function p(g,w){const _=Object.keys(w)[0];!_||v(g,{[_]:decodeURIComponent(w[_])})}function v(g,w){const _=n.selectedGrid.metricConfig||[];_[g]=Q(Q({},_[g]),w),n.selectWidget(pe(Q({},n.selectedGrid),{metricConfig:_})),s("update")}return He(()=>t.currentMetricConfig,()=>{a.value=n.selectedGrid.metricMode===gt.Expression,o.value=pe(Q({},t.currentMetricConfig),{topN:Number(t.currentMetricConfig.topN)||10})}),(g,w)=>{const _=Yt,S=n_;return E(),P("div",Qse,[y("div",Jse,[y("span",Zse,D(b(r)("unit")),1),T(_,{class:"input",modelValue:o.value.unit,"onUpdate:modelValue":w[0]||(w[0]=I=>o.value.unit=I),size:"small",placeholder:"Please input unit",onChange:w[1]||(w[1]=I=>p(e.index,{unit:encodeURIComponent(o.value.unit||"")}))},null,8,["modelValue"])]),b(u)||a.value?(E(),P("div",eae,[y("span",tae,D(b(r)("labels")),1),T(_,{class:"input",modelValue:o.value.label,"onUpdate:modelValue":w[2]||(w[2]=I=>o.value.label=I),size:"small",placeholder:"Please input a label",onChange:w[3]||(w[3]=I=>p(e.index,{label:encodeURIComponent(o.value.label||"")}))},null,8,["modelValue"])])):me("",!0),b(d)&&a.value?(E(),P("div",nae,[y("span",rae,D(b(r)("detailLabel")),1),T(_,{class:"input",modelValue:o.value.detailLabel,"onUpdate:modelValue":w[4]||(w[4]=I=>o.value.detailLabel=I),size:"small",placeholder:"Please input a label",onChange:w[5]||(w[5]=I=>p(e.index,{detailLabel:encodeURIComponent(o.value.detailLabel||"")}))},null,8,["modelValue"])])):me("",!0),[b(vi).ReadLabeledMetricsValues].includes(b(c))&&!a.value?(E(),P("div",iae,[y("span",sae,D(b(r)("labelsIndex")),1),T(_,{class:"input",modelValue:o.value.labelsIndex,"onUpdate:modelValue":w[6]||(w[6]=I=>o.value.labelsIndex=I),size:"small",placeholder:"auto",onChange:w[7]||(w[7]=I=>p(e.index,{labelsIndex:encodeURIComponent(o.value.labelsIndex||"")}))},null,8,["modelValue"])])):me("",!0),Te(y("div",aae,[y("span",oae,D(b(r)("aggregation")),1),T(S,{value:o.value.calculation,options:b(t_),onChange:w[8]||(w[8]=I=>v(e.index,{calculation:I})),class:"selectors",clearable:!0},null,8,["value","options"])],512),[[Ye,!a.value]]),Te(y("div",lae,[y("span",cae,D(b(r)("sortOrder")),1),T(S,{value:o.value.sortOrder||"DES",options:b(V$),class:"selectors",onChange:w[9]||(w[9]=I=>v(e.index,{sortOrder:I}))},null,8,["value","options"])],512),[[Ye,b(f)]]),Te(y("div",uae,[y("span",dae,D(b(r)("maxItemNum")),1),T(_,{class:"selectors",modelValue:o.value.topN,"onUpdate:modelValue":w[10]||(w[10]=I=>o.value.topN=I),size:"small",placeholder:"none",type:"number",min:1,max:100,onChange:w[11]||(w[11]=I=>v(e.index,{topN:Number(o.value.topN)||10}))},null,8,["modelValue"])],512),[[Ye,b(f)]])])}}});const fae=ce(hae,[["__scopeId","data-v-404d5527"]]),pae={key:0,class:"ds-name"},vae={class:"flex-h"},mae={class:"ml-5 link"},gae={target:"_blank",href:"https://skywalking.apache.org/docs/main/next/en/api/metrics-query-expression/"},yae={key:1},_ae={class:"title"},bae={key:0},wae=["onBlur"],kae=["onBlur"],Sae={key:1},xae=["onClick"],Tae={key:2,class:"ml-10 red sm"},$ae={key:3,class:"ml-10 red sm"},Cae={key:4,class:"ml-10 red sm"},Iae={class:"chart-types"},Dae=["onClick"],Eae=ae({__name:"Index",props:{errors:{type:Array},subErrors:{type:Array}},emits:["update","loading"],setup(e,{emit:s}){const{t}=ge(),r=Ce(),n=F(r.selectedGrid.metricMode===gt.Expression),a=Me(()=>(n.value?r.selectedGrid.expressions:r.selectedGrid.metrics)||[]),o=Me(()=>(n.value?r.selectedGrid.subExpressions:[])||[]),l=Me(()=>(n.value?r.selectedGrid.subTypesOfMQE:[])||[]),c=Me(()=>r.selectedGrid.graph||{}),u=Me(()=>(n.value?r.selectedGrid.typesOfMQE:r.selectedGrid.metricTypes)||[]),d=ln({metrics:a.value.length?a.value:[""],metricTypes:u.value.length?u.value:[""],metricTypeList:[],isList:!1,metricList:[],dashboardName:c.value.dashboardName,dashboardList:[{label:"",value:""}],tips:[],subTips:[],subMetrics:o.value.length?o.value:[""],subMetricTypes:l.value.length?l.value:[""]}),f=F({unit:"",label:"",labelsIndex:"",calculation:"",sortOrder:"DES"});d.isList=Ki.includes(c.value.type);const p=F(d.isList?5:20),v=F([]);_(),w();const g=Me(()=>{let G=[];return r.entity===X[0].value?G=Aa.filter(H=>![Aa[7].value,Aa[8].value].includes(H.value)):r.entity===X[1].value?G=Aa.filter(H=>!z$.includes(H.value)):G=Aa.filter(H=>!Ki.includes(H.value)),G});function w(G){return J(this,null,function*(){const H=G||r.selectedGrid.graph||{};let re=d.metricList;if(!G){const oe=yield r.fetchMetricList();if(oe.errors){ie.error(oe.errors);return}re=oe.data.metrics}if(d.metricList=(re||[]).filter(oe=>{if(d.isList){if(oe.type===Bi.REGULAR_VALUE||oe.type===Bi.LABELED_VALUE)return oe}else if(H.type==="Table"){if(oe.type===Bi.LABELED_VALUE||oe.type===Bi.REGULAR_VALUE)return oe}else return oe}),n.value){d.metrics&&d.metrics[0]?$():s("update",{});return}const fe=d.metricList.filter(oe=>d.metrics.includes(oe.value));if(fe.length){const oe=fe.map(Oe=>Oe.value);d.metrics=d.metrics.filter(Oe=>oe.includes(Oe))}else d.metrics=[""],d.metricTypes=[""];r.selectWidget(pe(Q({},r.selectedGrid),{metrics:d.metrics,metricTypes:d.metricTypes,graph:H})),d.metricTypeList=[];for(const oe of fe)if(d.metrics.includes(oe.value)){const Oe=Y(oe.type);d.metricTypeList.push(Oe)}d.metrics&&d.metrics[0]?$():s("update",{})})}function _(G){const H=G||r.selectedGrid.graph&&r.selectedGrid.graph.type,fe=JSON.parse(sessionStorage.getItem("dashboards")||"[]").reduce((oe,Oe)=>(Oe.layer===r.layerId&&(Oe.entity===X[0].value&&H==="ServiceList"||Oe.entity===X[2].value&&H==="EndpointList"||Oe.entity===X[3].value&&H==="InstanceList")&&oe.push(pe(Q({},Oe),{value:Oe.name,label:Oe.name})),oe),[]);d.dashboardList=fe.length?fe:[{label:"",value:""}]}function S(G){const H=j$[G.value]||{};d.isList=Ki.includes(H.type),d.isList&&(r.selectWidget(pe(Q({},r.selectedGrid),{metrics:[""],metricTypes:[""],expressions:[""],typesOfMQE:[""]})),d.metrics=[""],d.metricTypes=[""],p.value=5),n.value?r.selectWidget(pe(Q({},r.selectedGrid),{graph:H})):w(H),_(H.type),d.dashboardName="",p.value=10}function I(G,H){if(!H.length){d.metricTypeList=[],d.metricTypes=[],r.selectWidget(pe(Q({},r.selectedGrid),{metricTypes:d.metricTypes,metrics:d.metrics}));return}d.metrics[G]=H[0].value;const re=H[0].type;d.metricTypeList[G]=Y(re),d.metricTypes[G]=Ra[re][0].value,r.selectWidget(pe(Q({},r.selectedGrid),{metricTypes:d.metricTypes,metrics:d.metrics})),!d.isList&&$()}function C(G,H){const re=d.metricList.filter(oe=>d.metrics[G]===oe.value)[0]||{},fe=Y(re.type);d.isList?(d.metricTypes[G]=H[0].value,d.metricTypeList[G]=fe):(d.metricTypes=d.metricTypes.map(oe=>(oe=H[0].value,oe)),d.metricTypeList=d.metricTypeList.map(oe=>(oe=fe,oe))),r.selectWidget(pe(Q({},r.selectedGrid),{metricTypes:d.metricTypes})),!d.isList&&$()}function $(){return J(this,null,function*(){if(d.isList)return;if(n.value){O();return}const{metricConfig:G,metricTypes:H,metrics:re}=r.selectedGrid;if(!(re&&re[0]&&H&&H[0]))return s("update",{});const fe=Qh(pe(Q({},d),{metricConfig:G}));if(!fe){s("update",{});return}s("loading",!0);const oe=yield r.fetchMetricValue(fe);if(s("loading",!1),oe.errors){ie.error(oe.errors);return}const Oe=Jh(oe,pe(Q({},d),{metricConfig:G}));s("update",Oe)})}function O(){return J(this,null,function*(){const{expressions:G,metricConfig:H}=r.selectedGrid;if(!(G&&G[0]))return s("update",{});const re=(yield tf(pe(Q({},d),{metricConfig:H})))||{};d.tips=re.tips||[],d.metricTypes=re.typesOfMQE||[],r.selectWidget(pe(Q({},r.selectedGrid),{typesOfMQE:d.metricTypes})),s("update",re.source||{})})}function A(G){G[0]?d.dashboardName=G[0].value:d.dashboardName="";const H=pe(Q({},r.selectedGrid.graph),{dashboardName:d.dashboardName});r.selectWidget(pe(Q({},r.selectedGrid),{graph:H}))}function z(){if(d.metrics.push(""),d.tips.push(""),n.value&&d.isList&&(d.subMetrics.push(""),d.subTips.push("")),!d.isList){d.metricTypes.push(d.metricTypes[0]),n.value||d.metricTypeList.push(d.metricTypeList[0]);return}d.metricTypes.push(""),n.value&&d.isList&&d.subMetricTypes.push("")}function N(G){if(d.metrics.length===1){d.metrics=[""],d.metricTypes=[""],d.tips=[""];let oe={};n.value?(oe={typesOfMQE:d.metricTypes,expressions:d.metrics},d.isList&&(d.subMetrics=[""],d.subMetricTypes=[""],d.subTips=[""],oe=pe(Q({},oe),{subTypesOfMQE:d.subMetricTypes,subExpressions:d.subMetrics}))):oe={metricTypes:d.metricTypes,metrics:d.metrics},r.selectWidget(pe(Q(Q({},r.selectedGrid),oe),{metricConfig:[]}));return}d.metrics.splice(G,1),d.metricTypes.splice(G,1),d.tips.splice(G,1);const H=r.selectedGrid.metricConfig||[],re=H[G]?H.splice(G,1):H;let fe={};n.value?d.isList&&(d.subMetrics.splice(G,1),d.subMetricTypes.splice(G,1),d.subTips.splice(G,1),fe=pe(Q({},fe),{typesOfMQE:d.metricTypes,expressions:d.metrics,subTypesOfMQE:d.subMetricTypes,subExpressions:d.subMetrics})):fe={metricTypes:d.metricTypes,metrics:d.metrics},r.selectWidget(pe(Q(Q({},r.selectedGrid),fe),{metricConfig:re}))}function Y(G){return G!==Bi.REGULAR_VALUE?Ra[G]:d.isList||c.value.type==="Table"?[Ra.REGULAR_VALUE[0],Ra.REGULAR_VALUE[1]]:Ra[G]}function R(G){const H={unit:"",label:"",calculation:"",labelsIndex:"",sortOrder:"DES"};if(!r.selectedGrid.metricConfig||!r.selectedGrid.metricConfig[G]){f.value=H;return}f.value=Q(Q({},H),r.selectedGrid.metricConfig[G])}function L(){d.metrics=a.value.length?a.value:[""],d.subMetrics=o.value.length?o.value:[""],d.metricTypes=u.value.length?u.value:[""],d.subMetricTypes=l.value.length?l.value:[""];const G=r.selectedGrid.metricConfig;r.selectWidget(pe(Q({},r.selectedGrid),{metricMode:n.value?gt.Expression:gt.General,metricConfig:v.value})),v.value=G,$()}function j(G,H){return J(this,null,function*(){const re=(G.target.textContent||"").replace(/\s+/g,"");d.metrics[H]=re,r.selectWidget(pe(Q({},r.selectedGrid),{expressions:d.metrics})),re&&(yield $())})}function B(G,H){return J(this,null,function*(){const re=(G.target.textContent||"").replace(/\s+/g,"");d.subMetrics[H]=re,r.selectWidget(pe(Q({},r.selectedGrid),{subExpressions:d.subMetrics,subTypesOfMQE:d.subMetricTypes})),re&&(yield $())})}return(G,H)=>{const re=Mt,fe=Pn,oe=jt;return E(),P(de,null,[d.isList?(E(),P("div",pae,[y("div",null,D(b(t)("dashboards")),1),T(re,{value:d.dashboardName||"",options:d.dashboardList,size:"small",placeholder:"Please select a dashboard name",onChange:A,class:"selectors",clearable:!0},null,8,["value","options"])])):me("",!0),y("div",null,D(b(t)("metrics")),1),y("div",vae,[T(fe,{modelValue:n.value,"onUpdate:modelValue":H[0]||(H[0]=Oe=>n.value=Oe),class:"mb-5","active-text":"Expressions","inactive-text":"General",size:"small",onChange:L},null,8,["modelValue"]),y("div",mae,[y("a",gae,[T(Ue,{iconName:"info_outline",size:"middle"})])])]),n.value&&d.isList?(E(),P("div",yae,[y("span",_ae,D(b(t)("summary")),1),y("span",null,D(b(t)("detail")),1)])):me("",!0),(E(!0),P(de,null,Pe(d.metrics,(Oe,xe)=>(E(),P("div",{key:xe,class:"mb-10"},[n.value?(E(),P("span",bae,[y("div",{class:"expression-param",contenteditable:"true",onBlur:Ee=>j(Ee,xe)},D(Oe),41,wae),d.isList?(E(),P("div",{key:0,class:"expression-param",contenteditable:"true",onBlur:Ee=>B(Ee,xe)},D(d.subMetrics[xe]),41,kae)):me("",!0)])):(E(),P("span",Sae,[T(re,{value:Oe,options:d.metricList,size:"small",placeholder:"Select a metric",onChange:Ee=>I(xe,Ee),class:"selectors"},null,8,["value","options","onChange"]),T(re,{value:d.metricTypes[xe],options:d.metricTypeList[xe],size:"small",disabled:b(c).type&&!d.isList&&xe!==0,onChange:Ee=>C(xe,Ee),class:"selectors"},null,8,["value","options","disabled","onChange"])])),T(oe,{placement:"top",width:400,trigger:"click"},{reference:q(()=>[y("span",{onClick:Ee=>R(xe)},[T(Ue,{class:"cp mr-5",iconName:"mode_edit",size:"middle"})],8,xae)]),default:q(()=>[T(fae,{onUpdate:$,currentMetricConfig:f.value,index:xe},null,8,["currentMetricConfig","index"])]),_:2},1024),Te(y("span",null,[xe===d.metrics.length-1&&d.metrics.length<p.value?(E(),ke(Ue,{key:0,class:"cp mr-5",iconName:"add_circle_outlinecontrol_point",size:"middle",onClick:z})):me("",!0),T(Ue,{class:"cp",iconName:"remove_circle_outline",size:"middle",onClick:Ee=>N(xe)},null,8,["onClick"])],512),[[Ye,d.isList||[b(vi).ReadMetricsValues,b(bi).TIME_SERIES_VALUES].includes(d.metricTypes[0])]]),(d.tips||[])[xe]&&n.value?(E(),P("div",Tae,D(d.tips[xe]),1)):me("",!0),(e.errors||[])[xe]&&n.value?(E(),P("div",$ae,D((e.errors||[])[xe]),1)):me("",!0),(e.subErrors||[])[xe]&&n.value?(E(),P("div",Cae,D((e.subErrors||[])[xe]),1)):me("",!0)]))),128)),y("div",null,D(b(t)("visualization")),1),y("div",Iae,[(E(!0),P(de,null,Pe(b(g),(Oe,xe)=>(E(),P("span",{key:xe,onClick:Ee=>S(Oe),class:Ct({active:Oe.value===b(c).type})},D(Oe.label),11,Dae))),128))])],64)}}});const Mae=ce(Eae,[["__scopeId","data-v-94ba67e0"]]),Oae={class:"item"},Pae={class:"label"},Nae=ae({__name:"AssociateOptions",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.associate||[],n=F(r.map(l=>l.widgetId)),a=Me(()=>{const l=lr(t.currentDashboard).widgets,c=[];for(const u of l)["Bar","Line","Area"].includes(u.graph&&u.graph.type||"")&&u.id&&t.selectedGrid.id!==u.id&&c.push({value:u.id,label:u.widget&&u.widget.name||u.id});return c});function o(l){const c=lr(t.currentDashboard).widgets,u=l.map(p=>({widgetId:p.value})),d=l.map(p=>p.value),f=pe(Q({},t.selectedGrid),{associate:u});t.selectWidget(Q({},f));for(const p of n.value)if(!d.includes(p)){const v=c.find(w=>w.id===p),g=pe(Q({},v),{associate:[]});t.setWidget(g)}for(let p=0;p<u.length;p++){const v=JSON.parse(JSON.stringify(u));v[p]={widgetId:t.selectedGrid.id};const g=c.find(_=>_.id===u[p].widgetId),w=pe(Q({},g),{associate:v});t.setWidget(w)}n.value=d}return(l,c)=>{const u=Mt;return E(),P("div",Oae,[y("span",Pae,D(b(s)("widget")),1),T(u,{multiple:!0,value:n.value,options:b(a),size:"small",placeholder:"Select a widget",class:"selectors",onChange:o,filterable:!1},null,8,["value","options"])])}}});const Lae=ce(Nae,[["__scopeId","data-v-1ee9bd29"]]),Rae=e=>(Nn("data-v-4f488467"),e=e(),Ln(),e),Aae={key:0,class:"item"},Fae=Rae(()=>y("span",{class:"label"},"RefId",-1)),Vae={key:1,class:"item"},zae={class:"label"},jae={key:2},Yae={class:"item"},Gae={class:"label"},Uae={class:"item"},Hae={class:"label"},Wae={class:"item"},Bae={class:"label"},qae=ae({__name:"RelatedTraceOptions",setup(e){const s=[{label:"None",value:"BY_START_TIME"},{label:"Duration",value:"BY_DURATION"}],t=[{label:"None",value:"ALL"},{label:"Success",value:"SUCCESS"},{label:"Error",value:"ERROR"}],{t:r}=ge(),n=Ce(),{graph:a,relatedTrace:o}=n.selectedGrid,l=o||{},c=F(l.status||t[0].value),u=F(l.queryOrder||s[0].value),d=F(l.latency||!1),f=F(l.enableRelate||!1),p=F(a&&a.type||""),v=F(l.refIdType||"traceId");function g(w){const _=Q(Q({},n.selectedGrid.relatedTrace),w);n.selectWidget(pe(Q({},n.selectedGrid),{relatedTrace:_}))}return(w,_)=>{const S=Mt,I=Pn;return E(),P(de,null,[p.value==="TopList"?(E(),P("div",Aae,[Fae,T(S,{size:"small",value:v.value,options:b(Yd),placeholder:"Select a refId",onChange:_[0]||(_[0]=C=>g({refIdType:C[0].value})),class:"selector"},null,8,["value","options"])])):(E(),P("div",Vae,[y("span",zae,D(b(r)("enableRelatedTrace")),1),T(I,{modelValue:f.value,"onUpdate:modelValue":_[1]||(_[1]=C=>f.value=C),"active-text":"Yes","inactive-text":"No",onChange:_[2]||(_[2]=C=>g({enableRelate:f.value}))},null,8,["modelValue"])])),f.value?(E(),P("div",jae,[y("div",Yae,[y("span",Gae,D(b(r)("status")),1),T(S,{size:"small",value:c.value,options:t,placeholder:"Select a status",onChange:_[3]||(_[3]=C=>g({status:C[0].value})),class:"selector"},null,8,["value"])]),y("div",Uae,[y("span",Hae,D(b(r)("setOrder")),1),T(S,{size:"small",value:u.value,options:s,placeholder:"Select a option",class:"selector",onChange:_[4]||(_[4]=C=>g({queryOrder:C[0].value}))},null,8,["value"])]),y("div",Wae,[y("span",Bae,D(b(r)("setLatencyDuration")),1),T(I,{modelValue:d.value,"onUpdate:modelValue":_[5]||(_[5]=C=>d.value=C),"active-text":"Yes","inactive-text":"No",onChange:_[6]||(_[6]=C=>g({latency:d.value}))},null,8,["modelValue"])])])):me("",!0)],64)}}});const Xae=ce(qae,[["__scopeId","data-v-4f488467"]]),Kae=pe(Q({},Yse),{WidgetOptions:Kse,MetricOptions:Mae,AssociateOptions:Lae,RelatedTraceOptions:Xae}),Qae=ae({name:"WidgetEdit",components:Q(Q({},af),Kae),setup(){const e=document.documentElement.clientHeight-540,{t:s}=ge(),t=Ce(),r=Be(),n=F(!1),a=F([]),o=F([]),l=ln({activeNames:"1",source:{},index:t.selectedGrid.i,visType:[]}),c=t.selectedGrid,u=Me(()=>t.selectedGrid.widget||{}),d=Me(()=>t.selectedGrid.graph||{}),f=Me(()=>encodeURIComponent(u.value.title||"")),p=Me(()=>encodeURIComponent(u.value.tips||"")),v=Me(()=>["Bar","Line","Area","TopList"].includes(t.selectedGrid.graph&&t.selectedGrid.graph.type));function g(C){l.source=C}function w(C){a.value=C.tips,o.value=C.subTips}function _(C){n.value=C}function S(){t.setConfigPanel(!1);const{metricMode:C}=t.selectedGrid;let $={};C===gt.Expression?$={metrics:[],metricTypes:[]}:$={expressions:[],typesOfMQE:[]},t.selectWidget(Q(Q({},t.selectedGrid),$)),t.setConfigs(t.selectedGrid)}function I(){t.selectWidget(c),t.setConfigPanel(!1)}return{states:l,loading:n,t:s,appStoreWithOut:r,configHeight:e,dashboardStore:t,applyConfig:S,cancelConfig:I,getSource:g,getErrors:w,setLoading:_,widget:u,graph:d,title:f,tips:p,hasAssociate:v,errors:a,subErrors:o}}});const Jae={class:"widget-config flex-v"},Zae={class:"graph"},eoe={class:"header"},toe={class:"tips"},noe={class:"render-chart"},roe={class:"footer"};function ioe(e,s,t,r,n,a){const o=Ue,l=Ei,c=bn("MetricOptions"),u=Xh,d=bn("WidgetOptions"),f=bn("AssociateOptions"),p=bn("RelatedTraceOptions"),v=Kh,g=It,w=Gn;return E(),P("div",Jae,[Te((E(),P("div",Zae,[y("div",eoe,[y("span",null,D(decodeURIComponent(e.title)),1),Te(y("div",toe,[T(l,{content:decodeURIComponent(e.tips)||""},{default:q(()=>[y("span",null,[T(o,{iconName:"info_outline",size:"sm"})])]),_:1},8,["content"])],512),[[Ye,e.widget.tips]])]),y("div",noe,[(E(),ke($i(e.graph.type),{intervalTime:e.appStoreWithOut.intervalTime,data:e.states.source,config:pe(Q({},e.graph),{legend:(e.dashboardStore.selectedGrid.graph||{}).legend,i:e.dashboardStore.selectedGrid.i,metrics:e.dashboardStore.selectedGrid.metrics,metricTypes:e.dashboardStore.selectedGrid.metricTypes,metricConfig:e.dashboardStore.selectedGrid.metricConfig,relatedTrace:e.dashboardStore.selectedGrid.relatedTrace,metricMode:e.dashboardStore.selectedGrid.metricMode,expressions:e.dashboardStore.selectedGrid.expressions||[],typesOfMQE:e.dashboardStore.selectedGrid.typesOfMQE||[],subExpressions:e.dashboardStore.selectedGrid.subExpressions||[],subTypesOfMQE:e.dashboardStore.selectedGrid.subTypesOfMQE||[]}),needQuery:!0,onExpressionTips:e.getErrors},null,40,["intervalTime","data","config","onExpressionTips"])),Te(y("div",{class:"no-data"},D(e.t("noData")),513),[[Ye,!e.graph.type]])])])),[[w,e.loading]]),y("div",{class:"collapse",style:ht({height:e.configHeight+"px"})},[T(v,{modelValue:e.states.activeNames,"onUpdate:modelValue":s[0]||(s[0]=_=>e.states.activeNames=_),style:{"--el-collapse-header-font-size":"15px"}},{default:q(()=>[T(u,{title:e.t("selectVisualization"),name:"1"},{default:q(()=>[T(c,{onUpdate:e.getSource,onLoading:e.setLoading,errors:e.errors,subErrors:e.subErrors},null,8,["onUpdate","onLoading","errors","subErrors"])]),_:1},8,["title"]),T(u,{title:e.t("graphStyles"),name:"2"},{default:q(()=>[(E(),ke($i(`${e.graph.type}Config`)))]),_:1},8,["title"]),T(u,{title:e.t("widgetOptions"),name:"3"},{default:q(()=>[T(d)]),_:1},8,["title"]),e.hasAssociate?(E(),ke(u,{key:0,title:e.t("associateOptions"),name:"4"},{default:q(()=>[T(f)]),_:1},8,["title"])):me("",!0),e.hasAssociate?(E(),ke(u,{key:1,title:e.t("relatedTraceOptions"),name:"5"},{default:q(()=>[T(p)]),_:1},8,["title"])):me("",!0)]),_:1},8,["modelValue"])],4),y("div",roe,[T(g,{size:"small",onClick:e.cancelConfig},{default:q(()=>[We(D(e.t("cancel")),1)]),_:1},8,["onClick"]),T(g,{size:"small",type:"primary",onClick:e.applyConfig},{default:q(()=>[We(D(e.t("apply")),1)]),_:1},8,["onClick"])])])}const soe=ce(Qae,[["render",ioe],["__scopeId","data-v-ea1adc30"]]),aoe={class:"item"},ooe={class:"label"},loe={class:"item"},coe={class:"label"},uoe={class:"footer"},doe=ae({__name:"Topology",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid.graph||{},n=F(r.showDepth),a=F(r.depth||2);function o(){t.setConfigs(t.selectedGrid),t.setConfigPanel(!1)}function l(u){const{selectedGrid:d}=t,f=Q(Q({},d.graph),u);t.selectWidget(pe(Q({},d),{graph:f}))}function c(u){const d=u[0].value;l({depth:d})}return(u,d)=>{const f=Pn,p=Mt,v=It;return E(),P(de,null,[y("div",aoe,[y("span",ooe,D(b(s)("showDepth")),1),T(f,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=g=>n.value=g),"active-text":"Yes","inactive-text":"No",onChange:d[1]||(d[1]=g=>l({showDepth:n.value}))},null,8,["modelValue"])]),Te(y("div",loe,[y("span",coe,D(b(s)("defaultDepth")),1),T(p,{class:"input",size:"small",value:a.value,options:b(Vh),onChange:d[2]||(d[2]=g=>c(g))},null,8,["value","options"])],512),[[Ye,n.value]]),y("div",uoe,[T(v,{size:"small"},{default:q(()=>[We(D(b(s)("cancel")),1)]),_:1}),T(v,{size:"small",type:"primary",onClick:o},{default:q(()=>[We(D(b(s)("apply")),1)]),_:1})])],64)}}});const hoe=ce(doe,[["__scopeId","data-v-3967f0ba"]]),foe={class:"label"},poe={class:"footer"},voe=ae({__name:"Event",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid,n=F(t.selectedGrid.eventAssociate||!1);function a(){t.selectedGrid=pe(Q({},t.selectedGrid),{eventAssociate:n}),t.selectWidget(t.selectedGrid)}function o(){t.setConfigPanel(!1),t.setConfigs(t.selectedGrid)}function l(){t.selectWidget(r),t.setConfigPanel(!1)}return(c,u)=>{const d=Pn,f=It;return E(),P(de,null,[y("div",null,[y("span",foe,D(b(s)("enableAssociate")),1),T(d,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=p=>n.value=p),"active-text":"Yes","inactive-text":"No",onChange:a},null,8,["modelValue"])]),y("div",poe,[T(f,{size:"small",onClick:l},{default:q(()=>[We(D(b(s)("cancel")),1)]),_:1}),T(f,{size:"small",type:"primary",onClick:o},{default:q(()=>[We(D(b(s)("apply")),1)]),_:1})])],64)}}});const moe=ce(voe,[["__scopeId","data-v-9f9c0960"]]),goe={class:"item"},yoe={class:"label"},_oe={class:"item"},boe={class:"label"},woe={class:"item"},koe={class:"label"},Soe={class:"item"},xoe={class:"label"},Toe={class:"item"},$oe={class:"label"},Coe={class:"footer"},Ioe=ae({__name:"TimeRange",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid,n=r.graph||{},a=F(n.backgroundColor||"green"),o=F(n.fontColor||"white"),l=F(n.fontSize||12),c=F(n.textAlign||"left"),u=F(n.text||""),d=[{label:"Green",value:"green"},{label:"Blue",value:"blue"},{label:"Red",value:"red"},{label:"Grey",value:"grey"},{label:"White",value:"white"},{label:"Black",value:"black"},{label:"Orange",value:"orange"}],f=[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}];function p(w){const{selectedGrid:_}=t,S=Q(Q({},_.graph),w);t.selectWidget(pe(Q({},_),{graph:S}))}function v(){t.setConfigPanel(!1),t.setConfigs(t.selectedGrid)}function g(){t.selectWidget(r),t.setConfigPanel(!1)}return(w,_)=>{const S=Yt,I=Mt,C=ps,$=It;return E(),P(de,null,[y("div",goe,[y("span",yoe,D(b(s)("text")),1),T(S,{class:"input",modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=O=>u.value=O),size:"small",onChange:_[1]||(_[1]=O=>p({text:u.value}))},null,8,["modelValue"])]),y("div",_oe,[y("span",boe,D(b(s)("textAlign")),1),T(I,{value:c.value,options:f,size:"small",placeholder:"Select a color",class:"input",onChange:_[2]||(_[2]=O=>p({textAlign:O[0].value}))},null,8,["value"])]),y("div",woe,[y("span",koe,D(b(s)("backgroundColors")),1),T(I,{value:a.value,options:d,size:"small",placeholder:"Select a color",class:"input",onChange:_[3]||(_[3]=O=>p({backgroundColor:O[0].value}))},null,8,["value"])]),y("div",Soe,[y("span",xoe,D(b(s)("fontSize")),1),T(C,{class:"slider",modelValue:l.value,"onUpdate:modelValue":_[4]||(_[4]=O=>l.value=O),"show-input":"","input-size":"small",min:12,max:30,step:1,onChange:_[5]||(_[5]=O=>p({fontSize:l.value}))},null,8,["modelValue"])]),y("div",Toe,[y("span",$oe,D(b(s)("fontColors")),1),T(I,{value:o.value,options:d,size:"small",placeholder:"Select a color",class:"input",onChange:_[6]||(_[6]=O=>p({fontColor:O[0].value}))},null,8,["value"])]),y("div",Coe,[T($,{size:"small",onClick:g},{default:q(()=>[We(D(b(s)("cancel")),1)]),_:1}),T($,{size:"small",type:"primary",onClick:v},{default:q(()=>[We(D(b(s)("apply")),1)]),_:1})])],64)}}});const Doe=ce(Ioe,[["__scopeId","data-v-9343e9ec"]]),Eoe={class:"item"},Moe={class:"label"},Ooe={class:"footer"},Poe=ae({__name:"ThirdPartyApp",setup(e){const{t:s}=ge(),t=Ce(),r=t.selectedGrid,n=r.widget||{},a=F(n.url||"");function o(u){const d=Object.keys(u)[0];if(!d)return;const{selectedGrid:f}=t,p=pe(Q({},t.selectedGrid.widget),{[d]:decodeURIComponent(u[d])});t.selectWidget(pe(Q({},f),{widget:p}))}function l(){t.setConfigPanel(!1),t.setConfigs(t.selectedGrid)}function c(){t.selectWidget(r),t.setConfigPanel(!1)}return(u,d)=>{const f=Yt,p=It;return E(),P(de,null,[y("div",Eoe,[y("span",Moe,D(b(s)("iframeSrc")),1),T(f,{class:"input",modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=v=>a.value=v),size:"small",onChange:d[1]||(d[1]=v=>o({url:encodeURIComponent(a.value)}))},null,8,["modelValue"])]),y("div",Ooe,[T(p,{size:"small",onClick:c},{default:q(()=>[We(D(b(s)("cancel")),1)]),_:1}),T(p,{size:"small",type:"primary",onClick:l},{default:q(()=>[We(D(b(s)("apply")),1)]),_:1})])],64)}}});const Noe=ce(Poe,[["__scopeId","data-v-94366faa"]]),Loe={class:"item"},Roe={class:"item"},Aoe={class:"footer"},Foe=ae({__name:"ContinuousProfiling",setup(e){const{t:s}=ge(),t=Ce(),r=F(t.selectedGrid.instanceDashboardName),n=F(t.selectedGrid.processDashboardName),a=JSON.parse(sessionStorage.getItem("dashboards")||"[]"),o=[],l=[];for(const d of a)if(d.layer===t.layerId){const f=pe(Q({},d),{label:d.name,value:d.name});d.entity===X[8].value&&l.push(f),d.entity===X[3].value&&o.push(f)}function c(){t.setConfigs(t.selectedGrid),t.setConfigPanel(!1)}function u(d){t.selectWidget(Q(Q({},t.selectedGrid),d))}return(d,f)=>{const p=Mt,v=It;return E(),P(de,null,[y("div",Loe,[y("div",null,D(b(s)("instanceDashboards")),1),T(p,{value:r.value||"",options:o,size:"small",placeholder:"Please select a dashboard name",onChange:f[0]||(f[0]=g=>u({instanceDashboardName:g[0].value})),class:"selectors",clearable:!0},null,8,["value"])]),y("div",Roe,[y("div",null,D(b(s)("processDashboards")),1),T(p,{value:n.value||"",options:l,size:"small",placeholder:"Please select a dashboard name",onChange:f[1]||(f[1]=g=>u({processDashboardName:g[0].value})),class:"selectors",clearable:!0},null,8,["value"])]),y("div",Aoe,[T(v,{size:"small"},{default:q(()=>[We(D(b(s)("cancel")),1)]),_:1}),T(v,{size:"small",type:"primary",onClick:c},{default:q(()=>[We(D(b(s)("apply")),1)]),_:1})])],64)}}});const Voe=ce(Foe,[["__scopeId","data-v-d621eb36"]]),zoe={Text:Gie,Widget:soe,Topology:hoe,Event:moe,TimeRange:Doe,ThirdPartyApp:Noe,ContinuousProfiling:Voe},joe={class:"link-content"},Yoe={key:0},Goe={key:1},Uoe={class:"mt-5"},Hoe={class:"ml-5"},Woe={class:"ml-10"},Boe={class:"mt-10"},qoe=ae({__name:"WidgetLink",setup(e){const{t:s}=ge(),t=Be(),r=Ce(),n=it(),a=F(!1),o=F(""),l=F([]),c=window.location.host,u=F(!0),d=F(6),f=F(_u[0].value),p=F(JSON.parse(JSON.stringify([t.durationRow.start,t.durationRow.end])));function v(S){l.value=S}function g(){if(!r.selectedGrid)return;const S=n.currentService?n.currentService.id:null,I=n.currentPod?n.currentPod.id:null,C=n.currentProcess?n.currentProcess.id:null,$=n.currentDestService?n.currentDestService.id:null,O=n.currentDestPod?n.currentDestPod.id:null,A=n.currentDestProcess?n.currentDestProcess.id:null,z=JSON.stringify({start:l.value[0]?new Date(l.value[0]).getTime():t.durationRow.start.getTime(),end:l.value[1]?new Date(l.value[1]).getTime():t.durationRow.end.getTime(),step:t.durationRow.step,utc:t.utc}),{widget:N,graph:Y,metrics:R,metricTypes:L,metricConfig:j,metricMode:B,expressions:G,typesOfMQE:H,subExpressions:re}=r.selectedGrid,fe=(j||[]).map(Ee=>{const Z={};return Ee.label&&(Z.label=encodeURIComponent(Ee.label)),Ee.unit&&(Z.unit=encodeURIComponent(Ee.unit)),Q(Q({},Ee),Z)}),oe={type:r.selectedGrid.type,graph:Y,metricMode:B,metricConfig:fe,height:r.selectedGrid.h*20+60};if(B===gt.Expression?(oe.expressions=G,oe.typesOfMQE=H,re&&re.length&&(oe.subExpressions=re)):(oe.metrics=R,oe.metricTypes=L),N&&(oe.widget={title:encodeURIComponent(N.title||""),tips:encodeURIComponent(N.tips||"")}),a.value)oe.auto=0,oe.autoPeriod=0;else{const Ee=_u.filter(Z=>Z.value===f.value)[0]||{};oe.auto=Number(Ee.value)*60*1e3,oe.autoPeriod=d.value,Ee.step===Ba.HOUR_TIME&&(oe.auto=Number(Ee.value)*60*60*1e3),Ee.step===Ba.DAY_TIME&&(oe.auto=Number(Ee.value)*60*60*60*1e3)}const Oe=JSON.stringify(oe),xe=`/page/${r.layerId}/${r.entity}/${S}/${I}/${C}/${$}/${O}/${A}/${encodeURIComponent(Oe)}`;o.value=a.value?`${xe}/${encodeURIComponent(z)}`:xe}function w(){const S=Zt.resolve({path:o.value});window.open(S.href,"_blank")}function _(){jh(c+o.value)}return(S,I)=>{const C=Pn,$=dc,O=Mt,A=Yt,z=It,N=Ue;return E(),P("div",joe,[y("div",null,[y("label",null,D(b(s)("setDuration")),1),T(C,{modelValue:a.value,"onUpdate:modelValue":I[0]||(I[0]=Y=>a.value=Y)},null,8,["modelValue"])]),a.value?(E(),P("div",Yoe,[y("label",null,D(b(s)("duration")),1),T($,{value:p.value,position:"right",format:"YYYY-MM-DD HH:mm",onInput:v},null,8,["value"])])):(E(),P("div",Goe,[y("label",null,D(b(s)("auto")),1),T(C,{class:"mr-5",modelValue:u.value,"onUpdate:modelValue":I[1]||(I[1]=Y=>u.value=Y),style:{height:"25px"}},null,8,["modelValue"]),T(O,{modelValue:f.value,"onUpdate:modelValue":I[2]||(I[2]=Y=>f.value=Y),options:b(_u),size:"small"},null,8,["modelValue","options"]),y("div",Uoe,[y("label",null,D(b(s)("period")),1),T(A,{class:"auto-period",size:"small",type:"number",modelValue:d.value,"onUpdate:modelValue":I[3]||(I[3]=Y=>d.value=Y),min:"1"},null,8,["modelValue"]),y("span",Hoe,D(b(s)("second")),1),y("i",Woe,D(b(s)("timeReload")),1)])])),T(z,{size:"small",type:"primary",class:"mt-20",onClick:g},{default:q(()=>[We(D(b(s)("generateLink")),1)]),_:1}),Te(y("div",Boe,[y("span",{onClick:w,class:"link"},D(b(c)+o.value),1),y("span",null,[T(N,{class:"cp ml-10",iconName:"copy",onClick:_})])],512),[[Ye,o.value]])])}}});const Xoe=ce(qoe,[["__scopeId","data-v-24aae6e6"]]),Koe=ae({name:"Dashboard",components:pe(Q({},zoe),{GridLayout:cie,Tool:Iie,WidgetLink:Xoe}),setup(){const e=Ce(),{t:s}=ge(),t=hs().params,r=F(`${t.layerId}_${t.entity}_${t.name}`);n();function n(){return J(this,null,function*(){if(yield e.setDashboards(),!t.entity){if(!e.currentDashboard)return;const{layer:u,entity:d,name:f}=e.currentDashboard;r.value=`${u}_${d}_${f}`}const l=JSON.parse(sessionStorage.getItem(r.value)||"{}"),c=l.configuration||{};e.setLayout(a(c.children||[])),t.entity&&e.setCurrentDashboard({layer:t.layerId,entity:t.entity,name:t.name,id:l.id,isRoot:c.isRoot})})}function a(l){for(const c of l)if(c.id=c.i,c.type==="Tab"&&c.children&&c.children.length)for(const[u,d]of c.children.entries())d.children&&d.children.length&&d.children.map(f=>(f.id=`${c.i}-${u}-${f.i}`,f));return l}function o(l){l.stopPropagation(),l.target.className==="ds-main"&&(e.activeGridItem(""),e.selectWidget(null))}return ha(()=>{e.setCurrentDashboard({})}),{t:s,handleClick:o,dashboardStore:e}}});function Qoe(e,s,t,r,n,a){const o=bn("Tool"),l=bn("grid-layout"),c=Mi,u=bn("WidgetLink");return E(),P(de,null,[e.dashboardStore.currentDashboard?(E(),ke(o,{key:0})):me("",!0),e.dashboardStore.currentDashboard?(E(),P("div",{key:1,class:"ds-main",onClick:s[4]||(s[4]=(...d)=>e.handleClick&&e.handleClick(...d)),style:ht({height:e.dashboardStore.editMode?"calc(100% - 45px)":"100%"})},[T(l),T(c,{modelValue:e.dashboardStore.showConfig,"onUpdate:modelValue":s[0]||(s[0]=d=>e.dashboardStore.showConfig=d),title:e.t("editGraph"),fullscreen:"","destroy-on-close":!0,onClosed:s[1]||(s[1]=d=>e.dashboardStore.setConfigPanel(!1))},{default:q(()=>[(E(),ke($i(e.dashboardStore.selectedGrid.type)))]),_:1},8,["modelValue","title"]),T(c,{modelValue:e.dashboardStore.showLinkConfig,"onUpdate:modelValue":s[2]||(s[2]=d=>e.dashboardStore.showLinkConfig=d),width:"800px","destroy-on-close":!0,onClosed:s[3]||(s[3]=d=>e.dashboardStore.setWidgetLink(!1))},{default:q(()=>[T(u)]),_:1},8,["modelValue"])],4)):me("",!0)],64)}const Ut=ce(Koe,[["render",Qoe],["__scopeId","data-v-54e7766c"]]),Joe=ae({name:"WidgetPage",components:Q({},af),setup(){const{t:e}=ge(),s=Be(),t=it(),r=hs(),n=Me(()=>JSON.parse(decodeURIComponent(r.params.config))),a=Me(()=>n.value.graph||{}),o=F({}),l=F(!1),c=Ce(),u=Me(()=>n.value.widget&&n.value.widget.title||""),d=Me(()=>n.value.widget&&n.value.widget.tips||""),f=F([]);p();function p(){return J(this,null,function*(){c.setLayer(r.params.layer),c.setEntity(r.params.entity);const{auto:_,autoPeriod:S}=n.value;if(_)yield v(),s.setReloadTimer(setInterval(v,S*1e3));else{const I=JSON.parse(r.params.duration);s.setDuration(I)}yield g(),yield w()})}function v(){return J(this,null,function*(){const _=[new Date(new Date().getTime()-n.value.auto),new Date];s.setDuration(Fl(_))})}function g(){return J(this,null,function*(){const{serviceId:_,podId:S,processId:I,destServiceId:C,destPodId:$,destProcessId:O,entity:A}=r.params;_&&(yield t.getService(_)),[X[4].value,X[5].value,X[6].value,X[7].value].includes(A)&&(yield t.getService(C,!0)),[X[3].value,X[5].value,X[7].value].includes(A)&&(yield t.getInstance(S)),[X[2].value,X[6].value].includes(A)&&(yield t.getEndpoint(S)),X[6].value===A&&(yield t.getEndpoint($,!0)),[X[5].value,X[7].value].includes(A)&&(yield t.getInstance($,!0)),X[7].value===A&&(t.getProcess(I),t.getProcess(O,!0))})}function w(){return J(this,null,function*(){if(n.value.metricMode===gt.Expression){l.value=!0;const $=yield tf({metrics:n.value.expressions||[],metricConfig:n.value.metricConfig||[],subExpressions:n.value.subExpressions||[]});l.value=!1,o.value=$.source||{},f.value=$.typesOfMQE;return}const S=yield Qh(Q({},n.value));if(!S){o.value={};return}l.value=!0;const I=yield c.fetchMetricValue(S);if(l.value=!1,!I)return;const C={metrics:n.value.metrics||[],metricTypes:n.value.metricTypes||[],metricConfig:n.value.metricConfig||[]};o.value=yield Jh(I,C)})}return He(()=>s.durationTime,()=>{w()}),{t:e,graph:a,source:o,appStoreWithOut:s,config:n,title:u,tips:d,typesOfMQE:f}}});const Zoe={class:"content"},ele={class:"header"},tle={class:"tips"};function nle(e,s,t,r,n,a){const o=Ue,l=Ei;return E(),P("div",Zoe,[y("div",ele,[y("span",null,D(decodeURIComponent(e.title)),1),Te(y("div",tle,[T(l,{content:decodeURIComponent(e.tips)||""},{default:q(()=>[y("span",null,[T(o,{iconName:"info_outline",size:"sm"})])]),_:1},8,["content"])],512),[[Ye,e.tips]])]),y("div",{class:"widget-chart",style:ht({height:e.config.height-60+"px"})},[(E(),ke($i(e.graph.type),{intervalTime:e.appStoreWithOut.intervalTime,data:e.source,config:pe(Q({i:0},e.graph),{metrics:e.config.metrics,metricTypes:e.config.metricTypes,metricConfig:e.config.metricConfig,metricMode:e.config.metricMode,expressions:e.config.expressions||[],typesOfMQE:e.typesOfMQE||[],subExpressions:e.config.subExpressions||[],subTypesOfMQE:e.config.subTypesOfMQE||[]}),needQuery:!0},null,8,["intervalTime","data","config"])),Te(y("div",{class:"no-data"},D(e.t("noData")),513),[[Ye,!e.config.type]])],4)])}const Zy=ce(Joe,[["render",nle],["__scopeId","data-v-067319b9"]]),rle=[{path:"",component:bo,name:"Dashboard",meta:{i18nKey:"dashboards",icon:"dashboard_customize",hasGroup:!0,activate:!0,title:"Dashboards"},children:[{path:"/dashboard/list",component:WC,name:"List",meta:{i18nKey:"dashboardList",activate:!0,title:"Dashboard List"}},{path:"/dashboard/new",component:rI,name:"New",meta:{i18nKey:"dashboardNew",activate:!0,title:"New Dashboard"}},{path:"",redirect:"/dashboard/:layerId/:entity/:name",name:"Create",component:Ut,meta:{notShow:!0},children:[{path:"/dashboard/:layerId/:entity/:name",component:Ut,name:"CreateChild"},{path:"/dashboard/:layerId/:entity/:name/tab/:activeTabIndex",component:Ut,name:"CreateActiveTabIndex"}]},{path:"",component:Ut,name:"View",redirect:"/dashboard/:layerId/:entity/:serviceId/:name",meta:{notShow:!0},children:[{path:"/dashboard/:layerId/:entity/:serviceId/:name",component:Ut,name:"ViewChild"},{path:"/dashboard/:layerId/:entity/:serviceId/:name/tab/:activeTabIndex",component:Ut,name:"ViewActiveTabIndex"}]},{path:"",redirect:"/dashboard/related/:layerId/:entity/:serviceId/:destServiceId/:name",component:Ut,name:"ViewServiceRelation",meta:{notShow:!0},children:[{path:"/dashboard/related/:layerId/:entity/:serviceId/:destServiceId/:name",component:Ut,name:"ViewServiceRelation"},{path:"/dashboard/related/:layerId/:entity/:serviceId/:destServiceId/:name/tab/:activeTabIndex",component:Ut,name:"ViewServiceRelationActiveTabIndex"}]},{path:"",redirect:"/dashboard/:layerId/:entity/:serviceId/:podId/:name",component:Ut,name:"ViewPod",meta:{notShow:!0},children:[{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:name",component:Ut,name:"ViewPod"},{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:name/tab/:activeTabIndex",component:Ut,name:"ViewPodActiveTabIndex"}]},{path:"",redirect:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:name",component:Ut,name:"ViewProcess",meta:{notShow:!0},children:[{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:name",component:Ut,name:"ViewProcess"},{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:name/tab/:activeTabIndex",component:Ut,name:"ViewProcessActiveTabIndex"}]},{path:"",redirect:"/dashboard/:layerId/:entity/:serviceId/:podId/:destServiceId/:destPodId/:name",component:Ut,name:"PodRelation",meta:{notShow:!0},children:[{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:destServiceId/:destPodId/:name",component:Ut,name:"ViewPodRelation"},{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:destServiceId/:destPodId/:name/tab/:activeTabIndex",component:Ut,name:"ViewPodRelationActiveTabIndex"}]},{path:"",redirect:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:destServiceId/:destPodId/:destProcessId/:name",component:Ut,name:"ProcessRelation",meta:{notShow:!0},children:[{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:destServiceId/:destPodId/:destProcessId/:name",component:Ut,name:"ViewProcessRelation"},{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:destServiceId/:destPodId/:destProcessId/:name/tab/:activeTabIndex",component:Ut,name:"ViewProcessRelationActiveTabIndex"},{path:"/dashboard/:layerId/:entity/:serviceId/:podId/:processId/:destServiceId/:destPodId/:destProcessId/:name/duration/:duration",component:Ut,name:"ViewProcessRelationDuration"}]},{path:"",name:"Widget",component:Zy,meta:{notShow:!0},children:[{path:"/page/:layer/:entity/:serviceId/:podId/:processId/:destServiceId/:destPodId/:destProcessId/:config/:duration?",component:Zy,name:"ViewWidget"}]}]}],ile={class:"menus flex-v"},sle={class:"category-body flex-h"},ale={class:"mr-20 mt-10 flex-h category"},ole={class:"mt-10"},lle={class:"mt-10 cards"},cle={class:"mt-10"},ule=ae({__name:"Marketplace",setup(e){const{t:s,te:t}=ge(),r=Be(),n=F(r.allMenus[0]||{});function a(o){n.value=o}return(o,l)=>{const c=bn("router-link"),u=It,d=cC,f=uC;return E(),P("div",ile,[y("div",sle,[y("div",ale,[(E(!0),P(de,null,Pe(b(r).allMenus,(p,v)=>(E(),ke(f,{class:Ct(["item",n.value.name===p.name?"active":""]),key:v,onClick:g=>a(p)},{default:q(()=>[T(c,{to:p.hasGroup?"":p.path||""},{default:q(()=>[y("div",{class:Ct(["title",p.activate?p.hasGroup?"":"actived-font":"disabled"])},D(b(t)(p.i18nKey)?b(s)(p.i18nKey):p.title),3)]),_:2},1032,["to"]),y("div",ole,D(b(t)(p.descKey)?b(s)(p.descKey):""),1),Te(T(d,{href:p.documentLink,target:"_blank",class:"link"},{default:q(()=>[T(u,{class:"mt-10",size:"small",type:"primary"},{default:q(()=>[We(D(b(s)("document")),1)]),_:1})]),_:2},1032,["href"]),[[Ye,p.documentLink]])]),_:2},1032,["onClick","class"]))),128))]),y("div",lle,[(E(!0),P(de,null,Pe(n.value.subItems||[],(p,v)=>(E(),ke(f,{shadow:"hover",key:v,class:"card"},{default:q(()=>[T(c,{to:p.path||""},{default:q(()=>[y("div",{class:Ct(["title",p.activate?"actived-font":"disabled"])},D(b(t)(p.i18nKey)?b(s)(p.i18nKey):p.title),3)]),_:2},1032,["to"]),y("div",cle,D(b(t)(p.descKey)?b(s)(p.descKey):""),1),Te(T(d,{href:p.documentLink,target:"_blank",class:"link"},{default:q(()=>[T(u,{class:"mt-10",size:"small",type:"primary"},{default:q(()=>[We(D(b(s)("document")),1)]),_:1})]),_:2},1032,["href"]),[[Ye,p.documentLink]])]),_:2},1024))),128))])])])}}});const dle=ce(ule,[["__scopeId","data-v-a45cb503"]]),hle=[{path:"",name:"Marketplace",meta:{i18nKey:"marketplace",icon:"marketplace",hasGroup:!1,activate:!0,title:"Marketplace"},component:bo,children:[{path:"/marketplace",name:"MenusManagement",component:dle}]}],fle=[{label:"All",value:""},{label:"Service",value:"Service"},{label:"ServiceInstance",value:"ServiceInstance"},{label:"Endpoint",value:"Endpoint"},{label:"ServiceRelation",value:"ServiceRelation"},{label:"ServiceInstanceRelation",value:"ServiceInstanceRelation"},{label:"EndpointRelation",value:"EndpointRelation"}],e_=[{text:"eventID",class:"uuid"},{text:"eventName",class:"name"},{text:"eventsType",class:"type"},{text:"startTime",class:"startTime"},{text:"endTime",class:"endTime"}],ple=[{label:"scope",value:"scope"},{label:"startTime",value:"startTime"},{label:"tags",value:"tags"},{label:"message",value:"message"},{label:"events",value:"eventDetail"}],vle=[{text:"eventID",class:"uuid"},{text:"eventName",class:"name"},{text:"eventsType",class:"type"},{text:"startTime",class:"startTime"},{text:"endTime",class:"endTime"},{text:"eventsMessage",class:"message"},{text:"eventSource",class:"source"}],mle=ni({id:"alarm",state:()=>({loading:!1,alarms:[],total:0}),actions:{getAlarms(e){return J(this,null,function*(){const s=yield mt.query("queryAlarms").params(e);return s.data.errors||s.data.data.getAlarm.items&&(this.alarms=s.data.data.getAlarm.items,this.total=s.data.data.getAlarm.total),s.data})}}});function Ek(){return mle(ri)}const gle={class:"alarm-tool flex-v"},yle={class:"flex-h"},_le={class:"mr-10"},ble={class:"grey"},wle={class:"mr-10 ml-10"},kle={class:"grey"},Sle={class:"pagination"},xle=ae({__name:"Header",setup(e){const s=Be(),t=Ek(),{t:r}=ge(),n=20,a=F(""),o=F(""),l=F(1),c=Me(()=>t.alarms.length===n?n*l.value+1:n*l.value);u({pageNum:1});function u(p){return J(this,null,function*(){const v={duration:s.durationTime,paging:{pageNum:p.pageNum,pageSize:n},tags:p.tagsMap};v.scope=a.value||void 0,v.keyword=o.value||void 0;const g=yield t.getAlarms(v);g.errors&&ie.error(g.errors)})}function d(p){a.value=p[0].value,u({pageNum:1})}function f(p){l.value=p,u({pageNum:p})}return(p,v)=>{const g=Mt,w=Yt,_=Di;return E(),P("nav",gle,[y("div",yle,[y("div",_le,[y("span",ble,D(b(r)("entityType"))+": ",1),T(g,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=S=>a.value=S),options:b(fle),placeholder:"Select a layer",onChange:d,class:"alarm-tool-input",size:"small"},null,8,["modelValue","options"])]),y("div",wle,[y("span",kle,D(b(r)("searchKeyword"))+": ",1),T(w,{size:"small",modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=S=>o.value=S),class:"alarm-tool-input",onChange:v[2]||(v[2]=S=>u({pageNum:1}))},null,8,["modelValue"])]),y("div",Sle,[T(_,{modelValue:l.value,"onUpdate:modelValue":v[3]||(v[3]=S=>l.value=S),"page-size":n,layout:"prev, pager, next",total:b(c),onCurrentChange:f,"pager-count":5,small:"",style:ht(b(s).theme===b(xt).Light?"--el-pagination-bg-color: #f0f2f5; --el-pagination-button-disabled-bg-color: #f0f2f5;":"")},null,8,["modelValue","total","style"])])]),T(Yh,{type:"ALARM",onUpdate:v[4]||(v[4]=S=>u({pageNum:1,tagsMap:S.tagsMap}))})])}}});const Tle=ce(xle,[["__scopeId","data-v-bc24be36"]]),$le={class:"timeline-table clear"},Cle={class:"g-sm-3 grey sm hide-xs time-line tr"},Ile=["onClick"],Dle={class:"message mb-5 b"},Ele={class:"grey sm show-xs"},Mle={key:0,class:"tips"},Ole={class:"g-sm-2 grey"},Ple={key:0},Nle={key:1},Lle={key:2,class:"event-detail"},Rle=["onClick"],Ale={key:0},Fle={key:1},Vle={key:3},zle={class:"event-detail"},jle={class:"keys"},Yle={key:0},Gle={key:1},Ule={key:2,class:"source"},Hle={key:3},Wle=ae({__name:"Content",setup(e){const{t:s}=ge(),t=Ek(),r=F(!1),n=F(!1),a=F({}),o=F([]),l=F([]),c=F({});function u(f){r.value=!0,a.value=f,l.value=f.events,o.value=a.value.tags.map(p=>`${p.key} = ${p.value}`)}function d(f){c.value=f,n.value=!0}return(f,p)=>{const v=Mi;return E(),P(de,null,[y("div",$le,[(E(!0),P(de,null,Pe(b(t).alarms,(g,w)=>(E(),P("div",{key:w,class:"clear timeline-item"},[y("div",Cle,D(b(on)(parseInt(g.startTime))),1),y("div",{class:"timeline-table-i g-sm-9",onClick:_=>u(g)},[y("div",Dle,D(g.message),1),y("div",{class:Ct(["timeline-table-i-scope mr-10 l sm",{blue:g.scope==="Service",green:g.scope==="Endpoint",yellow:g.scope==="ServiceInstance"}])},D(b(s)(g.scope.toLowerCase())),3),y("div",Ele,D(b(on)(parseInt(g.startTime))),1)],8,Ile)]))),128)),b(t).alarms.length?me("",!0):(E(),P("div",Mle,D(b(s)("noData")),1))]),T(v,{modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=g=>r.value=g),title:b(s)("alarmDetail"),fullscreen:"","destroy-on-close":!0,onClosed:p[1]||(p[1]=g=>r.value=!1)},{default:q(()=>[(E(!0),P(de,null,Pe(b(ple),(g,w)=>(E(),P("div",{class:"mb-10 clear alarm-detail",key:w},[y("span",Ole,D(b(s)(g.value))+":",1),g.label==="startTime"?(E(),P("span",Ple,D(b(on)(a.value[g.label])),1)):g.label==="tags"?(E(),P("span",Nle,[(E(!0),P(de,null,Pe(o.value,(_,S)=>(E(),P("div",{key:S},D(_),1))),128))])):g.label==="events"?(E(),P("span",Lle,[y("div",null,[y("ul",null,[y("li",null,[(E(!0),P(de,null,Pe(b(e_),(_,S)=>(E(),P("span",{class:Ct(_.class),key:_.class+S},D(b(s)(_.text)),3))),128))]),(E(!0),P(de,null,Pe(l.value,_=>(E(),P("li",{key:_.uuid,onClick:S=>d(_)},[(E(!0),P(de,null,Pe(b(e_),(S,I)=>(E(),P("span",{class:Ct(S.class),key:_.uuid+I},[S.class==="startTime"||S.class==="endTime"?(E(),P("span",Ale,D(b(on)(_[S.class])),1)):(E(),P("span",Fle,D(_[S.class]),1))],2))),128))],8,Rle))),128))])])])):(E(),P("span",Vle,D(a.value[g.label]),1))]))),128))]),_:1},8,["modelValue","title"]),T(v,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=g=>n.value=g),title:b(s)("eventDetail"),fullscreen:"","destroy-on-close":!0,onClosed:p[3]||(p[3]=g=>n.value=!1)},{default:q(()=>[y("div",zle,[(E(!0),P(de,null,Pe(b(vle),(g,w)=>(E(),P("div",{class:"mb-10",key:w},[y("span",jle,D(b(s)(g.text)),1),g.class==="parameters"?(E(),P("span",Yle,[(E(!0),P(de,null,Pe(c.value[g.class],(_,S)=>(E(),P("span",{key:S},D(_.key)+"="+D(_.value)+"; ",1))),128))])):g.class==="startTime"||g.class==="endTime"?(E(),P("span",Gle,D(b(on)(c.value[g.class])),1)):g.class==="source"?(E(),P("span",Ule,[y("span",null,D(b(s)("service"))+": "+D(c.value[g.class].service),1),Te(y("div",null,D(b(s)("endpoint"))+": "+D(c.value[g.class].endpoint),513),[[Ye,c.value[g.class].endpoint]]),Te(y("div",null,D(b(s)("instance"))+": "+D(c.value[g.class].serviceInstance),513),[[Ye,c.value[g.class].serviceInstance]])])):(E(),P("span",Hle,D(c.value[g.class]),1))]))),128))])]),_:1},8,["modelValue","title"])],64)}}});const Ble=ce(Wle,[["__scopeId","data-v-b6292991"]]),qle={class:"alarm flex-v"},Xle=ae({__name:"Alarm",setup(e){return(s,t)=>(E(),P("div",qle,[T(Tle),T(Ble)]))}});const Kle=ce(Xle,[["__scopeId","data-v-93072134"]]),Qle=[{path:"",name:"Alarm",meta:{i18nKey:"alarm",icon:"spam",hasGroup:!1,activate:!0,title:"Alerting"},component:bo,children:[{path:"/alerting",name:"Alarm",component:Kle}]}],Jle={key:1,class:"no-root"},Zle=ae({__name:"Layer",setup(e){const s=hs(),{t}=ge(),r=Ce(),n=F("GENERAL");a();function a(){return J(this,null,function*(){n.value=String(s.meta.layer),r.setLayer(n.value),r.setMode(!1),yield r.setDashboards();const o=r.dashboards.find(l=>l.layer===r.layerId&&[X[0].value,X[1].value].includes(l.entity)&&l.isRoot);if(!o){r.setCurrentDashboard(null),r.setEntity(X[1].value);return}r.setEntity(o.entity),r.setCurrentDashboard(o)})}return(o,l)=>b(r).currentDashboard?(E(),ke(Ut,{key:0})):(E(),P("div",Jle,D(b(t)("noRoot"))+" "+D(b(r).layerId),1))}});const jd=ce(Zle,[["__scopeId","data-v-aaf0e42c"]]);function ece(){return Be().allMenus.map(t=>{const r={path:"",name:t.name,component:bo,meta:{icon:t.icon||"cloud_queue",title:t.title,hasGroup:t.hasGroup,activate:t.activate,descKey:t.descKey,i18nKey:t.i18nKey},children:t.subItems&&t.subItems.length?[]:void 0};for(const n of t.subItems||[]){const a={name:n.name,path:n.path,meta:{title:n.title,layer:n.layer,icon:n.icon||"cloud_queue",activate:n.activate,descKey:n.descKey,i18nKey:n.i18nKey},component:jd};r.children.push(a);const o={name:`${n.name}ActiveTabIndex`,path:`/${n.path}/tab/:activeTabIndex`,component:jd,meta:{notShow:!0,layer:n.layer}};r.children.push(o)}return t.hasGroup||(r.children=[{name:t.name,path:t.path,meta:{title:t.title,layer:t.layer,icon:t.icon,activate:t.activate,descKey:t.descKey,i18nKey:t.i18nKey},component:jd}]),r})}const Fh=ece(),Mk=e=>(Nn("data-v-f649b489"),e=e(),Ln(),e),tce={class:"settings"},nce={class:"flex-h item"},rce={class:"label"},ice={class:"flex-h item"},sce={class:"label"},ace=Mk(()=>y("span",null,"UTC",-1)),oce={class:"ml-5 mr-5"},lce=Mk(()=>y("span",{class:"ml-5 mr-5"},":",-1)),cce={class:"utc-min"},uce={class:"flex-h item"},dce={class:"label"},hce={class:"auto-time ml-5"},fce={class:"auto-select"},pce={class:"ml-10"},vce=ae({__name:"Settings",setup(e){const{t:s,locale:t}=ge(),r=Be(),n=F(t.value||"en"),a=F(6),o=F(r.autoRefresh||!1),l=F(r.utcHour),c=F(r.utcMin),u=()=>{const w=r.duration.end.getTime()-r.duration.start.getTime(),_=[cr(r.utc,new Date(new Date().getTime()-w)),cr(r.utc,new Date)];r.setDuration(Fl(_))},d=()=>{a.value<1||(r.setAutoRefresh(o.value),o.value?(u(),r.setReloadTimer(setInterval(u,a.value*1e3))):r.reloadTimer&&clearInterval(r.reloadTimer))},f=()=>{a.value<1||(r.reloadTimer&&clearInterval(r.reloadTimer),o.value&&(u(),r.setReloadTimer(setInterval(u,a.value*1e3))))},p=()=>{t.value=n.value,window.localStorage.setItem("language",n.value)},v=()=>{l.value<-12&&(l.value=-12),l.value>14&&(l.value=14),isNaN(l.value)&&(l.value=0),r.setUTC(l.value,c.value)},g=()=>{c.value<0&&(c.value=0),c.value>59&&(c.value=59),isNaN(c.value)&&(c.value=0),r.setUTC(l.value,c.value)};return(w,_)=>{const S=Pn;return E(),P("div",tce,[y("div",nce,[y("span",rce,D(b(s)("language")),1),T(Mt,{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=I=>n.value=I),options:b(Y$),placeholder:"Select a language",onChange:p,size:"small",style:{"font-size":"14px"}},null,8,["modelValue","options"])]),y("div",ice,[y("span",sce,D(b(s)("serverZone")),1),y("div",null,[ace,y("span",oce,D(l.value>=0?"+":""),1),Te(y("input",{type:"number","onUpdate:modelValue":_[1]||(_[1]=I=>l.value=I),min:"-12",max:"14",class:"utc-input",onChange:v},null,544),[[Dl,l.value]]),lce,y("span",cce,D(c.value>9||c.value===0?null:0),1),Te(y("input",{type:"number","onUpdate:modelValue":_[2]||(_[2]=I=>c.value=I),min:"0",max:"59",class:"utc-input",onChange:g},null,544),[[Dl,c.value]])])]),y("div",uce,[y("span",dce,D(b(s)("auto")),1),T(S,{modelValue:o.value,"onUpdate:modelValue":_[3]||(_[3]=I=>o.value=I),onChange:d,style:{height:"25px"}},null,8,["modelValue"]),y("div",hce,[y("span",fce,[Te(y("input",{type:"number","onUpdate:modelValue":_[4]||(_[4]=I=>a.value=I),onChange:f,min:"1"},null,544),[[Dl,a.value]])]),We(" "+D(b(s)("second"))+" ",1),y("i",pce,D(b(s)("timeReload")),1)])])])}}});const mce=ce(vce,[["__scopeId","data-v-f649b489"]]),gce=[{path:"",name:"Settings",meta:{i18nKey:"settings",icon:"settings",hasGroup:!1,activate:!0,title:"Settings"},component:bo,children:[{path:"/settings",name:"Settings",component:mce}]}],yce=[...hle,...Fh,...Qle,...rle,...gce],Zt=G$({history:U$("/"),routes:yce});window.axiosCancel=[];Zt.beforeEach((e,s,t)=>{if(window.axiosCancel.length!==0){for(const r of window.axiosCancel)setTimeout(r(),0);window.axiosCancel=[]}if(e.path==="/"){const r=Fh[0]&&Fh[0].children[0].path||"";t({path:r})}else t()});export{Zt as default};
